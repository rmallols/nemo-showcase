!function(window,document,undefined){"use strict";function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var paramPrefix,i,SKIP_INDEXES=2,templateArgs=arguments,code=templateArgs[0],message="["+(module?module+":":"")+code+"] ",template=templateArgs[1];for(message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1),shiftedIndex=index+SKIP_INDEXES;return shiftedIndex<templateArgs.length?toDebugString(templateArgs[shiftedIndex]):match}),message+="\nhttp://errors.angularjs.org/1.4.3/"+(module?module+"/":"")+code,i=SKIP_INDEXES,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&")message+=paramPrefix+"p"+(i-SKIP_INDEXES)+"="+encodeURIComponent(toDebugString(templateArgs[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length="length"in Object(obj)&&obj.length;return obj.nodeType===NODE_TYPE_ELEMENT&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;length>key;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else if(isBlankObject(obj))for(key in obj)iterator.call(context,obj[key],key,obj);else if("function"==typeof obj.hasOwnProperty)for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);else for(key in obj)hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj);return obj}function forEachSorted(obj,iterator,context){for(var keys=Object.keys(obj).sort(),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function baseExtend(dst,objs,deep){for(var h=dst.$$hashKey,i=0,ii=objs.length;ii>i;++i){var obj=objs[i];if(isObject(obj)||isFunction(obj))for(var keys=Object.keys(obj),j=0,jj=keys.length;jj>j;j++){var key=keys[j],src=obj[key];deep&&isObject(src)?isDate(src)?dst[key]=new Date(src.valueOf()):(isObject(dst[key])||(dst[key]=isArray(src)?[]:{}),baseExtend(dst[key],[src],!0)):dst[key]=src}}return setHashKey(dst,h),dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),!1)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),!0)}function toInt(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==Object.prototype.toString}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isBlankObject(value){return null!==value&&"object"==typeof value&&!getPrototypeOf(value)}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isTypedArray(value){return TYPED_ARRAY_REGEXP.test(toString.call(value))}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),index}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(isTypedArray(destination))throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)&&(stackSource.push(source),stackDest.push(destination));var key;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)destination.push(copy(source[i],null,stackSource,stackDest))}else{var h=destination.$$hashKey;if(isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]}),isBlankObject(source))for(key in source)destination[key]=copy(source[key],null,stackSource,stackDest);else if(source&&"function"==typeof source.hasOwnProperty)for(key in source)source.hasOwnProperty(key)&&(destination[key]=copy(source[key],null,stackSource,stackDest));else for(key in source)hasOwnProperty.call(source,key)&&(destination[key]=copy(source[key],null,stackSource,stackDest));setHashKey(destination,h)}}else if(destination=source,isObject(source)){var index;if(stackSource&&-1!==(index=stackSource.indexOf(source)))return stackDest[index];if(isArray(source))return copy(source,[],stackSource,stackDest);if(isTypedArray(source))destination=new source.constructor(source);else if(isDate(source))destination=new Date(source.getTime());else{if(!isRegExp(source)){var emptyObject=Object.create(getPrototypeOf(source));return copy(source,emptyObject,stackSource,stackDest)}destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex}stackDest&&(stackSource.push(source),stackDest.push(destination))}return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;ii>i;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)("$"!==key.charAt(0)||"$"!==key.charAt(1))&&(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?equals(o1.getTime(),o2.getTime()):!1;if(isRegExp(o1))return isRegExp(o2)?o1.toString()==o2.toString():!1;if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet=createMap();for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!(key in keySet||"$"===key.charAt(0)||o2[key]===undefined||isFunction(o2[key])))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function timezoneToOffset(timezone,fallback){var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){return date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+minutes),date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var timezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset());return addDateMinutes(date,reverse*(timezoneOffset-date.getTimezoneOffset()))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;ii>i;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.getAttribute(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},void(isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;if(!bindJQueryFired){var jqName=jq();jQuery=window.jQuery,isDefined(jqName)&&(jQuery=null===jqName?undefined:window[jqName]),jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0}}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return jqLite(blockNodes)}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}function invokeLaterAndSetModuleName(provider,method){return function(recipeName,factoryFunction){return factoryFunction&&isFunction(factoryFunction)&&(factoryFunction.$$moduleName=name),invokeQueue.push([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator"),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"<<already seen>>";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$CoreAnimateRunnerProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$HashMap:$$HashMapProvider,$$cookieReader:$$CookieReaderProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteHasData(node){for(var key in jqCache[node.ng339])return!0;return!1}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;l>i;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type)forEach(type.split(" "),function(type){if(isDefined(fn)){var listenerFns=events[type];if(arrayRemove(listenerFns||[],fn),listenerFns&&listenerFns.length>0)return}removeEventListenerFn(element,type,handle),delete events[type]});else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;length>i;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(element,name){var nodeName=element.nodeName;return("INPUT"===nodeName||"TEXTAREA"===nodeName)&&ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0},eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;eventFnsLength>i;i++)event.isImmediatePropagationStopped()||eventFns[i].call(element,event)}};return eventHandler.elem=element,eventHandler}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,""),args=fnText.match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;ii>i;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),
e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null),returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)});return forEach(loadModules(modulesToLoad),function(fn){fn&&instanceInjector.invoke(fn)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){return"a"===nodeName_(element)?(result=element,!0):void 0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(hash){hash=isString(hash)?hash:$location.hash();var elm;hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){(newVal!==oldVal||""!==newVal)&&jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function mergeClasses(a,b){return a||b?a?b?(isArray(a)&&(a=a.join(" ")),isArray(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE)return elm}}function splitClasses(classes){isString(classes)&&(classes=classes.split(" "));var obj=createMap();return forEach(classes,function(klass){klass.length&&(obj[klass]=!0)}),obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index)}function cacheStateAndFireUrlChange(){cacheState(),fireUrlChange()}function getCurrentState(){try{return history.state}catch(e){}}function cacheState(){cachedState=getCurrentState(),cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){(lastBrowserUrl!==self.url()||lastHistoryState!==cachedState)&&(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}var self=this,location=(document[0],window.location),history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),reloadLocation=null;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?((!sameBase||reloadLocation)&&(reloadLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return reloadLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(!isUndefined(value)){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value}},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition");bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName}}),bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)&&(directive.bindToController===!0?(bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,!0),bindings.isolateScope={}):bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,!1)),isObject(directive.bindToController)&&(bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,!0)),isObject(bindings.bindToController)){var controller=directive.controller,controllerAs=directive.controllerAs;if(!controller)throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName);if(!identifierForController(controller,controllerAs))throw $compileMinErr("noident","Cannot bind to controller without identifier for directive '{0}'.",directiveName)}return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter))throw $compileMinErr("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",name);if(name!==name.trim())throw $compileMinErr("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertValidDirectiveName(name),assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA";var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);isObject(bindings.isolateScope)&&(directive.$$isolateBindings=bindings.isolateScope),directive.$$moduleName=directiveFactory.$$moduleName,directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;ii>i;)if(node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope);var destroyBindings=nodeLinkFn.$$destroyBindings;destroyBindings&&(nodeLinkFn.$$destroyBindings=null,childScope.$on("$destroyed",destroyBindings))}else childScope=scope;childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn,nodeLinkFn)}else childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");directiveIsMultiElement(directiveNName)&&ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:if(11===msie)for(;node.parentNode&&node.nextSibling&&node.nextSibling.nodeType===NODE_TYPE_TEXT;)node.nodeValue=node.nodeValue+node.nextSibling.nodeValue,node.parentNode.removeChild(node.nextSibling);addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP),name=require.substring(match[0].length),inheritType=match[1]||match[3],optional="?"===match[2];if("^^"===inheritType?$element=$element.parent():(value=elementControllers&&elementControllers[name],value=value&&value.instance),!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}else if(isArray(require)){value=[];for(var i=0,ii=require.length;ii>i;i++)value[i]=getControllers(directiveName,require[i],$element,elementControllers)}return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey],locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn},controller=directive.controller;"@"==controller&&(controller=attrs[directive.name]);var controllerInstance=$controller(controller,locals,!0,directive.controllerAs);elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn,thisLinkFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;return isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),newIsolateScopeDirective&&(isolateScope=scope.$new(!0)),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn),controllerDirectives&&(elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope)),newIsolateScopeDirective&&(compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0),isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective,isolateScope)),elementControllers){var bindings,controllerForBindings,scopeDirective=newIsolateScopeDirective||newScopeDirective;scopeDirective&&elementControllers[scopeDirective.name]&&(bindings=scopeDirective.$$bindings.bindToController,controller=elementControllers[scopeDirective.name],controller&&controller.identifier&&bindings&&(controllerForBindings=controller,thisLinkFn.$$destroyBindings=initializeDirectiveBindings(scope,attrs,controller.instance,bindings,scopeDirective)));for(i in elementControllers){controller=elementControllers[i];var controllerResult=controller();controllerResult!==controller.instance&&(controller.instance=controllerResult,$element.data("$"+i+"Controller",controllerResult),controller===controllerForBindings&&(thisLinkFn.$$destroyBindings(),thisLinkFn.$$destroyBindings=initializeDirectiveBindings(scope,attrs,controllerResult,bindings,scopeDirective)))}}for(i=0,ii=preLinkFns.length;ii>i;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}previousCompileContext=previousCompileContext||{};for(var directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||createMap(),assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){
for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn,afterTemplateNodeLinkFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn,afterTemplateNodeLinkFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite.hasData(firstElementToRemove)&&(jqLite(newNode).data(jqLite(firstElementToRemove).data()),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]]);for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive,newScope){var onNewScopeDestroyed;forEach(bindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(hasOwnProperty.call(attrs,attrName)||(attrs[attrName]=undefined),mode){case"@":attrs[attrName]||optional||(destination[scopeName]=undefined),attrs.$observe(attrName,function(value){destination[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(destination[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=destination[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],directive.name)},lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,destination[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=destination[scopeName]):destination[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0;var unwatch;unwatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),onNewScopeDestroyed=onNewScopeDestroyed||[],onNewScopeDestroyed.push(unwatch);break;case"&":if(parentGet=$parse(attrs[attrName]),parentGet===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)}}});var destroyBindings=onNewScopeDestroyed?function(){for(var i=0,ii=onNewScopeDestroyed.length;ii>i;++i)onNewScopeDestroyed[i]()}:noop;return newScope&&destroyBindings!==noop?(newScope.$on("$destroy",destroyBindings),noop):destroyBindings}var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;l>i;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),"a"===nodeName&&"href"===key||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;nbrUrisWith2parts>i;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){!listeners.$$inter&&attrs.hasOwnProperty(key)&&fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(1>=i)return jqNodes;for(;i--;){var node=jqNodes[i];node.nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=!1;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(match=expression.match(CNTRL_REG),!match)throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name);var instantiate;return instantiate=extend(function(){var result=$injector.invoke(expression,instance,locals,constructor);return result!==instance&&(isObject(result)||isFunction(result))&&(instance=result,identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name)),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function serializeValue(v){return isObject(v)?isDate(v)?v.toISOString():toJson(v):v}function $HttpParamSerializerProvider(){this.$get=function(){return function(params){if(!params)return"";var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)?forEach(value,function(v,k){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))}):parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value))))}),parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(params){function serialize(toSerialize,prefix,topLevel){null===toSerialize||isUndefined(toSerialize)||(isArray(toSerialize)?forEach(toSerialize,function(value){serialize(value,prefix+"[]")}):isObject(toSerialize)&&!isDate(toSerialize)?forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))}):parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize))))}if(!params)return"";var parts=[];return serialize(params,"",!0),parts.join("&")}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){function fillInParsed(key,val){key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}var i,parsed=createMap();return isString(headers)?forEach(headers.split("\n"),function(line){i=line.indexOf(":"),fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))}):isObject(headers)&&forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))}),parsed}function headersGetter(headers){var headersObj;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return response.data?resp.data=transformData(response.data,response.headers,response.status,config.transformResponse):resp.data=response.data,isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?(headerContent=headerFn(config),null!=headerContent&&(processedHeaders[header]=headerContent)):processedHeaders[header]=headerFn}),processedHeaders}function mergeHeaders(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}if(!angular.isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method),config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;var serverRequest=function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return assertArgFn(fn,"fn"),promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return assertArgFn(fn,"fn"),promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.paramSerializer(config.params));if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,serializedParams){return serializedParams.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+serializedParams),url}var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(){return new window.XMLHttpRequest}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId!==undefined&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr();xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function stringify(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];textLength>index;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1&&$interpolateMinErr.throwNoconcat(text),!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;ii>i;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;ii>i;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue})}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");
return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){function interval(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,hasParams?function(){fn.apply(null,args)}:fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);isUndefined(withoutBaseUrl)||"#"!==withoutBaseUrl.charAt(0)?this.$$html5?withoutHashUrl=withoutBaseUrl:(withoutHashUrl="",isUndefined(withoutBaseUrl)&&(appBase=url,this.replace())):(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)),parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){$rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function ifDefined(v,d){return"undefined"!=typeof v?v:d}function plusFn(l,r){return"undefined"==typeof l?r:"undefined"==typeof r?l:l+r}function isStateless($filter,filterName){var fn=$filter(filterName);return!fn.$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants,argsToWatch;switch(ast.type){case AST.Program:allConstants=!0,forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter),allConstants=allConstants&&expr.expression.constant}),ast.constant=allConstants;break;case AST.Literal:ast.constant=!0,ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter),ast.constant=ast.argument.constant,ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter),findConstantAndWatchExpressions(ast.alternate,$filter),findConstantAndWatchExpressions(ast.consequent,$filter),ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant,ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=!1,ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter),ast.computed&&findConstantAndWatchExpressions(ast.property,$filter),ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant),ast.toWatch=[ast];break;case AST.CallExpression:allConstants=ast.filter?isStateless($filter,ast.callee.name):!1,argsToWatch=[],forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=ast.filter&&isStateless($filter,ast.callee.name)?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter),findConstantAndWatchExpressions(ast.right,$filter),ast.constant=ast.left.constant&&ast.right.constant,ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=!0,argsToWatch=[],forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter),allConstants=allConstants&&expr.constant,expr.constant||argsToWatch.push.apply(argsToWatch,expr.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=!0,argsToWatch=[],forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter),allConstants=allConstants&&property.value.constant,property.value.constant||argsToWatch.push.apply(argsToWatch,property.value.toWatch)}),ast.constant=allConstants,ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=!1,ast.toWatch=[]}}function getInputs(body){if(1==body.length){var lastExpression=body[0].expression,candidate=lastExpression.toWatch;return 1!==candidate.length?candidate:candidate[0]!==lastExpression?candidate:undefined}}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){return 1===ast.body.length&&isAssignable(ast.body[0].expression)?{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}:void 0}function isLiteral(ast){return 0===ast.body.length||1===ast.body.length&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function ASTInterpreter(astBuilder,$filter){this.astBuilder=astBuilder,this.$filter=$filter}function setter(obj,path,setValue,fullExp){ensureSafeObject(obj,fullExp);for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=ensureSafeObject(obj[key],fullExp);propertyObj||(propertyObj={},obj[key]=propertyObj),obj=propertyObj}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function isPossiblyDangerousMemberName(name){return"constructor"==name}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap();this.$get=["$filter","$sniffer",function($filter,$sniffer){function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:"object"==typeof newValue&&(newValue=getValueOf(newValue),"object"==typeof newValue)?!1:newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var lastResult,inputExpressions=parsedExpression.inputs;if(1===inputExpressions.length){var oldInputValueOf=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValueOf)||(lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]),oldInputValueOf=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality,prettyPrintExpression)}for(var oldInputValueOfValues=[],oldInputValues=[],i=0,ii=inputExpressions.length;ii>i;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck,oldInputValues[i]=null;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;ii>i;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValues[i]=newInputValue,oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)),lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate,fn=regularWatch?function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}:function(scope,locals,assign,inputs){var value=parsedExpression(scope,locals,assign,inputs),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]),fn}var $parseOptions={csp:$sniffer.csp,expensiveChecks:!1},$parseOptionsExpensive={csp:$sniffer.csp,expensiveChecks:!0};return function(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":exp=exp.trim(),cacheKey=exp;var cache=expensiveChecks?cacheExpensive:cacheDefault;if(parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return noop}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function callOnce(self,resolveFn,rejectFn){function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}var called=!1;return[wrap(resolveFn),wrap(rejectFn)]}function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,deferred,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;ii>i;++i){deferred=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?deferred.resolve(fn(state.value)):1===state.status?deferred.resolve(state.value):deferred.reject(state.value)}catch(e){deferred.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){return new Deferred};Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}},Deferred.prototype={resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;ii>i;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}};var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},resolve=when,$Q=function Q(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=resolve,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){function flush(){for(var i=0;i<taskQueue.length;i++){var task=taskQueue[i];task&&(taskQueue[i]=null,task())}taskCount=taskQueue.length=0}function queueFn(asyncFn){var index=taskQueue.length;return taskCount++,taskQueue.push(asyncFn),0===index&&(cancelLastRAF=rafFn(flush)),function(){index>=0&&(taskQueue[index]=null,index=null,0===--taskCount&&cancelLastRAF&&(cancelLastRAF(),cancelLastRAF=null,taskQueue.length=0))}}var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,rafFn=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};queueFn.supported=rafSupported;var cancelLastRAF,taskCount=0,taskQueue=[];return queueFn}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do current.$$watchersCount+=count;while(current=current.$parent)}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get,watchExp);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),incrementWatchersCount(this,1),function(){arrayRemove(array,watcher)>=0&&incrementWatchersCount(scope,-1),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope);
}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)newValue.hasOwnProperty(key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$rootScope&&$browser.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent&&parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent&&parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:expr,locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&8>msie)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(bodyStyle.webkitTransition),animations=isString(bodyStyle.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hasEvent:function(event){if("input"===event&&11>=msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q","$sce",function($templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){if(!ignoreRequestError)throw $compileMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);return $q.reject(resp)}handleRequestFn.totalPendingRequests++,isString(tpl)&&$templateCache.get(tpl)||(tpl=$sce.getTrustedResourceUrl(tpl));var transformResponse=$http.defaults&&$http.defaults.transformResponse;isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null);var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions)["finally"](function(){handleRequestFn.totalPendingRequests--}).then(function(response){return $templateCache.put(tpl,response.data),response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");matcher.test(bindingName)&&matches.push(binding)}else-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){isFunction(fn)||(invokeApply=delay,delay=fn,fn=noop);var timeoutId,args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var rawDocument=$document[0]||{},lastCookies={},lastCookieString="";return function(){var cookieArray,cookie,i,index,name,currentCookieString=rawDocument.cookie||"";if(currentCookieString!==lastCookieString)for(lastCookieString=currentCookieString,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArrayLike(array)){if(null==array)return array;throw minErr("filter")("notarray","Expected array but received: {0}",array)}var predicateFn,matchAgainstAnyProp,expressionType=getTypeForFilter(expression);switch(expressionType){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var predicateFn,shouldMatchPrimitives=isObject(expression)&&"$"in expression;return comparator===!0?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return isUndefined(actual)?!1:null===actual||null===expected?actual===expected:isObject(expected)||isObject(actual)&&!hasCustomToString(actual)?!1:(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual),expectedType=getTypeForFilter(expected);if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return dontMatchWholeObject?!1:deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key,actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function getTypeForFilter(val){return null===val?"null":typeof val}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var isInfinity=number===1/0;if(!isInfinity&&!isFinite(number))return"";var numStr=number+"",formatedText="",hasExponent=!1,parts=[];if(isInfinity&&(formatedText=""),!isInfinity&&-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?number=0:(formatedText=numStr,hasExponent=!0)}if(isInfinity||hasExponent)fractionSize>0&&1>number&&(formatedText=number.toFixed(fractionSize),number=parseFloat(formatedText));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return 0===number&&(isNegative=!1),parts.push(isNegative?pattern.negPre:pattern.posPre,formatedText,isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset,paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(4>=dayOfWeekOnFirst?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=toInt(match[9]+match[10]),tzMin=toInt(match[9]+match[11])),dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour,m=toInt(match[5]||0)-tzMin,s=toInt(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date)||!isFinite(date.getTime()))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);var dateTimezoneOffset=date.getTimezoneOffset();return timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,date.getTimezoneOffset()),date=convertTimezoneToLocal(date,timezone,!0)),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit,begin){return limit=Math.abs(Number(limit))===1/0?Number(limit):toInt(limit),isNaN(limit)?input:(isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(begin=!begin||isNaN(begin)?0:toInt(begin),begin=0>begin&&begin>=-input.length?input.length+begin:begin,limit>=0?input.slice(begin,begin+limit):0===begin?input.slice(limit,input.length):input.slice(Math.max(0,begin+limit),begin)):input)}}function orderByFilter($parse){function processPredicates(sortPredicate,reverseOrder){return reverseOrder=reverseOrder?-1:1,sortPredicate.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate))get=predicate;else if(isString(predicate)&&(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0)?-1:1,predicate=predicate.substring(1)),""!==predicate&&(get=$parse(predicate),get.constant))){var key=get();get=function(value){return value[key]}}return{get:get,descending:descending*reverseOrder}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(value,index){return"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:hasCustomToString(value)&&(value=value.toString(),isPrimitive(value))?value:index}function getPredicateValue(value,index){var type=typeof value;return null===value?(type="string",value="null"):"string"===type?value=value.toLowerCase():"object"===type&&(value=objectValue(value,index)),{value:value,type:type}}function compare(v1,v2){var result=0;return v1.type===v2.type?v1.value!==v2.value&&(result=v1.value<v2.value?-1:1):result=v1.type<v2.type?-1:1,result}return function(array,sortPredicate,reverseOrder){function getComparisonObject(value,index){return{value:value,predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}function doComparison(v1,v2){for(var result=0,index=0,length=predicates.length;length>index&&!(result=compare(v1.predicateValues[index],v2.predicateValues[index])*predicates[index].descending);++index);return result}if(!isArrayLike(array))return array;isArray(sortPredicate)||(sortPredicate=[sortPredicate]),0===sortPredicate.length&&(sortPredicate=["+"]);var predicates=processPredicates(sortPredicate,reverseOrder),compareValues=Array.prototype.map.call(array,getComparisonObject);return compareValues.sort(doComparison),array=compareValues.map(function(item){return item.value})}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[],parentForm=form.$$parentForm=element.parent().controller("form")||nullFormCtrl;form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,parentForm.$addControl(form),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},
form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control)},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(list){var index=list.indexOf(controller);-1===index&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},parentForm:parentForm,$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)?isDate(val)?val:parseDate(val):undefined}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return timezone&&(parsedDate=convertTimezoneToLocal(parsedDate,timezone)),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw $ngModelMinErr("datefmt","Expected `{0}` to be a date",value);return isValidDate(value)?(previousDate=value,previousDate&&timezone&&(previousDate=convertTimezoneToLocal(previousDate,timezone,!0)),$filter("date")(value,format,timezone)):(previousDate=null,"")}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw $ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||maxVal>=value},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw minErr("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value===!1},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){var classes=[];return isArray(classVal)?(forEach(classVal,function(v){classes=classes.concat(arrayClasses(v))}),classes):isString(classVal)?classVal.split(" "):isObject(classVal)?(forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes):classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||createMap(),classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,controller){state===undefined?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:ctrl.$error[validationErrorKey]?!1:ctrl.$$success[validationErrorKey]?!0:null,toggleValidationCss(validationErrorKey,combinedState),parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=setValidity}function isObjectEmpty(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=document.documentMode,noop.$inject=[],identity.$inject=[];var skipDestroyOnNextJQueryCleanData,isArray=Array.isArray,TYPED_ARRAY_REGEXP=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},jq=function(){if(isDefined(jq.name_))return jq.name_;var el,i,prefix,name,ii=ngAttrPrefixes.length;for(i=0;ii>i;++i)if(prefix=ngAttrPrefixes[i],el=document.querySelector("["+prefix.replace(":","\\:")+"jq]")){name=el.getAttribute(prefix+"jq");break}return jq.name_=name},ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_ATTRIBUTE=2,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.4.3",major:1,minor:4,dot:3,codeName:"foam-acceleration"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_TEXT&&nodeType!==NODE_TYPE_ATTRIBUTE&&nodeType!==NODE_TYPE_COMMENT){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length;i--;){type=types[i];var eventFns=events[type];eventFns||(events[type]=[],"mouseenter"===type||"mouseleave"===type?jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!target.contains(related))&&handle(event,type)}):"$destroy"!==type&&addEventListenerFn(element,type,handle),eventFns=events[type]),eventFns.push(fn)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;ii>i;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;ii>i;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;ii>i;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var $$HashMapProvider=[function(){this.$get=[function(){return HashMap}]}],FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),ELEMENT_NODE=1,NG_ANIMATE_CLASSNAME="ng-animate",$$CoreAnimateRunnerProvider=function(){this.$get=["$q","$$rAF",function($q,$$rAF){function AnimateRunner(){}return AnimateRunner.all=noop,AnimateRunner.chain=noop,AnimateRunner.prototype={end:noop,cancel:noop,resume:noop,pause:noop,complete:noop,then:function(pass,fail){return $q(function(resolve){$$rAF(function(){resolve()})}).then(pass,fail)}},AnimateRunner}]},$$CoreAnimateQueueProvider=function(){var postDigestQueue=new HashMap,postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element);data||(postDigestQueue.put(element,data={}),postDigestElements.push(element)),add&&forEach(add.split(" "),function(className){className&&(data[className]=!0)}),remove&&forEach(remove.split(" "),function(className){className&&(data[className]=!1)}),postDigestElements.length>1||$rootScope.$$postDigest(function(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class")),toAdd="",toRemove="";forEach(data,function(status,className){var hasClass=!!existing[className];status!==hasClass&&(status?toAdd+=(toAdd.length?" ":"")+className:toRemove+=(toRemove.length?" ":"")+className)}),forEach(element,function(elm){toAdd&&jqLiteAddClass(elm,toAdd),toRemove&&jqLiteRemoveClass(elm,toRemove)}),postDigestQueue.remove(element)}}),postDigestElements.length=0})}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){return domOperation&&domOperation(),options=options||{},options.from&&element.css(options.from),options.to&&element.css(options.to),(options.addClass||options.removeClass)&&addRemoveClassesPostDigest(element,options.addClass,options.removeClass),new $$AnimateRunner}}}]},$AnimateProvider=["$provide",function($provide){var provider=this;this.$$registeredAnimations=Object.create(null),this.register=function(name,factory){if(name&&"."!==name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){if(1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null,this.$$classNameFilter)){var reservedRegex=new RegExp("(\\s+|\\/)"+NG_ANIMATE_CLASSNAME+"(\\s+|\\/)");if(reservedRegex.test(this.$$classNameFilter.toString()))throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',NG_ANIMATE_CLASSNAME)}return this.$$classNameFilter},this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);!afterNode||afterNode.parentNode||afterNode.previousElementSibling||(afterElement=null)}afterElement?afterElement.after(element):parentElement.prepend(element)}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){runner.end&&runner.end()},enter:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){return parent=parent&&jqLite(parent),after=after&&jqLite(after),parent=parent||after.parent(),domInsert(element,parent,after),$$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addclass,className),$$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){return options=prepareAnimateOptions(options),options.removeClass=mergeClasses(options.removeClass,className),$$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){return options=prepareAnimateOptions(options),options.addClass=mergeClasses(options.addClass,add),options.removeClass=mergeClasses(options.removeClass,remove),$$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){return options=prepareAnimateOptions(options),options.from=options.from?extend(options.from,from):from,options.to=options.to?extend(options.to,to):to,className=className||"ng-inline-animate",options.tempClasses=mergeClasses(options.tempClasses,className),$$animateQueue.push(element,"animate",options)}}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/,APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text)},$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};var PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){
null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=!0});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||""===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function(lexer,options){this.lexer=lexer,this.options=options};AST.Program="Program",AST.ExpressionStatement="ExpressionStatement",AST.AssignmentExpression="AssignmentExpression",AST.ConditionalExpression="ConditionalExpression",AST.LogicalExpression="LogicalExpression",AST.BinaryExpression="BinaryExpression",AST.UnaryExpression="UnaryExpression",AST.CallExpression="CallExpression",AST.MemberExpression="MemberExpression",AST.Identifier="Identifier",AST.Literal="Literal",AST.ArrayExpression="ArrayExpression",AST.Property="Property",AST.ObjectExpression="ObjectExpression",AST.ThisExpression="ThisExpression",AST.NGValueParameter="NGValueParameter",AST.prototype={ast:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value},program:function(){for(var body=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&body.push(this.expressionStatement()),!this.expect(";"))return{type:AST.Program,body:body}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();return this.expect("=")&&(result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}),result},ternary:function(){var alternate,consequent,test=this.logicalOR();return this.expect("?")&&(alternate=this.expression(),this.consume(":"))?(consequent=this.expression(),{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}):test},logicalOR:function(){for(var left=this.logicalAND();this.expect("||");)left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()};return left},logicalAND:function(){for(var left=this.equality();this.expect("&&");)left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()};return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()};return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()};return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()};return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()};return left},unary:function(){var token;return(token=this.expect("+","-","!"))?{type:AST.UnaryExpression,operator:token.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.constants.hasOwnProperty(this.peek().text)?primary=copy(this.constants[this.consume().text]):this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next;next=this.expect("(","[",".");)"("===next.text?(primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()},this.consume(")")):"["===next.text?(primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:!0},this.consume("]")):"."===next.text?primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return primary},filter:function(baseExpression){for(var args=[baseExpression],result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:!0};this.expect(":");)args.push(this.expression());return result},parseArguments:function(){var args=[];if(")"!==this.peekToken().text)do args.push(this.expression());while(this.expect(","));return args},identifier:function(){var token=this.consume();return token.identifier||this.throwError("is not a valid identifier",token),{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elements.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:AST.ArrayExpression,elements:elements}},object:function(){var property,properties=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;property={type:AST.Property,kind:"init"},this.peek().constant?property.key=this.constant():this.peek().identifier?property.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),property.value=this.expression(),properties.push(property)}while(this.expect(","));return this.consume("}"),{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},constants:{"true":{type:AST.Literal,value:!0},"false":{type:AST.Literal,value:!1},"null":{type:AST.Literal,value:null},undefined:{type:AST.Literal,value:undefined},"this":{type:AST.ThisExpression}}},ASTCompiler.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.state={nextId:0,filters:{},expensiveChecks:expensiveChecks,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(ast,self.$filter);var assignable,extra="";if(this.stage="assign",assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result),extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs",forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}},self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId),self.return_(intoId),self.state.inputs.push(fnKey),watch.watchId=key}),this.state.computing="fn",this.stage="main",this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;",fn=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",fnString)(this.$filter,ensureSafeMemberName,ensureSafeObject,ensureSafeFunction,ifDefined,plusFn,expression);return this.state=this.stage=undefined,fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[],fns=this.state.inputs,self=this;return forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))}),fns.length&&result.push("fn.inputs=["+fns.join(",")+"];"),result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[],self=this;return forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")}),parts.length?"var "+parts.join(",")+";":""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,args,expression,self=this;if(recursionFn=recursionFn||noop,!skipWatchIdCheck&&isDefined(ast.watchId))return intoId=intoId||this.nextId(),void this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,!0));switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr}),pos!==ast.body.length-1?self.current().body.push(right,";"):self.return_(right)});break;case AST.Literal:expression=this.escape(ast.value),this.assign(intoId,expression),recursionFn(expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr}),expression=ast.operator+"("+this.ifDefined(right,0)+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr}),this.recurse(ast.right,undefined,undefined,function(expr){right=expr}),expression="+"===ast.operator?this.plus(left,right):"-"===ast.operator?this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0):"("+left+")"+ast.operator+"("+right+")",this.assign(intoId,expression),recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId(),self.recurse(ast.left,intoId),self.if_("&&"===ast.operator?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId)),recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId(),self.recurse(ast.test,intoId),self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId)),recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId(),nameId&&(nameId.context="inputs"===self.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s"),nameId.computed=!1,nameId.name=ast.name),ensureSafeMemberName(ast.name),self.if_("inputs"===self.stage||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_("inputs"===self.stage||"s",function(){create&&1!==create&&self.if_(self.not(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}")),self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name))),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.name))&&self.addEnsureSafeObject(intoId),recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId(),intoId=intoId||this.nextId(),self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){ast.computed?(right=self.nextId(),self.recurse(ast.property,right),self.addEnsureSafeMemberName(right),create&&1!==create&&self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}")),expression=self.ensureSafeObject(self.computedMember(left,right)),self.assign(intoId,expression),nameId&&(nameId.computed=!0,nameId.name=right)):(ensureSafeMemberName(ast.property.name),create&&1!==create&&self.if_(self.not(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}")),expression=self.nonComputedMember(left,ast.property.name),(self.state.expensiveChecks||isPossiblyDangerousMemberName(ast.property.name))&&(expression=self.ensureSafeObject(expression)),self.assign(intoId,expression),nameId&&(nameId.computed=!1,nameId.name=ast.property.name))},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId(),ast.filter?(right=self.filter(ast.callee.name),args=[],forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument),args.push(argument)}),expression=right+"("+args.join(",")+")",self.assign(intoId,expression),recursionFn(intoId)):(right=self.nextId(),left={},args=[],self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){self.addEnsureSafeFunction(right),forEach(ast.arguments,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(self.ensureSafeObject(argument))})}),left.name?(self.state.expensiveChecks||self.addEnsureSafeObject(left.context),expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"):expression=right+"("+args.join(",")+")",expression=self.ensureSafeObject(expression),self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")}),recursionFn(intoId)}));break;case AST.AssignmentExpression:if(right=this.nextId(),left={},!isAssignable(ast.left))throw $parseMinErr("lval","Trying to assing a value to a non l-value");this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right),self.addEnsureSafeObject(self.member(left.context,left.name,left.computed)),expression=self.member(left.context,left.name,left.computed)+ast.operator+right,self.assign(intoId,expression),recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[],forEach(ast.elements,function(expr){self.recurse(expr,self.nextId(),undefined,function(argument){args.push(argument)})}),expression="["+args.join(",")+"]",this.assign(intoId,expression),recursionFn(expression);break;case AST.ObjectExpression:args=[],forEach(ast.properties,function(property){self.recurse(property.value,self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})}),expression="{"+args.join(",")+"}",this.assign(intoId,expression),recursionFn(expression);break;case AST.ThisExpression:this.assign(intoId,"s"),recursionFn("s");break;case AST.NGValueParameter:this.assign(intoId,"v"),recursionFn("v")}},getHasOwnProperty:function(element,property){var key=element+"."+property,own=this.current().own;return own.hasOwnProperty(key)||(own[key]=this.nextId(!1,element+"&&("+this.escape(property)+" in "+element+")")),own[key]},assign:function(id,value){return id?(this.current().body.push(id,"=",value,";"),id):void 0},filter:function(filterName){return this.state.filters.hasOwnProperty(filterName)||(this.state.filters[filterName]=this.nextId(!0)),this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(test===!0)alternate();else{var body=this.current().body;body.push("if(",test,"){"),alternate(),body.push("}"),consequent&&(body.push("else{"),consequent(),body.push("}"))}},not:function(expression){return"!("+expression+")"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){return left+"."+right},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){return computed?this.computedMember(left,right):this.nonComputedMember(left,right)},addEnsureSafeObject:function(item){this.current().body.push(this.ensureSafeObject(item),";")},addEnsureSafeMemberName:function(item){this.current().body.push(this.ensureSafeMemberName(item),";")},addEnsureSafeFunction:function(item){this.current().body.push(this.ensureSafeFunction(item),";")},ensureSafeObject:function(item){return"ensureSafeObject("+item+",text)"},ensureSafeMemberName:function(item){return"ensureSafeMemberName("+item+",text)"},ensureSafeFunction:function(item){return"ensureSafeFunction("+item+",text)"},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(value===!0)return"true";if(value===!1)return"false";if(null===value)return"null";if("undefined"==typeof value)return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;return skip||this.current().vars.push(id+(init?"="+init:"")),id},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(expression,expensiveChecks){var self=this,ast=this.astBuilder.ast(expression);this.expression=expression,this.expensiveChecks=expensiveChecks,findConstantAndWatchExpressions(ast,self.$filter);var assignable,assign;(assignable=assignableAST(ast))&&(assign=this.recurse(assignable));var inputs,toWatch=getInputs(ast.body);toWatch&&(inputs=[],forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input,inputs.push(input),watch.watchId=key}));var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=0===ast.body.length?function(){}:1===ast.body.length?expressions[0]:function(scope,locals){var lastValue;return forEach(expressions,function(exp){lastValue=exp(scope,locals)}),lastValue};return assign&&(fn.assign=function(scope,value,locals){return assign(scope,locals,value)}),inputs&&(fn.inputs=inputs),fn.literal=isLiteral(ast),fn.constant=isConstant(ast),fn},recurse:function(ast,context,create){var left,right,args,self=this;if(ast.input)return this.inputs(ast.input,ast.watchId);switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:return right=this.recurse(ast.argument),this["unary"+ast.operator](right,context);case AST.BinaryExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.LogicalExpression:return left=this.recurse(ast.left),right=this.recurse(ast.right),this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return ensureSafeMemberName(ast.name,self.expression),self.identifier(ast.name,self.expensiveChecks||isPossiblyDangerousMemberName(ast.name),context,create,self.expression);case AST.MemberExpression:return left=this.recurse(ast.object,!1,!!create),ast.computed||(ensureSafeMemberName(ast.property.name,self.expression),right=ast.property.name),ast.computed&&(right=this.recurse(ast.property)),ast.computed?this.computedMember(left,right,context,create,self.expression):this.nonComputedMember(left,right,self.expensiveChecks,context,create,self.expression);case AST.CallExpression:return args=[],forEach(ast.arguments,function(expr){args.push(self.recurse(expr))}),ast.filter&&(right=this.$filter(ast.callee.name)),ast.filter||(right=this.recurse(ast.callee,!0)),ast.filter?function(scope,locals,assign,inputs){for(var values=[],i=0;i<args.length;++i)values.push(args[i](scope,locals,assign,inputs));var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var value,rhs=right(scope,locals,assign,inputs);if(null!=rhs.value){ensureSafeObject(rhs.context,self.expression),ensureSafeFunction(rhs.value,self.expression);for(var values=[],i=0;i<args.length;++i)values.push(ensureSafeObject(args[i](scope,locals,assign,inputs),self.expression));value=ensureSafeObject(rhs.value.apply(rhs.context,values),self.expression)}return context?{value:value}:value};case AST.AssignmentExpression:return left=this.recurse(ast.left,!0,1),right=this.recurse(ast.right),function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs);return ensureSafeObject(lhs.value,self.expression),lhs.context[lhs.name]=rhs,context?{value:rhs}:rhs};case AST.ArrayExpression:return args=[],forEach(ast.elements,function(expr){args.push(self.recurse(expr))}),function(scope,locals,assign,inputs){for(var value=[],i=0;i<args.length;++i)value.push(args[i](scope,locals,assign,inputs));return context?{value:value}:value};case AST.ObjectExpression:return args=[],forEach(ast.properties,function(property){args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,value:self.recurse(property.value)})}),function(scope,locals,assign,inputs){for(var value={},i=0;i<args.length;++i)value[args[i].key]=args[i].value(scope,locals,assign,inputs);return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.NGValueParameter:return function(scope,locals,assign,inputs){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?+arg:0,context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);return arg=isDefined(arg)?-arg:0,context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=plusFn(lhs,rhs);return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs),rhs=right(scope,locals,assign,inputs),arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;create&&1!==create&&base&&!base[name]&&(base[name]={});var value=base?base[name]:undefined;return expensiveChecks&&ensureSafeObject(value,expression),context?{context:base,name:name,value:value}:value}},computedMember:function(left,right,context,create,expression){return function(scope,locals,assign,inputs){var rhs,value,lhs=left(scope,locals,assign,inputs);return null!=lhs&&(rhs=right(scope,locals,assign,inputs),ensureSafeMemberName(rhs,expression),create&&1!==create&&lhs&&!lhs[rhs]&&(lhs[rhs]={}),value=lhs[rhs],ensureSafeObject(value,expression)),context?{context:lhs,name:rhs,value:value}:value}},nonComputedMember:function(left,right,expensiveChecks,context,create,expression){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);create&&1!==create&&lhs&&!lhs[right]&&(lhs[right]={});var value=null!=lhs?lhs[right]:undefined;return(expensiveChecks||isPossiblyDangerousMemberName(right))&&ensureSafeObject(value,expression),context?{context:lhs,name:right,value:value}:value}},inputs:function(input,watchId){return function(scope,value,locals,inputs){return inputs?inputs[watchId]:input(scope,value,locals)}}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options,this.ast=new AST(this.lexer),this.astCompiler=options.csp?new ASTInterpreter(this.ast,$filter):new ASTCompiler(this.ast,$filter)};Parser.prototype={constructor:Parser,parse:function(text){return this.astCompiler.compile(text,this.options.expensiveChecks)}};var objectValueOf=(createMap(),createMap(),Object.prototype.valueOf),$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$compileMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),
s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return attr.href||attr.xlinkHref?void 0:function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName),linkFn=defaultLinkFn;"checked"===propName&&(linkFn=function(scope,element,attr){attr.ngModel!==attr[normalized]&&defaultLinkFn(scope,element,attr)}),ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":isNgForm&&attr.ngForm?"ngForm":!1;return{pre:function(scope,formElement,attr,controller){if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=controller.$$parentForm;nameAttr&&(setter(scope,controller.$name,controller,controller.$name),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,controller.$name,undefined,controller.$name),parentFormCtrl.$$renameControl(controller,newValue),setter(scope,controller.$name,controller,controller.$name))})),formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),nameAttr&&setter(scope,attr[nameAttr],undefined,controller.$name),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=value===undefined?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=value===undefined?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch(srcExp,function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return/SVG/.test($element[0].toString())?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element})):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",$ngModelMinErr=new minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope);var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:ctrl.$modelValue}):parsedNgModelAssign($scope,ctrl.$modelValue)}}else if(!parsedNgModel.assign)throw $ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},parentForm:parentForm,$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){function processParseErrors(){var errorKey=ctrl.$$parserName||"parse";return parserValid!==undefined?(parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid):(setValidity(errorKey,null),!0)}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid?!0:(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(error){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors()&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue;if(parserValid=isUndefined(modelValue)?undefined:!0)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,(!ctrl.$options||ctrl.$options.updateOnDefault)&&ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce["default"])&&(debounceDelay=debounce["default"])),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=undefined;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&formCtrl.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(ev){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=copy($scope.$eval($attrs.ngModelOptions)),this.$options.updateOn!==undefined?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngOptionsMinErr=minErr("ngOptions"),NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,ngOptionsDirective=["$compile","$parse",function($compile,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue,this.viewValue=viewValue,this.label=label,this.group=group,this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues))optionValuesKeys=optionValues;else{optionValuesKeys=[];for(var itemKey in optionValues)optionValues.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&optionValuesKeys.push(itemKey)}return optionValuesKeys}var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match)throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var valueName=match[5]||match[7],keyName=match[6],selectAs=/ as /.test(match[0])&&match[1],trackBy=match[9],valueFn=$parse(match[2]?match[1]:valueName),selectAsFn=selectAs&&$parse(selectAs),viewValueFn=selectAsFn||valueFn,trackByFn=trackBy&&$parse(trackBy),getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function(value){return hashKey(value)},getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))},displayFn=$parse(match[2]||match[1]),groupByFn=$parse(match[3]||""),disableWhenFn=$parse(match[4]||""),valuesFn=$parse(match[8]),locals={},getLocals=keyName?function(value,key){return locals[keyName]=key,locals[valueName]=value,locals}:function(value){return locals[valueName]=value,locals};return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];for(var optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;optionValuesLength>index;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],locals=(optionValues[key],getLocals(optionValues[key],key)),selectValue=getTrackByValueFn(optionValues[key],locals);if(watchedArray.push(selectValue),match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){for(var optionItems=[],selectValueMap={},optionValues=valuesFn(scope)||[],optionValuesKeys=getOptionValuesKeys(optionValues),optionValuesLength=optionValuesKeys.length,index=0;optionValuesLength>index;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index],value=optionValues[key],locals=getLocals(value,key),viewValue=viewValueFn(scope,locals),selectValue=getTrackByValueFn(viewValue,locals),label=displayFn(scope,locals),group=groupByFn(scope,locals),disabled=disableWhenFn(scope,locals),optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem),selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?angular.copy(option.viewValue):option.viewValue}}}}}var optionTemplate=document.createElement("option"),optGroupTemplate=document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(scope,selectElement,attr,ctrls){function updateOptionElement(option,element){option.element=element,element.disabled=option.disabled,option.value!==element.value&&(element.value=option.selectValue),option.label!==element.label&&(element.label=option.label,element.textContent=option.label)}function addOrReuseElement(parent,current,type,templateElement){var element;return current&&lowercase(current.nodeName)===type?element=current:(element=templateElement.cloneNode(!1),current?parent.insertBefore(element,current):parent.appendChild(element)),element}function removeExcessElements(current){for(var next;current;)next=current.nextSibling,jqLiteRemove(current),current=next}function skipEmptyAndUnknownOptions(current){var emptyOption_=emptyOption&&emptyOption[0],unknownOption_=unknownOption&&unknownOption[0];if(emptyOption_||unknownOption_)for(;current&&(current===emptyOption_||current===unknownOption_);)current=current.nextSibling;return current}function updateOptions(){var previousValue=options&&selectCtrl.readValue();options=ngOptions.getOptions();var groupMap={},currentElement=selectElement[0].firstChild;if(providedEmptyOption&&selectElement.prepend(emptyOption),currentElement=skipEmptyAndUnknownOptions(currentElement),options.items.forEach(function(option){var group,groupElement,optionElement;option.group?(group=groupMap[option.group],group||(groupElement=addOrReuseElement(selectElement[0],currentElement,"optgroup",optGroupTemplate),currentElement=groupElement.nextSibling,groupElement.label=option.group,group=groupMap[option.group]={groupElement:groupElement,currentOptionElement:groupElement.firstChild}),optionElement=addOrReuseElement(group.groupElement,group.currentOptionElement,"option",optionTemplate),updateOptionElement(option,optionElement),group.currentOptionElement=optionElement.nextSibling):(optionElement=addOrReuseElement(selectElement[0],currentElement,"option",optionTemplate),updateOptionElement(option,optionElement),currentElement=optionElement.nextSibling)}),Object.keys(groupMap).forEach(function(key){removeExcessElements(groupMap[key].currentOptionElement)}),removeExcessElements(currentElement),ngModelCtrl.$render(),!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();(ngOptions.trackBy?equals(previousValue,nextValue):previousValue===nextValue)||(ngModelCtrl.$setViewValue(nextValue),ngModelCtrl.$render())}}var ngModelCtrl=ctrls[1];if(ngModelCtrl){for(var emptyOption,selectCtrl=ctrls[0],multiple=attr.multiple,i=0,children=selectElement.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=children.eq(i);break}var providedEmptyOption=!!emptyOption,unknownOption=jqLite(optionTemplate.cloneNode(!1));unknownOption.val("?");var options,ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope),renderEmptyOption=function(){providedEmptyOption||selectElement.prepend(emptyOption),selectElement.val(""),emptyOption.prop("selected",!0),emptyOption.attr("selected",!0)},removeEmptyOption=function(){providedEmptyOption||emptyOption.remove()},renderUnknownOption=function(){selectElement.prepend(unknownOption),selectElement.val("?"),unknownOption.prop("selected",!0),unknownOption.attr("selected",!0)},removeUnknownOption=function(){unknownOption.remove()};multiple?(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length},selectCtrl.writeValue=function(value){options.items.forEach(function(option){option.element.selected=!1}),value&&value.forEach(function(item){var option=options.getOptionFromViewValue(item);option&&!option.disabled&&(option.element.selected=!0)})},selectCtrl.readValue=function(){var selectedValues=selectElement.val()||[],selections=[];return forEach(selectedValues,function(value){var option=options.selectValueMap[value];option.disabled||selections.push(options.getViewValueFromOption(option))}),selections},ngOptions.trackBy&&scope.$watchCollection(function(){return isArray(ngModelCtrl.$viewValue)?ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)}):void 0},function(){ngModelCtrl.$render()})):(selectCtrl.writeValue=function(value){var option=options.getOptionFromViewValue(value);option&&!option.disabled?selectElement[0].value!==option.selectValue&&(removeUnknownOption(),removeEmptyOption(),selectElement[0].value=option.selectValue,option.element.selected=!0,option.element.setAttribute("selected","selected")):null===value||providedEmptyOption?(removeUnknownOption(),renderEmptyOption()):(removeEmptyOption(),renderUnknownOption())},selectCtrl.readValue=function(){var selectedOption=options.selectValueMap[selectElement.val()];return selectedOption&&!selectedOption.disabled?(removeEmptyOption(),removeUnknownOption(),options.getViewValueFromOption(selectedOption)):null},ngOptions.trackBy&&scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})),providedEmptyOption?(emptyOption.remove(),$compile(emptyOption)(scope),emptyOption.removeClass("ng-scope")):emptyOption=jqLite(optionTemplate.cloneNode(!1)),updateOptions(),scope.$watchCollection(ngOptions.getWatchables,updateOptions)}}}}],ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);if(countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count!==lastCount&&!(countIsNaN&&isNumber(lastCount)&&isNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];isUndefined(whenExpFn)?(null!=newVal&&$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp),watchRemover=noop,updateElementText()):watchRemover=scope.$watch(whenExpFn,updateElementText),lastCount=count}})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",
priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)collection.hasOwnProperty(itemKey)&&"$"!==itemKey.charAt(0)&&collectionKeys.push(itemKey)}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;length>index;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)},!0)}),ngSwitchDirective=["$animate",function($animate){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;ii>i;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],noopNgModelController={$setViewValue:noop,$render:noop},SelectController=["$element","$scope","$attrs",function($element,$scope,$attrs){var self=this,optionsMap=new HashMap;self.ngModelCtrl=noopNgModelController,self.unknownOption=jqLite(document.createElement("option")),self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";self.unknownOption.val(unknownVal),$element.prepend(self.unknownOption),$element.val(unknownVal)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop}),self.removeUnknownOption=function(){self.unknownOption.parent()&&self.unknownOption.remove()},self.readValue=function(){return self.removeUnknownOption(),$element.val()},self.writeValue=function(value){self.hasOption(value)?(self.removeUnknownOption(),$element.val(value),""===value&&self.emptyOption.prop("selected",!0)):null==value&&self.emptyOption?(self.removeUnknownOption(),$element.val("")):self.renderUnknownOption(value)},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),""===value&&(self.emptyOption=element);var count=optionsMap.get(value)||0;optionsMap.put(value,count+1)},self.removeOption=function(value){var count=optionsMap.get(value);count&&(1===count?(optionsMap.remove(value),""===value&&(self.emptyOption=undefined)):optionsMap.put(value,count-1))},self.hasOption=function(value){return!!optionsMap.get(value)}}],selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,link:function(scope,element,attr,ctrls){var ngModelCtrl=ctrls[1];if(ngModelCtrl){var selectCtrl=ctrls[0];if(selectCtrl.ngModelCtrl=ngModelCtrl,ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)},element.on("change",function(){scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})}),attr.multiple){selectCtrl.readValue=function(){var array=[];return forEach(element.find("option"),function(option){option.selected&&array.push(option.value)}),array},selectCtrl.writeValue=function(value){var items=new HashMap(value);forEach(element.find("option"),function(option){option.selected=isDefined(items.get(option.value))})};var lastView,lastViewRef=NaN;scope.$watch(function(){lastViewRef!==ngModelCtrl.$viewValue||equals(lastView,ngModelCtrl.$viewValue)||(lastView=shallowCopy(ngModelCtrl.$viewValue),ngModelCtrl.$render()),lastViewRef=ngModelCtrl.$viewValue}),ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}}}}}},optionDirective=["$interpolate",function($interpolate){function chromeHack(optionElement){optionElement[0].hasAttribute("selected")&&(optionElement[0].selected=!0)}return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.ngModelCtrl&&(interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),oldVal!==newVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal,element),selectCtrl.ngModelCtrl.$render(),chromeHack(element)}):(selectCtrl.addOption(attr.value,element),selectCtrl.ngModelCtrl.$render(),chromeHack(element)),element.on("$destroy",function(){selectCtrl.removeOption(attr.value),selectCtrl.ngModelCtrl.$render()}))}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return 0>maxlength||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(window,angular,undefined){"use strict";function inherit(parent,extra){return extend(new(extend(function(){},{prototype:parent})),extra)}function merge(dst){return forEach(arguments,function(obj){obj!==dst&&forEach(obj,function(value,key){dst.hasOwnProperty(key)||(dst[key]=value)})}),dst}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}function objectKeys(object){if(Object.keys)return Object.keys(object);var result=[];return forEach(object,function(val,key){result.push(key)}),result}function indexOf(array,value){if(Array.prototype.indexOf)return array.indexOf(value,Number(arguments[2])||0);var len=array.length>>>0,from=Number(arguments[2])||0;for(from=0>from?Math.ceil(from):Math.floor(from),0>from&&(from+=len);len>from;from++)if(from in array&&array[from]===value)return from;return-1}function inheritParams(currentParams,newParams,$current,$to){var parentParams,parents=ancestors($current,$to),inherited={},inheritList=[];for(var i in parents)if(parents[i].params&&(parentParams=objectKeys(parents[i].params),parentParams.length))for(var j in parentParams)indexOf(inheritList,parentParams[j])>=0||(inheritList.push(parentParams[j]),inherited[parentParams[j]]=currentParams[parentParams[j]]);return extend({},inherited,newParams)}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a)keys.push(n)}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k])return!1}return!0}function filterByKeys(keys,values){var filtered={};return forEach(keys,function(name){filtered[name]=values[name]}),filtered}function pick(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return forEach(keys,function(key){key in obj&&(copy[key]=obj[key])}),copy}function omit(obj){var copy={},keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var key in obj)-1==indexOf(keys,key)&&(copy[key]=obj[key]);return copy}function filter(collection,callback){var array=isArray(collection),result=array?[]:{};return forEach(collection,function(val,i){callback(val,i)&&(result[array?result.length:i]=val)}),result}function map(collection,callback){var result=isArray(collection)?[]:{};return forEach(collection,function(val,i){result[i]=callback(val,i)}),result}function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){function visit(value,key){if(visited[key]!==VISIT_DONE){if(cycle.push(key),visited[key]===VISIT_IN_PROGRESS)throw cycle.splice(0,indexOf(cycle,key)),new Error("Cyclic dependency: "+cycle.join(" -> "));if(visited[key]=VISIT_IN_PROGRESS,isString(value))plan.push(key,[function(){return $injector.get(value)}],NO_DEPENDENCIES);else{var params=$injector.annotate(value);forEach(params,function(param){param!==key&&invocables.hasOwnProperty(param)&&visit(invocables[param],param)}),plan.push(key,value,params)}cycle.pop(),visited[key]=VISIT_DONE}}function isResolve(value){return isObject(value)&&value.then&&value.$$promises}if(!isObject(invocables))throw new Error("'invocables' must be an object");var invocableKeys=objectKeys(invocables||{}),plan=[],cycle=[],visited={};return forEach(invocables,visit),invocables=cycle=visited=null,function(locals,parent,self){function done(){--wait||(merged||merge(values,parent.$$values),result.$$values=values,result.$$promises=result.$$promises||!0,delete result.$$inheritedValues,resolution.resolve(values))}function fail(reason){result.$$failure=reason,resolution.reject(reason)}function invoke(key,invocable,params){function onfailure(reason){invocation.reject(reason),fail(reason)}function proceed(){if(!isDefined(result.$$failure))try{invocation.resolve($injector.invoke(invocable,self,values)),invocation.promise.then(function(result){values[key]=result,done()},onfailure)}catch(e){onfailure(e)}}var invocation=$q.defer(),waitParams=0;forEach(params,function(dep){promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)&&(waitParams++,promises[dep].then(function(result){values[dep]=result,--waitParams||proceed()},onfailure))}),waitParams||proceed(),promises[key]=invocation.promise}if(isResolve(locals)&&self===undefined&&(self=parent,parent=locals,locals=null),locals){if(!isObject(locals))throw new Error("'locals' must be an object")}else locals=NO_LOCALS;if(parent){if(!isResolve(parent))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else parent=NO_PARENT;var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=!1;if(isDefined(parent.$$failure))return fail(parent.$$failure),result;parent.$$inheritedValues&&merge(values,omit(parent.$$inheritedValues,invocableKeys)),extend(promises,parent.$$promises),parent.$$values?(merged=merge(values,omit(parent.$$values,invocableKeys)),result.$$inheritedValues=omit(parent.$$values,invocableKeys),done()):(parent.$$inheritedValues&&(result.$$inheritedValues=omit(parent.$$inheritedValues,invocableKeys)),parent.then(done,fail));for(var i=0,ii=plan.length;ii>i;i+=3)locals.hasOwnProperty(plan[i])?done():invoke(plan[i],plan[i+1],plan[i+2]);return result}},this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self)}}function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null},this.fromString=function(template,params){return isFunction(template)?template(params):template},this.fromUrl=function(url,params){return isFunction(url)&&(url=url(params)),null==url?null:$http.get(url,{cache:$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})},this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params})}}function UrlMatcher(pattern,config,parentMatcher){function addParameter(id,type,config,location){if(paramNames.push(id),parentParams[id])return parentParams[id];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(params[id])throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");return params[id]=new $$UMFP.Param(id,type,config,location),params[id]}function quoteRegExp(string,pattern,squash,optional){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!pattern)return result;switch(squash){case!1:surroundPattern=["(",")"+(optional?"?":"")];break;case!0:surroundPattern=["?(",")?"];break;default:surroundPattern=["("+squash+"|",")?"]}return result+surroundPattern[0]+pattern+surroundPattern[1]}function matchDetails(m,isSearch){var id,regexp,segment,type,cfg;return id=m[2]||m[3],cfg=config.params[id],segment=pattern.substring(last,m.index),regexp=isSearch?m[4]:m[4]||("*"==m[1]?".*":null),type=$$UMFP.type(regexp||"string")||inherit($$UMFP.type("string"),{pattern:new RegExp(regexp,config.caseInsensitive?"i":undefined)}),{id:id,regexp:regexp,segment:segment,type:type,cfg:cfg}}config=extend({params:{}},isObject(config)?config:{});var m,placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,compiled="^",last=0,segments=this.segments=[],parentParams=parentMatcher?parentMatcher.params:{},params=this.params=parentMatcher?parentMatcher.params.$$new():new $$UMFP.ParamSet,paramNames=[];this.source=pattern;for(var p,param,segment;(m=placeholder.exec(pattern))&&(p=matchDetails(m,!1),!(p.segment.indexOf("?")>=0));)param=addParameter(p.id,p.type,p.cfg,"path"),compiled+=quoteRegExp(p.segment,param.type.pattern.source,param.squash,param.isOptional),segments.push(p.segment),last=placeholder.lastIndex;segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);if(segment=segment.substring(0,i),this.sourcePath=pattern.substring(0,last+i),search.length>0)for(last=0;m=searchPlaceholder.exec(search);)p=matchDetails(m,!0),param=addParameter(p.id,p.type,p.cfg,"search"),last=placeholder.lastIndex}else this.sourcePath=pattern,this.sourceSearch="";compiled+=quoteRegExp(segment)+(config.strict===!1?"/?":"")+"$",segments.push(segment),this.regexp=new RegExp(compiled,config.caseInsensitive?"i":undefined),this.prefix=segments[0],this.$$paramNames=paramNames}function Type(config){extend(this,config)}function $UrlMatcherFactory(){function valToString(val){return null!=val?val.toString().replace(/\//g,"%2F"):val}function valFromString(val){return null!=val?val.toString().replace(/%2F/g,"/"):val}function getDefaultConfig(){return{strict:isStrictMode,caseInsensitive:isCaseInsensitive}}function isInjectable(value){return isFunction(value)||isArray(value)&&isFunction(value[value.length-1])}function flushTypeQueue(){for(;typeQueue.length;){var type=typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");angular.extend($types[type.name],injector.invoke(type.def))}}function ParamSet(params){extend(this,params||{})}$$UMFP=this;var injector,isCaseInsensitive=!1,isStrictMode=!0,defaultSquashPolicy=!1,$types={},enqueue=!0,typeQueue=[],defaultTypes={string:{encode:valToString,decode:valFromString,is:function(val){return null==val||!isDefined(val)||"string"==typeof val},pattern:/[^/]*/},"int":{encode:valToString,decode:function(val){return parseInt(val,10)},is:function(val){return isDefined(val)&&this.decode(val.toString())===val},pattern:/\d+/},bool:{encode:function(val){return val?1:0},decode:function(val){return 0!==parseInt(val,10)},is:function(val){return val===!0||val===!1},pattern:/0|1/},date:{encode:function(val){return this.is(val)?[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-"):undefined},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:angular.toJson,decode:angular.fromJson,is:angular.isObject,equals:angular.equals,pattern:/[^/]*/},any:{encode:angular.identity,decode:angular.identity,equals:angular.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(config){if(!isInjectable(config.value))return config.value;if(!injector)throw new Error("Injectable functions cannot be called at configuration time");return injector.invoke(config.value)},this.caseInsensitive=function(value){return isDefined(value)&&(isCaseInsensitive=value),isCaseInsensitive},this.strictMode=function(value){return isDefined(value)&&(isStrictMode=value),isStrictMode},this.defaultSquashPolicy=function(value){if(!isDefined(value))return defaultSquashPolicy;if(value!==!0&&value!==!1&&!isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return defaultSquashPolicy=value,value},this.compile=function(pattern,config){return new UrlMatcher(pattern,extend(getDefaultConfig(),config))},this.isMatcher=function(o){if(!isObject(o))return!1;var result=!0;return forEach(UrlMatcher.prototype,function(val,name){isFunction(val)&&(result=result&&isDefined(o[name])&&isFunction(o[name]))}),result},this.type=function(name,definition,definitionFn){if(!isDefined(definition))return $types[name];if($types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");return $types[name]=new Type(extend({name:name},definition)),definitionFn&&(typeQueue.push({name:name,def:definitionFn}),enqueue||flushTypeQueue()),this},forEach(defaultTypes,function(type,name){$types[name]=new Type(extend({name:name},type))}),$types=inherit($types,{}),this.$get=["$injector",function($injector){return injector=$injector,enqueue=!1,flushTypeQueue(),forEach(defaultTypes,function(type,name){$types[name]||($types[name]=new Type(type))}),this}],this.Param=function(id,type,config,location){function unwrapShorthand(config){var keys=isObject(config)?objectKeys(config):[],isShorthand=-1===indexOf(keys,"value")&&-1===indexOf(keys,"type")&&-1===indexOf(keys,"squash")&&-1===indexOf(keys,"array");return isShorthand&&(config={value:config}),config.$$fn=isInjectable(config.value)?config.value:function(){return config.value},config}function getType(config,urlType,location){if(config.type&&urlType)throw new Error("Param '"+id+"' has two type configurations.");return urlType?urlType:config.type?config.type instanceof Type?config.type:new Type(config.type):"config"===location?$types.any:$types.string}function getArrayMode(){var arrayDefaults={array:"search"===location?"auto":!1},arrayParamNomenclature=id.match(/\[\]$/)?{array:!0}:{};return extend(arrayDefaults,arrayParamNomenclature,config).array}function getSquashPolicy(config,isOptional){var squash=config.squash;if(!isOptional||squash===!1)return!1;if(!isDefined(squash)||null==squash)return defaultSquashPolicy;if(squash===!0||isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];return replace=isArray(config.replace)?config.replace:[],isString(squash)&&replace.push({from:squash,to:undefined}),configuredKeys=map(replace,function(item){return item.from}),filter(defaultPolicy,function(item){return-1===indexOf(configuredKeys,item.from)}).concat(replace)}function $$getDefaultValue(){if(!injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=injector.invoke(config.$$fn);if(null!==defaultValue&&defaultValue!==undefined&&!self.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+self.id+"' is not an instance of Type ("+self.type.name+")");return defaultValue}function $value(value){function hasReplaceVal(val){return function(obj){return obj.from===val}}function $replace(value){var replacement=map(filter(self.replace,hasReplaceVal(value)),function(obj){return obj.to});return replacement.length?replacement[0]:value}return value=$replace(value),isDefined(value)?self.type.$normalize(value):$$getDefaultValue()}function toString(){return"{Param:"+id+" "+type+" squash: '"+squash+"' optional: "+isOptional+"}"}var self=this;config=unwrapShorthand(config),type=getType(config,type,location);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,"search"===location):type,"string"!==type.name||arrayMode||"path"!==location||config.value!==undefined||(config.value="");var isOptional=config.value!==undefined,squash=getSquashPolicy(config,isOptional),replace=getReplace(config,arrayMode,isOptional,squash);extend(this,{id:id,type:type,location:location,array:arrayMode,squash:squash,replace:replace,isOptional:isOptional,value:$value,dynamic:undefined,config:config,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,extend(new ParamSet,{$$parent:this}))},$$keys:function(){for(var keys=[],chain=[],parent=this,ignore=objectKeys(ParamSet.prototype);parent;)chain.push(parent),parent=parent.$$parent;return chain.reverse(),forEach(chain,function(paramset){forEach(objectKeys(paramset),function(key){-1===indexOf(keys,key)&&-1===indexOf(ignore,key)&&keys.push(key)})}),keys},$$values:function(paramValues){var values={},self=this;return forEach(self.$$keys(),function(key){values[key]=self[key].value(paramValues&&paramValues[key])}),values},$$equals:function(paramValues1,paramValues2){var equal=!0,self=this;return forEach(self.$$keys(),function(key){var left=paramValues1&&paramValues1[key],right=paramValues2&&paramValues2[key];self[key].type.equals(left,right)||(equal=!1)}),equal},$$validates:function(paramValues){var i,param,rawVal,normalized,encoded,keys=this.$$keys();for(i=0;i<keys.length&&(param=this[keys[i]],rawVal=paramValues[keys[i]],rawVal!==undefined&&null!==rawVal||!param.isOptional);i++){if(normalized=param.type.$normalize(rawVal),!param.type.is(normalized))return!1;if(encoded=param.type.encode(normalized),angular.isString(encoded)&&!param.type.pattern.exec(encoded))return!1}return!0},$$parent:undefined},this.ParamSet=ParamSet}function $UrlRouterProvider($locationProvider,$urlMatcherFactory){function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return null!=prefix?prefix[1].replace(/\\(.)/g,"$1"):""}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match["$"===what?0:Number(what)]})}function handleIfMatch($injector,handler,match){if(!match)return!1;var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:!0}function $get($location,$rootScope,$injector,$browser){function appendBasePath(url,isHtml5,absolute){return"/"===baseHref?url:isHtml5?baseHref.slice(0,-1)+url:absolute?baseHref.slice(1)+url:url}function update(evt){function check(rule){var handled=rule($injector,$location);return handled?(isString(handled)&&$location.replace().url(handled),!0):!1}if(!evt||!evt.defaultPrevented){lastPushedUrl&&$location.url()===lastPushedUrl;lastPushedUrl=undefined;var i,n=rules.length;for(i=0;n>i;i++)if(check(rules[i]))return;otherwise&&check(otherwise)}}function listen(){return listener=listener||$rootScope.$on("$locationChangeSuccess",update)}var lastPushedUrl,baseHref=$browser.baseHref(),location=$location.url();return interceptDeferred||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(read){return read?void(location=$location.url()):void($location.url()!==location&&($location.url(location),$location.replace()))},push:function(urlMatcher,params,options){var url=urlMatcher.format(params||{});null!==url&&params&&params["#"]&&(url+="#"+params["#"]),$location.url(url),lastPushedUrl=options&&options.$$avoidResync?$location.url():undefined,options&&options.replace&&$location.replace();
},href:function(urlMatcher,params,options){if(!urlMatcher.validates(params))return null;var isHtml5=$locationProvider.html5Mode();angular.isObject(isHtml5)&&(isHtml5=isHtml5.enabled);var url=urlMatcher.format(params);if(options=options||{},isHtml5||null===url||(url="#"+$locationProvider.hashPrefix()+url),null!==url&&params&&params["#"]&&(url+="#"+params["#"]),url=appendBasePath(url,isHtml5,options.absolute),!options.absolute||!url)return url;var slash=!isHtml5&&url?"/":"",port=$location.port();return port=80===port||443===port?"":":"+port,[$location.protocol(),"://",$location.host(),port,slash,url].join("")}}}var listener,rules=[],otherwise=null,interceptDeferred=!1;this.rule=function(rule){if(!isFunction(rule))throw new Error("'rule' must be a function");return rules.push(rule),this},this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect}}else if(!isFunction(rule))throw new Error("'rule' must be a function");return otherwise=rule,this},this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)&&(what=$urlMatcherFactory.compile(what)),!handlerIsString&&!isFunction(handler)&&!isArray(handler))throw new Error("invalid 'handler' in when()");var strategies={matcher:function(what,handler){return handlerIsString&&(redirect=$urlMatcherFactory.compile(handler),handler=["$match",function($match){return redirect.format($match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()))},{prefix:isString(what.prefix)?what.prefix:""})},regex:function(what,handler){if(what.global||what.sticky)throw new Error("when() RegExp must not be global or sticky");return handlerIsString&&(redirect=handler,handler=["$match",function($match){return interpolate(redirect,$match)}]),extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()))},{prefix:regExpPrefix(what)})}},check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check)if(check[n])return this.rule(strategies[n](what,handler));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(defer){defer===undefined&&(defer=!0),interceptDeferred=defer},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser"]}function $StateProvider($urlRouterProvider,$urlMatcherFactory){function isRelative(stateName){return 0===stateName.indexOf(".")||0===stateName.indexOf("^")}function findState(stateOrName,base){if(!stateOrName)return undefined;var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base)throw new Error("No reference point given for path '"+name+"'");base=findState(base);for(var rel=name.split("."),i=0,pathLength=rel.length,current=base;pathLength>i;i++)if(""!==rel[i]||0!==i){if("^"!==rel[i])break;if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");current=current.parent}else current=base;rel=rel.slice(i).join("."),name=current.name+(current.name&&rel?".":"")+rel}var state=states[name];return!state||!isStr&&(isStr||state!==stateOrName&&state.self!==stateOrName)?undefined:state}function queueState(parentName,state){queue[parentName]||(queue[parentName]=[]),queue[parentName].push(state)}function flushQueuedChildren(parentName){for(var queued=queue[parentName]||[];queued.length;)registerState(queued.shift())}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0)throw new Error("State must have a valid name");if(states.hasOwnProperty(name))throw new Error("State '"+name+"'' is already defined");var parentName=-1!==name.indexOf(".")?name.substring(0,name.lastIndexOf(".")):isString(state.parent)?state.parent:isObject(state.parent)&&isString(state.parent.name)?state.parent.name:"";if(parentName&&!states[parentName])return queueState(parentName,state.self);for(var key in stateBuilder)isFunction(stateBuilder[key])&&(state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]));return states[name]=state,!state[abstractKey]&&state.url&&$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){$state.$current.navigable==state&&equalForKeys($match,$stateParams)||$state.transitionTo(state,$match,{inherit:!0,location:!1})}]),flushQueuedChildren(name),state}function isGlob(text){return text.indexOf("*")>-1}function doesStateMatchGlob(glob){for(var globSegments=glob.split("."),segments=$state.$current.name.split("."),i=0,l=globSegments.length;l>i;i++)"*"===globSegments[i]&&(segments[i]="*");return"**"===globSegments[0]&&(segments=segments.slice(indexOf(segments,globSegments[1])),segments.unshift("**")),"**"===globSegments[globSegments.length-1]&&(segments.splice(indexOf(segments,globSegments[globSegments.length-2])+1,Number.MAX_VALUE),segments.push("**")),globSegments.length!=segments.length?!1:segments.join("")===globSegments.join("")}function decorator(name,func){return isString(name)&&!isDefined(func)?stateBuilder[name]:isFunction(func)&&isString(name)?(stateBuilder[name]&&!stateBuilder.$delegates[name]&&(stateBuilder.$delegates[name]=stateBuilder[name]),stateBuilder[name]=func,this):this}function state(name,definition){return isObject(name)?definition=name:definition.name=name,registerState(definition),this}function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$urlRouter,$location,$urlMatcherFactory){function handleRedirect(redirect,state,params,options){var evt=$rootScope.$broadcast("$stateNotFound",redirect,state,params);if(evt.defaultPrevented)return $urlRouter.update(),TransitionAborted;if(!evt.retry)return null;if(options.$retry)return $urlRouter.update(),TransitionFailed;var retryTransition=$state.transition=$q.when(evt.retry);return retryTransition.then(function(){return retryTransition!==$state.transition?TransitionSuperseded:(redirect.options.$retry=!0,$state.transitionTo(redirect.to,redirect.toParams,redirect.options))},function(){return TransitionAborted}),$urlRouter.update(),retryTransition}function resolveState(state,params,paramsAreFiltered,inherited,dst,options){function resolveViews(){var viewsPromises=[];return forEach(state.views,function(view,name){var injectables=view.resolve&&view.resolve!==state.resolve?view.resolve:{};injectables.$template=[function(){return $view.load(name,{view:view,locals:dst.globals,params:$stateParams,notify:options.notify})||""}],viewsPromises.push($resolve.resolve(injectables,dst.globals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,dst.globals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals)}else result.$$controller=view.controller;result.$$state=state,result.$$controllerAs=view.controllerAs,dst[name]=result}))}),$q.all(viewsPromises).then(function(){return dst.globals})}var $stateParams=paramsAreFiltered?params:filterByKeys(state.params.$$keys(),params),locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals})];return inherited&&promises.push(inherited),$q.all(promises).then(resolveViews).then(function(values){return dst})}var TransitionSuperseded=$q.reject(new Error("transition superseded")),TransitionPrevented=$q.reject(new Error("transition prevented")),TransitionAborted=$q.reject(new Error("transition aborted")),TransitionFailed=$q.reject(new Error("transition failed"));return root.locals={resolve:null,globals:{$stateParams:{}}},$state={params:{},current:root.self,$current:root,transition:null},$state.reload=function(state){return $state.transitionTo($state.current,$stateParams,{reload:state||!0,inherit:!1,notify:!0})},$state.go=function(to,params,options){return $state.transitionTo(to,params,extend({inherit:!0,relative:$state.$current},options))},$state.transitionTo=function(to,toParams,options){toParams=toParams||{},options=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},options||{});var evt,from=$state.$current,fromParams=$state.params,fromPath=from.path,toState=findState(to,options.relative),hash=toParams["#"];if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options},redirectResult=handleRedirect(redirect,from.self,fromParams,options);if(redirectResult)return redirectResult;if(to=redirect.to,toParams=redirect.toParams,options=redirect.options,toState=findState(to,options.relative),!isDefined(toState)){if(!options.relative)throw new Error("No such state '"+to+"'");throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'")}}if(toState[abstractKey])throw new Error("Cannot transition to abstract state '"+to+"'");if(options.inherit&&(toParams=inheritParams($stateParams,toParams||{},$state.$current,toState)),!toState.params.$$validates(toParams))return TransitionFailed;toParams=toState.params.$$values(toParams),to=toState;var toPath=to.path,keep=0,state=toPath[keep],locals=root.locals,toLocals=[];if(options.reload){if(isString(options.reload)||isObject(options.reload)){if(isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reloadState=options.reload===!0?fromPath[0]:findState(options.reload);if(options.reload&&!reloadState)throw new Error("No such reload state '"+(isString(options.reload)?options.reload:options.reload.name)+"'");for(;state&&state===fromPath[keep]&&state!==reloadState;)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep]}}else for(;state&&state===fromPath[keep]&&state.ownParams.$$equals(toParams,fromParams);)locals=toLocals[keep]=state.locals,keep++,state=toPath[keep];if(shouldSkipReload(to,toParams,from,fromParams,locals,options))return hash&&(toParams["#"]=hash),$state.params=toParams,copy($state.params,$stateParams),options.location&&to.navigable&&to.navigable.url&&($urlRouter.push(to.navigable.url,toParams,{$$avoidResync:!0,replace:"replace"===options.location}),$urlRouter.update(!0)),$state.transition=null,$q.when($state.current);if(toParams=filterByKeys(to.params.$$keys(),toParams||{}),options.notify&&$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams).defaultPrevented)return $rootScope.$broadcast("$stateChangeCancel",to.self,toParams,from.self,fromParams),$urlRouter.update(),TransitionPrevented;for(var resolved=$q.when(locals),l=keep;l<toPath.length;l++,state=toPath[l])locals=toLocals[l]=inherit(locals),resolved=resolveState(state,toParams,state===to,resolved,locals,options);var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition)return TransitionSuperseded;for(l=fromPath.length-1;l>=keep;l--)exiting=fromPath[l],exiting.self.onExit&&$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals),exiting.locals=null;for(l=keep;l<toPath.length;l++)entering=toPath[l],entering.locals=toLocals[l],entering.self.onEnter&&$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);return hash&&(toParams["#"]=hash),$state.transition!==transition?TransitionSuperseded:($state.$current=to,$state.current=to.self,$state.params=toParams,copy($state.params,$stateParams),$state.transition=null,options.location&&to.navigable&&$urlRouter.push(to.navigable.url,to.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===options.location}),options.notify&&$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams),$urlRouter.update(!0),$state.current)},function(error){return $state.transition!==transition?TransitionSuperseded:($state.transition=null,evt=$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error),evt.defaultPrevented||$urlRouter.update(),$q.reject(error))});return transition},$state.is=function(stateOrName,params,options){options=extend({relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);return isDefined(state)?$state.$current!==state?!1:params?equalForKeys(state.params.$$values(params),$stateParams):!0:undefined},$state.includes=function(stateOrName,params,options){if(options=extend({relative:$state.$current},options||{}),isString(stateOrName)&&isGlob(stateOrName)){if(!doesStateMatchGlob(stateOrName))return!1;stateOrName=$state.$current.name}var state=findState(stateOrName,options.relative);return isDefined(state)?isDefined($state.$current.includes[state.name])?params?equalForKeys(state.params.$$values(params),$stateParams,objectKeys(params)):!0:!1:undefined},$state.href=function(stateOrName,params,options){options=extend({lossy:!0,inherit:!0,absolute:!1,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state))return null;options.inherit&&(params=inheritParams($stateParams,params||{},$state.$current,state));var nav=state&&options.lossy?state.navigable:state;return nav&&nav.url!==undefined&&null!==nav.url?$urlRouter.href(nav.url,filterByKeys(state.params.$$keys().concat("#"),params||{}),{absolute:options.absolute}):null},$state.get=function(stateOrName,context){if(0===arguments.length)return map(objectKeys(states),function(name){return states[name].self});var state=findState(stateOrName,context||$state.$current);return state&&state.self?state.self:null},$state}function shouldSkipReload(to,toParams,from,fromParams,locals,options){function nonSearchParamsEqual(fromAndToState,fromParams,toParams){function notSearchParam(key){return"search"!=fromAndToState.params[key].location}var nonQueryParamKeys=fromAndToState.params.$$keys().filter(notSearchParam),nonQueryParams=pick.apply({},[fromAndToState.params].concat(nonQueryParamKeys)),nonQueryParamSet=new $$UMFP.ParamSet(nonQueryParams);return nonQueryParamSet.$$equals(fromParams,toParams)}return!options.reload&&to===from&&(locals===from.locals||to.self.reloadOnSearch===!1&&nonSearchParamsEqual(from,fromParams,toParams))?!0:void 0}var root,$state,states={},queue={},abstractKey="abstract",stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent)return findState(state.parent);var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root},data:function(state){return state.parent&&state.parent.data&&(state.data=state.self.data=extend({},state.parent.data,state.data)),state.data},url:function(state){var url=state.url,config={params:state.params||{}};if(isString(url))return"^"==url.charAt(0)?$urlMatcherFactory.compile(url.substring(1),config):(state.parent.navigable||root).url.concat(url,config);if(!url||$urlMatcherFactory.isMatcher(url))return url;throw new Error("Invalid url '"+url+"' in state '"+state+"'")},navigable:function(state){return state.url?state:state.parent?state.parent.navigable:null},ownParams:function(state){var params=state.url&&state.url.params||new $$UMFP.ParamSet;return forEach(state.params||{},function(config,id){params[id]||(params[id]=new $$UMFP.Param(id,null,config,"config"))}),params},params:function(state){return state.parent&&state.parent.params?extend(state.parent.params.$$new(),state.ownParams):new $$UMFP.ParamSet},views:function(state){var views={};return forEach(isDefined(state.views)?state.views:{"":state},function(view,name){name.indexOf("@")<0&&(name+="@"+state.parent.name),views[name]=view}),views},path:function(state){return state.parent?state.parent.path.concat(state):[]},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};return includes[state.name]=!0,includes},$delegates:{}};root=registerState({name:"",url:"^",views:null,"abstract":!0}),root.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get($rootScope,$templateFactory){return{load:function(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return options=extend(defaults,options),options.view&&(result=$templateFactory.fromConfig(options.view,options.params,options.locals)),result&&options.notify&&$rootScope.$broadcast("$viewContentLoading",options),result}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var useAnchorScroll=!1;this.useAnchorScroll=function(){useAnchorScroll=!0},this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){return useAnchorScroll?$anchorScroll:function($element){return $timeout(function(){$element[0].scrollIntoView()},0,!1)}}]}function $ViewDirective($state,$injector,$uiViewScroll,$interpolate){function getService(){return $injector.has?function(service){return $injector.has(service)?$injector.get(service):null}:function(service){try{return $injector.get(service)}catch(e){return null}}}function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element),cb()},leave:function(element,cb){element.remove(),cb()}}};if($animate)return{enter:function(element,target,cb){var promise=$animate.enter(element,null,target,cb);promise&&promise.then&&promise.then(cb)},leave:function(element,cb){var promise=$animate.leave(element,cb);promise&&promise.then&&promise.then(cb)}};if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target),cb()},leave:function(element,cb){animate.leave(element),cb()}}}return statics()}var service=getService(),$animator=service("$animator"),$animate=service("$animate"),directive={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){function cleanupLastView(){previousEl&&(previousEl.remove(),previousEl=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentEl&&(renderer.leave(currentEl,function(){previousEl=null}),previousEl=currentEl,currentEl=null)}function updateView(firstTime){var newScope,name=getUiViewName(scope,attrs,$element,$interpolate),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(firstTime||previousLocals!==latestLocals){newScope=scope.$new(),latestLocals=$state.$current.locals[name];var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function(){currentScope&&currentScope.$emit("$viewContentAnimationEnded"),(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp))&&$uiViewScroll(clone)}),cleanupLastView()});currentEl=clone,currentScope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}}var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(!1)}),scope.$on("$viewContentLoading",function(){updateView(!1)}),updateView(!0)}}};return directive}function $ViewDirectiveFill($compile,$controller,$state,$interpolate){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var current=$state.$current,name=getUiViewName(scope,attrs,$element,$interpolate),locals=current&&current.locals[name];if(locals){$element.data("$uiView",{name:name,state:locals.$$state}),$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope,locals.$element=$element;var controller=$controller(locals.$$controller,locals);locals.$$controllerAs&&(scope[locals.$$controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}}}function getUiViewName(scope,attrs,element,$interpolate){var name=$interpolate(attrs.uiView||attrs.name||"")(scope),inherited=element.inheritedData("$uiView");return name.indexOf("@")>=0?name:name+"@"+(inherited?inherited.state.name:"")}function parseStateRef(ref,current){var parsed,preparsed=ref.match(/^\s*({[^}]*})\s*$/);if(preparsed&&(ref=current+"("+preparsed[1]+")"),parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!parsed||4!==parsed.length)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1],paramExpr:parsed[3]||null}}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");return stateData&&stateData.state&&stateData.state.name?stateData.state:void 0}function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref,$state.current.name),params=null,base=stateContext(element)||$state.$current,hrefKind="[object SVGAnimatedString]"===Object.prototype.toString.call(element.prop("href"))?"xlink:href":"href",newHref=null,isAnchor="A"===element.prop("tagName").toUpperCase(),isForm="FORM"===element[0].nodeName,attr=isForm?"action":hrefKind,nav=!0,options={relative:base,inherit:!0},optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){option in optionsOverride&&(options[option]=optionsOverride[option])});var update=function(newVal){if(newVal&&(params=angular.copy(newVal)),nav){newHref=$state.href(ref.state,params,options);var activeDirective=uiSrefActive[1]||uiSrefActive[0];return activeDirective&&activeDirective.$$addStateInfo(ref.state,params),null===newHref?(nav=!1,!1):void attrs.$set(attr,newHref)}};ref.paramExpr&&(scope.$watch(ref.paramExpr,function(newVal,oldVal){newVal!==params&&update(newVal)},!0),params=angular.copy(scope.$eval(ref.paramExpr))),update(),isForm||element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){var transition=$timeout(function(){$state.go(ref.state,params,options)});e.preventDefault();var ignorePreventDefaultCount=isAnchor&&!newHref?1:0;e.preventDefault=function(){ignorePreventDefaultCount--<=0&&$timeout.cancel(transition)}}})}}}function $StateRefActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){function update(){anyMatch()?$element.addClass(activeClass):$element.removeClass(activeClass)}function anyMatch(){for(var i=0;i<states.length;i++)if(isMatch(states[i].state,states[i].params))return!0;return!1}function isMatch(state,params){return"undefined"!=typeof $attrs.uiSrefActiveEq?$state.is(state.name,params):$state.includes(state.name,params)}var activeClass,states=[];activeClass=$interpolate($attrs.uiSrefActiveEq||$attrs.uiSrefActive||"",!1)($scope),this.$$addStateInfo=function(newState,newParams){var state=$state.get(newState,stateContext($element));states.push({state:state||{name:newState},params:newParams}),update()},$scope.$on("$stateChangeSuccess",update)}]}}function $IsStateFilter($state){var isFilter=function(state){return $state.is(state)};return isFilter.$stateful=!0,isFilter}function $IncludedByStateFilter($state){var includesFilter=function(state){return $state.includes(state)};return includesFilter.$stateful=!0,includesFilter}var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;angular.module("ui.router.util",["ng"]),angular.module("ui.router.router",["ui.router.util"]),angular.module("ui.router.state",["ui.router.router","ui.router.util"]),angular.module("ui.router",["ui.router.state"]),angular.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],angular.module("ui.router.util").service("$resolve",$Resolve),$TemplateFactory.$inject=["$http","$templateCache","$injector"],angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);var $$UMFP;UrlMatcher.prototype.concat=function(pattern,config){var defaultConfig={caseInsensitive:$$UMFP.caseInsensitive(),strict:$$UMFP.strictMode(),squash:$$UMFP.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch,extend(defaultConfig,config),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(path,searchParams){function decodePathArray(string){function reverseString(str){return str.split("").reverse().join("")}function unquoteDashes(str){return str.replace(/\\-/g,"-")}var split=reverseString(string).split(/-(?!\\)/),allReversed=map(split,reverseString);return map(allReversed,unquoteDashes).reverse()}var m=this.regexp.exec(path);if(!m)return null;searchParams=searchParams||{};var i,j,paramName,paramNames=this.parameters(),nTotal=paramNames.length,nPath=this.segments.length-1,values={};if(nPath!==m.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(i=0;nPath>i;i++){paramName=paramNames[i];var param=this.params[paramName],paramVal=m[i+1];for(j=0;j<param.replace;j++)param.replace[j].from===paramVal&&(paramVal=param.replace[j].to);paramVal&&param.array===!0&&(paramVal=decodePathArray(paramVal)),values[paramName]=param.value(paramVal)}for(;nTotal>i;i++)paramName=paramNames[i],values[paramName]=this.params[paramName].value(searchParams[paramName]);return values},UrlMatcher.prototype.parameters=function(param){return isDefined(param)?this.params[param]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(params){return this.params.$$validates(params)},UrlMatcher.prototype.format=function(values){function encodeDashes(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})}values=values||{};var segments=this.segments,params=this.parameters(),paramset=this.params;if(!this.validates(values))return null;var i,search=!1,nPath=segments.length-1,nTotal=params.length,result=segments[0];for(i=0;nTotal>i;i++){var isPathParam=nPath>i,name=params[i],param=paramset[name],value=param.value(values[name]),isDefaultValue=param.isOptional&&param.type.equals(param.value(),value),squash=isDefaultValue?param.squash:!1,encoded=param.type.encode(value);if(isPathParam){var nextSegment=segments[i+1];if(squash===!1)null!=encoded&&(result+=isArray(encoded)?map(encoded,encodeDashes).join("-"):encodeURIComponent(encoded)),result+=nextSegment;else if(squash===!0){var capture=result.match(/\/$/)?/\/?(.*)/:/(.*)/;result+=nextSegment.match(capture)[1]}else isString(squash)&&(result+=squash+nextSegment)}else{if(null==encoded||isDefaultValue&&squash!==!1)continue;isArray(encoded)||(encoded=[encoded]),encoded=map(encoded,encodeURIComponent).join("&"+name+"="),result+=(search?"&":"?")+(name+"="+encoded),search=!0}}return result},Type.prototype.is=function(val,key){return!0},Type.prototype.encode=function(val,key){return val},Type.prototype.decode=function(val,key){return val},Type.prototype.equals=function(a,b){return a==b},Type.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)},Type.prototype.$asArray=function(mode,isSearch){function ArrayType(type,mode){function bindTo(type,callbackName){return function(){return type[callbackName].apply(type,arguments)}}function arrayWrap(val){return isArray(val)?val:isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return"auto"===mode?val[0]:val;default:return val}}function falsey(val){return!val}function arrayHandler(callback,allTruthyMode){return function(val){val=arrayWrap(val);var result=map(val,callback);return allTruthyMode===!0?0===filter(result,falsey).length:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return!1;for(var i=0;i<left.length;i++)if(!callback(left[i],right[i]))return!1;return!0}}this.encode=arrayHandler(bindTo(type,"encode")),this.decode=arrayHandler(bindTo(type,"decode")),this.is=arrayHandler(bindTo(type,"is"),!0),this.equals=arrayEqualsHandler(bindTo(type,"equals")),this.pattern=type.pattern,this.$normalize=arrayHandler(bindTo(type,"$normalize")),this.name=type.name,this.$arrayMode=mode}if(!mode)return this;if("auto"===mode&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)},angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),angular.module("ui.router.util").run(["$urlMatcherFactory",function($urlMatcherFactory){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider),$ViewProvider.$inject=[],angular.module("ui.router.state").provider("$view",$ViewProvider),angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],angular.module("ui.router.state").directive("uiView",$ViewDirective),angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.less=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var addDataAttr=require("./utils").addDataAttr,browser=require("./browser");module.exports=function(window,options){addDataAttr(options,browser.currentScript(window)),void 0===options.isFileProtocol&&(options.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(window.location.protocol)),options.async=options.async||!1,options.fileAsync=options.fileAsync||!1,options.poll=options.poll||(options.isFileProtocol?1e3:1500),options.env=options.env||("127.0.0.1"==window.location.hostname||"0.0.0.0"==window.location.hostname||"localhost"==window.location.hostname||window.location.port&&window.location.port.length>0||options.isFileProtocol?"development":"production");var dumpLineNumbers=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(window.location.hash);dumpLineNumbers&&(options.dumpLineNumbers=dumpLineNumbers[1]),void 0===options.useFileCache&&(options.useFileCache=!0),void 0===options.onReady&&(options.onReady=!0)}},{"./browser":3,"./utils":9}],2:[function(require,module,exports){require("promise/polyfill.js");
var options=window.less||{};require("./add-default-options")(window,options);var less=module.exports=require("./index")(window,options);window.less=less,options.onReady&&(/!watch/.test(window.location.hash)&&less.watch(),less.registerStylesheetsImmediately(),less.pageLoadFinished=less.refresh("development"===less.env))},{"./add-default-options":1,"./index":7,"promise/polyfill.js":94}],3:[function(require,module,exports){var utils=require("./utils");module.exports={createCSS:function(document,styles,sheet){var href=sheet.href||"",id="less:"+(sheet.title||utils.extractId(href)),oldStyleNode=document.getElementById(id),keepOldStyleNode=!1,styleNode=document.createElement("style");styleNode.setAttribute("type","text/css"),sheet.media&&styleNode.setAttribute("media",sheet.media),styleNode.id=id,styleNode.styleSheet||(styleNode.appendChild(document.createTextNode(styles)),keepOldStyleNode=null!==oldStyleNode&&oldStyleNode.childNodes.length>0&&styleNode.childNodes.length>0&&oldStyleNode.firstChild.nodeValue===styleNode.firstChild.nodeValue);var head=document.getElementsByTagName("head")[0];if(null===oldStyleNode||keepOldStyleNode===!1){var nextEl=sheet&&sheet.nextSibling||null;nextEl?nextEl.parentNode.insertBefore(styleNode,nextEl):head.appendChild(styleNode)}if(oldStyleNode&&keepOldStyleNode===!1&&oldStyleNode.parentNode.removeChild(oldStyleNode),styleNode.styleSheet)try{styleNode.styleSheet.cssText=styles}catch(e){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(window){var document=window.document;return document.currentScript||function(){var scripts=document.getElementsByTagName("script");return scripts[scripts.length-1]}()}}},{"./utils":9}],4:[function(require,module,exports){module.exports=function(window,options,logger){var cache=null;if("development"!==options.env)try{cache="undefined"==typeof window.localStorage?null:window.localStorage}catch(_){}return{setCSS:function(path,lastModified,styles){if(cache){logger.info("saving "+path+" to cache.");try{cache.setItem(path,styles),cache.setItem(path+":timestamp",lastModified)}catch(e){logger.error('failed to save "'+path+'" to local storage for caching.')}}},getCSS:function(path,webInfo){var css=cache&&cache.getItem(path),timestamp=cache&&cache.getItem(path+":timestamp");return timestamp&&webInfo.lastModified&&new Date(webInfo.lastModified).valueOf()===new Date(timestamp).valueOf()?css:void 0}}}},{}],5:[function(require,module,exports){var utils=require("./utils"),browser=require("./browser");module.exports=function(window,less,options){function errorHTML(e,rootHref){var timer,content,id="less-error-message:"+utils.extractId(rootHref||""),template='<li><label>{line}</label><pre class="{class}">{content}</pre></li>',elem=window.document.createElement("div"),errors=[],filename=e.filename||rootHref,filenameNoPath=filename.match(/([^\/]+(\?.*)?)$/)[1];elem.id=id,elem.className="less-error-message",content="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+'</h3><p>in <a href="'+filename+'">'+filenameNoPath+"</a> ";var errorline=function(e,i,classname){void 0!==e.extract[i]&&errors.push(template.replace(/\{line\}/,(parseInt(e.line,10)||0)+(i-1)).replace(/\{class\}/,classname).replace(/\{content\}/,e.extract[i]))};e.extract&&(errorline(e,0,""),errorline(e,1,"line"),errorline(e,2,""),content+="on line "+e.line+", column "+(e.column+1)+":</p><ul>"+errors.join("")+"</ul>"),e.stack&&(e.extract||options.logLevel>=4)&&(content+="<br/>Stack Trace</br />"+e.stack.split("\n").slice(1).join("<br/>")),elem.innerHTML=content,browser.createCSS(window.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),elem.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===options.env&&(timer=setInterval(function(){var document=window.document,body=document.body;body&&(document.getElementById(id)?body.replaceChild(elem,document.getElementById(id)):body.insertBefore(elem,body.firstChild),clearInterval(timer))},10))}function error(e,rootHref){options.errorReporting&&"html"!==options.errorReporting?"console"===options.errorReporting?errorConsole(e,rootHref):"function"==typeof options.errorReporting&&options.errorReporting("add",e,rootHref):errorHTML(e,rootHref)}function removeErrorHTML(path){var node=window.document.getElementById("less-error-message:"+utils.extractId(path));node&&node.parentNode.removeChild(node)}function removeErrorConsole(path){}function removeError(path){options.errorReporting&&"html"!==options.errorReporting?"console"===options.errorReporting?removeErrorConsole(path):"function"==typeof options.errorReporting&&options.errorReporting("remove",path):removeErrorHTML(path)}function errorConsole(e,rootHref){var template="{line} {content}",filename=e.filename||rootHref,errors=[],content=(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+" in "+filename+" ",errorline=function(e,i,classname){void 0!==e.extract[i]&&errors.push(template.replace(/\{line\}/,(parseInt(e.line,10)||0)+(i-1)).replace(/\{class\}/,classname).replace(/\{content\}/,e.extract[i]))};e.extract&&(errorline(e,0,""),errorline(e,1,"line"),errorline(e,2,""),content+="on line "+e.line+", column "+(e.column+1)+":\n"+errors.join("\n")),e.stack&&(e.extract||options.logLevel>=4)&&(content+="\nStack Trace\n"+e.stack),less.logger.error(content)}return{add:error,remove:removeError}}},{"./browser":3,"./utils":9}],6:[function(require,module,exports){module.exports=function(options,logger){function getXMLHttpRequest(){if(window.XMLHttpRequest&&!("file:"===window.location.protocol&&"ActiveXObject"in window))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return logger.error("browser doesn't support AJAX."),null}}var AbstractFileManager=require("../less/environment/abstract-file-manager.js"),fileCache={},FileManager=function(){};return FileManager.prototype=new AbstractFileManager,FileManager.prototype.alwaysMakePathsAbsolute=function(){return!0},FileManager.prototype.join=function(basePath,laterPath){return basePath?this.extractUrlParts(laterPath,basePath).path:laterPath},FileManager.prototype.doXHR=function(url,type,callback,errback){function handleResponse(xhr,callback,errback){xhr.status>=200&&xhr.status<300?callback(xhr.responseText,xhr.getResponseHeader("Last-Modified")):"function"==typeof errback&&errback(xhr.status,url)}var xhr=getXMLHttpRequest(),async=options.isFileProtocol?options.fileAsync:options.async;"function"==typeof xhr.overrideMimeType&&xhr.overrideMimeType("text/css"),logger.debug("XHR: Getting '"+url+"'"),xhr.open("GET",url,async),xhr.setRequestHeader("Accept",type||"text/x-less, text/css; q=0.9, */*; q=0.5"),xhr.send(null),options.isFileProtocol&&!options.fileAsync?0===xhr.status||xhr.status>=200&&xhr.status<300?callback(xhr.responseText):errback(xhr.status,url):async?xhr.onreadystatechange=function(){4==xhr.readyState&&handleResponse(xhr,callback,errback)}:handleResponse(xhr,callback,errback)},FileManager.prototype.supports=function(filename,currentDirectory,options,environment){return!0},FileManager.prototype.clearFileCache=function(){fileCache={}},FileManager.prototype.loadFile=function(filename,currentDirectory,options,environment,callback){currentDirectory&&!this.isPathAbsolute(filename)&&(filename=currentDirectory+filename),options=options||{};var hrefParts=this.extractUrlParts(filename,window.location.href),href=hrefParts.url;if(options.useFileCache&&fileCache[href])try{var lessText=fileCache[href];callback(null,{contents:lessText,filename:href,webInfo:{lastModified:new Date}})}catch(e){callback({filename:href,message:"Error loading file "+href+" error was "+e.message})}else this.doXHR(href,options.mime,function(data,lastModified){fileCache[href]=data,callback(null,{contents:data,filename:href,webInfo:{lastModified:lastModified}})},function(status,url){callback({type:"File",message:"'"+url+"' wasn't found ("+status+")",href:href})})},FileManager}},{"../less/environment/abstract-file-manager.js":14}],7:[function(require,module,exports){var addDataAttr=require("./utils").addDataAttr,browser=require("./browser");module.exports=function(window,options){function postProcessCSS(styles){return options.postProcessor&&"function"==typeof options.postProcessor&&(styles=options.postProcessor.call(styles,styles)||styles),styles}function clone(obj){var cloned={};for(var prop in obj)obj.hasOwnProperty(prop)&&(cloned[prop]=obj[prop]);return cloned}function bind(func,thisArg){var curryArgs=Array.prototype.slice.call(arguments,2);return function(){var args=curryArgs.concat(Array.prototype.slice.call(arguments,0));return func.apply(thisArg,args)}}function loadStyles(modifyVars){for(var style,styles=document.getElementsByTagName("style"),i=0;i<styles.length;i++)if(style=styles[i],style.type.match(typePattern)){var instanceOptions=clone(options);instanceOptions.modifyVars=modifyVars;var lessText=style.innerHTML||"";instanceOptions.filename=document.location.href.replace(/#.*$/,""),less.render(lessText,instanceOptions,bind(function(style,e,result){e?errors.add(e,"inline"):(style.type="text/css",style.styleSheet?style.styleSheet.cssText=result.css:style.innerHTML=result.css)},null,style))}}function loadStyleSheet(sheet,callback,reload,remaining,modifyVars){function loadInitialFileCallback(loadedFile){var data=loadedFile.contents,path=loadedFile.filename,webInfo=loadedFile.webInfo,newFileInfo={currentDirectory:fileManager.getPath(path),filename:path,rootFilename:path,relativeUrls:instanceOptions.relativeUrls};if(newFileInfo.entryPath=newFileInfo.currentDirectory,newFileInfo.rootpath=instanceOptions.rootpath||newFileInfo.currentDirectory,webInfo&&(webInfo.remaining=remaining,!instanceOptions.modifyVars)){var css=cache.getCSS(path,webInfo);if(!reload&&css)return webInfo.local=!0,void callback(null,css,data,sheet,webInfo,path)}errors.remove(path),instanceOptions.rootFileInfo=newFileInfo,less.render(data,instanceOptions,function(e,result){e?(e.href=path,callback(e)):(result.css=postProcessCSS(result.css),instanceOptions.modifyVars||cache.setCSS(sheet.href,webInfo.lastModified,result.css),callback(null,result.css,data,sheet,webInfo,path))})}var instanceOptions=clone(options);addDataAttr(instanceOptions,sheet),instanceOptions.mime=sheet.type,modifyVars&&(instanceOptions.modifyVars=modifyVars),fileManager.loadFile(sheet.href,null,instanceOptions,environment,function(e,loadedFile){return e?void callback(e):void loadInitialFileCallback(loadedFile)})}function loadStyleSheets(callback,reload,modifyVars){for(var i=0;i<less.sheets.length;i++)loadStyleSheet(less.sheets[i],callback,reload,less.sheets.length-(i+1),modifyVars)}function initRunningMode(){"development"===less.env&&(less.watchTimer=setInterval(function(){less.watchMode&&(fileManager.clearFileCache(),loadStyleSheets(function(e,css,_,sheet,webInfo){e?errors.add(e,e.href||sheet.href):css&&browser.createCSS(window.document,css,sheet)}))},options.poll))}var document=window.document,less=require("../less")();less.options=options;var environment=less.environment,FileManager=require("./file-manager")(options,less.logger),fileManager=new FileManager;environment.addFileManager(fileManager),less.FileManager=FileManager,require("./log-listener")(less,options);var errors=require("./error-reporting")(window,less,options),cache=less.cache=options.cache||require("./cache")(window,options,less.logger);options.functions&&less.functions.functionRegistry.addMultiple(options.functions);var typePattern=/^text\/(x-)?less$/;return less.watch=function(){return less.watchMode||(less.env="development",initRunningMode()),this.watchMode=!0,!0},less.unwatch=function(){return clearInterval(less.watchTimer),this.watchMode=!1,!1},less.registerStylesheetsImmediately=function(){var links=document.getElementsByTagName("link");less.sheets=[];for(var i=0;i<links.length;i++)("stylesheet/less"===links[i].rel||links[i].rel.match(/stylesheet/)&&links[i].type.match(typePattern))&&less.sheets.push(links[i])},less.registerStylesheets=function(){return new Promise(function(resolve,reject){less.registerStylesheetsImmediately(),resolve()})},less.modifyVars=function(record){return less.refresh(!0,record,!1)},less.refresh=function(reload,modifyVars,clearFileCache){return(reload||clearFileCache)&&clearFileCache!==!1&&fileManager.clearFileCache(),new Promise(function(resolve,reject){var startTime,endTime,totalMilliseconds;startTime=endTime=new Date,loadStyleSheets(function(e,css,_,sheet,webInfo){return e?(errors.add(e,e.href||sheet.href),void reject(e)):(webInfo.local?less.logger.info("loading "+sheet.href+" from cache."):less.logger.info("rendered "+sheet.href+" successfully."),browser.createCSS(window.document,css,sheet),less.logger.info("css for "+sheet.href+" generated in "+(new Date-endTime)+"ms"),0===webInfo.remaining&&(totalMilliseconds=new Date-startTime,less.logger.info("less has finished. css generated in "+totalMilliseconds+"ms"),resolve({startTime:startTime,endTime:endTime,totalMilliseconds:totalMilliseconds,sheets:less.sheets.length})),void(endTime=new Date))},reload,modifyVars),loadStyles(modifyVars)})},less.refreshStyles=loadStyles,less}},{"../less":29,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./log-listener":8,"./utils":9}],8:[function(require,module,exports){module.exports=function(less,options){var logLevel_debug=4,logLevel_info=3,logLevel_warn=2,logLevel_error=1;options.logLevel="undefined"!=typeof options.logLevel?options.logLevel:"development"===options.env?logLevel_info:logLevel_error,options.loggers||(options.loggers=[{debug:function(msg){options.logLevel>=logLevel_debug&&console.log(msg)},info:function(msg){options.logLevel>=logLevel_info&&console.log(msg)},warn:function(msg){options.logLevel>=logLevel_warn&&console.warn(msg)},error:function(msg){options.logLevel>=logLevel_error&&console.error(msg)}}]);for(var i=0;i<options.loggers.length;i++)less.logger.addListener(options.loggers[i])}},{}],9:[function(require,module,exports){module.exports={extractId:function(href){return href.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(options,tag){for(var opt in tag.dataset)if(tag.dataset.hasOwnProperty(opt))if("env"===opt||"dumpLineNumbers"===opt||"rootpath"===opt||"errorReporting"===opt)options[opt]=tag.dataset[opt];else try{options[opt]=JSON.parse(tag.dataset[opt])}catch(_){}}}},{}],10:[function(require,module,exports){var contexts={};module.exports=contexts;var copyFromOriginal=function(original,destination,propertiesToCopy){if(original)for(var i=0;i<propertiesToCopy.length;i++)original.hasOwnProperty(propertiesToCopy[i])&&(destination[propertiesToCopy[i]]=original[propertiesToCopy[i]])},parseCopyProperties=["paths","relativeUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","reference","pluginManager"];contexts.Parse=function(options){copyFromOriginal(options,this,parseCopyProperties),"string"==typeof this.paths&&(this.paths=[this.paths])};var evalCopyProperties=["paths","compress","ieCompat","strictMath","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope"];contexts.Eval=function(options,frames){copyFromOriginal(options,this,evalCopyProperties),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=frames||[],this.importantScope=this.importantScope||[]},contexts.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},contexts.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},contexts.Eval.prototype.isMathOn=function(){return this.strictMath?this.parensStack&&this.parensStack.length:!0},contexts.Eval.prototype.isPathRelative=function(path){return!/^(?:[a-z-]+:|\/|#)/i.test(path)},contexts.Eval.prototype.normalizePath=function(path){var segment,segments=path.split("/").reverse();for(path=[];0!==segments.length;)switch(segment=segments.pop()){case".":break;case"..":0===path.length||".."===path[path.length-1]?path.push(segment):path.pop();break;default:path.push(segment)}return path.join("/")}},{}],11:[function(require,module,exports){module.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],12:[function(require,module,exports){module.exports={colors:require("./colors"),unitConversions:require("./unit-conversions")}},{"./colors":11,"./unit-conversions":13}],13:[function(require,module,exports){module.exports={length:{m:1,cm:.01,mm:.001,"in":.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],14:[function(require,module,exports){var abstractFileManager=function(){};abstractFileManager.prototype.getPath=function(filename){var j=filename.lastIndexOf("?");return j>0&&(filename=filename.slice(0,j)),j=filename.lastIndexOf("/"),0>j&&(j=filename.lastIndexOf("\\")),0>j?"":filename.slice(0,j+1)},abstractFileManager.prototype.tryAppendExtension=function(path,ext){return/(\.[a-z]*$)|([\?;].*)$/.test(path)?path:path+ext},abstractFileManager.prototype.tryAppendLessExtension=function(path){return this.tryAppendExtension(path,".less")},abstractFileManager.prototype.supportsSync=function(){return!1},abstractFileManager.prototype.alwaysMakePathsAbsolute=function(){return!1},abstractFileManager.prototype.isPathAbsolute=function(filename){return/^(?:[a-z-]+:|\/|\\|#)/i.test(filename)},abstractFileManager.prototype.join=function(basePath,laterPath){return basePath?basePath+laterPath:laterPath},abstractFileManager.prototype.pathDiff=function(url,baseUrl){var i,max,urlDirectories,baseUrlDirectories,urlParts=this.extractUrlParts(url),baseUrlParts=this.extractUrlParts(baseUrl),diff="";if(urlParts.hostPart!==baseUrlParts.hostPart)return"";for(max=Math.max(baseUrlParts.directories.length,urlParts.directories.length),i=0;max>i&&baseUrlParts.directories[i]===urlParts.directories[i];i++);for(baseUrlDirectories=baseUrlParts.directories.slice(i),urlDirectories=urlParts.directories.slice(i),i=0;i<baseUrlDirectories.length-1;i++)diff+="../";for(i=0;i<urlDirectories.length-1;i++)diff+=urlDirectories[i]+"/";return diff},abstractFileManager.prototype.extractUrlParts=function(url,baseUrl){var i,baseUrlParts,urlPartsRegex=/^((?:[a-z-]+:)?\/+?(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,urlParts=url.match(urlPartsRegex),returner={},directories=[];if(!urlParts)throw new Error("Could not parse sheet href - '"+url+"'");if(baseUrl&&(!urlParts[1]||urlParts[2])){if(baseUrlParts=baseUrl.match(urlPartsRegex),!baseUrlParts)throw new Error("Could not parse page url - '"+baseUrl+"'");urlParts[1]=urlParts[1]||baseUrlParts[1]||"",urlParts[2]||(urlParts[3]=baseUrlParts[3]+urlParts[3])}if(urlParts[3]){for(directories=urlParts[3].replace(/\\/g,"/").split("/"),i=0;i<directories.length;i++)"."===directories[i]&&(directories.splice(i,1),i-=1);for(i=0;i<directories.length;i++)".."===directories[i]&&i>0&&(directories.splice(i-1,2),i-=2)}return returner.hostPart=urlParts[1],returner.directories=directories,returner.path=(urlParts[1]||"")+directories.join("/"),returner.fileUrl=returner.path+(urlParts[4]||""),returner.url=returner.fileUrl+(urlParts[5]||""),returner},module.exports=abstractFileManager},{}],15:[function(require,module,exports){var logger=require("../logger"),environment=function(externalEnvironment,fileManagers){this.fileManagers=fileManagers||[],externalEnvironment=externalEnvironment||{};for(var optionalFunctions=["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"],requiredFunctions=[],functions=requiredFunctions.concat(optionalFunctions),i=0;i<functions.length;i++){var propName=functions[i],environmentFunc=externalEnvironment[propName];environmentFunc?this[propName]=environmentFunc.bind(externalEnvironment):i<requiredFunctions.length&&this.warn("missing required function in environment - "+propName)}};environment.prototype.getFileManager=function(filename,currentDirectory,options,environment,isSync){filename||logger.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==currentDirectory&&logger.warn("getFileManager called with null directory.. Please report this issue. continuing.");var fileManagers=this.fileManagers;options.pluginManager&&(fileManagers=[].concat(fileManagers).concat(options.pluginManager.getFileManagers()));for(var i=fileManagers.length-1;i>=0;i--){var fileManager=fileManagers[i];if(fileManager[isSync?"supportsSync":"supports"](filename,currentDirectory,options,environment))return fileManager}return null},environment.prototype.addFileManager=function(fileManager){this.fileManagers.push(fileManager)},environment.prototype.clearFileManagers=function(){this.fileManagers=[]},module.exports=environment},{"../logger":31}],16:[function(require,module,exports){function colorBlend(mode,color1,color2){var cb,cs,ar,cr,ab=color1.alpha,as=color2.alpha,r=[];ar=as+ab*(1-as);for(var i=0;3>i;i++)cb=color1.rgb[i]/255,cs=color2.rgb[i]/255,cr=mode(cb,cs),ar&&(cr=(as*cs+ab*(cb-as*(cb+cs-cr)))/ar),r[i]=255*cr;return new Color(r,ar)}var Color=require("../tree/color"),functionRegistry=require("./function-registry"),colorBlendModeFunctions={multiply:function(cb,cs){return cb*cs},screen:function(cb,cs){return cb+cs-cb*cs},overlay:function(cb,cs){return cb*=2,1>=cb?colorBlendModeFunctions.multiply(cb,cs):colorBlendModeFunctions.screen(cb-1,cs)},softlight:function(cb,cs){var d=1,e=cb;return cs>.5&&(e=1,d=cb>.25?Math.sqrt(cb):((16*cb-12)*cb+4)*cb),cb-(1-2*cs)*e*(d-cb)},hardlight:function(cb,cs){return colorBlendModeFunctions.overlay(cs,cb)},difference:function(cb,cs){return Math.abs(cb-cs)},exclusion:function(cb,cs){return cb+cs-2*cb*cs},average:function(cb,cs){return(cb+cs)/2},negation:function(cb,cs){return 1-Math.abs(cb+cs-1)}};for(var f in colorBlendModeFunctions)colorBlendModeFunctions.hasOwnProperty(f)&&(colorBlend[f]=colorBlend.bind(null,colorBlendModeFunctions[f]));functionRegistry.addMultiple(colorBlend)},{"../tree/color":48,"./function-registry":21}],17:[function(require,module,exports){function clamp(val){return Math.min(1,Math.max(0,val))}function hsla(color){return colorFunctions.hsla(color.h,color.s,color.l,color.a)}function number(n){if(n instanceof Dimension)return parseFloat(n.unit.is("%")?n.value/100:n.value);if("number"==typeof n)return n;throw{type:"Argument",message:"color functions take numbers as parameters"}}function scaled(n,size){return n instanceof Dimension&&n.unit.is("%")?parseFloat(n.value*size/100):number(n)}var colorFunctions,Dimension=require("../tree/dimension"),Color=require("../tree/color"),Quoted=require("../tree/quoted"),Anonymous=require("../tree/anonymous"),functionRegistry=require("./function-registry");colorFunctions={rgb:function(r,g,b){return colorFunctions.rgba(r,g,b,1)},rgba:function(r,g,b,a){var rgb=[r,g,b].map(function(c){return scaled(c,255)});return a=number(a),new Color(rgb,a)},hsl:function(h,s,l){return colorFunctions.hsla(h,s,l,1)},hsla:function(h,s,l,a){function hue(h){return h=0>h?h+1:h>1?h-1:h,1>6*h?m1+(m2-m1)*h*6:1>2*h?m2:2>3*h?m1+(m2-m1)*(2/3-h)*6:m1}h=number(h)%360/360,s=clamp(number(s)),l=clamp(number(l)),a=clamp(number(a));var m2=.5>=l?l*(s+1):l+s-l*s,m1=2*l-m2;return colorFunctions.rgba(255*hue(h+1/3),255*hue(h),255*hue(h-1/3),a)},hsv:function(h,s,v){return colorFunctions.hsva(h,s,v,1)},hsva:function(h,s,v,a){h=number(h)%360/360*360,s=number(s),v=number(v),a=number(a);var i,f;i=Math.floor(h/60%6),f=h/60-i;var vs=[v,v*(1-s),v*(1-f*s),v*(1-(1-f)*s)],perm=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return colorFunctions.rgba(255*vs[perm[i][0]],255*vs[perm[i][1]],255*vs[perm[i][2]],a)},hue:function(color){return new Dimension(color.toHSL().h)},saturation:function(color){return new Dimension(100*color.toHSL().s,"%")},lightness:function(color){return new Dimension(100*color.toHSL().l,"%")},hsvhue:function(color){return new Dimension(color.toHSV().h)},hsvsaturation:function(color){return new Dimension(100*color.toHSV().s,"%")},hsvvalue:function(color){return new Dimension(100*color.toHSV().v,"%")},red:function(color){return new Dimension(color.rgb[0])},green:function(color){return new Dimension(color.rgb[1])},blue:function(color){return new Dimension(color.rgb[2])},alpha:function(color){return new Dimension(color.toHSL().a)},luma:function(color){return new Dimension(color.luma()*color.alpha*100,"%")},luminance:function(color){var luminance=.2126*color.rgb[0]/255+.7152*color.rgb[1]/255+.0722*color.rgb[2]/255;return new Dimension(luminance*color.alpha*100,"%")},saturate:function(color,amount,method){if(!color.rgb)return null;var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.s+=hsl.s*amount.value/100:hsl.s+=amount.value/100,hsl.s=clamp(hsl.s),hsla(hsl)},desaturate:function(color,amount,method){var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.s-=hsl.s*amount.value/100:hsl.s-=amount.value/100,hsl.s=clamp(hsl.s),hsla(hsl)},lighten:function(color,amount,method){var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.l+=hsl.l*amount.value/100:hsl.l+=amount.value/100,hsl.l=clamp(hsl.l),hsla(hsl)},darken:function(color,amount,method){var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.l-=hsl.l*amount.value/100:hsl.l-=amount.value/100,hsl.l=clamp(hsl.l),hsla(hsl)},fadein:function(color,amount,method){var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.a+=hsl.a*amount.value/100:hsl.a+=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},fadeout:function(color,amount,method){var hsl=color.toHSL();return"undefined"!=typeof method&&"relative"===method.value?hsl.a-=hsl.a*amount.value/100:hsl.a-=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},fade:function(color,amount){var hsl=color.toHSL();return hsl.a=amount.value/100,hsl.a=clamp(hsl.a),hsla(hsl)},spin:function(color,amount){var hsl=color.toHSL(),hue=(hsl.h+amount.value)%360;return hsl.h=0>hue?360+hue:hue,hsla(hsl)},mix:function(color1,color2,weight){color1.toHSL&&color2.toHSL||(console.log(color2.type),console.dir(color2)),weight||(weight=new Dimension(50));var p=weight.value/100,w=2*p-1,a=color1.toHSL().a-color2.toHSL().a,w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2,w2=1-w1,rgb=[color1.rgb[0]*w1+color2.rgb[0]*w2,color1.rgb[1]*w1+color2.rgb[1]*w2,color1.rgb[2]*w1+color2.rgb[2]*w2],alpha=color1.alpha*p+color2.alpha*(1-p);return new Color(rgb,alpha)},greyscale:function(color){return colorFunctions.desaturate(color,new Dimension(100))},contrast:function(color,dark,light,threshold){if(!color.rgb)return null;if("undefined"==typeof light&&(light=colorFunctions.rgba(255,255,255,1)),"undefined"==typeof dark&&(dark=colorFunctions.rgba(0,0,0,1)),dark.luma()>light.luma()){var t=light;light=dark,dark=t}return threshold="undefined"==typeof threshold?.43:number(threshold),color.luma()<threshold?light:dark},argb:function(color){return new Anonymous(color.toARGB())},color:function(c){if(c instanceof Quoted&&/^#([a-f0-9]{6}|[a-f0-9]{3})$/i.test(c.value))return new Color(c.value.slice(1));if(c instanceof Color||(c=Color.fromKeyword(c.value)))return c.value=void 0,c;throw{type:"Argument",message:"argument must be a color keyword or 3/6 digit hex e.g. #FFF"}},tint:function(color,amount){return colorFunctions.mix(colorFunctions.rgb(255,255,255),color,amount)},shade:function(color,amount){return colorFunctions.mix(colorFunctions.rgb(0,0,0),color,amount)}},functionRegistry.addMultiple(colorFunctions)},{"../tree/anonymous":44,"../tree/color":48,"../tree/dimension":54,"../tree/quoted":71,"./function-registry":21}],18:[function(require,module,exports){module.exports=function(environment){var Quoted=require("../tree/quoted"),URL=require("../tree/url"),functionRegistry=require("./function-registry"),fallback=function(functionThis,node){return new URL(node,functionThis.index,functionThis.currentFileInfo).eval(functionThis.context)},logger=require("../logger");functionRegistry.add("data-uri",function(mimetypeNode,filePathNode){filePathNode||(filePathNode=mimetypeNode,mimetypeNode=null);var mimetype=mimetypeNode&&mimetypeNode.value,filePath=filePathNode.value,currentFileInfo=this.currentFileInfo,currentDirectory=currentFileInfo.relativeUrls?currentFileInfo.currentDirectory:currentFileInfo.entryPath,fragmentStart=filePath.indexOf("#"),fragment="";
-1!==fragmentStart&&(fragment=filePath.slice(fragmentStart),filePath=filePath.slice(0,fragmentStart));var fileManager=environment.getFileManager(filePath,currentDirectory,this.context,environment,!0);if(!fileManager)return fallback(this,filePathNode);var useBase64=!1;if(mimetypeNode)useBase64=/;base64$/.test(mimetype);else{if(mimetype=environment.mimeLookup(filePath),"image/svg+xml"===mimetype)useBase64=!1;else{var charset=environment.charsetLookup(mimetype);useBase64=["US-ASCII","UTF-8"].indexOf(charset)<0}useBase64&&(mimetype+=";base64")}var fileSync=fileManager.loadFileSync(filePath,currentDirectory,this.context,environment);if(!fileSync.contents)return logger.warn("Skipped data-uri embedding of "+filePath+" because file not found"),fallback(this,filePathNode||mimetypeNode);var buf=fileSync.contents;if(useBase64&&!environment.encodeBase64)return fallback(this,filePathNode);buf=useBase64?environment.encodeBase64(buf):encodeURIComponent(buf);var uri="data:"+mimetype+","+buf+fragment,DATA_URI_MAX=32768;return uri.length>=DATA_URI_MAX&&this.context.ieCompat!==!1?(logger.warn("Skipped data-uri embedding of "+filePath+" because its size ("+uri.length+" characters) exceeds IE8-safe "+DATA_URI_MAX+" characters!"),fallback(this,filePathNode||mimetypeNode)):new URL(new Quoted('"'+uri+'"',uri,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../logger":31,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],19:[function(require,module,exports){var Keyword=require("../tree/keyword"),functionRegistry=require("./function-registry"),defaultFunc={eval:function(){var v=this.value_,e=this.error_;if(e)throw e;return null!=v?v?Keyword.True:Keyword.False:void 0},value:function(v){this.value_=v},error:function(e){this.error_=e},reset:function(){this.value_=this.error_=null}};functionRegistry.add("default",defaultFunc.eval.bind(defaultFunc)),module.exports=defaultFunc},{"../tree/keyword":63,"./function-registry":21}],20:[function(require,module,exports){var Expression=require("../tree/expression"),functionCaller=function(name,context,index,currentFileInfo){this.name=name.toLowerCase(),this.index=index,this.context=context,this.currentFileInfo=currentFileInfo,this.func=context.frames[0].functionRegistry.get(this.name)};functionCaller.prototype.isValid=function(){return Boolean(this.func)},functionCaller.prototype.call=function(args){return Array.isArray(args)&&(args=args.filter(function(item){return"Comment"===item.type?!1:!0}).map(function(item){if("Expression"===item.type){var subNodes=item.value.filter(function(item){return"Comment"===item.type?!1:!0});return 1===subNodes.length?subNodes[0]:new Expression(subNodes)}return item})),this.func.apply(this,args)},module.exports=functionCaller},{"../tree/expression":57}],21:[function(require,module,exports){function makeRegistry(base){return{_data:{},add:function(name,func){name=name.toLowerCase(),this._data.hasOwnProperty(name),this._data[name]=func},addMultiple:function(functions){Object.keys(functions).forEach(function(name){this.add(name,functions[name])}.bind(this))},get:function(name){return this._data[name]||base&&base.get(name)},inherit:function(){return makeRegistry(this)}}}module.exports=makeRegistry(null)},{}],22:[function(require,module,exports){module.exports=function(environment){var functions={functionRegistry:require("./function-registry"),functionCaller:require("./function-caller")};return require("./default"),require("./color"),require("./color-blending"),require("./data-uri")(environment),require("./math"),require("./number"),require("./string"),require("./svg")(environment),require("./types"),functions}},{"./color":17,"./color-blending":16,"./data-uri":18,"./default":19,"./function-caller":20,"./function-registry":21,"./math":23,"./number":24,"./string":25,"./svg":26,"./types":27}],23:[function(require,module,exports){function _math(fn,unit,n){if(!(n instanceof Dimension))throw{type:"Argument",message:"argument must be a number"};return null==unit?unit=n.unit:n=n.unify(),new Dimension(fn(parseFloat(n.value)),unit)}var Dimension=require("../tree/dimension"),functionRegistry=require("./function-registry"),mathFunctions={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var f in mathFunctions)mathFunctions.hasOwnProperty(f)&&(mathFunctions[f]=_math.bind(null,Math[f],mathFunctions[f]));mathFunctions.round=function(n,f){var fraction="undefined"==typeof f?0:f.value;return _math(function(num){return num.toFixed(fraction)},null,n)},functionRegistry.addMultiple(mathFunctions)},{"../tree/dimension":54,"./function-registry":21}],24:[function(require,module,exports){var Dimension=require("../tree/dimension"),Anonymous=require("../tree/anonymous"),functionRegistry=require("./function-registry"),minMax=function(isMin,args){switch(args=Array.prototype.slice.call(args),args.length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var i,j,current,currentUnified,referenceUnified,unit,unitStatic,unitClone,order=[],values={};for(i=0;i<args.length;i++)if(current=args[i],current instanceof Dimension)if(currentUnified=""===current.unit.toString()&&void 0!==unitClone?new Dimension(current.value,unitClone).unify():current.unify(),unit=""===currentUnified.unit.toString()&&void 0!==unitStatic?unitStatic:currentUnified.unit.toString(),unitStatic=""!==unit&&void 0===unitStatic||""!==unit&&""===order[0].unify().unit.toString()?unit:unitStatic,unitClone=""!==unit&&void 0===unitClone?current.unit.toString():unitClone,j=void 0!==values[""]&&""!==unit&&unit===unitStatic?values[""]:values[unit],void 0!==j)referenceUnified=""===order[j].unit.toString()&&void 0!==unitClone?new Dimension(order[j].value,unitClone).unify():order[j].unify(),(isMin&&currentUnified.value<referenceUnified.value||!isMin&&currentUnified.value>referenceUnified.value)&&(order[j]=current);else{if(void 0!==unitStatic&&unit!==unitStatic)throw{type:"Argument",message:"incompatible types"};values[unit]=order.length,order.push(current)}else Array.isArray(args[i].value)&&Array.prototype.push.apply(args,Array.prototype.slice.call(args[i].value));return 1==order.length?order[0]:(args=order.map(function(a){return a.toCSS(this.context)}).join(this.context.compress?",":", "),new Anonymous((isMin?"min":"max")+"("+args+")"))};functionRegistry.addMultiple({min:function(){return minMax(!0,arguments)},max:function(){return minMax(!1,arguments)},convert:function(val,unit){return val.convertTo(unit.value)},pi:function(){return new Dimension(Math.PI)},mod:function(a,b){return new Dimension(a.value%b.value,a.unit)},pow:function(x,y){if("number"==typeof x&&"number"==typeof y)x=new Dimension(x),y=new Dimension(y);else if(!(x instanceof Dimension&&y instanceof Dimension))throw{type:"Argument",message:"arguments must be numbers"};return new Dimension(Math.pow(x.value,y.value),x.unit)},percentage:function(n){return new Dimension(100*n.value,"%")}})},{"../tree/anonymous":44,"../tree/dimension":54,"./function-registry":21}],25:[function(require,module,exports){var Quoted=require("../tree/quoted"),Anonymous=require("../tree/anonymous"),JavaScript=require("../tree/javascript"),functionRegistry=require("./function-registry");functionRegistry.addMultiple({e:function(str){return new Anonymous(str instanceof JavaScript?str.evaluated:str.value)},escape:function(str){return new Anonymous(encodeURI(str.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(string,pattern,replacement,flags){var result=string.value;return replacement="Quoted"===replacement.type?replacement.value:replacement.toCSS(),result=result.replace(new RegExp(pattern.value,flags?flags.value:""),replacement),new Quoted(string.quote||"",result,string.escaped)},"%":function(string){for(var args=Array.prototype.slice.call(arguments,1),result=string.value,i=0;i<args.length;i++)result=result.replace(/%[sda]/i,function(token){var value="Quoted"===args[i].type&&token.match(/s/i)?args[i].value:args[i].toCSS();return token.match(/[A-Z]$/)?encodeURIComponent(value):value});return result=result.replace(/%%/g,"%"),new Quoted(string.quote||"",result,string.escaped)}})},{"../tree/anonymous":44,"../tree/javascript":61,"../tree/quoted":71,"./function-registry":21}],26:[function(require,module,exports){module.exports=function(environment){var Dimension=require("../tree/dimension"),Color=require("../tree/color"),Expression=require("../tree/expression"),Quoted=require("../tree/quoted"),URL=require("../tree/url"),functionRegistry=require("./function-registry");functionRegistry.add("svg-gradient",function(direction){function throwArgumentDescriptor(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}var stops,gradientDirectionSvg,returner,i,color,position,positionValue,alpha,gradientType="linear",rectangleDimension='x="0" y="0" width="1" height="1"',renderEnv={compress:!1},directionValue=direction.toCSS(renderEnv);switch(2==arguments.length?(arguments[1].value.length<2&&throwArgumentDescriptor(),stops=arguments[1].value):arguments.length<3?throwArgumentDescriptor():stops=Array.prototype.slice.call(arguments,1),directionValue){case"to bottom":gradientDirectionSvg='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":gradientDirectionSvg='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":gradientDirectionSvg='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":gradientDirectionSvg='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":gradientType="radial",gradientDirectionSvg='cx="50%" cy="50%" r="75%"',rectangleDimension='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(returner='<?xml version="1.0" ?><svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><'+gradientType+'Gradient id="gradient" gradientUnits="userSpaceOnUse" '+gradientDirectionSvg+">",i=0;i<stops.length;i+=1)stops[i]instanceof Expression?(color=stops[i].value[0],position=stops[i].value[1]):(color=stops[i],position=void 0),color instanceof Color&&((0===i||i+1===stops.length)&&void 0===position||position instanceof Dimension)||throwArgumentDescriptor(),positionValue=position?position.toCSS(renderEnv):0===i?"0%":"100%",alpha=color.alpha,returner+='<stop offset="'+positionValue+'" stop-color="'+color.toRGB()+'"'+(1>alpha?' stop-opacity="'+alpha+'"':"")+"/>";return returner+="</"+gradientType+"Gradient><rect "+rectangleDimension+' fill="url(#gradient)" /></svg>',returner=encodeURIComponent(returner),returner="data:image/svg+xml,"+returner,new URL(new Quoted("'"+returner+"'",returner,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)})}},{"../tree/color":48,"../tree/dimension":54,"../tree/expression":57,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],27:[function(require,module,exports){var Keyword=require("../tree/keyword"),DetachedRuleset=require("../tree/detached-ruleset"),Dimension=require("../tree/dimension"),Color=require("../tree/color"),Quoted=require("../tree/quoted"),Anonymous=require("../tree/anonymous"),URL=require("../tree/url"),Operation=require("../tree/operation"),functionRegistry=require("./function-registry"),isa=function(n,Type){return n instanceof Type?Keyword.True:Keyword.False},isunit=function(n,unit){if(void 0===unit)throw{type:"Argument",message:"missing the required second argument to isunit."};if(unit="string"==typeof unit.value?unit.value:unit,"string"!=typeof unit)throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return n instanceof Dimension&&n.unit.is(unit)?Keyword.True:Keyword.False},getItemsFromNode=function(node){var items=Array.isArray(node.value)?node.value:Array(node);return items};functionRegistry.addMultiple({isruleset:function(n){return isa(n,DetachedRuleset)},iscolor:function(n){return isa(n,Color)},isnumber:function(n){return isa(n,Dimension)},isstring:function(n){return isa(n,Quoted)},iskeyword:function(n){return isa(n,Keyword)},isurl:function(n){return isa(n,URL)},ispixel:function(n){return isunit(n,"px")},ispercentage:function(n){return isunit(n,"%")},isem:function(n){return isunit(n,"em")},isunit:isunit,unit:function(val,unit){if(!(val instanceof Dimension))throw{type:"Argument",message:"the first argument to unit must be a number"+(val instanceof Operation?". Have you forgotten parenthesis?":"")};return unit=unit?unit instanceof Keyword?unit.value:unit.toCSS():"",new Dimension(val.value,unit)},"get-unit":function(n){return new Anonymous(n.unit)},extract:function(values,index){return index=index.value-1,getItemsFromNode(values)[index]},length:function(values){return new Dimension(getItemsFromNode(values).length)}})},{"../tree/anonymous":44,"../tree/color":48,"../tree/detached-ruleset":53,"../tree/dimension":54,"../tree/keyword":63,"../tree/operation":69,"../tree/quoted":71,"../tree/url":78,"./function-registry":21}],28:[function(require,module,exports){var contexts=require("./contexts"),Parser=require("./parser/parser"),FunctionImporter=require("./plugins/function-importer");module.exports=function(environment){var ImportManager=function(context,rootFileInfo){this.rootFilename=rootFileInfo.filename,this.paths=context.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=context.mime,this.error=null,this.context=context,this.queue=[],this.files={}};return ImportManager.prototype.push=function(path,tryAppendLessExtension,currentFileInfo,importOptions,callback){var importManager=this;this.queue.push(path);var fileParsedFunc=function(e,root,fullPath){importManager.queue.splice(importManager.queue.indexOf(path),1);var importedEqualsRoot=fullPath===importManager.rootFilename;importOptions.optional&&e?callback(null,{rules:[]},!1,null):(importManager.files[fullPath]=root,e&&!importManager.error&&(importManager.error=e),callback(e,root,importedEqualsRoot,fullPath))},newFileInfo={relativeUrls:this.context.relativeUrls,entryPath:currentFileInfo.entryPath,rootpath:currentFileInfo.rootpath,rootFilename:currentFileInfo.rootFilename},fileManager=environment.getFileManager(path,currentFileInfo.currentDirectory,this.context,environment);if(!fileManager)return void fileParsedFunc({message:"Could not find a file-manager for "+path});tryAppendLessExtension&&(path=fileManager.tryAppendExtension(path,importOptions.plugin?".js":".less"));var loadFileCallback=function(loadedFile){var resolvedFilename=loadedFile.filename,contents=loadedFile.contents.replace(/^\uFEFF/,"");newFileInfo.currentDirectory=fileManager.getPath(resolvedFilename),newFileInfo.relativeUrls&&(newFileInfo.rootpath=fileManager.join(importManager.context.rootpath||"",fileManager.pathDiff(newFileInfo.currentDirectory,newFileInfo.entryPath)),!fileManager.isPathAbsolute(newFileInfo.rootpath)&&fileManager.alwaysMakePathsAbsolute()&&(newFileInfo.rootpath=fileManager.join(newFileInfo.entryPath,newFileInfo.rootpath))),newFileInfo.filename=resolvedFilename;var newEnv=new contexts.Parse(importManager.context);newEnv.processImports=!1,importManager.contents[resolvedFilename]=contents,(currentFileInfo.reference||importOptions.reference)&&(newFileInfo.reference=!0),importOptions.plugin?new FunctionImporter(newEnv,newFileInfo).eval(contents,function(e,root){fileParsedFunc(e,root,resolvedFilename)}):importOptions.inline?fileParsedFunc(null,contents,resolvedFilename):new Parser(newEnv,importManager,newFileInfo).parse(contents,function(e,root){fileParsedFunc(e,root,resolvedFilename)})},promise=fileManager.loadFile(path,currentFileInfo.currentDirectory,this.context,environment,function(err,loadedFile){err?fileParsedFunc(err):loadFileCallback(loadedFile)});promise&&promise.then(loadFileCallback,fileParsedFunc)},ImportManager}},{"./contexts":10,"./parser/parser":36,"./plugins/function-importer":38}],29:[function(require,module,exports){module.exports=function(environment,fileManagers){var SourceMapOutput,SourceMapBuilder,ParseTree,ImportManager,Environment,less={version:[2,5,1],data:require("./data"),tree:require("./tree"),Environment:Environment=require("./environment/environment"),AbstractFileManager:require("./environment/abstract-file-manager"),environment:environment=new Environment(environment,fileManagers),visitors:require("./visitors"),Parser:require("./parser/parser"),functions:require("./functions")(environment),contexts:require("./contexts"),SourceMapOutput:SourceMapOutput=require("./source-map-output")(environment),SourceMapBuilder:SourceMapBuilder=require("./source-map-builder")(SourceMapOutput,environment),ParseTree:ParseTree=require("./parse-tree")(SourceMapBuilder),ImportManager:ImportManager=require("./import-manager")(environment),render:require("./render")(environment,ParseTree,ImportManager),parse:require("./parse")(environment,ParseTree,ImportManager),LessError:require("./less-error"),transformTree:require("./transform-tree"),utils:require("./utils"),PluginManager:require("./plugin-manager"),logger:require("./logger")};return less}},{"./contexts":10,"./data":12,"./environment/abstract-file-manager":14,"./environment/environment":15,"./functions":22,"./import-manager":28,"./less-error":30,"./logger":31,"./parse":33,"./parse-tree":32,"./parser/parser":36,"./plugin-manager":37,"./render":39,"./source-map-builder":40,"./source-map-output":41,"./transform-tree":42,"./tree":60,"./utils":81,"./visitors":85}],30:[function(require,module,exports){var utils=require("./utils"),LessError=module.exports=function(e,importManager,currentFilename){Error.call(this);var filename=e.filename||currentFilename;if(importManager&&filename){var input=importManager.contents[filename],loc=utils.getLocation(e.index,input),line=loc.line,col=loc.column,callLine=e.call&&utils.getLocation(e.call,input).line,lines=input.split("\n");this.type=e.type||"Syntax",this.filename=filename,this.index=e.index,this.line="number"==typeof line?line+1:null,this.callLine=callLine+1,this.callExtract=lines[callLine],this.column=col,this.extract=[lines[line-1],lines[line],lines[line+1]]}this.message=e.message,this.stack=e.stack};if("undefined"==typeof Object.create){var F=function(){};F.prototype=Error.prototype,LessError.prototype=new F}else LessError.prototype=Object.create(Error.prototype);LessError.prototype.constructor=LessError},{"./utils":81}],31:[function(require,module,exports){module.exports={error:function(msg){this._fireEvent("error",msg)},warn:function(msg){this._fireEvent("warn",msg)},info:function(msg){this._fireEvent("info",msg)},debug:function(msg){this._fireEvent("debug",msg)},addListener:function(listener){this._listeners.push(listener)},removeListener:function(listener){for(var i=0;i<this._listeners.length;i++)if(this._listeners[i]===listener)return void this._listeners.splice(i,1)},_fireEvent:function(type,msg){for(var i=0;i<this._listeners.length;i++){var logFunction=this._listeners[i][type];logFunction&&logFunction(msg)}},_listeners:[]}},{}],32:[function(require,module,exports){var LessError=require("./less-error"),transformTree=require("./transform-tree"),logger=require("./logger");module.exports=function(SourceMapBuilder){var ParseTree=function(root,imports){this.root=root,this.imports=imports};return ParseTree.prototype.toCSS=function(options){var evaldRoot,sourceMapBuilder,result={};try{evaldRoot=transformTree(this.root,options)}catch(e){throw new LessError(e,this.imports)}try{var compress=Boolean(options.compress);compress&&logger.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var toCSSOptions={compress:compress,dumpLineNumbers:options.dumpLineNumbers,strictUnits:Boolean(options.strictUnits),numPrecision:8};options.sourceMap?(sourceMapBuilder=new SourceMapBuilder(options.sourceMap),result.css=sourceMapBuilder.toCSS(evaldRoot,toCSSOptions,this.imports)):result.css=evaldRoot.toCSS(toCSSOptions)}catch(e){throw new LessError(e,this.imports)}if(options.pluginManager)for(var postProcessors=options.pluginManager.getPostProcessors(),i=0;i<postProcessors.length;i++)result.css=postProcessors[i].process(result.css,{sourceMap:sourceMapBuilder,options:options,imports:this.imports});options.sourceMap&&(result.map=sourceMapBuilder.getExternalSourceMap()),result.imports=[];for(var file in this.imports.files)this.imports.files.hasOwnProperty(file)&&file!==this.imports.rootFilename&&result.imports.push(file);return result},ParseTree}},{"./less-error":30,"./logger":31,"./transform-tree":42}],33:[function(require,module,exports){var PromiseConstructor,contexts=require("./contexts"),Parser=require("./parser/parser"),PluginManager=require("./plugin-manager");module.exports=function(environment,ParseTree,ImportManager){var parse=function(input,options,callback){if(options=options||{},"function"==typeof options&&(callback=options,options={}),!callback){PromiseConstructor||(PromiseConstructor="undefined"==typeof Promise?require("promise"):Promise);var self=this;return new PromiseConstructor(function(resolve,reject){parse.call(self,input,options,function(err,output){err?reject(err):resolve(output)})})}var context,rootFileInfo,pluginManager=new PluginManager(this);if(pluginManager.addPlugins(options.plugins),options.pluginManager=pluginManager,context=new contexts.Parse(options),options.rootFileInfo)rootFileInfo=options.rootFileInfo;else{var filename=options.filename||"input",entryPath=filename.replace(/[^\/\\]*$/,"");rootFileInfo={filename:filename,relativeUrls:context.relativeUrls,rootpath:context.rootpath||"",currentDirectory:entryPath,entryPath:entryPath,rootFilename:filename},rootFileInfo.rootpath&&"/"!==rootFileInfo.rootpath.slice(-1)&&(rootFileInfo.rootpath+="/")}var imports=new ImportManager(context,rootFileInfo);new Parser(context,imports,rootFileInfo).parse(input,function(e,root){return e?callback(e):void callback(null,root,imports,options)},options)};return parse}},{"./contexts":10,"./parser/parser":36,"./plugin-manager":37,promise:void 0}],34:[function(require,module,exports){module.exports=function(input,fail){function emitChunk(force){var len=chunkerCurrentIndex-emitFrom;512>len&&!force||!len||(chunks.push(input.slice(emitFrom,chunkerCurrentIndex+1)),emitFrom=chunkerCurrentIndex+1)}var lastOpening,lastOpeningParen,lastMultiComment,lastMultiCommentEndBrace,chunkerCurrentIndex,currentChunkStartIndex,cc,cc2,matched,len=input.length,level=0,parenLevel=0,chunks=[],emitFrom=0;for(chunkerCurrentIndex=0;len>chunkerCurrentIndex;chunkerCurrentIndex++)if(cc=input.charCodeAt(chunkerCurrentIndex),!(cc>=97&&122>=cc||34>cc))switch(cc){case 40:parenLevel++,lastOpeningParen=chunkerCurrentIndex;continue;case 41:if(--parenLevel<0)return fail("missing opening `(`",chunkerCurrentIndex);continue;case 59:parenLevel||emitChunk();continue;case 123:level++,lastOpening=chunkerCurrentIndex;continue;case 125:if(--level<0)return fail("missing opening `{`",chunkerCurrentIndex);level||parenLevel||emitChunk();continue;case 92:if(len-1>chunkerCurrentIndex){chunkerCurrentIndex++;continue}return fail("unescaped `\\`",chunkerCurrentIndex);case 34:case 39:case 96:for(matched=0,currentChunkStartIndex=chunkerCurrentIndex,chunkerCurrentIndex+=1;len>chunkerCurrentIndex;chunkerCurrentIndex++)if(cc2=input.charCodeAt(chunkerCurrentIndex),!(cc2>96)){if(cc2==cc){matched=1;break}if(92==cc2){if(chunkerCurrentIndex==len-1)return fail("unescaped `\\`",chunkerCurrentIndex);chunkerCurrentIndex++}}if(matched)continue;return fail("unmatched `"+String.fromCharCode(cc)+"`",currentChunkStartIndex);case 47:if(parenLevel||chunkerCurrentIndex==len-1)continue;if(cc2=input.charCodeAt(chunkerCurrentIndex+1),47==cc2)for(chunkerCurrentIndex+=2;len>chunkerCurrentIndex&&(cc2=input.charCodeAt(chunkerCurrentIndex),!(13>=cc2)||10!=cc2&&13!=cc2);chunkerCurrentIndex++);else if(42==cc2){for(lastMultiComment=currentChunkStartIndex=chunkerCurrentIndex,chunkerCurrentIndex+=2;len-1>chunkerCurrentIndex&&(cc2=input.charCodeAt(chunkerCurrentIndex),125==cc2&&(lastMultiCommentEndBrace=chunkerCurrentIndex),42!=cc2||47!=input.charCodeAt(chunkerCurrentIndex+1));chunkerCurrentIndex++);if(chunkerCurrentIndex==len-1)return fail("missing closing `*/`",currentChunkStartIndex);chunkerCurrentIndex++}continue;case 42:if(len-1>chunkerCurrentIndex&&47==input.charCodeAt(chunkerCurrentIndex+1))return fail("unmatched `/*`",chunkerCurrentIndex);continue}return 0!==level?lastMultiComment>lastOpening&&lastMultiCommentEndBrace>lastMultiComment?fail("missing closing `}` or `*/`",lastOpening):fail("missing closing `}`",lastOpening):0!==parenLevel?fail("missing closing `)`",lastOpeningParen):(emitChunk(!0),chunks)}},{}],35:[function(require,module,exports){var chunker=require("./chunker");module.exports=function(){var input,j,furthest,furthestPossibleErrorMessage,chunks,current,currentPos,saveStack=[],parserInput={};parserInput.save=function(){currentPos=parserInput.i,saveStack.push({current:current,i:parserInput.i,j:j})},parserInput.restore=function(possibleErrorMessage){(parserInput.i>furthest||parserInput.i===furthest&&possibleErrorMessage&&!furthestPossibleErrorMessage)&&(furthest=parserInput.i,furthestPossibleErrorMessage=possibleErrorMessage);var state=saveStack.pop();current=state.current,currentPos=parserInput.i=state.i,j=state.j},parserInput.forget=function(){saveStack.pop()},parserInput.isWhitespace=function(offset){var pos=parserInput.i+(offset||0),code=input.charCodeAt(pos);return code===CHARCODE_SPACE||code===CHARCODE_CR||code===CHARCODE_TAB||code===CHARCODE_LF},parserInput.$re=function(tok){parserInput.i>currentPos&&(current=current.slice(parserInput.i-currentPos),currentPos=parserInput.i);var m=tok.exec(current);return m?(skipWhitespace(m[0].length),"string"==typeof m?m:1===m.length?m[0]:m):null},parserInput.$char=function(tok){return input.charAt(parserInput.i)!==tok?null:(skipWhitespace(1),tok)},parserInput.$str=function(tok){for(var tokLength=tok.length,i=0;tokLength>i;i++)if(input.charAt(parserInput.i+i)!==tok.charAt(i))return null;return skipWhitespace(tokLength),tok},parserInput.$quoted=function(){var startChar=input.charAt(parserInput.i);if("'"===startChar||'"'===startChar){for(var length=input.length,currentPosition=parserInput.i,i=1;length>i+currentPosition;i++){var nextChar=input.charAt(i+currentPosition);switch(nextChar){case"\\":i++;continue;case"\r":case"\n":break;case startChar:var str=input.substr(currentPosition,i+1);return skipWhitespace(i+1),str}}return null}};var CHARCODE_SPACE=32,CHARCODE_TAB=9,CHARCODE_LF=10,CHARCODE_CR=13,CHARCODE_PLUS=43,CHARCODE_COMMA=44,CHARCODE_FORWARD_SLASH=47,CHARCODE_9=57;parserInput.autoCommentAbsorb=!0,parserInput.commentStore=[],parserInput.finished=!1;var skipWhitespace=function(length){for(var c,nextChar,comment,oldi=parserInput.i,oldj=j,curr=parserInput.i-currentPos,endIndex=parserInput.i+current.length-curr,mem=parserInput.i+=length,inp=input;parserInput.i<endIndex;parserInput.i++){if(c=inp.charCodeAt(parserInput.i),parserInput.autoCommentAbsorb&&c===CHARCODE_FORWARD_SLASH){if(nextChar=inp.charAt(parserInput.i+1),"/"===nextChar){comment={index:parserInput.i,isLineComment:!0};var nextNewLine=inp.indexOf("\n",parserInput.i+2);0>nextNewLine&&(nextNewLine=endIndex),parserInput.i=nextNewLine,comment.text=inp.substr(comment.i,parserInput.i-comment.i),parserInput.commentStore.push(comment);continue}if("*"===nextChar){var nextStarSlash=inp.indexOf("*/",parserInput.i+2);if(nextStarSlash>=0){comment={index:parserInput.i,text:inp.substr(parserInput.i,nextStarSlash+2-parserInput.i),isLineComment:!1},parserInput.i+=comment.text.length-1,parserInput.commentStore.push(comment);continue}}break}if(c!==CHARCODE_SPACE&&c!==CHARCODE_LF&&c!==CHARCODE_TAB&&c!==CHARCODE_CR)break}if(current=current.slice(length+parserInput.i-mem+curr),currentPos=parserInput.i,!current.length){if(j<chunks.length-1)return current=chunks[++j],skipWhitespace(0),!0;parserInput.finished=!0}return oldi!==parserInput.i||oldj!==j};return parserInput.peek=function(tok){if("string"==typeof tok){for(var i=0;i<tok.length;i++)if(input.charAt(parserInput.i+i)!==tok.charAt(i))return!1;return!0}return tok.test(current)},parserInput.peekChar=function(tok){return input.charAt(parserInput.i)===tok},parserInput.currentChar=function(){return input.charAt(parserInput.i)},parserInput.getInput=function(){return input},parserInput.peekNotNumeric=function(){var c=input.charCodeAt(parserInput.i);return c>CHARCODE_9||CHARCODE_PLUS>c||c===CHARCODE_FORWARD_SLASH||c===CHARCODE_COMMA},parserInput.start=function(str,chunkInput,failFunction){input=str,parserInput.i=j=currentPos=furthest=0,chunks=chunkInput?chunker(str,failFunction):[str],current=chunks[0],skipWhitespace(0)},parserInput.end=function(){var message,isFinished=parserInput.i>=input.length;return parserInput.i<furthest&&(message=furthestPossibleErrorMessage,parserInput.i=furthest),{isFinished:isFinished,furthest:parserInput.i,furthestPossibleErrorMessage:message,furthestReachedEnd:parserInput.i>=input.length-1,furthestChar:input[parserInput.i]}},parserInput}},{"./chunker":34}],36:[function(require,module,exports){var LessError=require("../less-error"),tree=require("../tree"),visitors=require("../visitors"),getParserInput=require("./parser-input"),utils=require("../utils"),Parser=function Parser(context,imports,fileInfo){function expect(arg,msg,index){var result="[object Function]"===Object.prototype.toString.call(arg)?arg.call(parsers):parserInput.$re(arg);return result?result:void error(msg||("string"==typeof arg?"expected '"+arg+"' got '"+parserInput.currentChar()+"'":"unexpected token"))}function expectChar(arg,msg){return parserInput.$char(arg)?arg:void error(msg||"expected '"+arg+"' got '"+parserInput.currentChar()+"'")}function error(msg,type){throw new LessError({index:parserInput.i,filename:fileInfo.filename,type:type||"Syntax",message:msg},imports)}function getDebugInfo(index){var filename=fileInfo.filename;return{lineNumber:utils.getLocation(index,parserInput.getInput()).line+1,fileName:filename}}var parsers,parserInput=getParserInput();return{parse:function(str,callback,additionalData){var root,globalVars,modifyVars,ignored,error=null,preText="";if(globalVars=additionalData&&additionalData.globalVars?Parser.serializeVars(additionalData.globalVars)+"\n":"",modifyVars=additionalData&&additionalData.modifyVars?"\n"+Parser.serializeVars(additionalData.modifyVars):"",context.pluginManager)for(var preProcessors=context.pluginManager.getPreProcessors(),i=0;i<preProcessors.length;i++)str=preProcessors[i].process(str,{context:context,imports:imports,fileInfo:fileInfo});(globalVars||additionalData&&additionalData.banner)&&(preText=(additionalData&&additionalData.banner?additionalData.banner:"")+globalVars,ignored=imports.contentsIgnoredChars,ignored[fileInfo.filename]=ignored[fileInfo.filename]||0,ignored[fileInfo.filename]+=preText.length),str=str.replace(/\r\n?/g,"\n"),str=preText+str.replace(/^\uFEFF/,"")+modifyVars,imports.contents[fileInfo.filename]=str;try{parserInput.start(str,context.chunkInput,function(msg,index){throw new LessError({index:index,type:"Parse",message:msg,filename:fileInfo.filename},imports)}),root=new tree.Ruleset(null,this.parsers.primary()),root.root=!0,root.firstRoot=!0}catch(e){return callback(new LessError(e,imports,fileInfo.filename))}var endInfo=parserInput.end();if(!endInfo.isFinished){var message=endInfo.furthestPossibleErrorMessage;message||(message="Unrecognised input","}"===endInfo.furthestChar?message+=". Possibly missing opening '{'":")"===endInfo.furthestChar?message+=". Possibly missing opening '('":endInfo.furthestReachedEnd&&(message+=". Possibly missing something")),error=new LessError({type:"Parse",message:message,index:endInfo.furthest,filename:fileInfo.filename},imports)}var finish=function(e){return e=error||e||imports.error,
e?(e instanceof LessError||(e=new LessError(e,imports,fileInfo.filename)),callback(e)):callback(null,root)};return context.processImports===!1?finish():void new visitors.ImportVisitor(imports,finish).run(root)},parsers:parsers={primary:function(){for(var node,mixin=this.mixin,root=[];;){for(;;){if(node=this.comment(),!node)break;root.push(node)}if(parserInput.finished)break;if(parserInput.peek("}"))break;if(node=this.extendRule())root=root.concat(node);else if(node=mixin.definition()||this.rule()||this.ruleset()||mixin.call()||this.rulesetCall()||this.directive())root.push(node);else{for(var foundSemiColon=!1;parserInput.$char(";");)foundSemiColon=!0;if(!foundSemiColon)break}}return root},comment:function(){if(parserInput.commentStore.length){var comment=parserInput.commentStore.shift();return new tree.Comment(comment.text,comment.isLineComment,comment.index,fileInfo)}},entities:{quoted:function(){var str,index=parserInput.i,isEscaped=!1;return parserInput.save(),parserInput.$char("~")&&(isEscaped=!0),(str=parserInput.$quoted())?(parserInput.forget(),new tree.Quoted(str.charAt(0),str.substr(1,str.length-2),isEscaped,index,fileInfo)):void parserInput.restore()},keyword:function(){var k=parserInput.$char("%")||parserInput.$re(/^[_A-Za-z-][_A-Za-z0-9-]*/);return k?tree.Color.fromKeyword(k)||new tree.Keyword(k):void 0},call:function(){var name,nameLC,args,alpha,index=parserInput.i;if(!parserInput.peek(/^url\(/i))return parserInput.save(),(name=parserInput.$re(/^([\w-]+|%|progid:[\w\.]+)\(/))?(name=name[1],nameLC=name.toLowerCase(),"alpha"===nameLC&&(alpha=parsers.alpha())?(parserInput.forget(),alpha):(args=this.arguments(),parserInput.$char(")")?(parserInput.forget(),new tree.Call(name,args,index,fileInfo)):void parserInput.restore("Could not parse call arguments or missing ')'"))):void parserInput.forget()},arguments:function(){for(var arg,args=[];;){if(arg=this.assignment()||parsers.expression(),!arg)break;if(args.push(arg),!parserInput.$char(","))break}return args},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var key,value;return parserInput.save(),(key=parserInput.$re(/^\w+(?=\s?=)/i))&&parserInput.$char("=")&&(value=parsers.entity())?(parserInput.forget(),new tree.Assignment(key,value)):void parserInput.restore()},url:function(){var value,index=parserInput.i;return parserInput.autoCommentAbsorb=!1,parserInput.$str("url(")?(value=this.quoted()||this.variable()||parserInput.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",parserInput.autoCommentAbsorb=!0,expectChar(")"),new tree.URL(null!=value.value||value instanceof tree.Variable?value:new tree.Anonymous(value),index,fileInfo)):void(parserInput.autoCommentAbsorb=!0)},variable:function(){var name,index=parserInput.i;return"@"===parserInput.currentChar()&&(name=parserInput.$re(/^@@?[\w-]+/))?new tree.Variable(name,index,fileInfo):void 0},variableCurly:function(){var curly,index=parserInput.i;return"@"===parserInput.currentChar()&&(curly=parserInput.$re(/^@\{([\w-]+)\}/))?new tree.Variable("@"+curly[1],index,fileInfo):void 0},color:function(){var rgb;if("#"===parserInput.currentChar()&&(rgb=parserInput.$re(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/))){var colorCandidateString=rgb.input.match(/^#([\w]+).*/);return colorCandidateString=colorCandidateString[1],colorCandidateString.match(/^[A-Fa-f0-9]+$/)||error("Invalid HEX color code"),new tree.Color(rgb[1])}},dimension:function(){if(!parserInput.peekNotNumeric()){var value=parserInput.$re(/^([+-]?\d*\.?\d+)(%|[a-z]+)?/i);return value?new tree.Dimension(value[1],value[2]):void 0}},unicodeDescriptor:function(){var ud;return ud=parserInput.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/),ud?new tree.UnicodeDescriptor(ud[0]):void 0},javascript:function(){var js,index=parserInput.i;parserInput.save();var escape=parserInput.$char("~"),jsQuote=parserInput.$char("`");return jsQuote?(js=parserInput.$re(/^[^`]*`/))?(parserInput.forget(),new tree.JavaScript(js.substr(0,js.length-1),Boolean(escape),index,fileInfo)):void parserInput.restore("invalid javascript definition"):void parserInput.restore()}},variable:function(){var name;return"@"===parserInput.currentChar()&&(name=parserInput.$re(/^(@[\w-]+)\s*:/))?name[1]:void 0},rulesetCall:function(){var name;return"@"===parserInput.currentChar()&&(name=parserInput.$re(/^(@[\w-]+)\s*\(\s*\)\s*;/))?new tree.RulesetCall(name[1]):void 0},extend:function(isRule){var elements,e,option,extendList,extend,index=parserInput.i;if(parserInput.$str(isRule?"&:extend(":":extend(")){do{for(option=null,elements=null;!(option=parserInput.$re(/^(all)(?=\s*(\)|,))/))&&(e=this.element());)elements?elements.push(e):elements=[e];option=option&&option[1],elements||error("Missing target selector for :extend()."),extend=new tree.Extend(new tree.Selector(elements),option,index),extendList?extendList.push(extend):extendList=[extend]}while(parserInput.$char(","));return expect(/^\)/),isRule&&expect(/^;/),extendList}},extendRule:function(){return this.extend(!0)},mixin:{call:function(){var elemIndex,elements,elem,e,c,args,s=parserInput.currentChar(),important=!1,index=parserInput.i;if("."===s||"#"===s){for(parserInput.save();;){if(elemIndex=parserInput.i,e=parserInput.$re(/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/),!e)break;elem=new tree.Element(c,e,elemIndex,fileInfo),elements?elements.push(elem):elements=[elem],c=parserInput.$char(">")}return elements&&(parserInput.$char("(")&&(args=this.args(!0).args,expectChar(")")),parsers.important()&&(important=!0),parsers.end())?(parserInput.forget(),new tree.mixin.Call(elements,args,index,fileInfo,important)):void parserInput.restore()}},args:function(isCall){var isSemiColonSeparated,expressionContainsNamed,name,nameLoop,value,arg,entities=parsers.entities,returner={args:null,variadic:!1},expressions=[],argsSemiColon=[],argsComma=[];for(parserInput.save();;){if(isCall)arg=parsers.detachedRuleset()||parsers.expression();else{if(parserInput.commentStore.length=0,parserInput.$str("...")){returner.variadic=!0,parserInput.$char(";")&&!isSemiColonSeparated&&(isSemiColonSeparated=!0),(isSemiColonSeparated?argsSemiColon:argsComma).push({variadic:!0});break}arg=entities.variable()||entities.literal()||entities.keyword()}if(!arg)break;nameLoop=null,arg.throwAwayComments&&arg.throwAwayComments(),value=arg;var val=null;if(isCall?arg.value&&1==arg.value.length&&(val=arg.value[0]):val=arg,val&&val instanceof tree.Variable)if(parserInput.$char(":")){if(expressions.length>0&&(isSemiColonSeparated&&error("Cannot mix ; and , as delimiter types"),expressionContainsNamed=!0),value=parsers.detachedRuleset()||parsers.expression(),!value){if(!isCall)return parserInput.restore(),returner.args=[],returner;error("could not understand value for named argument")}nameLoop=name=val.name}else{if(!isCall&&parserInput.$str("...")){returner.variadic=!0,parserInput.$char(";")&&!isSemiColonSeparated&&(isSemiColonSeparated=!0),(isSemiColonSeparated?argsSemiColon:argsComma).push({name:arg.name,variadic:!0});break}isCall||(name=nameLoop=val.name,value=null)}value&&expressions.push(value),argsComma.push({name:nameLoop,value:value}),parserInput.$char(",")||(parserInput.$char(";")||isSemiColonSeparated)&&(expressionContainsNamed&&error("Cannot mix ; and , as delimiter types"),isSemiColonSeparated=!0,expressions.length>1&&(value=new tree.Value(expressions)),argsSemiColon.push({name:name,value:value}),name=null,expressions=[],expressionContainsNamed=!1)}return parserInput.forget(),returner.args=isSemiColonSeparated?argsSemiColon:argsComma,returner},definition:function(){var name,match,ruleset,cond,params=[],variadic=!1;if(!("."!==parserInput.currentChar()&&"#"!==parserInput.currentChar()||parserInput.peek(/^[^{]*\}/)))if(parserInput.save(),match=parserInput.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){name=match[1];var argInfo=this.args(!1);if(params=argInfo.args,variadic=argInfo.variadic,!parserInput.$char(")"))return void parserInput.restore("Missing closing ')'");if(parserInput.commentStore.length=0,parserInput.$str("when")&&(cond=expect(parsers.conditions,"expected condition")),ruleset=parsers.block())return parserInput.forget(),new tree.mixin.Definition(name,params,ruleset,cond,variadic);parserInput.restore()}else parserInput.forget()}},entity:function(){var entities=this.entities;return this.comment()||entities.literal()||entities.variable()||entities.url()||entities.call()||entities.keyword()||entities.javascript()},end:function(){return parserInput.$char(";")||parserInput.peek("}")},alpha:function(){var value;if(parserInput.$re(/^opacity=/i))return value=parserInput.$re(/^\d+/),value||(value=expect(this.entities.variable,"Could not parse alpha")),expectChar(")"),new tree.Alpha(value)},element:function(){var e,c,v,index=parserInput.i;return c=this.combinator(),e=parserInput.$re(/^(?:\d+\.\d+|\d+)%/)||parserInput.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||parserInput.$char("*")||parserInput.$char("&")||this.attribute()||parserInput.$re(/^\([^&()@]+\)/)||parserInput.$re(/^[\.#:](?=@)/)||this.entities.variableCurly(),e||(parserInput.save(),parserInput.$char("(")?(v=this.selector())&&parserInput.$char(")")?(e=new tree.Paren(v),parserInput.forget()):parserInput.restore("Missing closing ')'"):parserInput.forget()),e?new tree.Element(c,e,index,fileInfo):void 0},combinator:function(){var c=parserInput.currentChar();if("/"===c){parserInput.save();var slashedCombinator=parserInput.$re(/^\/[a-z]+\//i);if(slashedCombinator)return parserInput.forget(),new tree.Combinator(slashedCombinator);parserInput.restore()}if(">"===c||"+"===c||"~"===c||"|"===c||"^"===c){for(parserInput.i++,"^"===c&&"^"===parserInput.currentChar()&&(c="^^",parserInput.i++);parserInput.isWhitespace();)parserInput.i++;return new tree.Combinator(c)}return parserInput.isWhitespace(-1)?new tree.Combinator(" "):new tree.Combinator(null)},lessSelector:function(){return this.selector(!0)},selector:function(isLess){for(var elements,extendList,c,e,allExtends,when,condition,index=parserInput.i;(isLess&&(extendList=this.extend())||isLess&&(when=parserInput.$str("when"))||(e=this.element()))&&(when?condition=expect(this.conditions,"expected condition"):condition?error("CSS guard can only be used at the end of selector"):extendList?allExtends=allExtends?allExtends.concat(extendList):extendList:(allExtends&&error("Extend can only be used at the end of selector"),c=parserInput.currentChar(),elements?elements.push(e):elements=[e],e=null),"{"!==c&&"}"!==c&&";"!==c&&","!==c&&")"!==c););return elements?new tree.Selector(elements,allExtends,condition,index,fileInfo):void(allExtends&&error("Extend must be used to extend a selector, it cannot be used on its own"))},attribute:function(){if(parserInput.$char("[")){var key,val,op,entities=this.entities;return(key=entities.variableCurly())||(key=expect(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),op=parserInput.$re(/^[|~*$^]?=/),op&&(val=entities.quoted()||parserInput.$re(/^[0-9]+%/)||parserInput.$re(/^[\w-]+/)||entities.variableCurly()),expectChar("]"),new tree.Attribute(key,op,val)}},block:function(){var content;return parserInput.$char("{")&&(content=this.primary())&&parserInput.$char("}")?content:void 0},blockRuleset:function(){var block=this.block();return block&&(block=new tree.Ruleset(null,block)),block},detachedRuleset:function(){var blockRuleset=this.blockRuleset();return blockRuleset?new tree.DetachedRuleset(blockRuleset):void 0},ruleset:function(){var selectors,s,rules,debugInfo;for(parserInput.save(),context.dumpLineNumbers&&(debugInfo=getDebugInfo(parserInput.i));;){if(s=this.lessSelector(),!s)break;if(selectors?selectors.push(s):selectors=[s],parserInput.commentStore.length=0,s.condition&&selectors.length>1&&error("Guards are only currently allowed on a single selector."),!parserInput.$char(","))break;s.condition&&error("Guards are only currently allowed on a single selector."),parserInput.commentStore.length=0}if(selectors&&(rules=this.block())){parserInput.forget();var ruleset=new tree.Ruleset(selectors,rules,context.strictImports);return context.dumpLineNumbers&&(ruleset.debugInfo=debugInfo),ruleset}parserInput.restore()},rule:function(tryAnonymous){var name,value,important,merge,isVariable,startOfRule=parserInput.i,c=parserInput.currentChar();if("."!==c&&"#"!==c&&"&"!==c&&":"!==c)if(parserInput.save(),name=this.variable()||this.ruleProperty()){if(isVariable="string"==typeof name,isVariable&&(value=this.detachedRuleset()),parserInput.commentStore.length=0,!value){merge=!isVariable&&name.length>1&&name.pop().value;var tryValueFirst=!tryAnonymous&&(context.compress||isVariable);if(tryValueFirst&&(value=this.value()),!value&&(value=this.anonymousValue()))return parserInput.forget(),new tree.Rule(name,value,!1,merge,startOfRule,fileInfo);tryValueFirst||value||(value=this.value()),important=this.important()}if(value&&this.end())return parserInput.forget(),new tree.Rule(name,value,important,merge,startOfRule,fileInfo);if(parserInput.restore(),value&&!tryAnonymous)return this.rule(!0)}else parserInput.forget()},anonymousValue:function(){var match=parserInput.$re(/^([^@+\/'"*`(;{}-]*);/);return match?new tree.Anonymous(match[1]):void 0},"import":function(){var path,features,index=parserInput.i,dir=parserInput.$re(/^@import?\s+/);if(dir){var options=(dir?this.importOptions():null)||{};if(path=this.entities.quoted()||this.entities.url())return features=this.mediaFeatures(),parserInput.$char(";")||(parserInput.i=index,error("missing semi-colon or unrecognised media features on import")),features=features&&new tree.Value(features),new tree.Import(path,features,options,index,fileInfo);parserInput.i=index,error("malformed import statement")}},importOptions:function(){var o,optionName,value,options={};if(!parserInput.$char("("))return null;do if(o=this.importOption()){switch(optionName=o,value=!0,optionName){case"css":optionName="less",value=!1;break;case"once":optionName="multiple",value=!1}if(options[optionName]=value,!parserInput.$char(","))break}while(o);return expectChar(")"),options},importOption:function(){var opt=parserInput.$re(/^(less|css|multiple|once|inline|reference|optional)/);return opt?opt[1]:void 0},mediaFeature:function(){var e,p,entities=this.entities,nodes=[];parserInput.save();do if(e=entities.keyword()||entities.variable())nodes.push(e);else if(parserInput.$char("(")){if(p=this.property(),e=this.value(),!parserInput.$char(")"))return parserInput.restore("Missing closing ')'"),null;if(p&&e)nodes.push(new tree.Paren(new tree.Rule(p,e,null,null,parserInput.i,fileInfo,!0)));else{if(!e)return parserInput.restore("badly formed media feature definition"),null;nodes.push(new tree.Paren(e))}}while(e);return parserInput.forget(),nodes.length>0?new tree.Expression(nodes):void 0},mediaFeatures:function(){var e,entities=this.entities,features=[];do if(e=this.mediaFeature()){if(features.push(e),!parserInput.$char(","))break}else if(e=entities.variable(),e&&(features.push(e),!parserInput.$char(",")))break;while(e);return features.length>0?features:null},media:function(){var features,rules,media,debugInfo;return context.dumpLineNumbers&&(debugInfo=getDebugInfo(parserInput.i)),parserInput.save(),parserInput.$str("@media")?(features=this.mediaFeatures(),(rules=this.block())?(parserInput.forget(),media=new tree.Media(rules,features,parserInput.i,fileInfo),context.dumpLineNumbers&&(media.debugInfo=debugInfo),media):void parserInput.restore("media definitions require block statements after any features")):void parserInput.restore()},plugin:function(){var path,index=parserInput.i,dir=parserInput.$re(/^@plugin?\s+/);if(dir){var options={plugin:!0};if(path=this.entities.quoted()||this.entities.url())return parserInput.$char(";")||(parserInput.i=index,error("missing semi-colon on plugin")),new tree.Import(path,null,options,index,fileInfo);parserInput.i=index,error("malformed plugin statement")}},directive:function(){var name,value,rules,nonVendorSpecificName,hasIdentifier,hasExpression,hasUnknown,index=parserInput.i,hasBlock=!0,isRooted=!0;if("@"===parserInput.currentChar()){if(value=this["import"]()||this.plugin()||this.media())return value;if(parserInput.save(),name=parserInput.$re(/^@[a-z-]+/)){switch(nonVendorSpecificName=name,"-"==name.charAt(1)&&name.indexOf("-",2)>0&&(nonVendorSpecificName="@"+name.slice(name.indexOf("-",2)+1)),nonVendorSpecificName){case"@counter-style":hasIdentifier=!0,hasBlock=!0;break;case"@charset":hasIdentifier=!0,hasBlock=!1;break;case"@namespace":hasExpression=!0,hasBlock=!1;break;case"@keyframes":hasIdentifier=!0;break;case"@host":case"@page":hasUnknown=!0;break;case"@document":case"@supports":hasUnknown=!0,isRooted=!1}return parserInput.commentStore.length=0,hasIdentifier?(value=this.entity(),value||error("expected "+name+" identifier")):hasExpression?(value=this.expression(),value||error("expected "+name+" expression")):hasUnknown&&(value=(parserInput.$re(/^[^{;]+/)||"").trim(),value&&(value=new tree.Anonymous(value))),hasBlock&&(rules=this.blockRuleset()),rules||!hasBlock&&value&&parserInput.$char(";")?(parserInput.forget(),new tree.Directive(name,value,rules,index,fileInfo,context.dumpLineNumbers?getDebugInfo(index):null,!1,isRooted)):void parserInput.restore("directive options not recognised")}}},value:function(){var e,expressions=[];do if(e=this.expression(),e&&(expressions.push(e),!parserInput.$char(",")))break;while(e);return expressions.length>0?new tree.Value(expressions):void 0},important:function(){return"!"===parserInput.currentChar()?parserInput.$re(/^! *important/):void 0},sub:function(){var a,e;return parserInput.save(),parserInput.$char("(")?(a=this.addition(),a&&parserInput.$char(")")?(parserInput.forget(),e=new tree.Expression([a]),e.parens=!0,e):void parserInput.restore("Expected ')'")):void parserInput.restore()},multiplication:function(){var m,a,op,operation,isSpaced;if(m=this.operand()){for(isSpaced=parserInput.isWhitespace(-1);;){if(parserInput.peek(/^\/[*\/]/))break;if(parserInput.save(),op=parserInput.$char("/")||parserInput.$char("*"),!op){parserInput.forget();break}if(a=this.operand(),!a){parserInput.restore();break}parserInput.forget(),m.parensInOp=!0,a.parensInOp=!0,operation=new tree.Operation(op,[operation||m,a],isSpaced),isSpaced=parserInput.isWhitespace(-1)}return operation||m}},addition:function(){var m,a,op,operation,isSpaced;if(m=this.multiplication()){for(isSpaced=parserInput.isWhitespace(-1);;){if(op=parserInput.$re(/^[-+]\s+/)||!isSpaced&&(parserInput.$char("+")||parserInput.$char("-")),!op)break;if(a=this.multiplication(),!a)break;m.parensInOp=!0,a.parensInOp=!0,operation=new tree.Operation(op,[operation||m,a],isSpaced),isSpaced=parserInput.isWhitespace(-1)}return operation||m}},conditions:function(){var a,b,condition,index=parserInput.i;if(a=this.condition()){for(;;){if(!parserInput.peek(/^,\s*(not\s*)?\(/)||!parserInput.$char(","))break;if(b=this.condition(),!b)break;condition=new tree.Condition("or",condition||a,b,index)}return condition||a}},condition:function(){var a,b,c,op,entities=this.entities,index=parserInput.i,negate=!1;return parserInput.$str("not")&&(negate=!0),expectChar("("),a=this.addition()||entities.keyword()||entities.quoted(),a?(parserInput.$char(">")?op=parserInput.$char("=")?">=":">":parserInput.$char("<")?op=parserInput.$char("=")?"<=":"<":parserInput.$char("=")&&(op=parserInput.$char(">")?"=>":parserInput.$char("<")?"=<":"="),op?(b=this.addition()||entities.keyword()||entities.quoted(),b?c=new tree.Condition(op,a,b,index,negate):error("expected expression")):c=new tree.Condition("=",a,new tree.Keyword("true"),index,negate),expectChar(")"),parserInput.$str("and")?new tree.Condition("and",c,this.condition()):c):void 0},operand:function(){var negate,entities=this.entities;parserInput.peek(/^-[@\(]/)&&(negate=parserInput.$char("-"));var o=this.sub()||entities.dimension()||entities.color()||entities.variable()||entities.call();return negate&&(o.parensInOp=!0,o=new tree.Negative(o)),o},expression:function(){var e,delim,entities=[];do e=this.comment(),e?entities.push(e):(e=this.addition()||this.entity(),e&&(entities.push(e),parserInput.peek(/^\/[\/*]/)||(delim=parserInput.$char("/"),delim&&entities.push(new tree.Anonymous(delim)))));while(e);return entities.length>0?new tree.Expression(entities):void 0},property:function(){var name=parserInput.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);return name?name[1]:void 0},ruleProperty:function(){function match(re){var i=parserInput.i,chunk=parserInput.$re(re);return chunk?(index.push(i),name.push(chunk[1])):void 0}var s,k,name=[],index=[];parserInput.save();var simpleProperty=parserInput.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(simpleProperty)return name=[new tree.Keyword(simpleProperty[1])],parserInput.forget(),name;for(match(/^(\*?)/);;)if(!match(/^((?:[\w-]+)|(?:@\{[\w-]+\}))/))break;if(name.length>1&&match(/^((?:\+_|\+)?)\s*:/)){for(parserInput.forget(),""===name[0]&&(name.shift(),index.shift()),k=0;k<name.length;k++)s=name[k],name[k]="@"!==s.charAt(0)?new tree.Keyword(s):new tree.Variable("@"+s.slice(2,-1),index[k],fileInfo);return name}parserInput.restore()}}}};Parser.serializeVars=function(vars){var s="";for(var name in vars)if(Object.hasOwnProperty.call(vars,name)){var value=vars[name];s+=("@"===name[0]?"":"@")+name+": "+value+(";"===String(value).slice(-1)?"":";")}return s},module.exports=Parser},{"../less-error":30,"../tree":60,"../utils":81,"../visitors":85,"./parser-input":35}],37:[function(require,module,exports){var PluginManager=function(less){this.less=less,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[]};PluginManager.prototype.addPlugins=function(plugins){if(plugins)for(var i=0;i<plugins.length;i++)this.addPlugin(plugins[i])},PluginManager.prototype.addPlugin=function(plugin){this.installedPlugins.push(plugin),plugin.install(this.less,this)},PluginManager.prototype.addVisitor=function(visitor){this.visitors.push(visitor)},PluginManager.prototype.addPreProcessor=function(preProcessor,priority){var indexToInsertAt;for(indexToInsertAt=0;indexToInsertAt<this.preProcessors.length&&!(this.preProcessors[indexToInsertAt].priority>=priority);indexToInsertAt++);this.preProcessors.splice(indexToInsertAt,0,{preProcessor:preProcessor,priority:priority})},PluginManager.prototype.addPostProcessor=function(postProcessor,priority){var indexToInsertAt;for(indexToInsertAt=0;indexToInsertAt<this.postProcessors.length&&!(this.postProcessors[indexToInsertAt].priority>=priority);indexToInsertAt++);this.postProcessors.splice(indexToInsertAt,0,{postProcessor:postProcessor,priority:priority})},PluginManager.prototype.addFileManager=function(manager){this.fileManagers.push(manager)},PluginManager.prototype.getPreProcessors=function(){for(var preProcessors=[],i=0;i<this.preProcessors.length;i++)preProcessors.push(this.preProcessors[i].preProcessor);return preProcessors},PluginManager.prototype.getPostProcessors=function(){for(var postProcessors=[],i=0;i<this.postProcessors.length;i++)postProcessors.push(this.postProcessors[i].postProcessor);return postProcessors},PluginManager.prototype.getVisitors=function(){return this.visitors},PluginManager.prototype.getFileManagers=function(){return this.fileManagers},module.exports=PluginManager},{}],38:[function(require,module,exports){var LessError=require("../less-error"),tree=require("../tree"),FunctionImporter=module.exports=function(context,fileInfo){this.fileInfo=fileInfo};FunctionImporter.prototype.eval=function(contents,callback){var loader,registry,loaded={};registry={add:function(name,func){loaded[name]=func},addMultiple:function(functions){Object.keys(functions).forEach(function(name){loaded[name]=functions[name]})}};try{loader=new Function("functions","tree","fileInfo",contents),loader(registry,tree,this.fileInfo)}catch(e){callback(new LessError({message:"Plugin evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",filename:this.fileInfo.filename}),null)}callback(null,{functions:loaded})}},{"../less-error":30,"../tree":60}],39:[function(require,module,exports){var PromiseConstructor;module.exports=function(environment,ParseTree,ImportManager){var render=function(input,options,callback){if("function"==typeof options&&(callback=options,options={}),!callback){PromiseConstructor||(PromiseConstructor="undefined"==typeof Promise?require("promise"):Promise);var self=this;return new PromiseConstructor(function(resolve,reject){render.call(self,input,options,function(err,output){err?reject(err):resolve(output)})})}this.parse(input,options,function(err,root,imports,options){if(err)return callback(err);var result;try{var parseTree=new ParseTree(root,imports);result=parseTree.toCSS(options)}catch(err){return callback(err)}callback(null,result)})};return render}},{promise:void 0}],40:[function(require,module,exports){module.exports=function(SourceMapOutput,environment){var SourceMapBuilder=function(options){this.options=options};return SourceMapBuilder.prototype.toCSS=function(rootNode,options,imports){var sourceMapOutput=new SourceMapOutput({contentsIgnoredCharsMap:imports.contentsIgnoredChars,rootNode:rootNode,contentsMap:imports.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),css=sourceMapOutput.toCSS(options);return this.sourceMap=sourceMapOutput.sourceMap,this.sourceMapURL=sourceMapOutput.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=sourceMapOutput.normalizeFilename(this.options.sourceMapInputFilename)),css+this.getCSSAppendage()},SourceMapBuilder.prototype.getCSSAppendage=function(){var sourceMapURL=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";sourceMapURL="data:application/json;base64,"+environment.encodeBase64(this.sourceMap)}return sourceMapURL?"/*# sourceMappingURL="+sourceMapURL+" */":""},SourceMapBuilder.prototype.getExternalSourceMap=function(){return this.sourceMap},SourceMapBuilder.prototype.setExternalSourceMap=function(sourceMap){this.sourceMap=sourceMap},SourceMapBuilder.prototype.isInline=function(){return this.options.sourceMapFileInline},SourceMapBuilder.prototype.getSourceMapURL=function(){return this.sourceMapURL},SourceMapBuilder.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},SourceMapBuilder.prototype.getInputFilename=function(){return this.sourceMapInputFilename},SourceMapBuilder}},{}],41:[function(require,module,exports){module.exports=function(environment){var SourceMapOutput=function(options){this._css=[],this._rootNode=options.rootNode,this._contentsMap=options.contentsMap,this._contentsIgnoredCharsMap=options.contentsIgnoredCharsMap,options.sourceMapFilename&&(this._sourceMapFilename=options.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=options.outputFilename,this.sourceMapURL=options.sourceMapURL,options.sourceMapBasepath&&(this._sourceMapBasepath=options.sourceMapBasepath.replace(/\\/g,"/")),options.sourceMapRootpath?(this._sourceMapRootpath=options.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=options.outputSourceFiles,this._sourceMapGeneratorConstructor=environment.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return SourceMapOutput.prototype.normalizeFilename=function(filename){return filename=filename.replace(/\\/g,"/"),this._sourceMapBasepath&&0===filename.indexOf(this._sourceMapBasepath)&&(filename=filename.substring(this._sourceMapBasepath.length),("\\"===filename.charAt(0)||"/"===filename.charAt(0))&&(filename=filename.substring(1))),(this._sourceMapRootpath||"")+filename},SourceMapOutput.prototype.add=function(chunk,fileInfo,index,mapLines){if(chunk){var lines,sourceLines,columns,sourceColumns,i;if(fileInfo){var inputSource=this._contentsMap[fileInfo.filename];this._contentsIgnoredCharsMap[fileInfo.filename]&&(index-=this._contentsIgnoredCharsMap[fileInfo.filename],0>index&&(index=0),inputSource=inputSource.slice(this._contentsIgnoredCharsMap[fileInfo.filename])),inputSource=inputSource.substring(0,index),sourceLines=inputSource.split("\n"),sourceColumns=sourceLines[sourceLines.length-1]}if(lines=chunk.split("\n"),columns=lines[lines.length-1],fileInfo)if(mapLines)for(i=0;i<lines.length;i++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+i+1,column:0===i?this._column:0},original:{line:sourceLines.length+i,column:0===i?sourceColumns.length:0},source:this.normalizeFilename(fileInfo.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:sourceLines.length,column:sourceColumns.length},source:this.normalizeFilename(fileInfo.filename)});1===lines.length?this._column+=columns.length:(this._lineNumber+=lines.length-1,this._column=columns.length),this._css.push(chunk)}},SourceMapOutput.prototype.isEmpty=function(){return 0===this._css.length},SourceMapOutput.prototype.toCSS=function(context){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var filename in this._contentsMap)if(this._contentsMap.hasOwnProperty(filename)){var source=this._contentsMap[filename];this._contentsIgnoredCharsMap[filename]&&(source=source.slice(this._contentsIgnoredCharsMap[filename])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(filename),source)}if(this._rootNode.genCSS(context,this),this._css.length>0){var sourceMapURL,sourceMapContent=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?sourceMapURL=this.sourceMapURL:this._sourceMapFilename&&(sourceMapURL=this._sourceMapFilename),this.sourceMapURL=sourceMapURL,this.sourceMap=sourceMapContent}return this._css.join("")},SourceMapOutput}},{}],42:[function(require,module,exports){var contexts=require("./contexts"),visitor=require("./visitors"),tree=require("./tree");module.exports=function(root,options){options=options||{};var evaldRoot,variables=options.variables,evalEnv=new contexts.Eval(options);"object"!=typeof variables||Array.isArray(variables)||(variables=Object.keys(variables).map(function(k){var value=variables[k];return value instanceof tree.Value||(value instanceof tree.Expression||(value=new tree.Expression([value])),value=new tree.Value([value])),new tree.Rule("@"+k,value,!1,null,0)}),evalEnv.frames=[new tree.Ruleset(null,variables)]);var i,preEvalVisitors=[],visitors=[new visitor.JoinSelectorVisitor,new visitor.ExtendVisitor,new visitor.ToCSSVisitor({compress:Boolean(options.compress)})];if(options.pluginManager){var pluginVisitors=options.pluginManager.getVisitors();for(i=0;i<pluginVisitors.length;i++){var pluginVisitor=pluginVisitors[i];pluginVisitor.isPreEvalVisitor?preEvalVisitors.push(pluginVisitor):pluginVisitor.isPreVisitor?visitors.splice(0,0,pluginVisitor):visitors.push(pluginVisitor)}}for(i=0;i<preEvalVisitors.length;i++)preEvalVisitors[i].run(root);for(evaldRoot=root.eval(evalEnv),i=0;i<visitors.length;i++)visitors[i].run(evaldRoot);return evaldRoot}},{"./contexts":10,"./tree":60,"./visitors":85}],43:[function(require,module,exports){var Node=require("./node"),Alpha=function(val){this.value=val};Alpha.prototype=new Node,Alpha.prototype.type="Alpha",Alpha.prototype.accept=function(visitor){this.value=visitor.visit(this.value)},Alpha.prototype.eval=function(context){return this.value.eval?new Alpha(this.value.eval(context)):this},Alpha.prototype.genCSS=function(context,output){output.add("alpha(opacity="),this.value.genCSS?this.value.genCSS(context,output):output.add(this.value),output.add(")")},module.exports=Alpha},{
"./node":68}],44:[function(require,module,exports){var Node=require("./node"),Anonymous=function(value,index,currentFileInfo,mapLines,rulesetLike){this.value=value,this.index=index,this.mapLines=mapLines,this.currentFileInfo=currentFileInfo,this.rulesetLike="undefined"==typeof rulesetLike?!1:rulesetLike};Anonymous.prototype=new Node,Anonymous.prototype.type="Anonymous",Anonymous.prototype.eval=function(){return new Anonymous(this.value,this.index,this.currentFileInfo,this.mapLines,this.rulesetLike)},Anonymous.prototype.compare=function(other){return other.toCSS&&this.toCSS()===other.toCSS()?0:void 0},Anonymous.prototype.isRulesetLike=function(){return this.rulesetLike},Anonymous.prototype.genCSS=function(context,output){output.add(this.value,this.currentFileInfo,this.index,this.mapLines)},module.exports=Anonymous},{"./node":68}],45:[function(require,module,exports){var Node=require("./node"),Assignment=function(key,val){this.key=key,this.value=val};Assignment.prototype=new Node,Assignment.prototype.type="Assignment",Assignment.prototype.accept=function(visitor){this.value=visitor.visit(this.value)},Assignment.prototype.eval=function(context){return this.value.eval?new Assignment(this.key,this.value.eval(context)):this},Assignment.prototype.genCSS=function(context,output){output.add(this.key+"="),this.value.genCSS?this.value.genCSS(context,output):output.add(this.value)},module.exports=Assignment},{"./node":68}],46:[function(require,module,exports){var Node=require("./node"),Attribute=function(key,op,value){this.key=key,this.op=op,this.value=value};Attribute.prototype=new Node,Attribute.prototype.type="Attribute",Attribute.prototype.eval=function(context){return new Attribute(this.key.eval?this.key.eval(context):this.key,this.op,this.value&&this.value.eval?this.value.eval(context):this.value)},Attribute.prototype.genCSS=function(context,output){output.add(this.toCSS(context))},Attribute.prototype.toCSS=function(context){var value=this.key.toCSS?this.key.toCSS(context):this.key;return this.op&&(value+=this.op,value+=this.value.toCSS?this.value.toCSS(context):this.value),"["+value+"]"},module.exports=Attribute},{"./node":68}],47:[function(require,module,exports){var Node=require("./node"),FunctionCaller=require("../functions/function-caller"),Call=function(name,args,index,currentFileInfo){this.name=name,this.args=args,this.index=index,this.currentFileInfo=currentFileInfo};Call.prototype=new Node,Call.prototype.type="Call",Call.prototype.accept=function(visitor){this.args&&(this.args=visitor.visitArray(this.args))},Call.prototype.eval=function(context){var result,args=this.args.map(function(a){return a.eval(context)}),funcCaller=new FunctionCaller(this.name,context,this.index,this.currentFileInfo);if(funcCaller.isValid())try{if(result=funcCaller.call(args),null!=result)return result}catch(e){throw{type:e.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(e.message?": "+e.message:""),index:this.index,filename:this.currentFileInfo.filename}}return new Call(this.name,args,this.index,this.currentFileInfo)},Call.prototype.genCSS=function(context,output){output.add(this.name+"(",this.currentFileInfo,this.index);for(var i=0;i<this.args.length;i++)this.args[i].genCSS(context,output),i+1<this.args.length&&output.add(", ");output.add(")")},module.exports=Call},{"../functions/function-caller":20,"./node":68}],48:[function(require,module,exports){function clamp(v,max){return Math.min(Math.max(v,0),max)}function toHex(v){return"#"+v.map(function(c){return c=clamp(Math.round(c),255),(16>c?"0":"")+c.toString(16)}).join("")}var Node=require("./node"),colors=require("../data/colors"),Color=function(rgb,a){Array.isArray(rgb)?this.rgb=rgb:6==rgb.length?this.rgb=rgb.match(/.{2}/g).map(function(c){return parseInt(c,16)}):this.rgb=rgb.split("").map(function(c){return parseInt(c+c,16)}),this.alpha="number"==typeof a?a:1};Color.prototype=new Node,Color.prototype.type="Color",Color.prototype.luma=function(){var r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255;return r=.03928>=r?r/12.92:Math.pow((r+.055)/1.055,2.4),g=.03928>=g?g/12.92:Math.pow((g+.055)/1.055,2.4),b=.03928>=b?b/12.92:Math.pow((b+.055)/1.055,2.4),.2126*r+.7152*g+.0722*b},Color.prototype.genCSS=function(context,output){output.add(this.toCSS(context))},Color.prototype.toCSS=function(context,doNotCompress){var color,alpha,compress=context&&context.compress&&!doNotCompress;if(this.value)return this.value;if(alpha=this.fround(context,this.alpha),1>alpha)return"rgba("+this.rgb.map(function(c){return clamp(Math.round(c),255)}).concat(clamp(alpha,1)).join(","+(compress?"":" "))+")";if(color=this.toRGB(),compress){var splitcolor=color.split("");splitcolor[1]===splitcolor[2]&&splitcolor[3]===splitcolor[4]&&splitcolor[5]===splitcolor[6]&&(color="#"+splitcolor[1]+splitcolor[3]+splitcolor[5])}return color},Color.prototype.operate=function(context,op,other){for(var rgb=[],alpha=this.alpha*(1-other.alpha)+other.alpha,c=0;3>c;c++)rgb[c]=this._operate(context,op,this.rgb[c],other.rgb[c]);return new Color(rgb,alpha)},Color.prototype.toRGB=function(){return toHex(this.rgb)},Color.prototype.toHSL=function(){var h,s,r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255,a=this.alpha,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2,d=max-min;if(max===min)h=s=0;else{switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:360*h,s:s,l:l,a:a}},Color.prototype.toHSV=function(){var h,s,r=this.rgb[0]/255,g=this.rgb[1]/255,b=this.rgb[2]/255,a=this.alpha,max=Math.max(r,g,b),min=Math.min(r,g,b),v=max,d=max-min;if(s=0===max?0:d/max,max===min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:360*h,s:s,v:v,a:a}},Color.prototype.toARGB=function(){return toHex([255*this.alpha].concat(this.rgb))},Color.prototype.compare=function(x){return x.rgb&&x.rgb[0]===this.rgb[0]&&x.rgb[1]===this.rgb[1]&&x.rgb[2]===this.rgb[2]&&x.alpha===this.alpha?0:void 0},Color.fromKeyword=function(keyword){var c,key=keyword.toLowerCase();return colors.hasOwnProperty(key)?c=new Color(colors[key].slice(1)):"transparent"===key&&(c=new Color([0,0,0],0)),c?(c.value=keyword,c):void 0},module.exports=Color},{"../data/colors":11,"./node":68}],49:[function(require,module,exports){var Node=require("./node"),Combinator=function(value){" "===value?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=value?value.trim():"",this.emptyOrWhitespace=""===this.value)};Combinator.prototype=new Node,Combinator.prototype.type="Combinator";var _noSpaceCombinators={"":!0," ":!0,"|":!0};Combinator.prototype.genCSS=function(context,output){var spaceOrEmpty=context.compress||_noSpaceCombinators[this.value]?"":" ";output.add(spaceOrEmpty+this.value+spaceOrEmpty)},module.exports=Combinator},{"./node":68}],50:[function(require,module,exports){var Node=require("./node"),getDebugInfo=require("./debug-info"),Comment=function(value,isLineComment,index,currentFileInfo){this.value=value,this.isLineComment=isLineComment,this.currentFileInfo=currentFileInfo};Comment.prototype=new Node,Comment.prototype.type="Comment",Comment.prototype.genCSS=function(context,output){this.debugInfo&&output.add(getDebugInfo(context,this),this.currentFileInfo,this.index),output.add(this.value)},Comment.prototype.isSilent=function(context){var isReference=this.currentFileInfo&&this.currentFileInfo.reference&&!this.isReferenced,isCompressed=context.compress&&"!"!==this.value[2];return this.isLineComment||isReference||isCompressed},Comment.prototype.markReferenced=function(){this.isReferenced=!0},module.exports=Comment},{"./debug-info":52,"./node":68}],51:[function(require,module,exports){var Node=require("./node"),Condition=function(op,l,r,i,negate){this.op=op.trim(),this.lvalue=l,this.rvalue=r,this.index=i,this.negate=negate};Condition.prototype=new Node,Condition.prototype.type="Condition",Condition.prototype.accept=function(visitor){this.lvalue=visitor.visit(this.lvalue),this.rvalue=visitor.visit(this.rvalue)},Condition.prototype.eval=function(context){var result=function(op,a,b){switch(op){case"and":return a&&b;case"or":return a||b;default:switch(Node.compare(a,b)){case-1:return"<"===op||"=<"===op||"<="===op;case 0:return"="===op||">="===op||"=<"===op||"<="===op;case 1:return">"===op||">="===op;default:return!1}}}(this.op,this.lvalue.eval(context),this.rvalue.eval(context));return this.negate?!result:result},module.exports=Condition},{"./node":68}],52:[function(require,module,exports){var debugInfo=function(context,ctx,lineSeparator){var result="";if(context.dumpLineNumbers&&!context.compress)switch(context.dumpLineNumbers){case"comments":result=debugInfo.asComment(ctx);break;case"mediaquery":result=debugInfo.asMediaQuery(ctx);break;case"all":result=debugInfo.asComment(ctx)+(lineSeparator||"")+debugInfo.asMediaQuery(ctx)}return result};debugInfo.asComment=function(ctx){return"/* line "+ctx.debugInfo.lineNumber+", "+ctx.debugInfo.fileName+" */\n"},debugInfo.asMediaQuery=function(ctx){var filenameWithProtocol=ctx.debugInfo.fileName;return/^[a-z]+:\/\//i.test(filenameWithProtocol)||(filenameWithProtocol="file://"+filenameWithProtocol),"@media -sass-debug-info{filename{font-family:"+filenameWithProtocol.replace(/([.:\/\\])/g,function(a){return"\\"==a&&(a="/"),"\\"+a})+"}line{font-family:\\00003"+ctx.debugInfo.lineNumber+"}}\n"},module.exports=debugInfo},{}],53:[function(require,module,exports){var Node=require("./node"),contexts=require("../contexts"),DetachedRuleset=function(ruleset,frames){this.ruleset=ruleset,this.frames=frames};DetachedRuleset.prototype=new Node,DetachedRuleset.prototype.type="DetachedRuleset",DetachedRuleset.prototype.evalFirst=!0,DetachedRuleset.prototype.accept=function(visitor){this.ruleset=visitor.visit(this.ruleset)},DetachedRuleset.prototype.eval=function(context){var frames=this.frames||context.frames.slice(0);return new DetachedRuleset(this.ruleset,frames)},DetachedRuleset.prototype.callEval=function(context){return this.ruleset.eval(this.frames?new contexts.Eval(context,this.frames.concat(context.frames)):context)},module.exports=DetachedRuleset},{"../contexts":10,"./node":68}],54:[function(require,module,exports){var Node=require("./node"),unitConversions=require("../data/unit-conversions"),Unit=require("./unit"),Color=require("./color"),Dimension=function(value,unit){this.value=parseFloat(value),this.unit=unit&&unit instanceof Unit?unit:new Unit(unit?[unit]:void 0)};Dimension.prototype=new Node,Dimension.prototype.type="Dimension",Dimension.prototype.accept=function(visitor){this.unit=visitor.visit(this.unit)},Dimension.prototype.eval=function(context){return this},Dimension.prototype.toColor=function(){return new Color([this.value,this.value,this.value])},Dimension.prototype.genCSS=function(context,output){if(context&&context.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var value=this.fround(context,this.value),strValue=String(value);if(0!==value&&1e-6>value&&value>-1e-6&&(strValue=value.toFixed(20).replace(/0+$/,"")),context&&context.compress){if(0===value&&this.unit.isLength())return void output.add(strValue);value>0&&1>value&&(strValue=strValue.substr(1))}output.add(strValue),this.unit.genCSS(context,output)},Dimension.prototype.operate=function(context,op,other){var value=this._operate(context,op,this.value,other.value),unit=this.unit.clone();if("+"===op||"-"===op)if(0===unit.numerator.length&&0===unit.denominator.length)unit=other.unit.clone(),this.unit.backupUnit&&(unit.backupUnit=this.unit.backupUnit);else if(0===other.unit.numerator.length&&0===unit.denominator.length);else{if(other=other.convertTo(this.unit.usedUnits()),context.strictUnits&&other.unit.toString()!==unit.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+unit.toString()+"' and '"+other.unit.toString()+"'.");value=this._operate(context,op,this.value,other.value)}else"*"===op?(unit.numerator=unit.numerator.concat(other.unit.numerator).sort(),unit.denominator=unit.denominator.concat(other.unit.denominator).sort(),unit.cancel()):"/"===op&&(unit.numerator=unit.numerator.concat(other.unit.denominator).sort(),unit.denominator=unit.denominator.concat(other.unit.numerator).sort(),unit.cancel());return new Dimension(value,unit)},Dimension.prototype.compare=function(other){var a,b;if(!(other instanceof Dimension))return void 0;if(this.unit.isEmpty()||other.unit.isEmpty())a=this,b=other;else if(a=this.unify(),b=other.unify(),0!==a.unit.compare(b.unit))return void 0;return Node.numericCompare(a.value,b.value)},Dimension.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},Dimension.prototype.convertTo=function(conversions){var i,groupName,group,targetUnit,applyUnit,value=this.value,unit=this.unit.clone(),derivedConversions={};if("string"==typeof conversions){for(i in unitConversions)unitConversions[i].hasOwnProperty(conversions)&&(derivedConversions={},derivedConversions[i]=conversions);conversions=derivedConversions}applyUnit=function(atomicUnit,denominator){return group.hasOwnProperty(atomicUnit)?(denominator?value/=group[atomicUnit]/group[targetUnit]:value*=group[atomicUnit]/group[targetUnit],targetUnit):atomicUnit};for(groupName in conversions)conversions.hasOwnProperty(groupName)&&(targetUnit=conversions[groupName],group=unitConversions[groupName],unit.map(applyUnit));return unit.cancel(),new Dimension(value,unit)},module.exports=Dimension},{"../data/unit-conversions":13,"./color":48,"./node":68,"./unit":77}],55:[function(require,module,exports){var Node=require("./node"),Selector=require("./selector"),Ruleset=require("./ruleset"),Directive=function(name,value,rules,index,currentFileInfo,debugInfo,isReferenced,isRooted){var i;if(this.name=name,this.value=value,rules)for(Array.isArray(rules)?this.rules=rules:(this.rules=[rules],this.rules[0].selectors=new Selector([],null,null,this.index,currentFileInfo).createEmptySelectors()),i=0;i<this.rules.length;i++)this.rules[i].allowImports=!0;this.index=index,this.currentFileInfo=currentFileInfo,this.debugInfo=debugInfo,this.isReferenced=isReferenced,this.isRooted=isRooted||!1};Directive.prototype=new Node,Directive.prototype.type="Directive",Directive.prototype.accept=function(visitor){var value=this.value,rules=this.rules;rules&&(this.rules=visitor.visitArray(rules)),value&&(this.value=visitor.visit(value))},Directive.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},Directive.prototype.isCharset=function(){return"@charset"===this.name},Directive.prototype.genCSS=function(context,output){var value=this.value,rules=this.rules;output.add(this.name,this.currentFileInfo,this.index),value&&(output.add(" "),value.genCSS(context,output)),rules?this.outputRuleset(context,output,rules):output.add(";")},Directive.prototype.eval=function(context){var mediaPathBackup,mediaBlocksBackup,value=this.value,rules=this.rules;return mediaPathBackup=context.mediaPath,mediaBlocksBackup=context.mediaBlocks,context.mediaPath=[],context.mediaBlocks=[],value&&(value=value.eval(context)),rules&&(rules=[rules[0].eval(context)],rules[0].root=!0),context.mediaPath=mediaPathBackup,context.mediaBlocks=mediaBlocksBackup,new Directive(this.name,value,rules,this.index,this.currentFileInfo,this.debugInfo,this.isReferenced,this.isRooted)},Directive.prototype.variable=function(name){return this.rules?Ruleset.prototype.variable.call(this.rules[0],name):void 0},Directive.prototype.find=function(){return this.rules?Ruleset.prototype.find.apply(this.rules[0],arguments):void 0},Directive.prototype.rulesets=function(){return this.rules?Ruleset.prototype.rulesets.apply(this.rules[0]):void 0},Directive.prototype.markReferenced=function(){var i,rules;if(this.isReferenced=!0,this.rules)for(rules=this.rules,i=0;i<rules.length;i++)rules[i].markReferenced&&rules[i].markReferenced()},Directive.prototype.getIsReferenced=function(){return!this.currentFileInfo||!this.currentFileInfo.reference||this.isReferenced},Directive.prototype.outputRuleset=function(context,output,rules){var i,ruleCnt=rules.length;if(context.tabLevel=(0|context.tabLevel)+1,context.compress){for(output.add("{"),i=0;ruleCnt>i;i++)rules[i].genCSS(context,output);return output.add("}"),void context.tabLevel--}var tabSetStr="\n"+Array(context.tabLevel).join("  "),tabRuleStr=tabSetStr+"  ";if(ruleCnt){for(output.add(" {"+tabRuleStr),rules[0].genCSS(context,output),i=1;ruleCnt>i;i++)output.add(tabRuleStr),rules[i].genCSS(context,output);output.add(tabSetStr+"}")}else output.add(" {"+tabSetStr+"}");context.tabLevel--},module.exports=Directive},{"./node":68,"./ruleset":74,"./selector":75}],56:[function(require,module,exports){var Node=require("./node"),Paren=require("./paren"),Combinator=require("./combinator"),Element=function(combinator,value,index,currentFileInfo){this.combinator=combinator instanceof Combinator?combinator:new Combinator(combinator),"string"==typeof value?this.value=value.trim():value?this.value=value:this.value="",this.index=index,this.currentFileInfo=currentFileInfo};Element.prototype=new Node,Element.prototype.type="Element",Element.prototype.accept=function(visitor){var value=this.value;this.combinator=visitor.visit(this.combinator),"object"==typeof value&&(this.value=visitor.visit(value))},Element.prototype.eval=function(context){return new Element(this.combinator,this.value.eval?this.value.eval(context):this.value,this.index,this.currentFileInfo)},Element.prototype.genCSS=function(context,output){output.add(this.toCSS(context),this.currentFileInfo,this.index)},Element.prototype.toCSS=function(context){context=context||{};var value=this.value,firstSelector=context.firstSelector;return value instanceof Paren&&(context.firstSelector=!0),value=value.toCSS?value.toCSS(context):value,context.firstSelector=firstSelector,""===value&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(context)+value},module.exports=Element},{"./combinator":49,"./node":68,"./paren":70}],57:[function(require,module,exports){var Node=require("./node"),Paren=require("./paren"),Comment=require("./comment"),Expression=function(value){if(this.value=value,!value)throw new Error("Expression requires an array parameter")};Expression.prototype=new Node,Expression.prototype.type="Expression",Expression.prototype.accept=function(visitor){this.value=visitor.visitArray(this.value)},Expression.prototype.eval=function(context){var returnValue,inParenthesis=this.parens&&!this.parensInOp,doubleParen=!1;return inParenthesis&&context.inParenthesis(),this.value.length>1?returnValue=new Expression(this.value.map(function(e){return e.eval(context)})):1===this.value.length?(this.value[0].parens&&!this.value[0].parensInOp&&(doubleParen=!0),returnValue=this.value[0].eval(context)):returnValue=this,inParenthesis&&context.outOfParenthesis(),this.parens&&this.parensInOp&&!context.isMathOn()&&!doubleParen&&(returnValue=new Paren(returnValue)),returnValue},Expression.prototype.genCSS=function(context,output){for(var i=0;i<this.value.length;i++)this.value[i].genCSS(context,output),i+1<this.value.length&&output.add(" ")},Expression.prototype.throwAwayComments=function(){this.value=this.value.filter(function(v){return!(v instanceof Comment)})},module.exports=Expression},{"./comment":50,"./node":68,"./paren":70}],58:[function(require,module,exports){var Node=require("./node"),Extend=function Extend(selector,option,index){switch(this.selector=selector,this.option=option,this.index=index,this.object_id=Extend.next_id++,this.parent_ids=[this.object_id],option){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}};Extend.next_id=0,Extend.prototype=new Node,Extend.prototype.type="Extend",Extend.prototype.accept=function(visitor){this.selector=visitor.visit(this.selector)},Extend.prototype.eval=function(context){return new Extend(this.selector.eval(context),this.option,this.index)},Extend.prototype.clone=function(context){return new Extend(this.selector,this.option,this.index)},Extend.prototype.findSelfSelectors=function(selectors){var i,selectorElements,selfElements=[];for(i=0;i<selectors.length;i++)selectorElements=selectors[i].elements,i>0&&selectorElements.length&&""===selectorElements[0].combinator.value&&(selectorElements[0].combinator.value=" "),selfElements=selfElements.concat(selectors[i].elements);this.selfSelectors=[{elements:selfElements}]},module.exports=Extend},{"./node":68}],59:[function(require,module,exports){var Node=require("./node"),Media=require("./media"),URL=require("./url"),Quoted=require("./quoted"),Ruleset=require("./ruleset"),Anonymous=require("./anonymous"),Import=function(path,features,options,index,currentFileInfo){if(this.options=options,this.index=index,this.path=path,this.features=features,this.currentFileInfo=currentFileInfo,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var pathValue=this.getPath();pathValue&&/[#\.\&\?\/]css([\?;].*)?$/.test(pathValue)&&(this.css=!0)}};Import.prototype=new Node,Import.prototype.type="Import",Import.prototype.accept=function(visitor){this.features&&(this.features=visitor.visit(this.features)),this.path=visitor.visit(this.path),this.options.plugin||this.options.inline||!this.root||(this.root=visitor.visit(this.root))},Import.prototype.genCSS=function(context,output){this.css&&void 0===this.path.currentFileInfo.reference&&(output.add("@import ",this.currentFileInfo,this.index),this.path.genCSS(context,output),this.features&&(output.add(" "),this.features.genCSS(context,output)),output.add(";"))},Import.prototype.getPath=function(){return this.path instanceof URL?this.path.value.value:this.path.value},Import.prototype.isVariableImport=function(){var path=this.path;return path instanceof URL&&(path=path.value),path instanceof Quoted?path.containsVariables():!0},Import.prototype.evalForImport=function(context){var path=this.path;return path instanceof URL&&(path=path.value),new Import(path.eval(context),this.features,this.options,this.index,this.currentFileInfo)},Import.prototype.evalPath=function(context){var path=this.path.eval(context),rootpath=this.currentFileInfo&&this.currentFileInfo.rootpath;if(!(path instanceof URL)){if(rootpath){var pathValue=path.value;pathValue&&context.isPathRelative(pathValue)&&(path.value=rootpath+pathValue)}path.value=context.normalizePath(path.value)}return path},Import.prototype.eval=function(context){var ruleset,registry,features=this.features&&this.features.eval(context);if(this.options.plugin)return registry=context.frames[0]&&context.frames[0].functionRegistry,registry&&this.root&&this.root.functions&&registry.addMultiple(this.root.functions),[];if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var contents=new Anonymous(this.root,0,{filename:this.importedFilename},!0,!0);return this.features?new Media([contents],this.features.value):[contents]}if(this.css){var newImport=new Import(this.evalPath(context),features,this.options,this.index);if(!newImport.css&&this.error)throw this.error;return newImport}return ruleset=new Ruleset(null,this.root.rules.slice(0)),ruleset.evalImports(context),this.features?new Media(ruleset.rules,this.features.value):ruleset.rules},module.exports=Import},{"./anonymous":44,"./media":64,"./node":68,"./quoted":71,"./ruleset":74,"./url":78}],60:[function(require,module,exports){var tree={};tree.Node=require("./node"),tree.Alpha=require("./alpha"),tree.Color=require("./color"),tree.Directive=require("./directive"),tree.DetachedRuleset=require("./detached-ruleset"),tree.Operation=require("./operation"),tree.Dimension=require("./dimension"),tree.Unit=require("./unit"),tree.Keyword=require("./keyword"),tree.Variable=require("./variable"),tree.Ruleset=require("./ruleset"),tree.Element=require("./element"),tree.Attribute=require("./attribute"),tree.Combinator=require("./combinator"),tree.Selector=require("./selector"),tree.Quoted=require("./quoted"),tree.Expression=require("./expression"),tree.Rule=require("./rule"),tree.Call=require("./call"),tree.URL=require("./url"),tree.Import=require("./import"),tree.mixin={Call:require("./mixin-call"),Definition:require("./mixin-definition")},tree.Comment=require("./comment"),tree.Anonymous=require("./anonymous"),tree.Value=require("./value"),tree.JavaScript=require("./javascript"),tree.Assignment=require("./assignment"),tree.Condition=require("./condition"),tree.Paren=require("./paren"),tree.Media=require("./media"),tree.UnicodeDescriptor=require("./unicode-descriptor"),tree.Negative=require("./negative"),tree.Extend=require("./extend"),tree.RulesetCall=require("./ruleset-call"),module.exports=tree},{"./alpha":43,"./anonymous":44,"./assignment":45,"./attribute":46,"./call":47,"./color":48,"./combinator":49,"./comment":50,"./condition":51,"./detached-ruleset":53,"./dimension":54,"./directive":55,"./element":56,"./expression":57,"./extend":58,"./import":59,"./javascript":61,"./keyword":63,"./media":64,"./mixin-call":65,"./mixin-definition":66,"./negative":67,"./node":68,"./operation":69,"./paren":70,"./quoted":71,"./rule":72,"./ruleset":74,"./ruleset-call":73,"./selector":75,"./unicode-descriptor":76,"./unit":77,"./url":78,"./value":79,"./variable":80}],61:[function(require,module,exports){var JsEvalNode=require("./js-eval-node"),Dimension=require("./dimension"),Quoted=require("./quoted"),Anonymous=require("./anonymous"),JavaScript=function(string,escaped,index,currentFileInfo){this.escaped=escaped,this.expression=string,this.index=index,this.currentFileInfo=currentFileInfo};JavaScript.prototype=new JsEvalNode,JavaScript.prototype.type="JavaScript",JavaScript.prototype.eval=function(context){var result=this.evaluateJavaScript(this.expression,context);return"number"==typeof result?new Dimension(result):"string"==typeof result?new Quoted('"'+result+'"',result,this.escaped,this.index):new Anonymous(Array.isArray(result)?result.join(", "):result)},module.exports=JavaScript},{"./anonymous":44,"./dimension":54,"./js-eval-node":62,"./quoted":71}],62:[function(require,module,exports){var Node=require("./node"),Variable=require("./variable"),JsEvalNode=function(){};JsEvalNode.prototype=new Node,JsEvalNode.prototype.evaluateJavaScript=function(expression,context){var result,that=this,evalContext={};if(void 0!==context.javascriptEnabled&&!context.javascriptEnabled)throw{message:"You are using JavaScript, which has been disabled.",filename:this.currentFileInfo.filename,index:this.index};expression=expression.replace(/@\{([\w-]+)\}/g,function(_,name){return that.jsify(new Variable("@"+name,that.index,that.currentFileInfo).eval(context))});try{expression=new Function("return ("+expression+")")}catch(e){throw{message:"JavaScript evaluation error: "+e.message+" from `"+expression+"`",filename:this.currentFileInfo.filename,index:this.index}}var variables=context.frames[0].variables();for(var k in variables)variables.hasOwnProperty(k)&&(evalContext[k.slice(1)]={value:variables[k].value,toJS:function(){return this.value.eval(context).toCSS()}});try{result=expression.call(evalContext)}catch(e){throw{message:"JavaScript evaluation error: '"+e.name+": "+e.message.replace(/["]/g,"'")+"'",filename:this.currentFileInfo.filename,index:this.index}}return result},JsEvalNode.prototype.jsify=function(obj){return Array.isArray(obj.value)&&obj.value.length>1?"["+obj.value.map(function(v){return v.toCSS()}).join(", ")+"]":obj.toCSS()},module.exports=JsEvalNode},{"./node":68,"./variable":80}],63:[function(require,module,exports){var Node=require("./node"),Keyword=function(value){this.value=value};Keyword.prototype=new Node,Keyword.prototype.type="Keyword",Keyword.prototype.genCSS=function(context,output){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};output.add(this.value)},Keyword.True=new Keyword("true"),Keyword.False=new Keyword("false"),module.exports=Keyword},{"./node":68}],64:[function(require,module,exports){var Ruleset=require("./ruleset"),Value=require("./value"),Selector=require("./selector"),Anonymous=require("./anonymous"),Expression=require("./expression"),Directive=require("./directive"),Media=function(value,features,index,currentFileInfo){this.index=index,this.currentFileInfo=currentFileInfo;var selectors=new Selector([],null,null,this.index,this.currentFileInfo).createEmptySelectors();this.features=new Value(features),this.rules=[new Ruleset(selectors,value)],this.rules[0].allowImports=!0};Media.prototype=new Directive,Media.prototype.type="Media",Media.prototype.isRulesetLike=!0,Media.prototype.accept=function(visitor){this.features&&(this.features=visitor.visit(this.features)),this.rules&&(this.rules=visitor.visitArray(this.rules))},Media.prototype.genCSS=function(context,output){output.add("@media ",this.currentFileInfo,this.index),this.features.genCSS(context,output),this.outputRuleset(context,output,this.rules)},Media.prototype.eval=function(context){context.mediaBlocks||(context.mediaBlocks=[],context.mediaPath=[]);var media=new Media(null,[],this.index,this.currentFileInfo);this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,media.debugInfo=this.debugInfo);var strictMathBypass=!1;context.strictMath||(strictMathBypass=!0,context.strictMath=!0);try{media.features=this.features.eval(context)}finally{strictMathBypass&&(context.strictMath=!1)}return context.mediaPath.push(media),context.mediaBlocks.push(media),this.rules[0].functionRegistry=context.frames[0].functionRegistry.inherit(),context.frames.unshift(this.rules[0]),media.rules=[this.rules[0].eval(context)],context.frames.shift(),context.mediaPath.pop(),0===context.mediaPath.length?media.evalTop(context):media.evalNested(context)},Media.prototype.evalTop=function(context){var result=this;if(context.mediaBlocks.length>1){var selectors=new Selector([],null,null,this.index,this.currentFileInfo).createEmptySelectors();result=new Ruleset(selectors,context.mediaBlocks),result.multiMedia=!0}return delete context.mediaBlocks,delete context.mediaPath,result},Media.prototype.evalNested=function(context){var i,value,path=context.mediaPath.concat([this]);for(i=0;i<path.length;i++)value=path[i].features instanceof Value?path[i].features.value:path[i].features,path[i]=Array.isArray(value)?value:[value];return this.features=new Value(this.permute(path).map(function(path){for(path=path.map(function(fragment){return fragment.toCSS?fragment:new Anonymous(fragment)}),i=path.length-1;i>0;i--)path.splice(i,0,new Anonymous("and"));return new Expression(path)})),new Ruleset([],[])},Media.prototype.permute=function(arr){if(0===arr.length)return[];if(1===arr.length)return arr[0];for(var result=[],rest=this.permute(arr.slice(1)),i=0;i<rest.length;i++)for(var j=0;j<arr[0].length;j++)result.push([arr[0][j]].concat(rest[i]));return result},Media.prototype.bubbleSelectors=function(selectors){selectors&&(this.rules=[new Ruleset(selectors.slice(0),[this.rules[0]])])},module.exports=Media},{"./anonymous":44,"./directive":55,"./expression":57,"./ruleset":74,"./selector":75,"./value":79}],65:[function(require,module,exports){var Node=require("./node"),Selector=require("./selector"),MixinDefinition=require("./mixin-definition"),defaultFunc=require("../functions/default"),MixinCall=function(elements,args,index,currentFileInfo,important){this.selector=new Selector(elements),this.arguments=args&&args.length?args:null,this.index=index,this.currentFileInfo=currentFileInfo,this.important=important};MixinCall.prototype=new Node,MixinCall.prototype.type="MixinCall",MixinCall.prototype.accept=function(visitor){this.selector&&(this.selector=visitor.visit(this.selector)),this.arguments&&(this.arguments=visitor.visitArray(this.arguments))},MixinCall.prototype.eval=function(context){function calcDefGroup(mixin,mixinPath){var p,namespace;for(f=0;2>f;f++){for(conditionResult[f]=!0,defaultFunc.value(f),p=0;p<mixinPath.length&&conditionResult[f];p++)namespace=mixinPath[p],
namespace.matchCondition&&(conditionResult[f]=conditionResult[f]&&namespace.matchCondition(null,context));mixin.matchCondition&&(conditionResult[f]=conditionResult[f]&&mixin.matchCondition(args,context))}return conditionResult[0]||conditionResult[1]?conditionResult[0]!=conditionResult[1]?conditionResult[1]?defTrue:defFalse:defNone:defFalseEitherCase}var mixins,mixin,mixinPath,args,i,m,f,isRecursive,isOneFound,rule,candidate,defaultResult,count,originalRuleset,noArgumentsFilter,rules=[],match=!1,candidates=[],conditionResult=[],defFalseEitherCase=-1,defNone=0,defTrue=1,defFalse=2;for(args=this.arguments&&this.arguments.map(function(a){return{name:a.name,value:a.value.eval(context)}}),noArgumentsFilter=function(rule){return rule.matchArgs(null,context)},i=0;i<context.frames.length;i++)if((mixins=context.frames[i].find(this.selector,null,noArgumentsFilter)).length>0){for(isOneFound=!0,m=0;m<mixins.length;m++){for(mixin=mixins[m].rule,mixinPath=mixins[m].path,isRecursive=!1,f=0;f<context.frames.length;f++)if(!(mixin instanceof MixinDefinition)&&mixin===(context.frames[f].originalRuleset||context.frames[f])){isRecursive=!0;break}isRecursive||mixin.matchArgs(args,context)&&(candidate={mixin:mixin,group:calcDefGroup(mixin,mixinPath)},candidate.group!==defFalseEitherCase&&candidates.push(candidate),match=!0)}for(defaultFunc.reset(),count=[0,0,0],m=0;m<candidates.length;m++)count[candidates[m].group]++;if(count[defNone]>0)defaultResult=defFalse;else if(defaultResult=defTrue,count[defTrue]+count[defFalse]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(args)+"`",index:this.index,filename:this.currentFileInfo.filename};for(m=0;m<candidates.length;m++)if(candidate=candidates[m].group,candidate===defNone||candidate===defaultResult)try{mixin=candidates[m].mixin,mixin instanceof MixinDefinition||(originalRuleset=mixin.originalRuleset||mixin,mixin=new MixinDefinition("",[],mixin.rules,null,!1),mixin.originalRuleset=originalRuleset),Array.prototype.push.apply(rules,mixin.evalCall(context,args,this.important).rules)}catch(e){throw{message:e.message,index:this.index,filename:this.currentFileInfo.filename,stack:e.stack}}if(match){if(!this.currentFileInfo||!this.currentFileInfo.reference)for(i=0;i<rules.length;i++)rule=rules[i],rule.markReferenced&&rule.markReferenced();return rules}}throw isOneFound?{type:"Runtime",message:"No matching definition was found for `"+this.format(args)+"`",index:this.index,filename:this.currentFileInfo.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.currentFileInfo.filename}},MixinCall.prototype.format=function(args){return this.selector.toCSS().trim()+"("+(args?args.map(function(a){var argValue="";return a.name&&(argValue+=a.name+":"),argValue+=a.value.toCSS?a.value.toCSS():"???"}).join(", "):"")+")"},module.exports=MixinCall},{"../functions/default":19,"./mixin-definition":66,"./node":68,"./selector":75}],66:[function(require,module,exports){var Selector=require("./selector"),Element=require("./element"),Ruleset=require("./ruleset"),Rule=require("./rule"),Expression=require("./expression"),contexts=require("../contexts"),Definition=function(name,params,rules,condition,variadic,frames){this.name=name,this.selectors=[new Selector([new Element(null,name,this.index,this.currentFileInfo)])],this.params=params,this.condition=condition,this.variadic=variadic,this.arity=params.length,this.rules=rules,this._lookups={},this.required=params.reduce(function(count,p){return!p.name||p.name&&!p.value?count+1:count},0),this.frames=frames};Definition.prototype=new Ruleset,Definition.prototype.type="MixinDefinition",Definition.prototype.evalFirst=!0,Definition.prototype.accept=function(visitor){this.params&&this.params.length&&(this.params=visitor.visitArray(this.params)),this.rules=visitor.visitArray(this.rules),this.condition&&(this.condition=visitor.visit(this.condition))},Definition.prototype.evalParams=function(context,mixinEnv,args,evaldArguments){var varargs,arg,i,j,val,name,isNamedFound,argIndex,frame=new Ruleset(null,null),params=this.params.slice(0),argsLength=0;if(mixinEnv.frames&&mixinEnv.frames[0]&&mixinEnv.frames[0].functionRegistry&&(frame.functionRegistry=mixinEnv.frames[0].functionRegistry.inherit()),mixinEnv=new contexts.Eval(mixinEnv,[frame].concat(mixinEnv.frames)),args)for(args=args.slice(0),argsLength=args.length,i=0;argsLength>i;i++)if(arg=args[i],name=arg&&arg.name){for(isNamedFound=!1,j=0;j<params.length;j++)if(!evaldArguments[j]&&name===params[j].name){evaldArguments[j]=arg.value.eval(context),frame.prependRule(new Rule(name,arg.value.eval(context))),isNamedFound=!0;break}if(isNamedFound){args.splice(i,1),i--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+args[i].name+" not found"}}for(argIndex=0,i=0;i<params.length;i++)if(!evaldArguments[i]){if(arg=args&&args[argIndex],name=params[i].name)if(params[i].variadic){for(varargs=[],j=argIndex;argsLength>j;j++)varargs.push(args[j].value.eval(context));frame.prependRule(new Rule(name,new Expression(varargs).eval(context)))}else{if(val=arg&&arg.value)val=val.eval(context);else{if(!params[i].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+argsLength+" for "+this.arity+")"};val=params[i].value.eval(mixinEnv),frame.resetCache()}frame.prependRule(new Rule(name,val)),evaldArguments[i]=val}if(params[i].variadic&&args)for(j=argIndex;argsLength>j;j++)evaldArguments[j]=args[j].value.eval(context);argIndex++}return frame},Definition.prototype.makeImportant=function(){var rules=this.rules?this.rules.map(function(r){return r.makeImportant?r.makeImportant(!0):r}):this.rules,result=new Definition(this.name,this.params,rules,this.condition,this.variadic,this.frames);return result},Definition.prototype.eval=function(context){return new Definition(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||context.frames.slice(0))},Definition.prototype.evalCall=function(context,args,important){var rules,ruleset,_arguments=[],mixinFrames=this.frames?this.frames.concat(context.frames):context.frames,frame=this.evalParams(context,new contexts.Eval(context,mixinFrames),args,_arguments);return frame.prependRule(new Rule("@arguments",new Expression(_arguments).eval(context))),rules=this.rules.slice(0),ruleset=new Ruleset(null,rules),ruleset.originalRuleset=this,ruleset=ruleset.eval(new contexts.Eval(context,[this,frame].concat(mixinFrames))),important&&(ruleset=ruleset.makeImportant()),ruleset},Definition.prototype.matchCondition=function(args,context){return this.condition&&!this.condition.eval(new contexts.Eval(context,[this.evalParams(context,new contexts.Eval(context,this.frames?this.frames.concat(context.frames):context.frames),args,[])].concat(this.frames||[]).concat(context.frames)))?!1:!0},Definition.prototype.matchArgs=function(args,context){var len,argsLength=args&&args.length||0;if(this.variadic){if(argsLength<this.required-1)return!1}else{if(argsLength<this.required)return!1;if(argsLength>this.params.length)return!1}len=Math.min(argsLength,this.arity);for(var i=0;len>i;i++)if(!this.params[i].name&&!this.params[i].variadic&&args[i].value.eval(context).toCSS()!=this.params[i].value.eval(context).toCSS())return!1;return!0},module.exports=Definition},{"../contexts":10,"./element":56,"./expression":57,"./rule":72,"./ruleset":74,"./selector":75}],67:[function(require,module,exports){var Node=require("./node"),Operation=require("./operation"),Dimension=require("./dimension"),Negative=function(node){this.value=node};Negative.prototype=new Node,Negative.prototype.type="Negative",Negative.prototype.genCSS=function(context,output){output.add("-"),this.value.genCSS(context,output)},Negative.prototype.eval=function(context){return context.isMathOn()?new Operation("*",[new Dimension(-1),this.value]).eval(context):new Negative(this.value.eval(context))},module.exports=Negative},{"./dimension":54,"./node":68,"./operation":69}],68:[function(require,module,exports){var Node=function(){};Node.prototype.toCSS=function(context){var strs=[];return this.genCSS(context,{add:function(chunk,fileInfo,index){strs.push(chunk)},isEmpty:function(){return 0===strs.length}}),strs.join("")},Node.prototype.genCSS=function(context,output){output.add(this.value)},Node.prototype.accept=function(visitor){this.value=visitor.visit(this.value)},Node.prototype.eval=function(){return this},Node.prototype._operate=function(context,op,a,b){switch(op){case"+":return a+b;case"-":return a-b;case"*":return a*b;case"/":return a/b}},Node.prototype.fround=function(context,value){var precision=context&&context.numPrecision;return null==precision?value:Number((value+2e-16).toFixed(precision))},Node.compare=function(a,b){if(a.compare&&"Quoted"!==b.type&&"Anonymous"!==b.type)return a.compare(b);if(b.compare)return-b.compare(a);if(a.type!==b.type)return void 0;if(a=a.value,b=b.value,!Array.isArray(a))return a===b?0:void 0;if(a.length!==b.length)return void 0;for(var i=0;i<a.length;i++)if(0!==Node.compare(a[i],b[i]))return void 0;return 0},Node.numericCompare=function(a,b){return b>a?-1:a===b?0:a>b?1:void 0},module.exports=Node},{}],69:[function(require,module,exports){var Node=require("./node"),Color=require("./color"),Dimension=require("./dimension"),Operation=function(op,operands,isSpaced){this.op=op.trim(),this.operands=operands,this.isSpaced=isSpaced};Operation.prototype=new Node,Operation.prototype.type="Operation",Operation.prototype.accept=function(visitor){this.operands=visitor.visit(this.operands)},Operation.prototype.eval=function(context){var a=this.operands[0].eval(context),b=this.operands[1].eval(context);if(context.isMathOn()){if(a instanceof Dimension&&b instanceof Color&&(a=a.toColor()),b instanceof Dimension&&a instanceof Color&&(b=b.toColor()),!a.operate)throw{type:"Operation",message:"Operation on an invalid type"};return a.operate(context,this.op,b)}return new Operation(this.op,[a,b],this.isSpaced)},Operation.prototype.genCSS=function(context,output){this.operands[0].genCSS(context,output),this.isSpaced&&output.add(" "),output.add(this.op),this.isSpaced&&output.add(" "),this.operands[1].genCSS(context,output)},module.exports=Operation},{"./color":48,"./dimension":54,"./node":68}],70:[function(require,module,exports){var Node=require("./node"),Paren=function(node){this.value=node};Paren.prototype=new Node,Paren.prototype.type="Paren",Paren.prototype.genCSS=function(context,output){output.add("("),this.value.genCSS(context,output),output.add(")")},Paren.prototype.eval=function(context){return new Paren(this.value.eval(context))},module.exports=Paren},{"./node":68}],71:[function(require,module,exports){var Node=require("./node"),JsEvalNode=require("./js-eval-node"),Variable=require("./variable"),Quoted=function(str,content,escaped,index,currentFileInfo){this.escaped=null==escaped?!0:escaped,this.value=content||"",this.quote=str.charAt(0),this.index=index,this.currentFileInfo=currentFileInfo};Quoted.prototype=new JsEvalNode,Quoted.prototype.type="Quoted",Quoted.prototype.genCSS=function(context,output){this.escaped||output.add(this.quote,this.currentFileInfo,this.index),output.add(this.value),this.escaped||output.add(this.quote)},Quoted.prototype.containsVariables=function(){return this.value.match(/(`([^`]+)`)|@\{([\w-]+)\}/)},Quoted.prototype.eval=function(context){function iterativeReplace(value,regexp,replacementFnc){var evaluatedValue=value;do value=evaluatedValue,evaluatedValue=value.replace(regexp,replacementFnc);while(value!==evaluatedValue);return evaluatedValue}var that=this,value=this.value,javascriptReplacement=function(_,exp){return String(that.evaluateJavaScript(exp,context))},interpolationReplacement=function(_,name){var v=new Variable("@"+name,that.index,that.currentFileInfo).eval(context,!0);return v instanceof Quoted?v.value:v.toCSS()};return value=iterativeReplace(value,/`([^`]+)`/g,javascriptReplacement),value=iterativeReplace(value,/@\{([\w-]+)\}/g,interpolationReplacement),new Quoted(this.quote+value+this.quote,value,this.escaped,this.index,this.currentFileInfo)},Quoted.prototype.compare=function(other){return"Quoted"!==other.type||this.escaped||other.escaped?other.toCSS&&this.toCSS()===other.toCSS()?0:void 0:Node.numericCompare(this.value,other.value)},module.exports=Quoted},{"./js-eval-node":62,"./node":68,"./variable":80}],72:[function(require,module,exports){function evalName(context,name){var i,value="",n=name.length,output={add:function(s){value+=s}};for(i=0;n>i;i++)name[i].eval(context).genCSS(context,output);return value}var Node=require("./node"),Value=require("./value"),Keyword=require("./keyword"),Rule=function(name,value,important,merge,index,currentFileInfo,inline,variable){this.name=name,this.value=value instanceof Node?value:new Value([value]),this.important=important?" "+important.trim():"",this.merge=merge,this.index=index,this.currentFileInfo=currentFileInfo,this.inline=inline||!1,this.variable=void 0!==variable?variable:name.charAt&&"@"===name.charAt(0)};Rule.prototype=new Node,Rule.prototype.type="Rule",Rule.prototype.genCSS=function(context,output){output.add(this.name+(context.compress?":":": "),this.currentFileInfo,this.index);try{this.value.genCSS(context,output)}catch(e){throw e.index=this.index,e.filename=this.currentFileInfo.filename,e}output.add(this.important+(this.inline||context.lastRule&&context.compress?"":";"),this.currentFileInfo,this.index)},Rule.prototype.eval=function(context){var evaldValue,strictMathBypass=!1,name=this.name,variable=this.variable;"string"!=typeof name&&(name=1===name.length&&name[0]instanceof Keyword?name[0].value:evalName(context,name),variable=!1),"font"!==name||context.strictMath||(strictMathBypass=!0,context.strictMath=!0);try{if(context.importantScope.push({}),evaldValue=this.value.eval(context),!this.variable&&"DetachedRuleset"===evaldValue.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.index,filename:this.currentFileInfo.filename};var important=this.important,importantResult=context.importantScope.pop();return!important&&importantResult.important&&(important=importantResult.important),new Rule(name,evaldValue,important,this.merge,this.index,this.currentFileInfo,this.inline,variable)}catch(e){throw"number"!=typeof e.index&&(e.index=this.index,e.filename=this.currentFileInfo.filename),e}finally{strictMathBypass&&(context.strictMath=!1)}},Rule.prototype.makeImportant=function(){return new Rule(this.name,this.value,"!important",this.merge,this.index,this.currentFileInfo,this.inline)},module.exports=Rule},{"./keyword":63,"./node":68,"./value":79}],73:[function(require,module,exports){var Node=require("./node"),Variable=require("./variable"),RulesetCall=function(variable){this.variable=variable};RulesetCall.prototype=new Node,RulesetCall.prototype.type="RulesetCall",RulesetCall.prototype.eval=function(context){var detachedRuleset=new Variable(this.variable).eval(context);return detachedRuleset.callEval(context)},module.exports=RulesetCall},{"./node":68,"./variable":80}],74:[function(require,module,exports){var Node=require("./node"),Rule=require("./rule"),Selector=require("./selector"),Element=require("./element"),Paren=require("./paren"),contexts=require("../contexts"),globalFunctionRegistry=require("../functions/function-registry"),defaultFunc=require("../functions/default"),getDebugInfo=require("./debug-info"),Ruleset=function(selectors,rules,strictImports){this.selectors=selectors,this.rules=rules,this._lookups={},this.strictImports=strictImports};Ruleset.prototype=new Node,Ruleset.prototype.type="Ruleset",Ruleset.prototype.isRuleset=!0,Ruleset.prototype.isRulesetLike=!0,Ruleset.prototype.accept=function(visitor){this.paths?visitor.visitArray(this.paths,!0):this.selectors&&(this.selectors=visitor.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=visitor.visitArray(this.rules))},Ruleset.prototype.eval=function(context){var selectors,selCnt,selector,i,thisSelectors=this.selectors,hasOnePassingSelector=!1;if(thisSelectors&&(selCnt=thisSelectors.length)){for(selectors=[],defaultFunc.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),i=0;selCnt>i;i++)selector=thisSelectors[i].eval(context),selectors.push(selector),selector.evaldCondition&&(hasOnePassingSelector=!0);defaultFunc.reset()}else hasOnePassingSelector=!0;var rule,subRule,rules=this.rules?this.rules.slice(0):null,ruleset=new Ruleset(selectors,rules,this.strictImports);ruleset.originalRuleset=this,ruleset.root=this.root,ruleset.firstRoot=this.firstRoot,ruleset.allowImports=this.allowImports,this.debugInfo&&(ruleset.debugInfo=this.debugInfo),hasOnePassingSelector||(rules.length=0),ruleset.functionRegistry=function(frames){for(var found,i=0,n=frames.length;i!==n;++i)if(found=frames[i].functionRegistry)return found;return globalFunctionRegistry}(context.frames).inherit();var ctxFrames=context.frames;ctxFrames.unshift(ruleset);var ctxSelectors=context.selectors;ctxSelectors||(context.selectors=ctxSelectors=[]),ctxSelectors.unshift(this.selectors),(ruleset.root||ruleset.allowImports||!ruleset.strictImports)&&ruleset.evalImports(context);var rsRules=ruleset.rules,rsRuleCnt=rsRules?rsRules.length:0;for(i=0;rsRuleCnt>i;i++)rsRules[i].evalFirst&&(rsRules[i]=rsRules[i].eval(context));var mediaBlockCount=context.mediaBlocks&&context.mediaBlocks.length||0;for(i=0;rsRuleCnt>i;i++)"MixinCall"===rsRules[i].type?(rules=rsRules[i].eval(context).filter(function(r){return r instanceof Rule&&r.variable?!ruleset.variable(r.name):!0}),rsRules.splice.apply(rsRules,[i,1].concat(rules)),rsRuleCnt+=rules.length-1,i+=rules.length-1,ruleset.resetCache()):"RulesetCall"===rsRules[i].type&&(rules=rsRules[i].eval(context).rules.filter(function(r){return r instanceof Rule&&r.variable?!1:!0}),rsRules.splice.apply(rsRules,[i,1].concat(rules)),rsRuleCnt+=rules.length-1,i+=rules.length-1,ruleset.resetCache());for(i=0;i<rsRules.length;i++)rule=rsRules[i],rule.evalFirst||(rsRules[i]=rule=rule.eval?rule.eval(context):rule);for(i=0;i<rsRules.length;i++)if(rule=rsRules[i],rule instanceof Ruleset&&rule.selectors&&1===rule.selectors.length&&rule.selectors[0].isJustParentSelector()){rsRules.splice(i--,1);for(var j=0;j<rule.rules.length;j++)subRule=rule.rules[j],subRule instanceof Rule&&subRule.variable||rsRules.splice(++i,0,subRule)}if(ctxFrames.shift(),ctxSelectors.shift(),context.mediaBlocks)for(i=mediaBlockCount;i<context.mediaBlocks.length;i++)context.mediaBlocks[i].bubbleSelectors(selectors);return ruleset},Ruleset.prototype.evalImports=function(context){var i,importRules,rules=this.rules;if(rules)for(i=0;i<rules.length;i++)"Import"===rules[i].type&&(importRules=rules[i].eval(context),importRules&&importRules.length?(rules.splice.apply(rules,[i,1].concat(importRules)),i+=importRules.length-1):rules.splice(i,1,importRules),this.resetCache())},Ruleset.prototype.makeImportant=function(){var result=new Ruleset(this.selectors,this.rules.map(function(r){return r.makeImportant?r.makeImportant():r}),this.strictImports);return result},Ruleset.prototype.matchArgs=function(args){return!args||0===args.length},Ruleset.prototype.matchCondition=function(args,context){var lastSelector=this.selectors[this.selectors.length-1];return lastSelector.evaldCondition?lastSelector.condition&&!lastSelector.condition.eval(new contexts.Eval(context,context.frames))?!1:!0:!1},Ruleset.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._lookups={}},Ruleset.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce(function(hash,r){if(r instanceof Rule&&r.variable===!0&&(hash[r.name]=r),"Import"===r.type&&r.root&&r.root.variables){var vars=r.root.variables();for(var name in vars)vars.hasOwnProperty(name)&&(hash[name]=vars[name])}return hash},{}):{}),this._variables},Ruleset.prototype.variable=function(name){return this.variables()[name]},Ruleset.prototype.rulesets=function(){if(!this.rules)return[];var i,rule,filtRules=[],rules=this.rules,cnt=rules.length;for(i=0;cnt>i;i++)rule=rules[i],rule.isRuleset&&filtRules.push(rule);return filtRules},Ruleset.prototype.prependRule=function(rule){var rules=this.rules;rules?rules.unshift(rule):this.rules=[rule]},Ruleset.prototype.find=function(selector,self,filter){self=self||this;var match,foundMixins,rules=[],key=selector.toCSS();return key in this._lookups?this._lookups[key]:(this.rulesets().forEach(function(rule){if(rule!==self)for(var j=0;j<rule.selectors.length;j++)if(match=selector.match(rule.selectors[j])){if(selector.elements.length>match){if(!filter||filter(rule)){foundMixins=rule.find(new Selector(selector.elements.slice(match)),self,filter);for(var i=0;i<foundMixins.length;++i)foundMixins[i].path.push(rule);Array.prototype.push.apply(rules,foundMixins)}}else rules.push({rule:rule,path:[]});break}}),this._lookups[key]=rules,rules)},Ruleset.prototype.genCSS=function(context,output){function isRulesetLikeNode(rule){return"boolean"==typeof rule.isRulesetLike?rule.isRulesetLike:"function"==typeof rule.isRulesetLike?rule.isRulesetLike():!1}var i,j,debugInfo,rule,path,charsetRuleNodes=[],ruleNodes=[];context.tabLevel=context.tabLevel||0,this.root||context.tabLevel++;var sep,tabRuleStr=context.compress?"":Array(context.tabLevel+1).join("  "),tabSetStr=context.compress?"":Array(context.tabLevel).join("  "),charsetNodeIndex=0,importNodeIndex=0;for(i=0;i<this.rules.length;i++)rule=this.rules[i],"Comment"===rule.type?(importNodeIndex===i&&importNodeIndex++,ruleNodes.push(rule)):rule.isCharset&&rule.isCharset()?(ruleNodes.splice(charsetNodeIndex,0,rule),charsetNodeIndex++,importNodeIndex++):"Import"===rule.type?(ruleNodes.splice(importNodeIndex,0,rule),importNodeIndex++):ruleNodes.push(rule);if(ruleNodes=charsetRuleNodes.concat(ruleNodes),!this.root){debugInfo=getDebugInfo(context,this,tabSetStr),debugInfo&&(output.add(debugInfo),output.add(tabSetStr));var pathSubCnt,paths=this.paths,pathCnt=paths.length;for(sep=context.compress?",":",\n"+tabSetStr,i=0;pathCnt>i;i++)if(path=paths[i],pathSubCnt=path.length)for(i>0&&output.add(sep),context.firstSelector=!0,path[0].genCSS(context,output),context.firstSelector=!1,j=1;pathSubCnt>j;j++)path[j].genCSS(context,output);output.add((context.compress?"{":" {\n")+tabRuleStr)}for(i=0;i<ruleNodes.length;i++){rule=ruleNodes[i],i+1===ruleNodes.length&&(context.lastRule=!0);var currentLastRule=context.lastRule;isRulesetLikeNode(rule)&&(context.lastRule=!1),rule.genCSS?rule.genCSS(context,output):rule.value&&output.add(rule.value.toString()),context.lastRule=currentLastRule,context.lastRule?context.lastRule=!1:output.add(context.compress?"":"\n"+tabRuleStr)}this.root||(output.add(context.compress?"}":"\n"+tabSetStr+"}"),context.tabLevel--),output.isEmpty()||context.compress||!this.firstRoot||output.add("\n")},Ruleset.prototype.markReferenced=function(){var s;if(this.selectors)for(s=0;s<this.selectors.length;s++)this.selectors[s].markReferenced();if(this.rules)for(s=0;s<this.rules.length;s++)this.rules[s].markReferenced&&this.rules[s].markReferenced()},Ruleset.prototype.getIsReferenced=function(){var i,j,path,selector;if(this.paths)for(i=0;i<this.paths.length;i++)for(path=this.paths[i],j=0;j<path.length;j++)if(path[j].getIsReferenced&&path[j].getIsReferenced())return!0;if(this.selectors)for(i=0;i<this.selectors.length;i++)if(selector=this.selectors[i],selector.getIsReferenced&&selector.getIsReferenced())return!0;return!1},Ruleset.prototype.joinSelectors=function(paths,context,selectors){for(var s=0;s<selectors.length;s++)this.joinSelector(paths,context,selectors[s])},Ruleset.prototype.joinSelector=function(paths,context,selector){function createParenthesis(elementsToPak,originalElement){var replacementParen,j;if(0===elementsToPak.length)replacementParen=new Paren(elementsToPak[0]);else{var insideParent=[];for(j=0;j<elementsToPak.length;j++)insideParent.push(new Element(null,elementsToPak[j],originalElement.index,originalElement.currentFileInfo));replacementParen=new Paren(new Selector(insideParent))}return replacementParen}function createSelector(containedElement,originalElement){var element,selector;return element=new Element(null,containedElement,originalElement.index,originalElement.currentFileInfo),selector=new Selector([element])}function replaceParentSelector(paths,context,inSelector){function findNestedSelector(element){var maybeSelector;return"Paren"!==element.value.type?null:(maybeSelector=element.value.value,"Selector"!==maybeSelector.type?null:maybeSelector)}var i,j,k,currentElements,newSelectors,selectorsMultiplied,sel,el,length,lastSelector,hadParentSelector=!1;for(currentElements=[],newSelectors=[[]],i=0;i<inSelector.elements.length;i++)if(el=inSelector.elements[i],"&"!==el.value){var nestedSelector=findNestedSelector(el);if(null!=nestedSelector){mergeElementsOnToSelectors(currentElements,newSelectors);var replaced,nestedPaths=[],replacedNewSelectors=[];for(replaced=replaceParentSelector(nestedPaths,context,nestedSelector),hadParentSelector=hadParentSelector||replaced,k=0;k<nestedPaths.length;k++){var replacementSelector=createSelector(createParenthesis(nestedPaths[k],el),el);addAllReplacementsIntoPath(newSelectors,[replacementSelector],el,inSelector,replacedNewSelectors)}newSelectors=replacedNewSelectors,currentElements=[]}else currentElements.push(el)}else{for(hadParentSelector=!0,selectorsMultiplied=[],mergeElementsOnToSelectors(currentElements,newSelectors),j=0;j<newSelectors.length;j++)if(sel=newSelectors[j],0===context.length)sel.length>0&&sel[0].elements.push(new Element(el.combinator,"",el.index,el.currentFileInfo)),selectorsMultiplied.push(sel);else for(k=0;k<context.length;k++){var newSelectorPath=addReplacementIntoPath(sel,context[k],el,inSelector);selectorsMultiplied.push(newSelectorPath)}newSelectors=selectorsMultiplied,currentElements=[]}for(mergeElementsOnToSelectors(currentElements,newSelectors),i=0;i<newSelectors.length;i++)length=newSelectors[i].length,length>0&&(paths.push(newSelectors[i]),lastSelector=newSelectors[i][length-1],newSelectors[i][length-1]=lastSelector.createDerived(lastSelector.elements,inSelector.extendList));return hadParentSelector}function addReplacementIntoPath(beginningPath,addPath,replacedElement,originalSelector){var newSelectorPath,lastSelector,newJoinedSelector;if(newSelectorPath=[],beginningPath.length>0?(newSelectorPath=beginningPath.slice(0),lastSelector=newSelectorPath.pop(),newJoinedSelector=originalSelector.createDerived(lastSelector.elements.slice(0))):newJoinedSelector=originalSelector.createDerived([]),addPath.length>0){var combinator=replacedElement.combinator,parentEl=addPath[0].elements[0];combinator.emptyOrWhitespace&&!parentEl.combinator.emptyOrWhitespace&&(combinator=parentEl.combinator),newJoinedSelector.elements.push(new Element(combinator,parentEl.value,replacedElement.index,replacedElement.currentFileInfo)),newJoinedSelector.elements=newJoinedSelector.elements.concat(addPath[0].elements.slice(1))}return 0!==newJoinedSelector.elements.length&&newSelectorPath.push(newJoinedSelector),addPath.length>1&&(newSelectorPath=newSelectorPath.concat(addPath.slice(1))),newSelectorPath}function addAllReplacementsIntoPath(beginningPath,addPaths,replacedElement,originalSelector,result){var j;for(j=0;j<beginningPath.length;j++){var newSelectorPath=addReplacementIntoPath(beginningPath[j],addPaths,replacedElement,originalSelector);result.push(newSelectorPath)}return result}function mergeElementsOnToSelectors(elements,selectors){var i,sel;if(0!==elements.length){if(0===selectors.length)return void selectors.push([new Selector(elements)]);for(i=0;i<selectors.length;i++)sel=selectors[i],sel.length>0?sel[sel.length-1]=sel[sel.length-1].createDerived(sel[sel.length-1].elements.concat(elements)):sel.push(new Selector(elements))}}var i,newPaths,hadParentSelector;if(newPaths=[],hadParentSelector=replaceParentSelector(newPaths,context,selector),!hadParentSelector)if(context.length>0)for(newPaths=[],i=0;i<context.length;i++)newPaths.push(context[i].concat(selector));else newPaths=[[selector]];for(i=0;i<newPaths.length;i++)paths.push(newPaths[i])},module.exports=Ruleset},{"../contexts":10,"../functions/default":19,"../functions/function-registry":21,"./debug-info":52,"./element":56,"./node":68,"./paren":70,"./rule":72,"./selector":75}],75:[function(require,module,exports){var Node=require("./node"),Element=require("./element"),Selector=function(elements,extendList,condition,index,currentFileInfo,isReferenced){this.elements=elements,this.extendList=extendList,this.condition=condition,this.currentFileInfo=currentFileInfo||{},this.isReferenced=isReferenced,condition||(this.evaldCondition=!0)};Selector.prototype=new Node,Selector.prototype.type="Selector",Selector.prototype.accept=function(visitor){this.elements&&(this.elements=visitor.visitArray(this.elements)),this.extendList&&(this.extendList=visitor.visitArray(this.extendList)),this.condition&&(this.condition=visitor.visit(this.condition))},Selector.prototype.createDerived=function(elements,extendList,evaldCondition){evaldCondition=null!=evaldCondition?evaldCondition:this.evaldCondition;var newSelector=new Selector(elements,extendList||this.extendList,null,this.index,this.currentFileInfo,this.isReferenced);return newSelector.evaldCondition=evaldCondition,newSelector.mediaEmpty=this.mediaEmpty,newSelector},Selector.prototype.createEmptySelectors=function(){var el=new Element("","&",this.index,this.currentFileInfo),sels=[new Selector([el],null,null,this.index,this.currentFileInfo)];return sels[0].mediaEmpty=!0,sels},Selector.prototype.match=function(other){var olen,i,elements=this.elements,len=elements.length;if(other.CacheElements(),olen=other._elements.length,0===olen||olen>len)return 0;for(i=0;olen>i;i++)if(elements[i].value!==other._elements[i])return 0;return olen},Selector.prototype.CacheElements=function(){if(!this._elements){var elements=this.elements.map(function(v){return v.combinator.value+(v.value.value||v.value)}).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);elements?"&"===elements[0]&&elements.shift():elements=[],this._elements=elements}},Selector.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},Selector.prototype.eval=function(context){var evaldCondition=this.condition&&this.condition.eval(context),elements=this.elements,extendList=this.extendList;return elements=elements&&elements.map(function(e){return e.eval(context)}),extendList=extendList&&extendList.map(function(extend){return extend.eval(context)}),this.createDerived(elements,extendList,evaldCondition)},Selector.prototype.genCSS=function(context,output){var i,element;if(context&&context.firstSelector||""!==this.elements[0].combinator.value||output.add(" ",this.currentFileInfo,this.index),!this._css)for(i=0;i<this.elements.length;i++)element=this.elements[i],element.genCSS(context,output)},Selector.prototype.markReferenced=function(){this.isReferenced=!0},Selector.prototype.getIsReferenced=function(){return!this.currentFileInfo.reference||this.isReferenced},Selector.prototype.getIsOutput=function(){return this.evaldCondition},module.exports=Selector},{"./element":56,"./node":68}],76:[function(require,module,exports){var Node=require("./node"),UnicodeDescriptor=function(value){this.value=value};UnicodeDescriptor.prototype=new Node,UnicodeDescriptor.prototype.type="UnicodeDescriptor",module.exports=UnicodeDescriptor},{"./node":68}],77:[function(require,module,exports){var Node=require("./node"),unitConversions=require("../data/unit-conversions"),Unit=function(numerator,denominator,backupUnit){this.numerator=numerator?numerator.slice(0).sort():[],this.denominator=denominator?denominator.slice(0).sort():[],backupUnit?this.backupUnit=backupUnit:numerator&&numerator.length&&(this.backupUnit=numerator[0])};Unit.prototype=new Node,Unit.prototype.type="Unit",Unit.prototype.clone=function(){
return new Unit(this.numerator.slice(0),this.denominator.slice(0),this.backupUnit)},Unit.prototype.genCSS=function(context,output){var strictUnits=context&&context.strictUnits;1===this.numerator.length?output.add(this.numerator[0]):!strictUnits&&this.backupUnit?output.add(this.backupUnit):!strictUnits&&this.denominator.length&&output.add(this.denominator[0])},Unit.prototype.toString=function(){var i,returnStr=this.numerator.join("*");for(i=0;i<this.denominator.length;i++)returnStr+="/"+this.denominator[i];return returnStr},Unit.prototype.compare=function(other){return this.is(other.toString())?0:void 0},Unit.prototype.is=function(unitString){return this.toString().toUpperCase()===unitString.toUpperCase()},Unit.prototype.isLength=function(){return Boolean(this.toCSS().match(/px|em|%|in|cm|mm|pc|pt|ex/))},Unit.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},Unit.prototype.isSingular=function(){return this.numerator.length<=1&&0===this.denominator.length},Unit.prototype.map=function(callback){var i;for(i=0;i<this.numerator.length;i++)this.numerator[i]=callback(this.numerator[i],!1);for(i=0;i<this.denominator.length;i++)this.denominator[i]=callback(this.denominator[i],!0)},Unit.prototype.usedUnits=function(){var group,mapUnit,result={};mapUnit=function(atomicUnit){return group.hasOwnProperty(atomicUnit)&&!result[groupName]&&(result[groupName]=atomicUnit),atomicUnit};for(var groupName in unitConversions)unitConversions.hasOwnProperty(groupName)&&(group=unitConversions[groupName],this.map(mapUnit));return result},Unit.prototype.cancel=function(){var atomicUnit,i,counter={};for(i=0;i<this.numerator.length;i++)atomicUnit=this.numerator[i],counter[atomicUnit]=(counter[atomicUnit]||0)+1;for(i=0;i<this.denominator.length;i++)atomicUnit=this.denominator[i],counter[atomicUnit]=(counter[atomicUnit]||0)-1;this.numerator=[],this.denominator=[];for(atomicUnit in counter)if(counter.hasOwnProperty(atomicUnit)){var count=counter[atomicUnit];if(count>0)for(i=0;count>i;i++)this.numerator.push(atomicUnit);else if(0>count)for(i=0;-count>i;i++)this.denominator.push(atomicUnit)}this.numerator.sort(),this.denominator.sort()},module.exports=Unit},{"../data/unit-conversions":13,"./node":68}],78:[function(require,module,exports){var Node=require("./node"),URL=function(val,index,currentFileInfo,isEvald){this.value=val,this.currentFileInfo=currentFileInfo,this.index=index,this.isEvald=isEvald};URL.prototype=new Node,URL.prototype.type="Url",URL.prototype.accept=function(visitor){this.value=visitor.visit(this.value)},URL.prototype.genCSS=function(context,output){output.add("url("),this.value.genCSS(context,output),output.add(")")},URL.prototype.eval=function(context){var rootpath,val=this.value.eval(context);if(!this.isEvald&&(rootpath=this.currentFileInfo&&this.currentFileInfo.rootpath,rootpath&&"string"==typeof val.value&&context.isPathRelative(val.value)&&(val.quote||(rootpath=rootpath.replace(/[\(\)'"\s]/g,function(match){return"\\"+match})),val.value=rootpath+val.value),val.value=context.normalizePath(val.value),context.urlArgs&&!val.value.match(/^\s*data:/))){var delimiter=-1===val.value.indexOf("?")?"?":"&",urlArgs=delimiter+context.urlArgs;-1!==val.value.indexOf("#")?val.value=val.value.replace("#",urlArgs+"#"):val.value+=urlArgs}return new URL(val,this.index,this.currentFileInfo,!0)},module.exports=URL},{"./node":68}],79:[function(require,module,exports){var Node=require("./node"),Value=function(value){if(this.value=value,!value)throw new Error("Value requires an array argument")};Value.prototype=new Node,Value.prototype.type="Value",Value.prototype.accept=function(visitor){this.value&&(this.value=visitor.visitArray(this.value))},Value.prototype.eval=function(context){return 1===this.value.length?this.value[0].eval(context):new Value(this.value.map(function(v){return v.eval(context)}))},Value.prototype.genCSS=function(context,output){var i;for(i=0;i<this.value.length;i++)this.value[i].genCSS(context,output),i+1<this.value.length&&output.add(context&&context.compress?",":", ")},module.exports=Value},{"./node":68}],80:[function(require,module,exports){var Node=require("./node"),Variable=function(name,index,currentFileInfo){this.name=name,this.index=index,this.currentFileInfo=currentFileInfo||{}};Variable.prototype=new Node,Variable.prototype.type="Variable",Variable.prototype.eval=function(context){var variable,name=this.name;if(0===name.indexOf("@@")&&(name="@"+new Variable(name.slice(1),this.index,this.currentFileInfo).eval(context).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+name,filename:this.currentFileInfo.filename,index:this.index};if(this.evaluating=!0,variable=this.find(context.frames,function(frame){var v=frame.variable(name);if(v){if(v.important){var importantScope=context.importantScope[context.importantScope.length-1];importantScope.important=v.important}return v.value.eval(context)}}))return this.evaluating=!1,variable;throw{type:"Name",message:"variable "+name+" is undefined",filename:this.currentFileInfo.filename,index:this.index}},Variable.prototype.find=function(obj,fun){for(var r,i=0;i<obj.length;i++)if(r=fun.call(obj,obj[i]))return r;return null},module.exports=Variable},{"./node":68}],81:[function(require,module,exports){module.exports={getLocation:function(index,inputStream){for(var n=index+1,line=null,column=-1;--n>=0&&"\n"!==inputStream.charAt(n);)column++;return"number"==typeof index&&(line=(inputStream.slice(0,index).match(/\n/g)||"").length),{line:line,column:column}}}},{}],82:[function(require,module,exports){var tree=require("../tree"),Visitor=require("./visitor"),logger=require("../logger"),ExtendFinderVisitor=function(){this._visitor=new Visitor(this),this.contexts=[],this.allExtendsStack=[[]]};ExtendFinderVisitor.prototype={run:function(root){return root=this._visitor.visit(root),root.allExtends=this.allExtendsStack[0],root},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode,visitArgs){if(!rulesetNode.root){var i,j,extend,extendList,allSelectorsExtendList=[],rules=rulesetNode.rules,ruleCnt=rules?rules.length:0;for(i=0;ruleCnt>i;i++)rulesetNode.rules[i]instanceof tree.Extend&&(allSelectorsExtendList.push(rules[i]),rulesetNode.extendOnEveryPath=!0);var paths=rulesetNode.paths;for(i=0;i<paths.length;i++){var selectorPath=paths[i],selector=selectorPath[selectorPath.length-1],selExtendList=selector.extendList;for(extendList=selExtendList?selExtendList.slice(0).concat(allSelectorsExtendList):allSelectorsExtendList,extendList&&(extendList=extendList.map(function(allSelectorsExtend){return allSelectorsExtend.clone()})),j=0;j<extendList.length;j++)this.foundExtends=!0,extend=extendList[j],extend.findSelfSelectors(selectorPath),extend.ruleset=rulesetNode,0===j&&(extend.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(extend)}this.contexts.push(rulesetNode.selectors)}},visitRulesetOut:function(rulesetNode){rulesetNode.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(mediaNode,visitArgs){mediaNode.allExtends=[],this.allExtendsStack.push(mediaNode.allExtends)},visitMediaOut:function(mediaNode){this.allExtendsStack.length=this.allExtendsStack.length-1},visitDirective:function(directiveNode,visitArgs){directiveNode.allExtends=[],this.allExtendsStack.push(directiveNode.allExtends)},visitDirectiveOut:function(directiveNode){this.allExtendsStack.length=this.allExtendsStack.length-1}};var ProcessExtendsVisitor=function(){this._visitor=new Visitor(this)};ProcessExtendsVisitor.prototype={run:function(root){var extendFinder=new ExtendFinderVisitor;if(this.extendIndicies={},extendFinder.run(root),!extendFinder.foundExtends)return root;root.allExtends=root.allExtends.concat(this.doExtendChaining(root.allExtends,root.allExtends)),this.allExtendsStack=[root.allExtends];var newRoot=this._visitor.visit(root);return this.checkExtendsForNonMatched(root.allExtends),newRoot},checkExtendsForNonMatched:function(extendList){var indicies=this.extendIndicies;extendList.filter(function(extend){return!extend.hasFoundMatches&&1==extend.parent_ids.length}).forEach(function(extend){var selector="_unknown_";try{selector=extend.selector.toCSS({})}catch(_){}indicies[extend.index+" "+selector]||(indicies[extend.index+" "+selector]=!0,logger.warn("extend '"+selector+"' has no matches"))})},doExtendChaining:function(extendsList,extendsListTarget,iterationCount){var extendIndex,targetExtendIndex,matches,newSelector,selectorPath,extend,targetExtend,newExtend,extendsToAdd=[],extendVisitor=this;for(iterationCount=iterationCount||0,extendIndex=0;extendIndex<extendsList.length;extendIndex++)for(targetExtendIndex=0;targetExtendIndex<extendsListTarget.length;targetExtendIndex++)extend=extendsList[extendIndex],targetExtend=extendsListTarget[targetExtendIndex],extend.parent_ids.indexOf(targetExtend.object_id)>=0||(selectorPath=[targetExtend.selfSelectors[0]],matches=extendVisitor.findMatch(extend,selectorPath),matches.length&&(extend.hasFoundMatches=!0,extend.selfSelectors.forEach(function(selfSelector){newSelector=extendVisitor.extendSelector(matches,selectorPath,selfSelector),newExtend=new tree.Extend(targetExtend.selector,targetExtend.option,0),newExtend.selfSelectors=newSelector,newSelector[newSelector.length-1].extendList=[newExtend],extendsToAdd.push(newExtend),newExtend.ruleset=targetExtend.ruleset,newExtend.parent_ids=newExtend.parent_ids.concat(targetExtend.parent_ids,extend.parent_ids),targetExtend.firstExtendOnThisSelectorPath&&(newExtend.firstExtendOnThisSelectorPath=!0,targetExtend.ruleset.paths.push(newSelector))})));if(extendsToAdd.length){if(this.extendChainCount++,iterationCount>100){var selectorOne="{unable to calculate}",selectorTwo="{unable to calculate}";try{selectorOne=extendsToAdd[0].selfSelectors[0].toCSS(),selectorTwo=extendsToAdd[0].selector.toCSS()}catch(e){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+selectorOne+":extend("+selectorTwo+")"}}return extendsToAdd.concat(extendVisitor.doExtendChaining(extendsToAdd,extendsListTarget,iterationCount+1))}return extendsToAdd},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitSelector:function(selectorNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode,visitArgs){if(!rulesetNode.root){var matches,pathIndex,extendIndex,selectorPath,allExtends=this.allExtendsStack[this.allExtendsStack.length-1],selectorsToAdd=[],extendVisitor=this;for(extendIndex=0;extendIndex<allExtends.length;extendIndex++)for(pathIndex=0;pathIndex<rulesetNode.paths.length;pathIndex++)if(selectorPath=rulesetNode.paths[pathIndex],!rulesetNode.extendOnEveryPath){var extendList=selectorPath[selectorPath.length-1].extendList;extendList&&extendList.length||(matches=this.findMatch(allExtends[extendIndex],selectorPath),matches.length&&(allExtends[extendIndex].hasFoundMatches=!0,allExtends[extendIndex].selfSelectors.forEach(function(selfSelector){selectorsToAdd.push(extendVisitor.extendSelector(matches,selectorPath,selfSelector))})))}rulesetNode.paths=rulesetNode.paths.concat(selectorsToAdd)}},findMatch:function(extend,haystackSelectorPath){var haystackSelectorIndex,hackstackSelector,hackstackElementIndex,haystackElement,targetCombinator,i,potentialMatch,extendVisitor=this,needleElements=extend.selector.elements,potentialMatches=[],matches=[];for(haystackSelectorIndex=0;haystackSelectorIndex<haystackSelectorPath.length;haystackSelectorIndex++)for(hackstackSelector=haystackSelectorPath[haystackSelectorIndex],hackstackElementIndex=0;hackstackElementIndex<hackstackSelector.elements.length;hackstackElementIndex++)for(haystackElement=hackstackSelector.elements[hackstackElementIndex],(extend.allowBefore||0===haystackSelectorIndex&&0===hackstackElementIndex)&&potentialMatches.push({pathIndex:haystackSelectorIndex,index:hackstackElementIndex,matched:0,initialCombinator:haystackElement.combinator}),i=0;i<potentialMatches.length;i++)potentialMatch=potentialMatches[i],targetCombinator=haystackElement.combinator.value,""===targetCombinator&&0===hackstackElementIndex&&(targetCombinator=" "),!extendVisitor.isElementValuesEqual(needleElements[potentialMatch.matched].value,haystackElement.value)||potentialMatch.matched>0&&needleElements[potentialMatch.matched].combinator.value!==targetCombinator?potentialMatch=null:potentialMatch.matched++,potentialMatch&&(potentialMatch.finished=potentialMatch.matched===needleElements.length,potentialMatch.finished&&!extend.allowAfter&&(hackstackElementIndex+1<hackstackSelector.elements.length||haystackSelectorIndex+1<haystackSelectorPath.length)&&(potentialMatch=null)),potentialMatch?potentialMatch.finished&&(potentialMatch.length=needleElements.length,potentialMatch.endPathIndex=haystackSelectorIndex,potentialMatch.endPathElementIndex=hackstackElementIndex+1,potentialMatches.length=0,matches.push(potentialMatch)):(potentialMatches.splice(i,1),i--);return matches},isElementValuesEqual:function(elementValue1,elementValue2){if("string"==typeof elementValue1||"string"==typeof elementValue2)return elementValue1===elementValue2;if(elementValue1 instanceof tree.Attribute)return elementValue1.op!==elementValue2.op||elementValue1.key!==elementValue2.key?!1:elementValue1.value&&elementValue2.value?(elementValue1=elementValue1.value.value||elementValue1.value,elementValue2=elementValue2.value.value||elementValue2.value,elementValue1===elementValue2):elementValue1.value||elementValue2.value?!1:!0;if(elementValue1=elementValue1.value,elementValue2=elementValue2.value,elementValue1 instanceof tree.Selector){if(!(elementValue2 instanceof tree.Selector)||elementValue1.elements.length!==elementValue2.elements.length)return!1;for(var i=0;i<elementValue1.elements.length;i++){if(elementValue1.elements[i].combinator.value!==elementValue2.elements[i].combinator.value&&(0!==i||(elementValue1.elements[i].combinator.value||" ")!==(elementValue2.elements[i].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(elementValue1.elements[i].value,elementValue2.elements[i].value))return!1}return!0}return!1},extendSelector:function(matches,selectorPath,replacementSelector){var matchIndex,selector,firstElement,match,newElements,currentSelectorPathIndex=0,currentSelectorPathElementIndex=0,path=[];for(matchIndex=0;matchIndex<matches.length;matchIndex++)match=matches[matchIndex],selector=selectorPath[match.pathIndex],firstElement=new tree.Element(match.initialCombinator,replacementSelector.elements[0].value,replacementSelector.elements[0].index,replacementSelector.elements[0].currentFileInfo),match.pathIndex>currentSelectorPathIndex&&currentSelectorPathElementIndex>0&&(path[path.length-1].elements=path[path.length-1].elements.concat(selectorPath[currentSelectorPathIndex].elements.slice(currentSelectorPathElementIndex)),currentSelectorPathElementIndex=0,currentSelectorPathIndex++),newElements=selector.elements.slice(currentSelectorPathElementIndex,match.index).concat([firstElement]).concat(replacementSelector.elements.slice(1)),currentSelectorPathIndex===match.pathIndex&&matchIndex>0?path[path.length-1].elements=path[path.length-1].elements.concat(newElements):(path=path.concat(selectorPath.slice(currentSelectorPathIndex,match.pathIndex)),path.push(new tree.Selector(newElements))),currentSelectorPathIndex=match.endPathIndex,currentSelectorPathElementIndex=match.endPathElementIndex,currentSelectorPathElementIndex>=selectorPath[currentSelectorPathIndex].elements.length&&(currentSelectorPathElementIndex=0,currentSelectorPathIndex++);return currentSelectorPathIndex<selectorPath.length&&currentSelectorPathElementIndex>0&&(path[path.length-1].elements=path[path.length-1].elements.concat(selectorPath[currentSelectorPathIndex].elements.slice(currentSelectorPathElementIndex)),currentSelectorPathIndex++),path=path.concat(selectorPath.slice(currentSelectorPathIndex,selectorPath.length))},visitRulesetOut:function(rulesetNode){},visitMedia:function(mediaNode,visitArgs){var newAllExtends=mediaNode.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);newAllExtends=newAllExtends.concat(this.doExtendChaining(newAllExtends,mediaNode.allExtends)),this.allExtendsStack.push(newAllExtends)},visitMediaOut:function(mediaNode){var lastIndex=this.allExtendsStack.length-1;this.allExtendsStack.length=lastIndex},visitDirective:function(directiveNode,visitArgs){var newAllExtends=directiveNode.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);newAllExtends=newAllExtends.concat(this.doExtendChaining(newAllExtends,directiveNode.allExtends)),this.allExtendsStack.push(newAllExtends)},visitDirectiveOut:function(directiveNode){var lastIndex=this.allExtendsStack.length-1;this.allExtendsStack.length=lastIndex}},module.exports=ProcessExtendsVisitor},{"../logger":31,"../tree":60,"./visitor":88}],83:[function(require,module,exports){function ImportSequencer(onSequencerEmpty){this.imports=[],this.variableImports=[],this._onSequencerEmpty=onSequencerEmpty,this._currentDepth=0}ImportSequencer.prototype.addImport=function(callback){var importSequencer=this,importItem={callback:callback,args:null,isReady:!1};return this.imports.push(importItem),function(){importItem.args=Array.prototype.slice.call(arguments,0),importItem.isReady=!0,importSequencer.tryRun()}},ImportSequencer.prototype.addVariableImport=function(callback){this.variableImports.push(callback)},ImportSequencer.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var importItem=this.imports[0];if(!importItem.isReady)return;this.imports=this.imports.slice(1),importItem.callback.apply(null,importItem.args)}if(0===this.variableImports.length)break;var variableImport=this.variableImports[0];this.variableImports=this.variableImports.slice(1),variableImport()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},module.exports=ImportSequencer},{}],84:[function(require,module,exports){var contexts=require("../contexts"),Visitor=require("./visitor"),ImportSequencer=require("./import-sequencer"),ImportVisitor=function(importer,finish){this._visitor=new Visitor(this),this._importer=importer,this._finish=finish,this.context=new contexts.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new ImportSequencer(this._onSequencerEmpty.bind(this))};ImportVisitor.prototype={isReplacing:!1,run:function(root){try{this._visitor.visit(root)}catch(e){this.error=e}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(importNode,visitArgs){var inlineCSS=importNode.options.inline;if(!importNode.css||inlineCSS){var context=new contexts.Eval(this.context,this.context.frames.slice(0)),importParent=context.frames[0];this.importCount++,importNode.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,importNode,context,importParent)):this.processImportNode(importNode,context,importParent)}visitArgs.visitDeeper=!1},processImportNode:function(importNode,context,importParent){var evaldImportNode,inlineCSS=importNode.options.inline;try{evaldImportNode=importNode.evalForImport(context)}catch(e){e.filename||(e.index=importNode.index,e.filename=importNode.currentFileInfo.filename),importNode.css=!0,importNode.error=e}if(!evaldImportNode||evaldImportNode.css&&!inlineCSS)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{evaldImportNode.options.multiple&&(context.importMultiple=!0);for(var tryAppendLessExtension=void 0===evaldImportNode.css,i=0;i<importParent.rules.length;i++)if(importParent.rules[i]===importNode){importParent.rules[i]=evaldImportNode;break}var onImported=this.onImported.bind(this,evaldImportNode,context),sequencedOnImported=this._sequencer.addImport(onImported);this._importer.push(evaldImportNode.getPath(),tryAppendLessExtension,evaldImportNode.currentFileInfo,evaldImportNode.options,sequencedOnImported)}},onImported:function(importNode,context,e,root,importedAtRoot,fullPath){e&&(e.filename||(e.index=importNode.index,e.filename=importNode.currentFileInfo.filename),this.error=e);var importVisitor=this,inlineCSS=importNode.options.inline,isPlugin=importNode.options.plugin,duplicateImport=importedAtRoot||fullPath in importVisitor.recursionDetector;if(context.importMultiple||(duplicateImport?importNode.skip=!0:importNode.skip=function(){return fullPath in importVisitor.onceFileDetectionMap?!0:(importVisitor.onceFileDetectionMap[fullPath]=!0,!1)}),root&&(importNode.root=root,importNode.importedFilename=fullPath,!inlineCSS&&!isPlugin&&(context.importMultiple||!duplicateImport))){importVisitor.recursionDetector[fullPath]=!0;var oldContext=this.context;this.context=context;try{this._visitor.visit(root)}catch(e){this.error=e}this.context=oldContext}importVisitor.importCount--,importVisitor.isFinished&&importVisitor._sequencer.tryRun()},visitRule:function(ruleNode,visitArgs){"DetachedRuleset"===ruleNode.value.type?this.context.frames.unshift(ruleNode):visitArgs.visitDeeper=!1},visitRuleOut:function(ruleNode){"DetachedRuleset"===ruleNode.value.type&&this.context.frames.shift()},visitDirective:function(directiveNode,visitArgs){this.context.frames.unshift(directiveNode)},visitDirectiveOut:function(directiveNode){this.context.frames.shift()},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){this.context.frames.unshift(mixinDefinitionNode)},visitMixinDefinitionOut:function(mixinDefinitionNode){this.context.frames.shift()},visitRuleset:function(rulesetNode,visitArgs){this.context.frames.unshift(rulesetNode)},visitRulesetOut:function(rulesetNode){this.context.frames.shift()},visitMedia:function(mediaNode,visitArgs){this.context.frames.unshift(mediaNode.rules[0])},visitMediaOut:function(mediaNode){this.context.frames.shift()}},module.exports=ImportVisitor},{"../contexts":10,"./import-sequencer":83,"./visitor":88}],85:[function(require,module,exports){var visitors={Visitor:require("./visitor"),ImportVisitor:require("./import-visitor"),ExtendVisitor:require("./extend-visitor"),JoinSelectorVisitor:require("./join-selector-visitor"),ToCSSVisitor:require("./to-css-visitor")};module.exports=visitors},{"./extend-visitor":82,"./import-visitor":84,"./join-selector-visitor":86,"./to-css-visitor":87,"./visitor":88}],86:[function(require,module,exports){var Visitor=require("./visitor"),JoinSelectorVisitor=function(){this.contexts=[[]],this._visitor=new Visitor(this)};JoinSelectorVisitor.prototype={run:function(root){return this._visitor.visit(root)},visitRule:function(ruleNode,visitArgs){visitArgs.visitDeeper=!1},visitMixinDefinition:function(mixinDefinitionNode,visitArgs){visitArgs.visitDeeper=!1},visitRuleset:function(rulesetNode,visitArgs){var selectors,context=this.contexts[this.contexts.length-1],paths=[];this.contexts.push(paths),rulesetNode.root||(selectors=rulesetNode.selectors,selectors&&(selectors=selectors.filter(function(selector){return selector.getIsOutput()}),rulesetNode.selectors=selectors.length?selectors:selectors=null,selectors&&rulesetNode.joinSelectors(paths,context,selectors)),selectors||(rulesetNode.rules=null),rulesetNode.paths=paths)},visitRulesetOut:function(rulesetNode){this.contexts.length=this.contexts.length-1},visitMedia:function(mediaNode,visitArgs){var context=this.contexts[this.contexts.length-1];mediaNode.rules[0].root=0===context.length||context[0].multiMedia},visitDirective:function(directiveNode,visitArgs){var context=this.contexts[this.contexts.length-1];directiveNode.rules&&directiveNode.rules.length&&(directiveNode.rules[0].root=directiveNode.isRooted||0===context.length||null)}},module.exports=JoinSelectorVisitor},{"./visitor":88}],87:[function(require,module,exports){var tree=require("../tree"),Visitor=require("./visitor"),ToCSSVisitor=function(context){this._visitor=new Visitor(this),this._context=context};ToCSSVisitor.prototype={isReplacing:!0,run:function(root){return this._visitor.visit(root)},visitRule:function(ruleNode,visitArgs){return ruleNode.variable?void 0:ruleNode},visitMixinDefinition:function(mixinNode,visitArgs){mixinNode.frames=[]},visitExtend:function(extendNode,visitArgs){},visitComment:function(commentNode,visitArgs){return commentNode.isSilent(this._context)?void 0:commentNode},visitMedia:function(mediaNode,visitArgs){return mediaNode.accept(this._visitor),visitArgs.visitDeeper=!1,mediaNode.rules.length?mediaNode:void 0},visitImport:function(importNode,visitArgs){return void 0!==importNode.path.currentFileInfo.reference&&importNode.css?void 0:importNode},visitDirective:function(directiveNode,visitArgs){function hasVisibleChild(directiveNode){var rule,bodyRules=directiveNode.rules;1!==bodyRules.length||bodyRules[0].paths&&0!==bodyRules[0].paths.length||(bodyRules=bodyRules[0].rules);for(var r=0;r<bodyRules.length;r++)if(rule=bodyRules[r],rule.getIsReferenced&&rule.getIsReferenced())return!0;return!1}if("@charset"===directiveNode.name){if(!directiveNode.getIsReferenced())return;if(this.charset){if(directiveNode.debugInfo){var comment=new tree.Comment("/* "+directiveNode.toCSS(this._context).replace(/\n/g,"")+" */\n");return comment.debugInfo=directiveNode.debugInfo,this._visitor.visit(comment)}return}this.charset=!0}if(directiveNode.rules&&directiveNode.rules.length){if(this._mergeRules(directiveNode.rules[0].rules),directiveNode.accept(this._visitor),visitArgs.visitDeeper=!1,directiveNode.getIsReferenced())return directiveNode;if(!directiveNode.rules||!directiveNode.rules.length)return;if(hasVisibleChild(directiveNode))return directiveNode.markReferenced(),directiveNode}else if(directiveNode.getIsReferenced())return directiveNode},checkPropertiesInRoot:function(rules){for(var ruleNode,i=0;i<rules.length;i++)if(ruleNode=rules[i],ruleNode instanceof tree.Rule&&!ruleNode.variable)throw{message:"properties must be inside selector blocks, they cannot be in the root.",index:ruleNode.index,filename:ruleNode.currentFileInfo?ruleNode.currentFileInfo.filename:null}},visitRuleset:function(rulesetNode,visitArgs){var rule,rulesets=[];if(rulesetNode.firstRoot&&this.checkPropertiesInRoot(rulesetNode.rules),rulesetNode.root)rulesetNode.accept(this._visitor),visitArgs.visitDeeper=!1,(rulesetNode.firstRoot||rulesetNode.rules&&rulesetNode.rules.length>0)&&rulesets.splice(0,0,rulesetNode);else{rulesetNode.paths&&(rulesetNode.paths=rulesetNode.paths.filter(function(p){var i;for(" "===p[0].elements[0].combinator.value&&(p[0].elements[0].combinator=new tree.Combinator("")),i=0;i<p.length;i++)if(p[i].getIsReferenced()&&p[i].getIsOutput())return!0;return!1}));for(var nodeRules=rulesetNode.rules,nodeRuleCnt=nodeRules?nodeRules.length:0,i=0;nodeRuleCnt>i;)rule=nodeRules[i],rule&&rule.rules?(rulesets.push(this._visitor.visit(rule)),nodeRules.splice(i,1),nodeRuleCnt--):i++;nodeRuleCnt>0?rulesetNode.accept(this._visitor):rulesetNode.rules=null,visitArgs.visitDeeper=!1,nodeRules=rulesetNode.rules,nodeRules&&(this._mergeRules(nodeRules),nodeRules=rulesetNode.rules),nodeRules&&(this._removeDuplicateRules(nodeRules),nodeRules=rulesetNode.rules),nodeRules&&nodeRules.length>0&&rulesetNode.paths.length>0&&rulesets.splice(0,0,rulesetNode)}return 1===rulesets.length?rulesets[0]:rulesets},_removeDuplicateRules:function(rules){if(rules){var ruleList,rule,i,ruleCache={};for(i=rules.length-1;i>=0;i--)if(rule=rules[i],rule instanceof tree.Rule)if(ruleCache[rule.name]){ruleList=ruleCache[rule.name],ruleList instanceof tree.Rule&&(ruleList=ruleCache[rule.name]=[ruleCache[rule.name].toCSS(this._context)]);var ruleCSS=rule.toCSS(this._context);-1!==ruleList.indexOf(ruleCSS)?rules.splice(i,1):ruleList.push(ruleCSS)}else ruleCache[rule.name]=rule}},_mergeRules:function(rules){if(rules){for(var parts,rule,key,groups={},i=0;i<rules.length;i++)rule=rules[i],rule instanceof tree.Rule&&rule.merge&&(key=[rule.name,rule.important?"!":""].join(","),groups[key]?rules.splice(i--,1):groups[key]=[],groups[key].push(rule));Object.keys(groups).map(function(k){function toExpression(values){return new tree.Expression(values.map(function(p){return p.value}))}function toValue(values){return new tree.Value(values.map(function(p){return p}))}if(parts=groups[k],parts.length>1){rule=parts[0];var spacedGroups=[],lastSpacedGroup=[];parts.map(function(p){"+"===p.merge&&(lastSpacedGroup.length>0&&spacedGroups.push(toExpression(lastSpacedGroup)),lastSpacedGroup=[]),lastSpacedGroup.push(p)}),spacedGroups.push(toExpression(lastSpacedGroup)),rule.value=toValue(spacedGroups)}})}}},module.exports=ToCSSVisitor},{"../tree":60,"./visitor":88}],88:[function(require,module,exports){function _noop(node){return node}function indexNodeTypes(parent,ticker){var key,child;for(key in parent)if(parent.hasOwnProperty(key))switch(child=parent[key],typeof child){case"function":child.prototype&&child.prototype.type&&(child.prototype.typeIndex=ticker++);break;case"object":ticker=indexNodeTypes(child,ticker)}return ticker}var tree=require("../tree"),_visitArgs={visitDeeper:!0},_hasIndexed=!1,Visitor=function(implementation){this._implementation=implementation,this._visitFnCache=[],_hasIndexed||(indexNodeTypes(tree,1),_hasIndexed=!0)};Visitor.prototype={visit:function(node){if(!node)return node;var nodeTypeIndex=node.typeIndex;if(!nodeTypeIndex)return node;var fnName,visitFnCache=this._visitFnCache,impl=this._implementation,aryIndx=nodeTypeIndex<<1,outAryIndex=1|aryIndx,func=visitFnCache[aryIndx],funcOut=visitFnCache[outAryIndex],visitArgs=_visitArgs;if(visitArgs.visitDeeper=!0,func||(fnName="visit"+node.type,func=impl[fnName]||_noop,funcOut=impl[fnName+"Out"]||_noop,visitFnCache[aryIndx]=func,visitFnCache[outAryIndex]=funcOut),func!==_noop){var newNode=func.call(impl,node,visitArgs);impl.isReplacing&&(node=newNode)}return visitArgs.visitDeeper&&node&&node.accept&&node.accept(this),funcOut!=_noop&&funcOut.call(impl,node),node},visitArray:function(nodes,nonReplacing){if(!nodes)return nodes;var i,cnt=nodes.length;if(nonReplacing||!this._implementation.isReplacing){for(i=0;cnt>i;i++)this.visit(nodes[i]);return nodes}var out=[];for(i=0;cnt>i;i++){var evald=this.visit(nodes[i]);void 0!==evald&&(evald.splice?evald.length&&this.flatten(evald,out):out.push(evald))}return out},flatten:function(arr,out){out||(out=[]);var cnt,i,item,nestedCnt,j,nestedItem;for(i=0,cnt=arr.length;cnt>i;i++)if(item=arr[i],void 0!==item)if(item.splice)for(j=0,nestedCnt=item.length;nestedCnt>j;j++)nestedItem=item[j],void 0!==nestedItem&&(nestedItem.splice?nestedItem.length&&this.flatten(nestedItem,out):out.push(nestedItem));else out.push(item);return out}},module.exports=Visitor},{"../tree":60}],89:[function(require,module,exports){function drainQueue(){if(!draining){draining=!0;for(var currentQueue,len=queue.length;len;){currentQueue=queue,queue=[];for(var i=-1;++i<len;)currentQueue[i]();len=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(fun){queue.push(fun),draining||setTimeout(drainQueue,0)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],90:[function(require,module,exports){"use strict";function Promise(fn){function handle(deferred){return null===state?void deferreds.push(deferred):void asap(function(){var cb=state?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(state?deferred.resolve:deferred.reject)(value);var ret;try{
ret=cb(value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(then.bind(newValue),resolve,reject)}state=!0,value=newValue,finale()}catch(e){reject(e)}}function reject(newValue){state=!1,value=newValue,finale()}function finale(){for(var i=0,len=deferreds.length;len>i;i++)handle(deferreds[i]);deferreds=null}if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");var state=null,value=null,deferreds=[],self=this;this.then=function(onFulfilled,onRejected){return new self.constructor(function(resolve,reject){handle(new Handler(onFulfilled,onRejected,resolve,reject))})},doResolve(fn,resolve,reject)}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}var asap=require("asap");module.exports=Promise},{asap:92}],91:[function(require,module,exports){"use strict";function ValuePromise(value){this.then=function(onFulfilled){return"function"!=typeof onFulfilled?this:new Promise(function(resolve,reject){asap(function(){try{resolve(onFulfilled(value))}catch(ex){reject(ex)}})})}}var Promise=require("./core.js"),asap=require("asap");module.exports=Promise,ValuePromise.prototype=Promise.prototype;var TRUE=new ValuePromise(!0),FALSE=new ValuePromise(!1),NULL=new ValuePromise(null),UNDEFINED=new ValuePromise(void 0),ZERO=new ValuePromise(0),EMPTYSTRING=new ValuePromise("");Promise.resolve=function(value){if(value instanceof Promise)return value;if(null===value)return NULL;if(void 0===value)return UNDEFINED;if(value===!0)return TRUE;if(value===!1)return FALSE;if(0===value)return ZERO;if(""===value)return EMPTYSTRING;if("object"==typeof value||"function"==typeof value)try{var then=value.then;if("function"==typeof then)return new Promise(then.bind(value))}catch(ex){return new Promise(function(resolve,reject){reject(ex)})}return new ValuePromise(value)},Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0===--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject)})})},Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)}},{"./core.js":90,asap:92}],92:[function(require,module,exports){(function(process){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;domain&&(head.domain=void 0,domain.enter());try{task()}catch(e){if(isNodeJS)throw domain&&domain.exit(),setTimeout(flush,0),domain&&domain.enter(),e;setTimeout(function(){throw e},0)}domain&&domain.exit()}flushing=!1}function asap(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},flushing||(flushing=!0,requestFlush())}var head={task:void 0,next:null},tail=head,flushing=!1,requestFlush=void 0,isNodeJS=!1;if("undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestFlush=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)requestFlush="undefined"!=typeof window?setImmediate.bind(window,flush):function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestFlush=function(){channel.port2.postMessage(0)}}else requestFlush=function(){setTimeout(flush,0)};module.exports=asap}).call(this,require("_process"))},{_process:89}],93:[function(require,module,exports){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(onFulfilled,onRejected){var self=arguments.length?this.then.apply(this,arguments):this;self.then(null,function(err){setTimeout(function(){throw err},0)})})},{}],94:[function(require,module,exports){require("asap");"undefined"==typeof Promise&&(Promise=require("./lib/core.js"),require("./lib/es6-extensions.js")),require("./polyfill-done.js")},{"./lib/core.js":90,"./lib/es6-extensions.js":91,"./polyfill-done.js":93,asap:92}]},{},[2])(2)});var ItemsHoldr;!function(a){"use strict";var b=function(){function a(a,b,c){void 0===c&&(c={}),this.ItemsHolder=a,a.proliferate(this,a.getDefaults()),a.proliferate(this,c),this.key=b,this.hasOwnProperty("value")||(this.value=this.valueDefault),this.hasElement&&(this.element=a.createElement(this.elementTag||"div",{className:a.getPrefix()+"_value "+b}),this.element.appendChild(a.createElement("div",{textContent:b})),this.element.appendChild(a.createElement("div",{textContent:this.value}))),this.storeLocally&&(a.getLocalStorage().hasOwnProperty(a.getPrefix()+b)?this.value=this.retrieveLocalStorage():this.updateLocalStorage())}return a.prototype.update=function(){this.hasOwnProperty("minimum")&&Number(this.value)<=Number(this.minimum)?(this.value=this.minimum,this.onMinimum&&this.onMinimum.apply(this,this.ItemsHolder.getCallbackArgs())):this.hasOwnProperty("maximum")&&Number(this.value)<=Number(this.maximum)&&(this.value=this.maximum,this.onMaximum&&this.onMaximum.apply(this,this.ItemsHolder.getCallbackArgs())),this.modularity&&this.checkModularity(),this.triggers&&this.checkTriggers(),this.hasElement&&this.updateElement(),this.storeLocally&&this.updateLocalStorage()},a.prototype.checkTriggers=function(){this.triggers.hasOwnProperty(this.value)&&this.triggers[this.value].apply(this,this.ItemsHolder.getCallbackArgs())},a.prototype.checkModularity=function(){if(this.value.constructor===Number&&this.modularity)for(;this.value>=this.modularity;)this.value=Math.max(0,this.value-this.modularity),this.onModular&&this.onModular.apply(this,this.ItemsHolder.getCallbackArgs())},a.prototype.updateElement=function(){this.element.children[1].textContent=this.ItemsHolder.hasDisplayChange(this.value)?this.ItemsHolder.getDisplayChange(this.value):this.value},a.prototype.retrieveLocalStorage=function(){var a=localStorage.getItem(this.ItemsHolder.getPrefix()+this.key);switch(a){case"undefined":return void 0;case"null":return null}return a.constructor!==String?a:JSON.parse(a)},a.prototype.updateLocalStorage=function(a){void 0===a&&(a=!1),(this.ItemsHolder.getAutoSave()||a)&&(this.ItemsHolder.getLocalStorage()[this.ItemsHolder.getPrefix()+this.key]=JSON.stringify(this.value))},a}();a.ItemValue=b;var c=function(){function a(a){void 0===a&&(a={});var b;if(this.prefix=a.prefix||"",this.autoSave=a.autoSave,this.callbackArgs=a.callbackArgs||[],this.allowNewItems=void 0===a.allowNewItems?!0:a.allowNewItems,this.localStorage=a.localStorage?a.localStorage:"undefined"==typeof localStorage?this.createPlaceholderStorage():localStorage,this.defaults=a.defaults||{},this.displayChanges=a.displayChanges||{},this.items={},a.values){this.itemKeys=Object.keys(a.values);for(b in a.values)a.values.hasOwnProperty(b)&&this.addItem(b,a.values[b])}else this.itemKeys=[];a.doMakeContainer&&(this.containersArguments=a.containersArguments||[["div",{className:this.prefix+"_container"}]],this.container=this.makeContainer(a.containersArguments))}return a.prototype.key=function(a){return this.itemKeys[a]},a.prototype.getValues=function(){return this.items},a.prototype.getDefaults=function(){return this.defaults},a.prototype.getLocalStorage=function(){return this.localStorage},a.prototype.getAutoSave=function(){return this.autoSave},a.prototype.getPrefix=function(){return this.prefix},a.prototype.getContainer=function(){return this.container},a.prototype.getContainersArguments=function(){return this.containersArguments},a.prototype.getDisplayChanges=function(){return this.displayChanges},a.prototype.getCallbackArgs=function(){return this.callbackArgs},a.prototype.getKeys=function(){return Object.keys(this.items)},a.prototype.getItem=function(a){return this.checkExistence(a),this.items[a].value},a.prototype.getObject=function(a){return this.items[a]},a.prototype.hasKey=function(a){return this.items.hasOwnProperty(a)},a.prototype.exportItems=function(){var a,b={};for(a in this.items)this.items.hasOwnProperty(a)&&(b[a]=this.items[a].value);return b},a.prototype.addItem=function(a,c){return void 0===c&&(c={}),this.items[a]=new b(this,a,c),this.itemKeys.push(a),this.items[a]},a.prototype.removeItem=function(a){this.items.hasOwnProperty(a)&&(this.container&&this.items[a].hasElement&&this.container.removeChild(this.items[a].element),this.itemKeys.splice(this.itemKeys.indexOf(a),1),delete this.items[a])},a.prototype.clear=function(){var a;if(this.container)for(a in this.items)this.items[a].hasElement&&this.container.removeChild(this.items[a].element);this.items={},this.itemKeys=[]},a.prototype.setItem=function(a,b){this.checkExistence(a),this.items[a].value=b,this.items[a].update()},a.prototype.increase=function(a,b){void 0===b&&(b=1),this.checkExistence(a),this.items[a].value+=arguments.length>1?b:1,this.items[a].update()},a.prototype.decrease=function(a,b){void 0===b&&(b=1),this.checkExistence(a),this.items[a].value-=b,this.items[a].update()},a.prototype.toggle=function(a){this.checkExistence(a),this.items[a].value=this.items[a].value?0:1,this.items[a].update()},a.prototype.checkExistence=function(a){if(!this.items.hasOwnProperty(a)){if(!this.allowNewItems)throw new Error("Unknown key given to ItemsHoldr: '"+a+"'.");this.addItem(a)}},a.prototype.saveAll=function(){var a;for(a in this.items)this.items.hasOwnProperty(a)&&this.items[a].updateLocalStorage(!0)},a.prototype.hideContainer=function(){this.container.style.visibility="hidden"},a.prototype.displayContainer=function(){this.container.style.visibility="visible"},a.prototype.makeContainer=function(a){var b,c,d,e=this.createElement.apply(this,a[0]),f=e;for(d=1;d<a.length;++d)b=this.createElement.apply(this,a[d]),f.appendChild(b),f=b;for(c in this.items)this.items[c].hasElement&&b.appendChild(this.items[c].element);return e},a.prototype.hasDisplayChange=function(a){return this.displayChanges.hasOwnProperty(a)},a.prototype.getDisplayChange=function(a){return this.displayChanges[a]},a.prototype.createElement=function(a){void 0===a&&(a="div");for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e=document.createElement(a);for(d=0;d<b.length;d+=1)this.proliferateElement(e,b[d]);return e},a.prototype.proliferate=function(a,b,c){var d,e;for(e in b)if(b.hasOwnProperty(e)){if(c&&a.hasOwnProperty(e))continue;d=b[e],"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d}return a},a.prototype.proliferateElement=function(a,b,c){void 0===c&&(c=!1);var d,e,f;for(e in b)if(b.hasOwnProperty(e)){if(c&&a.hasOwnProperty(e))continue;switch(d=b[e],e){case"children":if("undefined"!=typeof d)for(f=0;f<d.length;f+=1)a.appendChild(d[f]);break;case"style":this.proliferate(a[e],d);break;default:"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d}}return a},a.prototype.createPlaceholderStorage=function(){var a,b={keys:[],getItem:function(a){return this.localStorage[a]},setItem:function(a,b){this.localStorage[a]=b},clear:function(){for(a in this)this.hasOwnProperty(a)&&delete this[a]},removeItem:function(a){delete this[a]},key:function(a){return this.keys[a]}};return Object.defineProperties(b,{length:{get:function(){return b.keys.length}},remainingSpace:{get:function(){return 9001}}}),b},a}();a.ItemsHoldr=c}(ItemsHoldr||(ItemsHoldr={}));var AudioPlayr;!function(a){"use strict";var b=function(){function a(a){var b;if("undefined"==typeof a.library)throw new Error("No library given to AudioPlayr.");if("undefined"==typeof a.directory)throw new Error("No directory given to AudioPlayr.");if("undefined"==typeof a.fileTypes)throw new Error("No fileTypes given to AudioPlayr.");if(!a.ItemsHolder)throw new Error("No ItemsHoldr given to AudioPlayr.");this.ItemsHolder=a.ItemsHolder,this.library=a.library,this.directory=a.directory,this.fileTypes=a.fileTypes,this.getThemeDefault=a.getThemeDefault||"Theme",this.getVolumeLocal="undefined"==typeof a.getVolumeLocal?1:a.getVolumeLocal,this.sounds={},this.libraryLoad(),b=this.ItemsHolder.getItem("volume"),this.setVolume(void 0===b?1:this.ItemsHolder.getItem("volume")),this.setMuted(this.ItemsHolder.getItem("muted")||!1)}return a.prototype.getLibrary=function(){return this.library},a.prototype.getFileTypes=function(){return this.fileTypes},a.prototype.getSounds=function(){return this.sounds},a.prototype.getTheme=function(){return this.theme},a.prototype.getDirectory=function(){return this.directory},a.prototype.getVolume=function(){return Number(this.ItemsHolder.getItem("volume")||0)},a.prototype.setVolume=function(a){var b;if(!this.getMuted())for(b in this.sounds)this.sounds.hasOwnProperty(b)&&(this.sounds[b].volume=Number(this.sounds[b].getAttribute("volumeReal"))*a);this.ItemsHolder.setItem("volume",a.toString())},a.prototype.getMuted=function(){return Boolean(Number(this.ItemsHolder.getItem("muted")))},a.prototype.setMuted=function(){this.getMuted()?this.setMutedOn():this.setMutedOff()},a.prototype.toggleMuted=function(){this.setMuted(!this.getMuted())},a.prototype.setMutedOn=function(){var a;for(a in this.sounds)this.sounds.hasOwnProperty(a)&&(this.sounds[a].volume=0);this.ItemsHolder.setItem("muted","1")},a.prototype.setMutedOff=function(){var a,b,c=this.getVolume();for(b in this.sounds)this.sounds.hasOwnProperty(b)&&(a=this.sounds[b],a.volume=Number(a.getAttribute("volumeReal"))*c);this.ItemsHolder.setItem("muted","0")},a.prototype.getGetVolumeLocal=function(){return this.getVolumeLocal},a.prototype.setGetVolumeLocal=function(a){this.getVolumeLocal=a},a.prototype.getGetThemeDefault=function(){return this.getThemeDefault},a.prototype.setGetThemeDefault=function(a){this.getThemeDefault=a},a.prototype.play=function(a){var b,c;if(this.sounds.hasOwnProperty(a))b=this.sounds[a];else{if(!this.library.hasOwnProperty(a))throw new Error("Unknown name given to AudioPlayr.play: '"+a+"'.");b=this.sounds[a]=this.library[a]}return this.soundStop(b),this.getMuted()?b.volume=0:(b.setAttribute("volumeReal","1"),b.volume=this.getVolume()),this.playSound(b),c=Number(b.getAttribute("used")),c||(b.setAttribute("used",String(c+1)),b.addEventListener("ended",this.soundFinish.bind(this,a))),b.setAttribute("name",a),b},a.prototype.pauseAll=function(){var a;for(a in this.sounds)this.sounds.hasOwnProperty(a)&&this.pauseSound(this.sounds[a])},a.prototype.resumeAll=function(){var a;for(a in this.sounds)this.sounds.hasOwnProperty(a)&&this.playSound(this.sounds[a])},a.prototype.pauseTheme=function(){this.theme&&this.pauseSound(this.theme)},a.prototype.resumeTheme=function(){this.theme&&this.playSound(this.theme)},a.prototype.clearAll=function(){this.pauseAll(),this.clearTheme(),this.sounds={}},a.prototype.clearTheme=function(){this.theme&&(this.pauseTheme(),delete this.sounds[this.theme.getAttribute("name")],this.theme=void 0)},a.prototype.playLocal=function(a,b){void 0===b&&(b=void 0);var c,d=this.play(a);switch(this.getVolumeLocal.constructor){case Function:c=this.getVolumeLocal(b);break;case Number:c=this.getVolumeLocal;break;default:c=Number(this.getVolumeLocal)||1}return d.setAttribute("volumeReal",String(c)),d.volume=this.getMuted()?0:c*this.getVolume(),d},a.prototype.playTheme=function(a,b){if(void 0===a&&(a=void 0),void 0===b&&(b=void 0),this.pauseTheme(),b="undefined"!=typeof b?b:!0,"undefined"==typeof a)switch(this.getThemeDefault.constructor){case Function:a=this.getThemeDefault();break;default:a=this.getThemeDefault}return"undefined"!=typeof this.theme&&this.theme.hasAttribute("name")&&delete this.sounds[this.theme.getAttribute("name")],this.theme=this.sounds[a]=this.play(a),this.theme.loop=b,"1"===this.theme.getAttribute("used")&&this.theme.addEventListener("ended",this.playTheme.bind(this)),this.theme},a.prototype.playThemePrefixed=function(a,b,c){void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0);var d=this.play(a);if(this.pauseTheme(),"undefined"==typeof b)switch(this.getThemeDefault.constructor){case Function:b=this.getThemeDefault();break;default:b=this.getThemeDefault}return this.addEventListener(a,"ended",this.playTheme.bind(this,a+" "+b,c)),d},a.prototype.addEventListener=function(a,b,c){var d=this.library[a];if(!d)throw new Error("Unknown name given to addEventListener: '"+a+"'.");d.addedEvents||(d.addedEvents={}),d.addedEvents[b]?d.addedEvents[b].push(c):d.addedEvents[b]=[c],d.addEventListener(b,c)},a.prototype.removeEventListeners=function(a,b){var c,d,e=this.library[a];if(!e)throw new Error("Unknown name given to removeEventListeners: '"+a+"'.");if(e.addedEvents&&(c=e.addedEvents[b])){for(d=0;d<c.length;d+=1)e.removeEventListener(b,c[d]);c.length=0}},a.prototype.addEventImmediate=function(a,b,c){return!this.sounds.hasOwnProperty(a)||this.sounds[a].paused?void c():void this.sounds[a].addEventListener(b,c)},a.prototype.soundFinish=function(a){this.sounds.hasOwnProperty(a)&&delete this.sounds[a]},a.prototype.soundStop=function(a){this.pauseSound(a),a.readyState&&(a.currentTime=0)},a.prototype.libraryLoad=function(){var a,b,c,d;for(c in this.library)if(this.library.hasOwnProperty(c)){a=this.library[c];for(d in a)a.hasOwnProperty(d)&&(b=a[d],this.library[b]=this.createAudio(b,c))}},a.prototype.createAudio=function(a,b){var c,d,e,f=document.createElement("audio");for(e=0;e<this.fileTypes.length;e+=1)c=this.fileTypes[e],d=document.createElement("source"),d.type="audio/"+c,d.src=this.directory+"/"+b+"/"+c+"/"+a+"."+c,f.appendChild(d);return f.volume=0,f.setAttribute("volumeReal","1"),f.setAttribute("used","0"),this.playSound(f),f},a.prototype.playSound=function(a){return a&&a.play?(a.play(),!0):!1},a.prototype.pauseSound=function(a){return a&&a.pause?(a.pause(),!0):!1},a}();a.AudioPlayr=b}(AudioPlayr||(AudioPlayr={}));var ChangeLinr;!function(a){"use strict";var b=function(){function a(a){var b;if("undefined"==typeof a.pipeline)throw new Error("No pipeline given to ChangeLinr.");if(this.pipeline=a.pipeline||[],"undefined"==typeof a.transforms)throw new Error("No transforms given to ChangeLinr.");for(this.transforms=a.transforms||{},this.doMakeCache="undefined"==typeof a.doMakeCache?!0:a.doMakeCache,this.doUseCache="undefined"==typeof a.doUseCache?!0:a.doUseCache,this.cache={},this.cacheFull={},b=0;b<this.pipeline.length;++b){if(!this.pipeline[b])throw new Error("Pipe["+b+"] is invalid.");if(!this.transforms.hasOwnProperty(this.pipeline[b])&&!this.transforms.hasOwnProperty(this.pipeline[b]))throw new Error("Pipe["+b+'] ("'+this.pipeline[b]+'") not found in transforms.');if(!(this.transforms[this.pipeline[b]]instanceof Function))throw new Error("Pipe["+b+'] ("'+this.pipeline[b]+'") is not a valid Function from transforms.');this.cacheFull[b]=this.cacheFull[this.pipeline[b]]={}}}return a.prototype.getCache=function(){return this.cache},a.prototype.getCached=function(a){return this.cache[a]},a.prototype.getCacheFull=function(){return this.cacheFull},a.prototype.getDoMakeCache=function(){return this.doMakeCache},a.prototype.getDoUseCache=function(){return this.doUseCache},a.prototype.process=function(a,b,c){void 0===b&&(b=void 0),void 0===c&&(c=void 0);var d;if("undefined"==typeof b&&(this.doMakeCache||this.doUseCache)&&(b=a),this.doUseCache&&this.cache.hasOwnProperty(b))return this.cache[b];for(d=0;d<this.pipeline.length;++d)a=this.transforms[this.pipeline[d]](a,b,c,this),this.doMakeCache&&(this.cacheFull[this.pipeline[d]][b]=a);return this.doMakeCache&&(this.cache[b]=a),a},a.prototype.processFull=function(a,b,c){void 0===c&&(c=void 0);var d,e={};for(this.process(a,b,c),d=0;d<this.pipeline.length;++d)e[d]=e[this.pipeline[d]]=this.cacheFull[this.pipeline[d]][b];return e},a}();a.ChangeLinr=b}(ChangeLinr||(ChangeLinr={}));var EightBittr;!function(a){"use strict";var b=function(){function a(b){void 0===b&&(b={});var c,d=a.prototype.ensureCorrectCaller(this),e=b.constants,f=b.constantsSource||d,g=b.requirements;if(d.unitsize=b.unitsize||1,d.constants=e,e)for(c=0;c<e.length;c+=1)d[e[c]]=f[e[c]];d.requirements=g,g&&(g.global&&"undefined"!=typeof window&&d.checkRequirements(window,g.global,"global"),g.self&&d.checkRequirements(d,g.self,"self"))}return a.prototype.checkRequirements=function(a,b,c){var d,e=[];for(d in b)b.hasOwnProperty(d)&&!a[d]&&e.push(d);if(e.length)throw new Error("Missing "+e.length+" requirement(s) in "+c+".\n"+e.map(function(a,c){return c+". "+a+": is the '"+b[a]+"' file included?"}).join("\n"))},a.prototype.reset=function(a,b,c){void 0===c&&(c=void 0);var d,e;for(a.customs=c,e=0;e<b.length;e+=1){if(d=b[e],!a[d])throw new Error(d+" is missing on a resetting EightBittr.");a[d](a,c)}},a.prototype.resetTimed=function(a,b,c){void 0===c&&(c=void 0);var d,e,f=performance.now(),g=[];for(e=0;e<b.length;e+=1)d=performance.now(),a[b[e]](a,c),g.push({name:b[e],time:performance.now()-d});return g.push({name:"resetTimed",time:performance.now()-f}),g},a.prototype.get=function(b){var c,d=a.prototype.ensureCorrectCaller.call(this);if(c=b.constructor===String?d.followPathHard(d,b.split("."),0):b instanceof Array?d.followPathHard(d,b,0):b,"function"!=typeof c)throw new Error(b+" is not defined in this EightBitter.");return c.bind(d)},a.prototype.createCanvas=function(a,b,c){void 0===c&&(c=1);var d=document.createElement("canvas"),e=d.getContext("2d");return d.width=a,d.height=b,c=c||1,d.style.width=a*c+"px",d.style.height=b*c+"px","undefined"!=typeof e.imageSmoothingEnabled?e.imageSmoothingEnabled=!1:"undefined"!=typeof e.webkitImageSmoothingEnabled?e.webkitImageSmoothingEnabled=!1:"undefined"!=typeof e.mozImageSmoothingEnabled?e.mozImageSmoothingEnabled=!1:"undefined"!=typeof e.msImageSmoothingEnabled?e.msImageSmoothingEnabled=!1:"undefined"!=typeof e.oImageSmoothingEnabled&&(e.oImageSmoothingEnabled=!1),d},a.prototype.shiftVert=function(a,b){a.top+=b,a.bottom+=b},a.prototype.shiftHoriz=function(a,b){a.left+=b,a.right+=b},a.prototype.setTop=function(a,b){a.top=b,a.bottom=a.top+a.height*a.EightBitter.unitsize},a.prototype.setRight=function(a,b){a.right=b,a.left=a.right-a.width*a.EightBitter.unitsize},a.prototype.setBottom=function(a,b){a.bottom=b,a.top=a.bottom-a.height*a.EightBitter.unitsize},a.prototype.setLeft=function(a,b){a.left=b,a.right=a.left+a.width*a.EightBitter.unitsize},a.prototype.setMid=function(a,b,c){a.EightBitter.setMidX(a,b),a.EightBitter.setMidY(a,c)},a.prototype.setMidX=function(a,b){a.EightBitter.setLeft(a,b+a.width*a.EightBitter.unitsize/2)},a.prototype.setMidY=function(a,b){a.EightBitter.setTop(a,b+a.height*a.EightBitter.unitsize/2)},a.prototype.getMidX=function(a){return a.left+a.width*a.EightBitter.unitsize/2},a.prototype.getMidY=function(a){return a.top+a.height*a.EightBitter.unitsize/2},a.prototype.setMidObj=function(a,b){a.EightBitter.setMidXObj(a,b),a.EightBitter.setMidYObj(a,b)},a.prototype.setMidXObj=function(a,b){a.EightBitter.setLeft(a,a.EightBitter.getMidX(b)-a.width*a.EightBitter.unitsize/2)},a.prototype.setMidYObj=function(a,b){a.EightBitter.setTop(a,a.EightBitter.getMidY(b)-a.height*a.EightBitter.unitsize/2)},a.prototype.objectToLeft=function(a,b){return a.EightBitter.getMidX(a)<a.EightBitter.getMidX(b)},a.prototype.updateTop=function(a,b){a.top+=b||0,a.bottom=a.top+a.height*a.EightBitter.unitsize},a.prototype.updateRight=function(a,b){a.right+=b||0,a.left=a.right-a.width*a.EightBitter.unitsize},a.prototype.updateBottom=function(a,b){a.bottom+=b||0,a.top=a.bottom-a.height*a.EightBitter.unitsize},a.prototype.updateLeft=function(a,b){a.left+=b||0,a.right=a.left+a.width*a.EightBitter.unitsize},a.prototype.slideToX=function(a,b,c){var d=a.EightBitter.getMidX(a);c=c||1/0,b>d?a.EightBitter.shiftHoriz(a,Math.min(c,b-d)):a.EightBitter.shiftHoriz(a,Math.max(-c,b-d))},a.prototype.slideToY=function(a,b,c){var d=a.EightBitter.getMidY(a);c=c||1/0,b>d?a.EightBitter.shiftVert(a,Math.min(c,b-d)):a.EightBitter.shiftVert(a,Math.max(-c,b-d))},a.prototype.ensureCorrectCaller=function(b){if(!(b instanceof a))throw new Error("A function requires the caller ('this') to be the manipulated EightBittr object. Unfortunately, 'this' is a "+typeof this+".");return b},a.prototype.proliferate=function(a,b,c){void 0===c&&(c=!1);var d,e;for(e in b)if(b.hasOwnProperty(e)){if(c&&a.hasOwnProperty(e))continue;d=b[e],"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d}return a},a.prototype.proliferateHard=function(a,b,c){void 0===c&&(c=!1);var d,e;for(e in b)if(b.hasOwnProperty(e)){if(c&&a[e])continue;d=b[e],"object"==typeof d?(a[e]||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d}return a},a.prototype.proliferateElement=function(a,b,c){void 0===c&&(c=!1);var d,e,f;for(e in b)if(b.hasOwnProperty(e)){if(c&&a.hasOwnProperty(e))continue;switch(d=b[e],e){case"children":if("undefined"!=typeof d)for(f=0;f<d.length;f+=1)a.appendChild(d[f]);break;case"style":this.proliferate(a[e],d);break;default:null===d?a[e]=null:"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d}}return a},a.prototype.createElement=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];var e,f=a.prototype.ensureCorrectCaller(this),g=document.createElement(b||"div");for(e=1;e<arguments.length;e+=1)f.proliferateElement(g,arguments[e]);return g},a.prototype.followPathHard=function(a,b,c){void 0===c&&(c=0);for(var d=c||0;d<b.length;d+=1){if("undefined"==typeof a[b[d]])return void 0;a=a[b[d]]}return a},a.prototype.arraySwitch=function(a,b,c){b.splice(b.indexOf(a),1),c.push(a)},a.prototype.arrayToBeginning=function(a,b){b.splice(b.indexOf(a),1),b.unshift(a)},a.prototype.arrayToEnd=function(a,b){b.splice(b.indexOf(a),1),b.push(a)},a}();a.EightBittr=b}(EightBittr||(EightBittr={}));var FPSAnalyzr;!function(a){"use strict";var b=function(){function a(a){void 0===a&&(a={}),this.maxKept=a.maxKept||35,this.numRecorded=0,this.ticker=-1,this.measurements=isFinite(this.maxKept)?new Array(this.maxKept):{},this.getTimestamp="undefined"==typeof a.getTimestamp?"undefined"==typeof performance?function(){return Date.now()}:(performance.now||performance.webkitNow||performance.mozNow||performance.msNow||performance.oNow).bind(performance):a.getTimestamp}return a.prototype.measure=function(a){void 0===a&&(a=this.getTimestamp()),this.timeCurrent&&this.addFPS(1e3/(a-this.timeCurrent)),this.timeCurrent=a},a.prototype.addFPS=function(a){this.ticker=(this.ticker+=1)%this.maxKept,this.measurements[this.ticker]=a,this.numRecorded+=1},a.prototype.getMaxKept=function(){return this.maxKept},a.prototype.getNumRecorded=function(){return this.numRecorded},a.prototype.getTimeCurrent=function(){return this.timeCurrent},a.prototype.getTicker=function(){return this.ticker},a.prototype.getMeasurements=function(){var a,b,c=Math.min(this.maxKept,this.numRecorded);for(isFinite(this.maxKept)?a=new Array(c):(a={},a.length=c),b=c-1;b>=0;--b)a[b]=this.measurements[b];return a},a.prototype.getDifferences=function(){var a,b=this.getMeasurements();for(a=b.length-1;a>=0;--a)b[a]=1e3/b[a];return b},a.prototype.getAverage=function(){var a,b=0,c=Math.min(this.maxKept,this.numRecorded);for(a=c-1;a>=0;--a)b+=this.measurements[a];return b/c},a.prototype.getMedian=function(){var a=this.getMeasurementsSorted(),b=a.length,c=Math.floor(b/2);return a.length%2===0?a[c]:(a[c-2]+a[c])/2},a.prototype.getExtremes=function(){var a,b,c=this.measurements[0],d=c,e=Math.min(this.maxKept,this.numRecorded);for(b=e-1;b>=0;--b)a=this.measurements[b],a>d?d=a:c>a&&(c=a);return[c,d]},a.prototype.getRange=function(){var a=this.getExtremes();return a[1]-a[0]},a.prototype.getMeasurementsSorted=function(){var a,b;if(this.measurements.constructor===Array)a=this.measurements.sort();else{a=[];for(b in this.measurements)if(this.measurements.hasOwnProperty(b)){if(void 0===this.measurements[b])break;a[b]=this.measurements[b]}a.sort()}return this.numRecorded<this.maxKept&&(a.length=this.numRecorded),a.sort()},a}();a.FPSAnalyzr=b}(FPSAnalyzr||(FPSAnalyzr={}));var GamesRunnr;!function(a){"use strict";var b=function(){function a(a){var b;if("undefined"==typeof a.games)throw new Error("No games given to GamesRunnr.");for(this.games=a.games,this.interval=a.interval||1e3/60,this.speed=a.speed||1,this.onPause=a.onPause,this.onPlay=a.onPlay,this.callbackArguments=a.callbackArguments||[this],this.adjustFramerate=a.adjustFramerate,this.FPSAnalyzer=a.FPSAnalyzer||new FPSAnalyzr.FPSAnalyzr(a.FPSAnalyzerSettings),this.scope=a.scope||this,this.paused=!0,this.upkeepScheduler=a.upkeepScheduler||function(a,b){return setTimeout(a,b)},this.upkeepCanceller=a.upkeepCanceller||function(a){clearTimeout(a)},this.upkeepBound=this.upkeep.bind(this),b=0;b<this.games.length;b+=1)this.games[b]=this.games[b].bind(this.scope);this.setIntervalReal()}return a.prototype.getFPSAnalyzer=function(){return this.FPSAnalyzer},a.prototype.getPaused=function(){return this.paused},a.prototype.getGames=function(){return this.games},a.prototype.getInterval=function(){return this.interval},a.prototype.getSpeed=function(){return this.speed},a.prototype.getOnPause=function(){return this.onPause},a.prototype.getOnPlay=function(){return this.onPlay},a.prototype.getCallbackArguments=function(){return this.callbackArguments},a.prototype.getUpkeepScheduler=function(){return this.upkeepScheduler},a.prototype.getUpkeepCanceller=function(){return this.upkeepCanceller},a.prototype.upkeep=function(){this.paused||(this.upkeepCanceller(this.upkeepNext),this.adjustFramerate?this.upkeepNext=this.upkeepScheduler(this.upkeepBound,this.intervalReal-(0|this.upkeepTimed())):(this.upkeepNext=this.upkeepScheduler(this.upkeepBound,this.intervalReal),this.games.forEach(this.run)),this.FPSAnalyzer&&this.FPSAnalyzer.measure())},a.prototype.upkeepTimed=function(){if(!this.FPSAnalyzer)throw new Error("An internal FPSAnalyzr is required for upkeepTimed.");var a=this.FPSAnalyzer.getTimestamp();return this.games.forEach(this.run),this.FPSAnalyzer.getTimestamp()-a},a.prototype.play=function(){this.paused&&(this.paused=!1,this.onPlay&&this.onPlay.apply(this,this.callbackArguments),this.upkeep())},a.prototype.pause=function(){this.paused||(this.paused=!0,this.onPause&&this.onPause.apply(this,this.callbackArguments),this.upkeepCanceller(this.upkeepNext))},a.prototype.step=function(a){void 0===a&&(a=1),this.play(),this.pause(),a>0&&this.step(a-1)},a.prototype.togglePause=function(){this.paused?this.play():this.pause()},a.prototype.setInterval=function(a){var b=Number(a);if(isNaN(b))throw new Error("Invalid interval given to setInterval: "+a);this.interval=b,this.setIntervalReal()},a.prototype.setSpeed=function(a){var b=Number(a);if(isNaN(b))throw new Error("Invalid speed given to setSpeed: "+a);this.speed=b,this.setIntervalReal()},a.prototype.setIntervalReal=function(){this.intervalReal=1/this.speed*this.interval},a.prototype.run=function(a){a()},a}();a.GamesRunnr=b}(GamesRunnr||(GamesRunnr={}));var GroupHoldr;!function(a){"use strict";var b=function(){function a(a){if("undefined"==typeof a)throw new Error("No settings given to GroupHoldr.");if("undefined"==typeof a.groupNames)throw new Error("No groupNames given to GroupHoldr.");if("undefined"==typeof a.groupTypes)throw new Error("No groupTypes given to GroupHoldr.");this.functions={setGroup:{},
getGroup:{},set:{},get:{},add:{},"delete":{}},this.setGroupNames(a.groupNames,a.groupTypes)}return a.prototype.getFunctions=function(){return this.functions},a.prototype.getGroups=function(){return this.groups},a.prototype.getGroup=function(a){return this.groups[a]},a.prototype.getGroupNames=function(){return this.groupNames},a.prototype.deleteObject=function(a,b){var c=this.groups[a];c.splice(c.indexOf(b),1)},a.prototype.deleteIndex=function(a,b,c){void 0===c&&(c=1);var d=this.groups[a];d.splice(b,c)},a.prototype.switchObjectGroup=function(a,b,c,d){void 0===d&&(d=void 0),this.deleteObject(b,a),this.functions.add[c](a,d)},a.prototype.applyAll=function(a,b,c){void 0===c&&(c=void 0);var d;for(c?c.unshift(void 0):c=[void 0],a||(a=this),d=this.groupNames.length-1;d>=0;d-=1)c[0]=this.groups[this.groupNames[d]],b.apply(a,c);c.shift()},a.prototype.applyOnAll=function(a,b,c){void 0===c&&(c=void 0);var d,e,f;for(c?c.unshift(void 0):c=[void 0],a||(a=this),e=this.groupNames.length-1;e>=0;e-=1)if(d=this.groups[this.groupNames[e]],d instanceof Array)for(f=0;f<d.length;f+=1)c[0]=d[f],b.apply(a,c);else for(f in d)d.hasOwnProperty(f)&&(c[0]=d[f],b.apply(a,c))},a.prototype.callAll=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e,c=Array.prototype.slice.call(arguments,1);for(a||(a=this),e=this.groupNames.length-1;e>=0;e-=1)c[0]=this.groups[this.groupNames[e]],b.apply(a,c)},a.prototype.callOnAll=function(a,b){var c,d,e,f=Array.prototype.slice.call(arguments,1);for(a||(a=this),d=this.groupNames.length-1;d>=0;d-=1)if(c=this.groups[this.groupNames[d]],c instanceof Array)for(e=0;e<c.length;e+=1)f[0]=c[e],b.apply(a,f);else for(e in c)c.hasOwnProperty(e)&&(f[0]=c[e],b.apply(a,f))},a.prototype.clearArrays=function(){var a,b;for(b=this.groupNames.length-1;b>=0;b-=1)a=this.groups[this.groupNames[b]],a instanceof Array&&(a.length=0)},a.prototype.setGroupNames=function(a,b){var c,d,e=this;if(!(a instanceof Array))throw new Error("groupNames is not an Array");this.groupNames&&this.clearFunctions(),this.groupNames=a,this.groupTypes={},this.groupTypeNames={},b.constructor===Object?this.groupNames.forEach(function(a){e.groupTypes[a]=e.getTypeFunction(b[a]),e.groupTypeNames[a]=e.getTypeName(b[a])}):(c=this.getTypeFunction(b),d=this.getTypeName(b),this.groupNames.forEach(function(a){e.groupTypes[a]=c,e.groupTypeNames[a]=d})),this.setGroups(),this.setFunctions()},a.prototype.clearFunctions=function(){this.groupNames.forEach(function(a){delete this["set"+a+"Group"],delete this["get"+a+"Group"],delete this["set"+a],delete this["get"+a],delete this["add"+a],delete this["delete"+a],this.functions.setGroup={},this.functions.getGroup={},this.functions.set={},this.functions.get={},this.functions.add={},this.functions["delete"]={}})},a.prototype.setGroups=function(){var a=this;this.groups={},this.groupNames.forEach(function(b){a.groups[b]=new a.groupTypes[b]})},a.prototype.setFunctions=function(){var a,b;for(b=0;b<this.groupNames.length;b+=1)a=this.groupNames[b],this.createFunctionSetGroup(a),this.createFunctionGetGroup(a),this.createFunctionSet(a),this.createFunctionGet(a),this.createFunctionAdd(a),this.createFunctionDelete(a)},a.prototype.createFunctionSetGroup=function(a){var b=this;this.functions.setGroup[a]=this["set"+a+"Group"]=function(c){b.groups[a]=c}},a.prototype.createFunctionGetGroup=function(a){var b=this;this.functions.getGroup[a]=this["get"+a+"Group"]=function(){return b.groups[a]}},a.prototype.createFunctionSet=function(a){this.functions.set[a]=this["set"+a]=function(b,c){void 0===c&&(c=void 0),this.groups[a][b]=c}},a.prototype.createFunctionGet=function(a){this.functions.get[a]=this["get"+a]=function(b){return this.groups[a][b]}},a.prototype.createFunctionAdd=function(a){var b=this.groups[a];this.functions.add[a]=this["add"+a]=this.groupTypes[a]===Object?function(a,c){b[c]=a}:function(a,c){void 0!==c?b[c]=a:b.push(a)}},a.prototype.createFunctionDelete=function(a){var b=this.groups[a];this.functions["delete"][a]=this["delete"+a]=this.groupTypes[a]===Object?function(a){delete b[a]}:function(a){b.splice(b.indexOf(a),1)}},a.prototype.getTypeName=function(a){return a&&a.charAt&&"o"===a.charAt(0).toLowerCase()?"Object":"Array"},a.prototype.getTypeFunction=function(a){return a&&a.charAt&&"o"===a.charAt(0).toLowerCase()?Object:Array},a}();a.GroupHoldr=b}(GroupHoldr||(GroupHoldr={}));var InputWritr;!function(a){"use strict";var b=function(){function a(a){if(!a.triggers)throw new Error("No triggers given to InputWritr.");this.triggers=a.triggers,this.getTimestamp="undefined"==typeof a.getTimestamp?"undefined"==typeof performance?function(){return Date.now()}:(performance.now||performance.webkitNow||performance.mozNow||performance.msNow||performance.oNow).bind(performance):a.getTimestamp,this.eventInformation=a.eventInformation,this.canTrigger=a.hasOwnProperty("canTrigger")?a.canTrigger:function(){return!0},this.isRecording=a.hasOwnProperty("isRecording")?a.isRecording:function(){return!0},this.history={},this.histories={length:0},this.aliases={},this.addAliases(a.aliases||{}),this.keyAliasesToCodes=a.keyAliasesToCodes||{shift:16,ctrl:17,space:32,left:37,up:38,right:39,down:40},this.keyCodesToAliases=a.keyCodesToAliases||{16:"shift",17:"ctrl",32:"space",37:"left",38:"up",39:"right",40:"down"}}return a.prototype.restartHistory=function(a){void 0===a&&(a=!0),a&&this.saveHistory(this.history),this.history={},this.startingTime=this.getTimestamp()},a.prototype.getAliases=function(){return this.aliases},a.prototype.getAliasesAsKeyStrings=function(){var a,b={};for(a in this.aliases)this.aliases.hasOwnProperty(a)&&(b[a]=this.getAliasAsKeyStrings(a));return b},a.prototype.getAliasAsKeyStrings=function(a){return this.aliases[a].map(this.convertAliasToKeyString.bind(this))},a.prototype.convertAliasToKeyString=function(a){return a.constructor===String?a:a>96&&105>a?String.fromCharCode(a-48):a>64&&97>a?String.fromCharCode(a):"undefined"!=typeof this.keyCodesToAliases[a]?this.keyCodesToAliases[a]:"?"},a.prototype.convertKeyStringToAlias=function(a){return a.constructor===Number?a:1===a.length?a.charCodeAt(0)-32:"undefined"!=typeof this.keyAliasesToCodes[a]?this.keyAliasesToCodes[a]:-1},a.prototype.getHistory=function(a){return void 0===a&&(a=void 0),arguments.length?this.histories[a]:history},a.prototype.getHistories=function(){return this.histories},a.prototype.getCanTrigger=function(){return this.canTrigger},a.prototype.getIsRecording=function(){return this.isRecording},a.prototype.setCanTrigger=function(a){this.canTrigger=a.constructor===Boolean?function(){return a}:a},a.prototype.setIsRecording=function(a){this.isRecording=a.constructor===Boolean?function(){return a}:a},a.prototype.setEventInformation=function(a){this.eventInformation=a},a.prototype.addAliasValues=function(a,b){var c,d,e;this.aliases.hasOwnProperty(a)?this.aliases[a].push.apply(this.aliases[a],b):this.aliases[a]=b;for(c in this.triggers)if(this.triggers.hasOwnProperty(c)&&(d=this.triggers[c],d.hasOwnProperty(a)))for(e=0;e<b.length;e+=1)d[b[e]]=d[a]},a.prototype.removeAliasValues=function(a,b){var c,d,e;if(this.aliases.hasOwnProperty(a)){for(e=0;e<b.length;e+=1)this.aliases[a].splice(this.aliases[a].indexOf(b[e],1));for(c in this.triggers)if(this.triggers.hasOwnProperty(c)&&(d=this.triggers[c],d.hasOwnProperty(a)))for(e=0;e<b.length;e+=1)d.hasOwnProperty(b[e])&&delete d[b[e]]}},a.prototype.switchAliasValues=function(a,b,c){this.removeAliasValues(a,b),this.addAliasValues(a,c)},a.prototype.addAliases=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.addAliasValues(b,a[b])},a.prototype.addEvent=function(a,b,c){var d;if(!this.triggers.hasOwnProperty(a))throw new Error("Unknown trigger requested: '"+a+"'.");if(this.triggers[a][b]=c,this.aliases.hasOwnProperty(b))for(d=0;d<this.aliases[b].length;d+=1)this.triggers[a][this.aliases[b][d]]=c},a.prototype.removeEvent=function(a,b){var c;if(!this.triggers.hasOwnProperty(a))throw new Error("Unknown trigger requested: '"+a+"'.");if(delete this.triggers[a][b],this.aliases.hasOwnProperty(b))for(c=0;c<this.aliases[b].length;c+=1)this.triggers[a][this.aliases[b][c]]&&delete this.triggers[a][this.aliases[b][c]]},a.prototype.saveHistory=function(a){void 0===a&&(a=void 0),this.histories[this.histories.length]=history,this.histories.length+=1,arguments.length&&(this.histories[a]=history)},a.prototype.playHistory=function(){this.playEvents(this.history)},a.prototype.playEvents=function(a){var b,c,d={};for(b in a)a.hasOwnProperty(b)&&(c=this.makeEventCall(a[b]),d[b]=setTimeout(c,Number(b)-this.startingTime|0))},a.prototype.callEvent=function(a,b,c){if(this.canTrigger(a,b)){if(!a)throw new Error("Blank event given, ignoring it.");return a.constructor===String&&(a=this.triggers[a][b]),a(this.eventInformation,c)}},a.prototype.makePipe=function(a,b,c){var d=this.triggers[a],e=this;if(!d)throw new Error("No trigger of label '"+a+"' defined.");return function(f){var g=f[b];c&&f.preventDefault instanceof Function&&f.preventDefault(),d.hasOwnProperty(g)&&(e.isRecording()&&(e.history[0|e.getTimestamp()]=[a,g]),e.callEvent(d[g],g,f))}},a.prototype.makeEventCall=function(a){return function(){this.callEvent(a[0],a[1])}},a}();a.InputWritr=b}(InputWritr||(InputWritr={}));var ObjectMakr;!function(a){"use strict";var b=function(){function a(a){if("undefined"==typeof a.inheritance)throw new Error("No inheritance mapping given to ObjectMakr.");this.inheritance=a.inheritance,this.properties=a.properties||{},this.doPropertiesFull=a.doPropertiesFull,this.indexMap=a.indexMap,this.onMake=a.onMake,this.functions={},this.doPropertiesFull&&(this.propertiesFull={}),this.indexMap&&this.processProperties(this.properties),this.processFunctions(this.inheritance,Object,"Object")}return a.prototype.getInheritance=function(){return this.inheritance},a.prototype.getProperties=function(){return this.properties},a.prototype.getPropertiesOf=function(a){return this.properties[a]},a.prototype.getFullProperties=function(){return this.propertiesFull},a.prototype.getFullPropertiesOf=function(a){return this.doPropertiesFull?this.propertiesFull[a]:void 0},a.prototype.getFunctions=function(){return this.functions},a.prototype.getFunction=function(a){return this.functions[a]},a.prototype.hasFunction=function(a){return this.functions.hasOwnProperty(a)},a.prototype.getIndexMap=function(){return this.indexMap},a.prototype.make=function(a,b){void 0===b&&(b=void 0);var c;if(!this.functions.hasOwnProperty(a))throw new Error("Unknown type given to ObjectMakr: "+a);return c=new this.functions[a],b&&this.proliferate(c,b),this.onMake&&c[this.onMake]&&(this.doPropertiesFull?c[this.onMake](c,a,this.properties[a],this.propertiesFull[a]):c[this.onMake](c,a,this.properties[a],this.functions[a].prototype)),c},a.prototype.processProperties=function(a){var b;for(b in a)this.properties.hasOwnProperty(b)&&this.properties[b]instanceof Array&&(this.properties[b]=this.processPropertyArray(this.properties[b]))},a.prototype.processPropertyArray=function(a){var b,c={};for(b=a.length-1;b>=0;--b)c[this.indexMap[b]]=a[b];return c},a.prototype.processFunctions=function(a,b,c){var d,e;for(d in a)if(a.hasOwnProperty(d)){this.functions[d]=new Function,this.functions[d].prototype=new b,this.functions[d].prototype.constructor=this.functions[d];for(e in this.properties[d])this.properties[d].hasOwnProperty(e)&&(this.functions[d].prototype[e]=this.properties[d][e]);if(this.doPropertiesFull){if(this.propertiesFull[d]={},c)for(e in this.propertiesFull[c])this.propertiesFull[c].hasOwnProperty(e)&&(this.propertiesFull[d][e]=this.propertiesFull[c][e]);for(e in this.properties[d])this.properties[d].hasOwnProperty(e)&&(this.propertiesFull[d][e]=this.properties[d][e])}this.processFunctions(a[d],this.functions[d],d)}},a.prototype.proliferate=function(a,b,c){void 0===c&&(c=!1);var d,e;for(e in b)c&&a.hasOwnProperty(e)||(d=b[e],"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferate(a[e],d,c)):a[e]=d);return a},a}();a.ObjectMakr=b}(ObjectMakr||(ObjectMakr={}));var MapsCreatr;!function(a){"use strict";var b=function(){function a(a,b,c){this.thing=a,this.title=a.title,this.reference=b,this.spawned=!1,this.left=b.x||0,this.top=b.y||0,this.right=this.left+(b.width||c.getFullPropertiesOf(this.title).width),this.bottom=this.top+(b.height||c.getFullPropertiesOf(this.title).height),b.position&&(this.position=b.position)}return a}();a.PreThing=b;var c=function(){function a(a){if(!a)throw new Error("No settings given to MapsCreatr.");if(!a.ObjectMaker)throw new Error("No ObjectMakr given to MapsCreatr.");if(this.ObjectMaker=a.ObjectMaker,"undefined"==typeof this.ObjectMaker.getFullProperties())throw new Error("MapsCreatr's ObjectMaker must store full properties.");if(!a.groupTypes)throw new Error("No groupTypes given to MapsCreatr.");this.groupTypes=a.groupTypes,this.keyGroupType=a.keyGroupType||"groupType",this.keyEntrance=a.keyEntrance||"entrance",this.macros=a.macros||{},this.scope=a.scope||this,this.entrances=a.entrances,this.requireEntrance=a.requireEntrance,this.maps={},a.maps&&this.storeMaps(a.maps)}return a.prototype.getObjectMaker=function(){return this.ObjectMaker},a.prototype.getGroupTypes=function(){return this.groupTypes},a.prototype.getKeyGroupType=function(){return this.keyGroupType},a.prototype.getKeyEntrance=function(){return this.keyEntrance},a.prototype.getMacros=function(){return this.macros},a.prototype.getScope=function(){return this.scope},a.prototype.getRequireEntrance=function(){return this.requireEntrance},a.prototype.getMaps=function(){return this.maps},a.prototype.getMap=function(a){var b=this.maps[a];if(!b)throw new Error("No map found under: "+a);return b.initialized||(this.setMapAreas(b),this.setMapLocations(b),b.initialized=!0),b},a.prototype.storeMaps=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.storeMap(b,a[b])},a.prototype.storeMap=function(a,b){if(!a)throw new Error("Maps cannot be created with no name.");var c=this.ObjectMaker.make("Map",b);if(!c.areas)throw new Error("Maps cannot be used with no areas: "+a);if(!c.locations)throw new Error("Maps cannot be used with no locations: "+a);return this.maps[a]=c,c},a.prototype.getPreThings=function(a){var b,c=a.map,d=a.creation,e=this.fromKeys(this.groupTypes);for(a.collections={},b=0;b<d.length;b+=1)this.analyzePreSwitch(d[b],e,a,c);return this.processPreThingsArrays(e)},a.prototype.analyzePreSwitch=function(a,b,c,d){return a.macro?this.analyzePreMacro(a,b,c,d):this.analyzePreThing(a,b,c,d)},a.prototype.analyzePreMacro=function(a,b,c,d){var e,f,g=this.macros[a.macro];if(!g)return void console.warn("A non-existent macro is referenced. It will be ignored:",g,a,b,c,d);if(e=g(a,b,c,d,this.scope))if(e instanceof Array)for(f=0;f<e.length;f+=1)this.analyzePreSwitch(e[f],b,c,d);else this.analyzePreSwitch(e,b,c,d);return e},a.prototype.analyzePreThing=function(a,c,d,e){var f,g,h=a.thing;return this.ObjectMaker.hasFunction(h)?(g=new b(this.ObjectMaker.make(h,a),a,this.ObjectMaker),f=g.thing,g.thing[this.keyGroupType]?-1===this.groupTypes.indexOf(g.thing[this.keyGroupType])?void console.warn("A Thing contains an unknown "+this.keyGroupType+". It will be ignored:",f[this.keyGroupType],g,a,c,d,e):(c[g.thing[this.keyGroupType]].push(g),!f.noBoundaryStretch&&d.boundaries&&this.stretchAreaBoundaries(g,d),void 0!==f[this.keyEntrance]&&"object"!=typeof f[this.keyEntrance]&&"undefined"!=typeof e.locations[f[this.keyEntrance]]&&("undefined"==typeof e.locations[f[this.keyEntrance]].xloc&&(e.locations[f[this.keyEntrance]].xloc=g.left),"undefined"==typeof e.locations[f[this.keyEntrance]].yloc&&(e.locations[f[this.keyEntrance]].yloc=g.top),e.locations[f[this.keyEntrance]].entrance=g.thing),a.collectionName&&d.collections&&this.ensureThingCollection(g,a.collectionName,a.collectionKey,d),g):void console.warn("A Thing does not contain a "+this.keyGroupType+". It will be ignored:",g,"\n",arguments)):void console.warn("A non-existent Thing type is referenced. It will be ignored:",h,a,c,d,e)},a.prototype.setMapAreas=function(a){var b,c,d,e=a.areas,f=a.locations,g=new e.constructor,h=new f.constructor;for(d in e)e.hasOwnProperty(d)&&(b=this.ObjectMaker.make("Area",e[d]),g[d]=b,b.map=a,b.name=d,b.boundaries={top:0,right:0,bottom:0,left:0});for(d in f)if(f.hasOwnProperty(d)){if(c=this.ObjectMaker.make("Location",f[d]),h[d]=c,c.entryRaw=f[d].entry,c.name=d,c.area=f[d].area||0,this.requireEntrance&&!this.entrances.hasOwnProperty(c.entryRaw))throw new Error("Location "+d+" has unknown entry string: "+c.entryRaw);this.entrances&&c.entryRaw?c.entry=this.entrances[c.entryRaw]:c.entry&&c.entry.constructor===String&&(c.entry=this.entrances[String(c.entry)])}a.areas=g,a.locations=h},a.prototype.setMapLocations=function(a){var b,c,d=a.locations,e=new d.constructor;for(c in d)if(d.hasOwnProperty(c)&&(b=this.ObjectMaker.make("Location",d[c]),e[c]=b,b.area=a.areas[d[c].area||0],!e[c].area))throw new Error("Location "+c+" references an invalid area:"+d[c].area);a.locations=e},a.prototype.stretchAreaBoundaries=function(a,b){var c=b.boundaries;c.top=Math.min(a.top,c.top),c.right=Math.max(a.right,c.right),c.bottom=Math.max(a.bottom,c.bottom),c.left=Math.min(a.left,c.left)},a.prototype.ensureThingCollection=function(a,b,c,d){var e=a.thing,f=d.collections[b];f||(f=d.collections[b]={}),e.collection=f,f[c]=e},a.prototype.processPreThingsArrays=function(a){var b,c=this,d={};for(b in a)if(a.hasOwnProperty(b)){var e=a[b],f={xInc:this.getArraySorted(e,this.sortPreThingsXInc),xDec:this.getArraySorted(e,this.sortPreThingsXDec),yInc:this.getArraySorted(e,this.sortPreThingsYInc),yDec:this.getArraySorted(e,this.sortPreThingsYDec)};f.push=function(a){c.addArraySorted(this.xInc,a,c.sortPreThingsXInc),c.addArraySorted(this.xDec,a,c.sortPreThingsXDec),c.addArraySorted(this.yInc,a,c.sortPreThingsYInc),c.addArraySorted(this.yDec,a,c.sortPreThingsYDec)}.bind(f),d[b]=f}return d},a.prototype.fromKeys=function(a){var b,c={};for(b=0;b<a.length;b+=1)c[a[b]]=[];return c},a.prototype.getArraySorted=function(a,b){var c=a.slice();return c.sort(b),c},a.prototype.addArraySorted=function(a,b,c){for(var d,e=0,f=a.length;e!==f;)d=(e+f)/2|0,c(b,a[d])<0?f=d:e=d+1;return e===f?void a.splice(e,0,b):void 0},a.prototype.sortPreThingsXInc=function(a,b){return a.left===b.left?a.top-b.top:a.left-b.left},a.prototype.sortPreThingsXDec=function(a,b){return b.right===a.right?b.bottom-a.bottom:b.right-a.right},a.prototype.sortPreThingsYInc=function(a,b){return a.top===b.top?a.left-b.left:a.top-b.top},a.prototype.sortPreThingsYDec=function(a,b){return b.bottom===a.bottom?b.right-a.right:b.bottom-a.bottom},a}();a.MapsCreatr=c}(MapsCreatr||(MapsCreatr={}));var MapScreenr;!function(a){"use strict";var b=function(){function a(a){var b;if("undefined"==typeof a.width)throw new Error("No width given to MapScreenr.");if("undefined"==typeof a.height)throw new Error("No height given to MapScreenr.");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.variables=a.variables||{},this.variableArgs=a.variableArgs||[]}return a.prototype.clearScreen=function(){this.left=0,this.top=0,this.right=this.width,this.bottom=this.height,this.setMiddleX(),this.setMiddleY(),this.setVariables()},a.prototype.setMiddleX=function(){this.middleX=(this.left+this.right)/2},a.prototype.setMiddleY=function(){this.middleY=(this.top+this.bottom)/2},a.prototype.setVariables=function(){var a;for(a in this.variables)this.variables.hasOwnProperty(a)&&(this[a]=this.variables[a].apply(this,this.variableArgs))},a.prototype.shift=function(a,b){a&&this.shiftX(a),b&&this.shiftY(b)},a.prototype.shiftX=function(a){this.left+=a,this.right+=a},a.prototype.shiftY=function(a){this.top+=a,this.bottom+=a},a}();a.MapScreenr=b}(MapScreenr||(MapScreenr={}));var MapsHandlr;!function(a){"use strict";var b=function(){function a(a){if(!a)throw new Error("No settings given to MapsHandlr.");if(!a.MapsCreator)throw new Error("No MapsCreator provided to MapsHandlr.");if(this.MapsCreator=a.MapsCreator,!a.MapScreener)throw new Error("No MapScreener provided to MapsHandlr.");this.MapScreener=a.MapScreener,this.onSpawn=a.onSpawn,this.onUnspawn=a.onUnspawn,this.screenAttributes=a.screenAttributes||[],this.stretchAdd=a.stretchAdd,this.afterAdd=a.afterAdd}return a.prototype.getMapsCreator=function(){return this.MapsCreator},a.prototype.getMapScreener=function(){return this.MapScreener},a.prototype.getScreenAttributes=function(){return this.screenAttributes},a.prototype.getMapName=function(){return this.mapName},a.prototype.getMap=function(a){return void 0===a&&(a=void 0),"undefined"!=typeof a?this.MapsCreator.getMap(a):this.mapCurrent},a.prototype.getMaps=function(){return this.MapsCreator.getMaps()},a.prototype.getArea=function(){return this.areaCurrent},a.prototype.getAreaName=function(){return this.areaCurrent.name},a.prototype.getLocation=function(a){return this.areaCurrent.map.locations[a]},a.prototype.getPreThings=function(){return this.prethings},a.prototype.setMap=function(a,b){if(void 0===b&&(b=void 0),this.mapCurrent=this.getMap(a),!this.mapCurrent)throw new Error("Unknown Map in setMap: '"+a+"'.");return this.mapName=a,arguments.length>1&&this.setLocation(b),this.mapCurrent},a.prototype.setLocation=function(a){var b,c,d;if(b=this.mapCurrent.locations[a],!b)throw new Error("Unknown location in setLocation: '"+a+"'.");for(this.locationCurrent=b,this.areaCurrent=b.area,this.areaCurrent.boundaries={top:0,right:0,bottom:0,left:0},d=0;d<this.screenAttributes.length;d+=1)c=this.screenAttributes[d],this.MapScreener[c]=this.areaCurrent[c];this.prethings=this.MapsCreator.getPreThings(b.area),this.areaCurrent.stretches?this.setStretches(this.areaCurrent.stretches):this.stretches=void 0,this.areaCurrent.afters?this.setAfters(this.areaCurrent.afters):this.afters=void 0},a.prototype.setStretches=function(a){this.stretches=a,this.stretches.forEach(this.stretchAdd)},a.prototype.setAfters=function(a){this.afters=a,this.afters.forEach(this.afterAdd)},a.prototype.spawnMap=function(a,b,c,d,e){this.onSpawn&&this.applySpawnAction(this.onSpawn,!0,a,b,c,d,e)},a.prototype.unspawnMap=function(a,b,c,d,e){this.onUnspawn&&this.applySpawnAction(this.onUnspawn,!1,a,b,c,d,e)},a.prototype.applySpawnAction=function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n;for(h in this.prethings)if(this.prethings.hasOwnProperty(h)&&(i=this.prethings[h][c],0!==i.length))for(k=i.length/2|0,l=this.findPreThingsSpawnStart(c,i,k,d,e,f,g),m=this.findPreThingsSpawnEnd(c,i,k,d,e,f,g),n=l;m>=n;n+=1)j=i[n],j.spawned!==b&&(j.spawned=b,a(j))},a.prototype.findPreThingsSpawnStart=function(b,c,d,e,f,g,h){var i,j=a.directionKeys[b],k=this.getDirectionEnd(j,e,f,g,h);for(i=0;i<c.length;i+=1)if(c[i][j]>=k)return i;return i},a.prototype.findPreThingsSpawnEnd=function(b,c,d,e,f,g,h){var i,j=a.directionKeys[b],k=a.directionKeys[a.directionOpposites[b]],l=this.getDirectionEnd(k,e,f,g,h);for(i=c.length-1;i>=0;i-=1)if(c[i][j]<=l)return i;return i},a.prototype.getDirectionEnd=function(a,b,c,d,e){switch(a){case"top":return b;case"right":return c;case"bottom":return d;case"left":return e;default:throw new Error("Unknown directionKey: "+a)}},a.directionKeys={xInc:"left",xDec:"right",yInc:"top",yDec:"bottom"},a.directionOpposites={xInc:"xDec",xDec:"xInc",yInc:"yDec",yDec:"yInc"},a}();a.MapsHandlr=b}(MapsHandlr||(MapsHandlr={}));var StringFilr;!function(a){"use strict";var b=function(){function a(a){if(!a)throw new Error("No settings given to StringFilr.");if(!a.library)throw new Error("No library given to StringFilr.");if(this.library=a.library,this.normal=a.normal,this.requireNormalKey=a.requireNormalKey,this.cache={},this.requireNormalKey){if("undefined"==typeof this.normal)throw new Error("StringFilr is given requireNormalKey, but no normal class.");this.ensureLibraryNormal()}}return a.prototype.getLibrary=function(){return this.library},a.prototype.getNormal=function(){return this.normal},a.prototype.getCache=function(){return this.cache},a.prototype.getCached=function(a){return this.cache[a]},a.prototype.clearCache=function(){this.cache={}},a.prototype.clearCached=function(a){this.normal&&(a=a.replace(this.normal,"")),delete this.cache[a]},a.prototype.get=function(a){var b,c;return b=this.normal?a.replace(this.normal,""):a,this.cache.hasOwnProperty(b)?this.cache[b]:(c=this.followClass(b.split(/\s+/g),this.library),this.cache[b]=this.cache[a]=c,c)},a.prototype.findLackingNormal=function(a,b,c){var d;if(a.hasOwnProperty(this.normal)||c.push(b),"object"==typeof a[d])for(d in a)a.hasOwnProperty(d)&&this.findLackingNormal(a[d],b+" "+d,c);return c},a.prototype.followClass=function(a,b){var c,d;if(!a||!a.length)return b;for(d=0;d<a.length;d+=1)if(c=a[d],b.hasOwnProperty(c))return a.splice(d,1),this.followClass(a,b[c]);return this.normal&&b.hasOwnProperty(this.normal)?this.followClass(a,b[this.normal]):b},a.prototype.ensureLibraryNormal=function(){var a=this.findLackingNormal(this.library,"base",[]);if(a.length)throw new Error("Found "+a.length+" library sub-directories missing the normal: \r\n  "+a.join("\r\n  "))},a}();a.StringFilr=b}(StringFilr||(StringFilr={}));var PixelRendr;!function(a){"use strict";var b=function(){function a(a,b){this.source=a,this.filter=b,this.sprites={},this.containers=[]}return a}();a.Render=b;var c=function(){function a(a,b){var c=b.source[2];this.sprites=a,this.direction=b.source[1],("vertical"===this.direction||"corners"===this.direction)&&(this.topheight=0|c.topheight,this.bottomheight=0|c.bottomheight),("horizontal"===this.direction||"corners"===this.direction)&&(this.rightwidth=0|c.rightwidth,this.leftwidth=0|c.leftwidth),this.middleStretch=c.middleStretch||!1}return a}();a.SpriteMultiple=c;var d=function(){function a(a){if(!a)throw new Error("No settings given to PixelRendr.");if(!a.paletteDefault)throw new Error("No paletteDefault given to PixelRendr.");this.paletteDefault=a.paletteDefault,this.digitsizeDefault=this.getDigitSize(this.paletteDefault),this.digitsplit=new RegExp(".{1,"+this.digitsizeDefault+"}","g"),this.library={raws:a.library||{}},this.filters=a.filters||{},this.scale=a.scale||1,this.flipVert=a.flipVert||"flip-vert",this.flipHoriz=a.flipHoriz||"flip-horiz",this.spriteWidth=a.spriteWidth||"spriteWidth",this.spriteHeight=a.spriteHeight||"spriteHeight",this.Uint8ClampedArray=a.Uint8ClampedArray||window.Uint8ClampedArray||window.Uint8Array,this.ProcessorBase=new ChangeLinr.ChangeLinr({transforms:{spriteUnravel:this.spriteUnravel.bind(this),spriteApplyFilter:this.spriteApplyFilter.bind(this),spriteExpand:this.spriteExpand.bind(this),spriteGetArray:this.spriteGetArray.bind(this)},pipeline:["spriteUnravel","spriteApplyFilter","spriteExpand","spriteGetArray"]}),this.ProcessorDims=new ChangeLinr.ChangeLinr({transforms:{spriteRepeatRows:this.spriteRepeatRows.bind(this),spriteFlipDimensions:this.spriteFlipDimensions.bind(this)},pipeline:["spriteRepeatRows","spriteFlipDimensions"]}),this.ProcessorEncode=new ChangeLinr.ChangeLinr({transforms:{imageGetData:this.imageGetData.bind(this),imageGetPixels:this.imageGetPixels.bind(this),imageMapPalette:this.imageMapPalette.bind(this),imageCombinePixels:this.imageCombinePixels.bind(this)},pipeline:["imageGetData","imageGetPixels","imageMapPalette","imageCombinePixels"],doUseCache:!1}),this.library.sprites=this.libraryParse(this.library.raws),this.BaseFiler=new StringFilr.StringFilr({library:this.library.sprites,normal:"normal"}),this.commandGenerators={multiple:this.generateSpriteCommandMultipleFromRender.bind(this),same:this.generateSpriteCommandSameFromRender.bind(this),filter:this.generateSpriteCommandFilterFromRender.bind(this)}}return a.prototype.getBaseLibrary=function(){return this.BaseFiler.getLibrary()},a.prototype.getBaseFiler=function(){return this.BaseFiler},a.prototype.getProcessorBase=function(){return this.ProcessorBase},a.prototype.getProcessorDims=function(){return this.ProcessorDims},a.prototype.getProcessorEncode=function(){return this.ProcessorEncode},a.prototype.getSpriteBase=function(a){return this.BaseFiler.get(a)},a.prototype.decode=function(a,b){var c,d=this.BaseFiler.get(a);if(!d)throw new Error("No sprite found for "+a+".");if(d.sprites.hasOwnProperty(a)||this.generateRenderSprite(d,a,b),c=d.sprites[a],!c||c.constructor===Uint8ClampedArray&&0===c.length)throw new Error("Could not generate sprite for "+a+".");return c},a.prototype.encode=function(a,b,c){var d=this.ProcessorEncode.process(a);return b&&b(d,a,c),d},a.prototype.encodeUri=function(a,b){var c=document.createElement("img");c.onload=this.encode.bind(this,c,b),c.src=a},a.prototype.generatePaletteFromRawData=function(a,b,c){void 0===b&&(b=!1),void 0===c&&(c=!1);var d,e,f={},g=[],h=[];for(e=0;e<a.length;e+=4)0!==a[e+3]?f[a[e]]&&f[a[e]][a[e+1]]&&f[a[e]][a[e+1]][a[e+2]]&&f[a[e]][a[e+1]][a[e+2]][a[e+3]]||(f[a[e]]||(f[a[e]]={}),f[a[e]][a[e+1]]||(f[a[e]][a[e+1]]={}),f[a[e]][a[e+1]][a[e+2]]||(f[a[e]][a[e+1]][a[e+2]]={}),f[a[e]][a[e+1]][a[e+2]][a[e+3]]||(f[a[e]][a[e+1]][a[e+2]][a[e+3]]=!0,a[e]===a[e+1]&&a[e+1]===a[e+2]?h.push(a.subarray(e,e+4)):g.push(a.subarray(e,e+4)))):b=!0;if(h.sort(function(a,b){return a[0]-b[0]}),g.sort(function(a,b){for(e=0;4>e;e+=1)if(a[e]!==b[e])return b[e]-a[e]}),d=b?[new this.Uint8ClampedArray([0,0,0,0])].concat(h).concat(g):h.concat(g),!c)return d;for(e=0;e<d.length;e+=1)d[e]=Array.prototype.slice.call(d[e]);return d},a.prototype.memcpyU8=function(a,b,c,d,e){void 0===c&&(c=0),void 0===d&&(d=0),void 0===e&&(e=Math.max(0,Math.min(a.length,b.length)));for(var f=e+0,g=d+0,h=c+0;f--;)b[g++]=a[h++]},a.prototype.libraryParse=function(a){var c,d,e={};for(d in a)if(a.hasOwnProperty(d)){switch(c=a[d],c.constructor){case String:e[d]=new b(c);break;case Array:e[d]=new b(c,c[1]);break;default:e[d]=this.libraryParse(c)}e[d].constructor===b&&e[d].containers.push({container:e,key:d})}return e},a.prototype.generateRenderSprite=function(a,b,c){var d;d=a.source.constructor===String?this.generateSpriteSingleFromRender(a,b,c):this.commandGenerators[a.source[0]](a,b,c),a.sprites[b]=d},a.prototype.generateSpriteSingleFromRender=function(a,b,c){var d=this.ProcessorBase.process(a.source,b,a.filter),e=this.ProcessorDims.process(d,b,c);return e},a.prototype.generateSpriteCommandMultipleFromRender=function(a,b,d){var e,f,g,h=a.source[2],i={},j=new c(i,a);for(g in h)h.hasOwnProperty(g)&&(f=b+" "+g,e=this.ProcessorBase.process(h[g],f,a.filter),i[g]=this.ProcessorDims.process(e,f,d));return j},a.prototype.generateSpriteCommandSameFromRender=function(a,b,c){var d=this.followPath(this.library.sprites,a.source[1],0);return this.replaceRenderInContainers(a,d),this.BaseFiler.clearCached(b),this.decode(b,c)},a.prototype.generateSpriteCommandFilterFromRender=function(a,c,d){var e,f=this.filters[a.source[2]],g=this.followPath(this.library.sprites,a.source[1],0);return f||console.warn("Invalid filter provided: "+a.source[2]),g.constructor===b?(e=new b(g.source,{filter:f}),this.generateRenderSprite(e,c,d)):e=this.generateRendersFromFilter(g,f),this.replaceRenderInContainers(a,e),e.constructor===b?e.sprites[c]:(this.BaseFiler.clearCached(c),this.decode(c,d))},a.prototype.generateRendersFromFilter=function(a,c){var d,e,f={};for(e in a)a.hasOwnProperty(e)&&(d=a[e],f[e]=d.constructor===b?new b(d.source,{filter:c}):this.generateRendersFromFilter(d,c));return f},a.prototype.replaceRenderInContainers=function(a,c){var d,e;for(e=0;e<a.containers.length;e+=1)d=a.containers[e],d.container[d.key]=c,c.constructor===b&&c.containers.push(d)},a.prototype.spriteUnravel=function(a){for(var b,c,d,e=this.getPaletteReferenceStarting(this.paletteDefault),f=this.digitsizeDefault,g=a.length,h="",i=0;g>i;)switch(a[i]){case"x":for(d=a.indexOf(",",++i),b=this.makeDigit(e[a.slice(i,i+=f)],this.digitsizeDefault),c=Number(a.slice(i,d));c--;)h+=b;i=d+1;break;case"p":"["===a[++i]?(d=a.indexOf("]"),e=this.getPaletteReference(a.slice(i+1,d).split(",")),i=d+1,f=1):(e=this.getPaletteReference(this.paletteDefault),f=this.digitsizeDefault);break;default:h+=this.makeDigit(e[a.slice(i,i+=f)],this.digitsizeDefault)}return h},a.prototype.spriteExpand=function(a){for(var b,c,d="",e=a.length,f=0;e>f;)for(c=a.slice(f,f+=this.digitsizeDefault),
b=0;b<this.scale;++b)d+=c;return d},a.prototype.spriteApplyFilter=function(a,b,c){if(!c||!c.filter)return a;var d=c.filter,e=d[0];if(!e)return a;switch(e){case"palette":var f,g=a.match(this.digitsplit);for(f in d[1])d[1].hasOwnProperty(f)&&this.arrayReplace(g,f,d[1][f]);return g.join("");default:console.warn("Unknown filter: '"+e+"'.")}return a},a.prototype.spriteGetArray=function(a){var b,c,d,e,f=a.length,g=f/this.digitsizeDefault,h=a.match(this.digitsplit),i=4*g,j=new this.Uint8ClampedArray(i);for(c=0,d=0;g>c;++c){for(b=this.paletteDefault[Number(h[c])],e=0;4>e;++e)j[d+e]=b[e];d+=4}return j},a.prototype.spriteRepeatRows=function(a,b,c){var d,e,f=new this.Uint8ClampedArray(a.length*this.scale),g=4*c[this.spriteWidth],h=c[this.spriteHeight]/this.scale,i=0,j=0;for(d=0;h>d;++d){for(e=0;e<this.scale;++e)this.memcpyU8(a,f,i,j,g),j+=g;i+=g}return f},a.prototype.spriteFlipDimensions=function(a,b,c){return-1!==b.indexOf(this.flipHoriz)?-1!==b.indexOf(this.flipVert)?this.flipSpriteArrayBoth(a):this.flipSpriteArrayHoriz(a,c):-1!==b.indexOf(this.flipVert)?this.flipSpriteArrayVert(a,c):a},a.prototype.flipSpriteArrayHoriz=function(a,b){var c,d,e,f,g,h=a.length+0,i=b[this.spriteWidth]+0,j=new this.Uint8ClampedArray(h),k=4*i;for(e=0;h>e;e+=k)for(c=e,d=e+k-4,f=0;k>f;f+=4){for(g=0;4>g;++g)j[c+g]=a[d+g];c+=4,d-=4}return j},a.prototype.flipSpriteArrayVert=function(a,b){for(var c,d,e=a.length,f=b[this.spriteWidth]+0,g=new this.Uint8ClampedArray(e),h=4*f,i=0,j=e-h;e>i;){for(c=0;h>c;c+=4)for(d=0;4>d;++d)g[i+c+d]=a[j+c+d];i+=h,j-=h}return g},a.prototype.flipSpriteArrayBoth=function(a){for(var b,c=a.length,d=new this.Uint8ClampedArray(c),e=a.length-4,f=0;c>f;){for(b=0;4>b;++b)d[f+b]=a[e+b];f+=4,e-=4}return d},a.prototype.imageGetData=function(a){var b=document.createElement("canvas"),c=b.getContext("2d");return b.width=a.width,b.height=a.height,c.drawImage(a,0,0),c.getImageData(0,0,a.width,a.height).data},a.prototype.imageGetPixels=function(a){var b,c,d,e=new Array(a.length/4),f={};for(c=0,d=0;c<a.length;c+=4,d+=1)b=this.getClosestInPalette(this.paletteDefault,a.subarray(c,c+4)),e[d]=b,f.hasOwnProperty(b)?f[b]+=1:f[b]=1;return[e,f]},a.prototype.imageMapPalette=function(a){var b=a[0],c=a[1],d=Object.keys(c),e=this.getDigitSize(d),f=this.getValueIndices(d),g=b.map(this.getKeyValue.bind(this,f));return[d,g,e]},a.prototype.imageCombinePixels=function(a){var b,c,d,e,f=a[0],g=a[1],h=a[2],i=Math.max(3,Math.round(4/h)),j=0;for(b="p["+f.map(this.makeSizedDigit.bind(this,h)).join(",")+"]";j<g.length;){for(e=j+1,c=g[j],d=this.makeDigit(c,h);c===g[e];)e+=1;if(e-j>i)b+="x"+d+String(e-j)+",",j=e;else do b+=d,j+=1;while(e>j)}return b},a.prototype.getDigitSize=function(a){return Math.floor(Math.log(a.length)/Math.LN10)+1},a.prototype.getPaletteReference=function(a){var b,c={},d=this.getDigitSize(a);for(b=0;b<a.length;b+=1)c[this.makeDigit(b,d)]=this.makeDigit(a[b],d);return c},a.prototype.getPaletteReferenceStarting=function(a){var b,c={};for(b=0;b<a.length;b+=1)c[this.makeDigit(b,this.digitsizeDefault)]=this.makeDigit(b,this.digitsizeDefault);return c},a.prototype.getClosestInPalette=function(a,b){var c,d,e,f=1/0;for(e=a.length-1;e>=0;e-=1)c=this.arrayDifference(a[e],b),f>c&&(f=c,d=e);return d},a.prototype.stringOf=function(a,b){return void 0===b&&(b=1),0===b?"":new Array(1+(b||1)).join(a)},a.prototype.makeDigit=function(a,b,c){return void 0===c&&(c="0"),this.stringOf(c,Math.max(0,b-String(a).length))+a},a.prototype.makeSizedDigit=function(a,b){return this.makeDigit(b,a,"0")},a.prototype.arrayReplace=function(a,b,c){for(var d=a.length-1;d>=0;d-=1)a[d]===b&&(a[d]=c);return a},a.prototype.arrayDifference=function(a,b){var c,d=0;for(c=a.length-1;c>=0;c-=1)d+=0|Math.abs(a[c]-b[c]);return d},a.prototype.getValueIndices=function(a){var b,c={};for(b=0;b<a.length;b+=1)c[a[b]]=b;return c},a.prototype.getKeyValue=function(a,b){return a[b]},a.prototype.followPath=function(a,b,c){return c<b.length&&a.hasOwnProperty(b[c])?this.followPath(a[b[c]],b,c+1):a},a}();a.PixelRendr=d}(PixelRendr||(PixelRendr={}));var QuadsKeepr;!function(a){"use strict";var b=function(){function a(a){if(!a.ObjectMaker)throw new Error("No ObjectMaker given to QuadsKeepr.");if(this.ObjectMaker=a.ObjectMaker,!a.numRows)throw new Error("No numRows given to QuadsKeepr.");if(this.numRows=a.numRows,!a.numCols)throw new Error("No numCols given to QuadsKeepr.");if(this.numCols=a.numCols,!a.quadrantWidth)throw new Error("No quadrantWidth given to QuadsKeepr.");if(this.quadrantWidth=0|a.quadrantWidth,!a.quadrantHeight)throw new Error("No quadrantHeight given to QuadsKeepr.");if(this.quadrantHeight=0|a.quadrantHeight,!a.groupNames)throw new Error("No groupNames given to QuadsKeepr.");this.groupNames=a.groupNames,this.onAdd=a.onAdd,this.onRemove=a.onRemove,this.startLeft=0|a.startLeft,this.startTop=0|a.startTop,this.keyTop=a.keyTop||"top",this.keyLeft=a.keyLeft||"left",this.keyBottom=a.keyBottom||"bottom",this.keyRight=a.keyRight||"right",this.keyNumQuads=a.keyNumQuads||"numquads",this.keyQuadrants=a.keyQuadrants||"quadrants",this.keyChanged=a.keyChanged||"changed",this.keyToleranceX=a.keyToleranceX||"tolx",this.keyToleranceY=a.keyToleranceY||"toly",this.keyGroupName=a.keyGroupName||"group",this.keyOffsetX=a.keyOffsetX,this.keyOffsetY=a.keyOffsetY}return a.prototype.getQuadrantRows=function(){return this.quadrantRows},a.prototype.getQuadrantCols=function(){return this.quadrantCols},a.prototype.getNumRows=function(){return this.numRows},a.prototype.getNumCols=function(){return this.numCols},a.prototype.getQuadrantWidth=function(){return this.quadrantWidth},a.prototype.getQuadrantHeight=function(){return this.quadrantHeight},a.prototype.resetQuadrants=function(){var a,b,c,d=this.startLeft,e=this.startTop;for(this.top=this.startTop,this.right=this.startLeft+this.quadrantWidth*this.numCols,this.bottom=this.startTop+this.quadrantHeight*this.numRows,this.left=this.startLeft,this.quadrantRows=[],this.quadrantCols=[],this.offsetX=0,this.offsetY=0,b=0;b<this.numRows;b+=1)this.quadrantRows.push({left:this.startLeft,top:e,quadrants:[]}),e+=this.quadrantHeight;for(c=0;c<this.numCols;c+=1)this.quadrantCols.push({left:d,top:this.startTop,quadrants:[]}),d+=this.quadrantWidth;for(e=this.startTop,b=0;b<this.numRows;b+=1){for(d=this.startLeft,c=0;c<this.numCols;c+=1)a=this.createQuadrant(d,e),this.quadrantRows[b].quadrants.push(a),this.quadrantCols[c].quadrants.push(a),d+=this.quadrantWidth;e+=this.quadrantHeight}this.onAdd&&this.onAdd("xInc",this.top,this.right,this.bottom,this.left)},a.prototype.shiftQuadrants=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0);var c,d;for(a=0|a,b=0|b,this.offsetX+=a,this.offsetY+=b,this.top+=b,this.right+=a,this.bottom+=b,this.left+=a,c=0;c<this.numRows;c+=1)this.quadrantRows[c].left+=a,this.quadrantRows[c].top+=b;for(d=0;d<this.numCols;d+=1)this.quadrantCols[d].left+=a,this.quadrantCols[d].top+=b;for(c=0;c<this.numRows;c+=1)for(d=0;d<this.numCols;d+=1)this.shiftQuadrant(this.quadrantRows[c].quadrants[d],a,b);this.adjustOffsets()},a.prototype.pushQuadrantRow=function(a){void 0===a&&(a=!1);var b,c=this.createQuadrantRow(this.left,this.bottom);for(this.numRows+=1,this.quadrantRows.push(c),b=0;b<this.quadrantCols.length;b+=1)this.quadrantCols[b].quadrants.push(c.quadrants[b]);return this.bottom+=this.quadrantHeight,a&&this.onAdd&&this.onAdd("yInc",this.bottom,this.right,this.bottom-this.quadrantHeight,this.left),c},a.prototype.pushQuadrantCol=function(a){void 0===a&&(a=!1);var b,c=this.createQuadrantCol(this.right,this.top);for(this.numCols+=1,this.quadrantCols.push(c),b=0;b<this.quadrantRows.length;b+=1)this.quadrantRows[b].quadrants.push(c.quadrants[b]);return this.right+=this.quadrantWidth,a&&this.onAdd&&this.onAdd("xInc",this.top,this.right-this.offsetY,this.bottom,this.right-this.quadrantWidth-this.offsetY),c},a.prototype.popQuadrantRow=function(a){void 0===a&&(a=!1);for(var b=0;b<this.quadrantCols.length;b+=1)this.quadrantCols[b].quadrants.pop();this.numRows-=1,this.quadrantRows.pop(),a&&this.onRemove&&this.onRemove("yInc",this.bottom,this.right,this.bottom-this.quadrantHeight,this.left),this.bottom-=this.quadrantHeight},a.prototype.popQuadrantCol=function(a){void 0===a&&(a=!1);for(var b=0;b<this.quadrantRows.length;b+=1)this.quadrantRows[b].quadrants.pop();this.numCols-=1,this.quadrantCols.pop(),a&&this.onRemove&&this.onRemove("xDec",this.top,this.right-this.offsetY,this.bottom,this.right-this.quadrantWidth-this.offsetY),this.right-=this.quadrantWidth},a.prototype.unshiftQuadrantRow=function(a){void 0===a&&(a=!1);var b,c=this.createQuadrantRow(this.left,this.top-this.quadrantHeight);for(this.numRows+=1,this.quadrantRows.unshift(c),b=0;b<this.quadrantCols.length;b+=1)this.quadrantCols[b].quadrants.unshift(c.quadrants[b]);return this.top-=this.quadrantHeight,a&&this.onAdd&&this.onAdd("yInc",this.top,this.right,this.top+this.quadrantHeight,this.left),c},a.prototype.unshiftQuadrantCol=function(a){void 0===a&&(a=!1);var b,c=this.createQuadrantCol(this.left-this.quadrantWidth,this.top);for(this.numCols+=1,this.quadrantCols.unshift(c),b=0;b<this.quadrantRows.length;b+=1)this.quadrantRows[b].quadrants.unshift(c.quadrants[b]);return this.left-=this.quadrantWidth,a&&this.onAdd&&this.onAdd("xInc",this.top,this.left,this.bottom,this.left+this.quadrantWidth),c},a.prototype.shiftQuadrantRow=function(a){void 0===a&&(a=!1);for(var b=0;b<this.quadrantCols.length;b+=1)this.quadrantCols[b].quadrants.shift();this.numRows-=1,this.quadrantRows.pop(),a&&this.onRemove&&this.onRemove("yInc",this.top,this.right,this.top+this.quadrantHeight,this.left),this.top+=this.quadrantHeight},a.prototype.shiftQuadrantCol=function(a){void 0===a&&(a=!1);for(var b=0;b<this.quadrantRows.length;b+=1)this.quadrantRows[b].quadrants.shift();this.numCols-=1,this.quadrantCols.pop(),a&&this.onRemove&&this.onRemove("xInc",this.top,this.left+this.quadrantWidth,this.bottom,this.left),this.left+=this.quadrantWidth},a.prototype.determineAllQuadrants=function(a,b){var c,d;for(c=0;c<this.numRows;c+=1)for(d=0;d<this.numCols;d+=1)this.quadrantRows[c].quadrants[d].numthings[a]=0;b.forEach(this.determineThingQuadrants.bind(this))},a.prototype.determineThingQuadrants=function(a){var b,c,d=a[this.keyGroupName],e=this.findQuadrantRowStart(a),f=this.findQuadrantColStart(a),g=this.findQuadrantRowEnd(a),h=this.findQuadrantColEnd(a);for(a[this.keyChanged]&&this.markThingQuadrantsChanged(a),a[this.keyNumQuads]=0,b=e;g>=b;b+=1)for(c=f;h>=c;c+=1)this.setThingInQuadrant(a,this.quadrantRows[b].quadrants[c],d);a[this.keyChanged]=!1},a.prototype.setThingInQuadrant=function(a,b,c){a[this.keyQuadrants][a[this.keyNumQuads]]=b,a[this.keyNumQuads]+=1,b.things[c][b.numthings[c]]=a,b.numthings[c]+=1,a[this.keyChanged]&&(b.changed=!0)},a.prototype.adjustOffsets=function(){for(;-this.offsetX>this.quadrantWidth;)this.shiftQuadrantCol(!0),this.pushQuadrantCol(!0),this.offsetX+=this.quadrantWidth;for(;this.offsetX>this.quadrantWidth;)this.popQuadrantCol(!0),this.unshiftQuadrantCol(!0),this.offsetX-=this.quadrantWidth;for(;-this.offsetY>this.quadrantHeight;)this.unshiftQuadrantRow(!0),this.pushQuadrantRow(!0),this.offsetY+=this.quadrantHeight;for(;this.offsetY>this.quadrantHeight;)this.popQuadrantRow(!0),this.unshiftQuadrantRow(!0),this.offsetY-=this.quadrantHeight},a.prototype.shiftQuadrant=function(a,b,c){a.top+=c,a.right+=b,a.bottom+=c,a.left+=b,a.changed=!0},a.prototype.createQuadrant=function(a,b){var c,d=this.ObjectMaker.make("Quadrant");for(d.changed=!0,d.things={},d.numthings={},c=0;c<this.groupNames.length;c+=1)d.things[this.groupNames[c]]=[],d.numthings[this.groupNames[c]]=0;return d.left=a,d.top=b,d.right=a+this.quadrantWidth,d.bottom=b+this.quadrantHeight,d.canvas=this.createCanvas(this.quadrantWidth,this.quadrantHeight),d.context=d.canvas.getContext("2d"),d},a.prototype.createQuadrantRow=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0);var c,d={left:a,top:b,quadrants:[]};for(c=0;c<this.numCols;c+=1)d.quadrants.push(this.createQuadrant(a,b)),a+=this.quadrantWidth;return d},a.prototype.createQuadrantCol=function(a,b){var c,d={left:a,top:b,quadrants:[]};for(c=0;c<this.numRows;c+=1)d.quadrants.push(this.createQuadrant(a,b)),b+=this.quadrantHeight;return d},a.prototype.getTop=function(a){return this.keyOffsetY?a[this.keyTop]-Math.abs(a[this.keyOffsetY]):a[this.keyTop]},a.prototype.getRight=function(a){return this.keyOffsetX?a[this.keyRight]+Math.abs(a[this.keyOffsetX]):a[this.keyRight]},a.prototype.getBottom=function(a){return this.keyOffsetX?a[this.keyBottom]+Math.abs(a[this.keyOffsetY]):a[this.keyBottom]},a.prototype.getLeft=function(a){return this.keyOffsetX?a[this.keyLeft]-Math.abs(a[this.keyOffsetX]):a[this.keyLeft]},a.prototype.markThingQuadrantsChanged=function(a){for(var b=0;b<a[this.keyNumQuads];b+=1)a[this.keyQuadrants][b].changed=!0},a.prototype.findQuadrantRowStart=function(a){return Math.max(Math.floor((this.getTop(a)-this.top)/this.quadrantHeight),0)},a.prototype.findQuadrantRowEnd=function(a){return Math.min(Math.floor((this.getBottom(a)-this.top)/this.quadrantHeight),this.numRows-1)},a.prototype.findQuadrantColStart=function(a){return Math.max(Math.floor((this.getLeft(a)-this.left)/this.quadrantWidth),0)},a.prototype.findQuadrantColEnd=function(a){return Math.min(Math.floor((this.getRight(a)-this.left)/this.quadrantWidth),this.numCols-1)},a.prototype.createCanvas=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,c},a}();a.QuadsKeepr=b}(QuadsKeepr||(QuadsKeepr={}));var PixelDrawr;!function(a){"use strict";var b=function(){function a(a){this.PixelRender=a.PixelRender,this.MapScreener=a.MapScreener,this.createCanvas=a.createCanvas,this.unitsize=a.unitsize||1,this.noRefill=a.noRefill,this.spriteCacheCutoff=a.spriteCacheCutoff||0,this.groupNames=a.groupNames,this.framerateSkip=a.framerateSkip||1,this.framesDrawn=0,this.epsilon=a.epsilon||.007,this.keyWidth=a.keyWidth||"width",this.keyHeight=a.keyHeight||"height",this.keyTop=a.keyTop||"top",this.keyRight=a.keyRight||"right",this.keyBottom=a.keyBottom||"bottom",this.keyLeft=a.keyLeft||"left",this.keyOffsetX=a.keyOffsetX,this.keyOffsetY=a.keyOffsetY,this.generateObjectKey=a.generateObjectKey||function(a){return a.toString()},this.resetBackground()}return a.prototype.getFramerateSkip=function(){return this.framerateSkip},a.prototype.getThingArray=function(){return this.thingArrays},a.prototype.getCanvas=function(){return this.canvas},a.prototype.getContext=function(){return this.context},a.prototype.getBackgroundCanvas=function(){return this.backgroundCanvas},a.prototype.getBackgroundContext=function(){return this.backgroundContext},a.prototype.getNoRefill=function(){return this.noRefill},a.prototype.getEpsilon=function(){return this.epsilon},a.prototype.setFramerateSkip=function(a){this.framerateSkip=a},a.prototype.setThingArrays=function(a){this.thingArrays=a},a.prototype.setCanvas=function(a){this.canvas=a,this.context=a.getContext("2d")},a.prototype.setNoRefill=function(a){this.noRefill=a},a.prototype.setEpsilon=function(a){this.epsilon=a},a.prototype.resetBackground=function(){this.backgroundCanvas=this.createCanvas(this.MapScreener[this.keyWidth],this.MapScreener[this.keyHeight]),this.backgroundContext=this.backgroundCanvas.getContext("2d")},a.prototype.setBackground=function(a){this.backgroundContext.fillStyle=a,this.backgroundContext.fillRect(0,0,this.MapScreener[this.keyWidth],this.MapScreener[this.keyHeight])},a.prototype.drawBackground=function(){this.context.drawImage(this.backgroundCanvas,0,0)},a.prototype.setThingSprite=function(a){a.hidden||(a.sprite=this.PixelRender.decode(this.generateObjectKey(a),a),a.sprite.constructor===PixelRendr.SpriteMultiple?(a.numSprites=0,this.refillThingCanvasMultiple(a)):(a.numSprites=1,this.refillThingCanvasSingle(a)))},a.prototype.refillThingCanvasSingle=function(a){if(!(a[this.keyWidth]<1||a[this.keyHeight]<1)){var b=a.canvas,c=a.context,d=c.getImageData(0,0,b[this.keyWidth],b[this.keyHeight]);this.PixelRender.memcpyU8(a.sprite,d.data),c.putImageData(d,0,0)}},a.prototype.refillThingCanvasMultiple=function(a){if(!(a[this.keyWidth]<1||a[this.keyHeight]<1)){var b,c,d,e,f=a.sprite,g=a.canvases={direction:f.direction,multiple:!0};a.numSprites=1;for(e in f.sprites)f.sprites.hasOwnProperty(e)&&(b=this.createCanvas(a.spritewidth*this.unitsize,a.spriteheight*this.unitsize),c=b.getContext("2d"),d=c.getImageData(0,0,b[this.keyWidth],b[this.keyHeight]),this.PixelRender.memcpyU8(f.sprites[e],d.data),c.putImageData(d,0,0),g[e]={canvas:b,context:c},a.numSprites+=1);a[this.keyWidth]*a[this.keyHeight]<this.spriteCacheCutoff?(a.canvas[this.keyWidth]=a[this.keyWidth]*this.unitsize,a.canvas[this.keyHeight]=a[this.keyHeight]*this.unitsize,this.drawThingOnContextMultiple(a.context,a.canvases,a,0,0)):a.canvas[this.keyWidth]=a.canvas[this.keyHeight]=0}},a.prototype.refillGlobalCanvas=function(){if(this.framesDrawn+=1,this.framesDrawn%this.framerateSkip===0){this.noRefill||this.drawBackground();for(var a=0;a<this.thingArrays.length;a+=1)this.refillThingArray(this.thingArrays[a])}},a.prototype.refillThingArray=function(a){for(var b=0;b<a.length;b+=1)this.drawThingOnContext(this.context,a[b])},a.prototype.refillQuadrantGroups=function(a){var b;if(this.framesDrawn+=1,this.framesDrawn%this.framerateSkip===0)for(b=0;b<a.length;b+=1)this.refillQuadrants(a[b].quadrants)},a.prototype.refillQuadrants=function(a){var b,c;for(c=0;c<a.length;c+=1)b=a[c],b.changed&&b[this.keyTop]<this.MapScreener[this.keyHeight]&&b[this.keyRight]>0&&b[this.keyBottom]>0&&b[this.keyLeft]<this.MapScreener[this.keyWidth]&&(this.refillQuadrant(b),this.context.drawImage(b.canvas,b[this.keyLeft],b[this.keyTop]))},a.prototype.refillQuadrant=function(a){var b,c,d;for(this.noRefill||a.context.drawImage(this.backgroundCanvas,a[this.keyLeft],a[this.keyTop],a.canvas[this.keyWidth],a.canvas[this.keyHeight],0,0,a.canvas[this.keyWidth],a.canvas[this.keyHeight]),c=this.groupNames.length-1;c>=0;c-=1)for(b=a.things[this.groupNames[c]],d=0;d<b.length;d+=1)this.drawThingOnQuadrant(b[d],a);a.changed=!1},a.prototype.drawThingOnContext=function(a,b){b.hidden||b.opacity<this.epsilon||b[this.keyHeight]<1||b[this.keyWidth]<1||this.getTop(b)>this.MapScreener[this.keyHeight]||this.getRight(b)<0||this.getBottom(b)<0||this.getLeft(b)>this.MapScreener[this.keyWidth]||("undefined"==typeof b.numSprites&&this.setThingSprite(b),b.canvas[this.keyWidth]>0?this.drawThingOnContextSingle(a,b.canvas,b,this.getLeft(b),this.getTop(b)):this.drawThingOnContextMultiple(a,b.canvases,b,this.getLeft(b),this.getTop(b)))},a.prototype.drawThingOnQuadrant=function(a,b){return a.hidden||this.getTop(a)>b[this.keyBottom]||this.getRight(a)<b[this.keyLeft]||this.getBottom(a)<b[this.keyTop]||this.getLeft(a)>b[this.keyRight]||a.opacity<this.epsilon?void 0:1===a.numSprites?this.drawThingOnContextSingle(b.context,a.canvas,a,this.getLeft(a)-b[this.keyLeft],this.getTop(a)-b[this.keyTop]):this.drawThingOnContextMultiple(b.context,a.canvases,a,this.getLeft(a)-b[this.keyLeft],this.getTop(a)-b[this.keyTop])},a.prototype.drawThingOnContextSingle=function(a,b,c,d,e){c.repeat?this.drawPatternOnContext(a,b,d,e,c.unitwidth,c.unitheight,c.opacity||1):1!==c.opacity?(a.globalAlpha=c.opacity,a.drawImage(b,d,e,b.width*c.scale,b.height*c.scale),a.globalAlpha=1):a.drawImage(b,d,e,b.width*c.scale,b.height*c.scale)},a.prototype.drawThingOnContextMultiple=function(a,b,c,d,e){var f,g,h,i=c.sprite,j=e,k=d,l=d+c.unitwidth,m=e+c.unitheight,n=c.unitwidth,o=c.unitheight,p=c.spritewidthpixels,q=c.spriteheightpixels,r=Math.min(n,p),s=Math.min(o,q),t=c.opacity;switch(b.direction){case"vertical":(h=b[this.keyBottom])&&(g=i.bottomheight?i.bottomheight*this.unitsize:q,this.drawPatternOnContext(a,h.canvas,k,m-g,n,s,t),m-=g,o-=g),(h=b[this.keyTop])&&(g=i.topheight?i.topheight*this.unitsize:q,this.drawPatternOnContext(a,h.canvas,k,j,n,s,t),j+=g,o-=g);break;case"horizontal":(h=b[this.keyLeft])&&(f=i.leftwidth?i.leftwidth*this.unitsize:p,this.drawPatternOnContext(a,h.canvas,k,j,r,o,t),k+=f,n-=f),(h=b[this.keyRight])&&(f=i.rightwidth?i.rightwidth*this.unitsize:p,this.drawPatternOnContext(a,h.canvas,l-f,j,r,o,t),l-=f,n-=f);break;case"corners":g=i.topheight?i.topheight*this.unitsize:q,f=i.leftwidth?i.leftwidth*this.unitsize:p,this.drawPatternOnContext(a,b.topLeft.canvas,k,j,r,s,t),this.drawPatternOnContext(a,b[this.keyLeft].canvas,k,j+g,r,o-2*g,t),this.drawPatternOnContext(a,b.bottomLeft.canvas,k,m-g,r,s,t),k+=f,n-=f,f=i.rightwidth?i.rightwidth*this.unitsize:p,this.drawPatternOnContext(a,b[this.keyTop].canvas,k,j,n-f,s,t),this.drawPatternOnContext(a,b.topRight.canvas,l-f,j,r,s,t),j+=g,o-=g,g=i.bottomheight?i.bottomheight*this.unitsize:q,this.drawPatternOnContext(a,b[this.keyRight].canvas,l-f,j,r,o-g,t),this.drawPatternOnContext(a,b.bottomRight.canvas,l-f,m-g,r,s,t),this.drawPatternOnContext(a,b[this.keyBottom].canvas,k,m-g,n-f,s,t),l-=f,n-=f,m-=g,o-=g}(h=b.middle)&&m>j&&l>k&&(i.middleStretch?(a.globalAlpha=t,a.drawImage(h.canvas,k,j,n,o),a.globalAlpha=1):this.drawPatternOnContext(a,h.canvas,k,j,n,o,t))},a.prototype.getTop=function(a){return this.keyOffsetY?a[this.keyTop]+a[this.keyOffsetY]:a[this.keyTop]},a.prototype.getRight=function(a){return this.keyOffsetX?a[this.keyRight]+a[this.keyOffsetX]:a[this.keyRight]},a.prototype.getBottom=function(a){return this.keyOffsetX?a[this.keyBottom]+a[this.keyOffsetY]:a[this.keyBottom]},a.prototype.getLeft=function(a){return this.keyOffsetX?a[this.keyLeft]+a[this.keyOffsetX]:a[this.keyLeft]},a.prototype.drawPatternOnContext=function(a,b,c,d,e,f,g){a.globalAlpha=g,a.translate(c,d),a.fillStyle=a.createPattern(b,"repeat"),a.fillRect(0,0,e,f),a.translate(-c,-d),a.globalAlpha=1},a}();a.PixelDrawr=b}(PixelDrawr||(PixelDrawr={}));var TimeHandlr;!function(a){"use strict";var b=function(){function a(a){this.time=0,this.events={},this.timingDefault=a.timingDefault||1,this.keyCycles=a.keyCycles||"cycles",this.keyClassName=a.keyClassName||"className",this.keyOnClassCycleStart=a.keyOnClassCycleStart||"onClassCycleStart",this.keyDoClassCycleStart=a.keyDoClassCycleStart||"doClassCycleStart",this.keyCycleCheckValidity=a.keyCycleCheckValidity,this.copyCycleSettings="undefined"==typeof a.copyCycleSettings?!0:a.copyCycleSettings,this.classAdd=a.classAdd||this.classAddGeneric,this.classRemove=a.classRemove||this.classRemoveGeneric}return a.prototype.getTime=function(){return this.time},a.prototype.getEvents=function(){return this.events},a.prototype.addEvent=function(a,b){void 0===b&&(b=1);for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e;if("function"!=typeof a)throw new Error("Invalid event given to addEvent.");return b=b||1,e=this.createEvent(a,this.time+b,b,c,1),this.insertEvent(e,e.timeDelay),e},a.prototype.addEventInterval=function(a,b,c){void 0===b&&(b=1),void 0===c&&(c=1);for(var d=[],e=3;e<arguments.length;e++)d[e-3]=arguments[e];var f,g;if("function"!=typeof a)throw new Error("Invalid event given to addEventInterval.");return b=b||1,c=c||1,g=Array.prototype.slice.call(arguments,3),f=this.createEvent(a,this.time+b,b,g,c),a.event=f,this.insertEvent(f,f.timeDelay),f},a.prototype.addEventIntervalSynched=function(a,b,c,d,e){var f=b*e.length,g=Math.ceil(this.time/f)*f,h=this,i=Array.prototype.slice.call(arguments),j=Function.apply.bind(this.addEventInterval,h,i);return b=b||1,c=c||1,g===this.time?j():void this.addEvent(j,g-this.time,h,i,d)},a.prototype.handleEvents=function(){var a,b,c,d;if(this.time+=1,a=this.events[this.time]){for(d=0,c=a.length;c>d;++d)b=a[d],b.repeat>0&&!b.callback.apply(this,b.args)&&(b.count_changer&&b.count_changer(b),b.repeat.constructor===Function?b.repeat.call(b)&&(b.count+=b.timeRepeat,this.insertEvent(b,b.timeDelay)):(b.repeat=b.repeat-1,b.repeat>0&&(b.timeDelay+=b.timeRepeat,this.insertEvent(b,b.timeDelay))));delete this.events[this.time]}},a.prototype.cancelEvent=function(a){a.repeat=0},a.prototype.cancelAllEvents=function(){this.events={}},a.prototype.cancelClassCycle=function(a,b){var c;a[this.keyCycles]&&a[this.keyCycles][b]&&(c=a[this.keyCycles][b],c.length=1,c[0]=!1,delete a[this.keyCycles][b])},a.prototype.cancelAllCycles=function(a){var b,c,d=a[this.keyCycles];for(c in d)d.hasOwnProperty(c)&&(b=d[c],b.length=1,b[0]=!1,delete d[c])},a.prototype.addClassCycle=function(a,b,c,d){var e,f="function"==typeof d;return a[this.keyCycles]||(a[this.keyCycles]={}),this.cancelClassCycle(a,c),c=c||"0",e=a[this.keyCycles][c]=this.setClassCycle(a,b,f?0:d),e.event&&f&&(e.event.count_changer=d),this.cycleClass(a,b),e},a.prototype.addClassCycleSynched=function(a,b,c,d){var e;return a[this.keyCycles]||(a[this.keyCycles]={}),this.cancelClassCycle(a,c),c=c||"0",e=a[this.keyCycles][c]=this.setClassCycle(a,b,d,!0),this.cycleClass(a,a[this.keyCycles][c]),e},a.prototype.setClassCycle=function(a,b,c,d){void 0===d&&(d=!1);var e,f=this;return this.copyCycleSettings&&(b=this.makeSettingsCopy(b)),b.loc=b.oldclass=-1,e=d?this.addEventIntervalSynched:this.addEventInterval,e=e.bind(f),a[this.keyOnClassCycleStart]=function(){e(f.cycleClass,c||f.timingDefault,1/0,a,b)},a[this.keyDoClassCycleStart]&&a[this.keyOnClassCycleStart](),b},a.prototype.cycleClass=function(a,b){var c,d;return a&&b&&b.length&&(!this.keyCycleCheckValidity||a[this.keyCycleCheckValidity])?(-1!==b.oldclass&&""!==b.oldclass&&this.classRemove(a,b.oldclass),b.loc=(b.loc+=1)%b.length,c=b[b.loc],c?(d=c.constructor===Function?c(a,b):c,"string"==typeof d?(b.oldclass=d,this.classAdd(a,d),!1):d===!1):c===!1):!0},a.prototype.createEvent=function(a,b,c,d,e){return{callback:a,timeDelay:b,timeRepeat:c,args:d,repeat:e,count:0}},a.prototype.insertEvent=function(a,b){return this.events[b]?this.events[b].push(a):this.events[b]=[a],this.events[b]},a.prototype.makeSettingsCopy=function(a){var b,c=new a.constructor;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},a.prototype.classAddGeneric=function(a,b){a[this.keyClassName]+=" "+b},a.prototype.classRemoveGeneric=function(a,b){a[this.keyClassName]=a[this.keyClassName].replace(b,"")},a}();a.TimeHandlr=b}(TimeHandlr||(TimeHandlr={}));var LevelEditr;!function(a){"use strict";var b=function(){function a(a){this.GameStarter=a.GameStarter,this.prethings=a.prethings,this.thingGroups=a.thingGroups,this.thingKeys=a.thingKeys,this.macros=a.macros,this.beautifier=a.beautifier,this.mapNameDefault=a.mapNameDefault||"New Map",this.mapTimeDefault=a.mapTimeDefault||1/0,this.mapSettingDefault=a.mapSettingDefault||"",this.mapEntryDefault=a.mapEntryDefault||"",this.mapDefault=a.mapDefault,this.blocksize=a.blocksize||1,this.keyUndefined=a.keyUndefined||"-none-",this.currentPreThings=[],this.currentMode="Build",this.currentClickMode="Thing"}return a.prototype.getGameStarter=function(){return this.GameStarter},a.prototype.getOldInformation=function(){return this.oldInformation},a.prototype.getPreThings=function(){return this.prethings},a.prototype.getThingGroups=function(){return this.thingGroups},a.prototype.getThingKeys=function(){return this.thingKeys},a.prototype.getMacros=function(){return this.macros},a.prototype.getMapNameDefault=function(){return this.mapNameDefault},a.prototype.getMapTimeDefault=function(){return this.mapTimeDefault},a.prototype.getMapEntryDefault=function(){return this.mapEntryDefault},a.prototype.getMapDefault=function(){return this.mapDefault},a.prototype.getDisplay=function(){return this.display},a.prototype.getCurrentMode=function(){return this.currentMode},a.prototype.getBlockSize=function(){return this.blocksize},a.prototype.getBeautifier=function(){return this.beautifier},a.prototype.getCurrentPreThings=function(){return this.currentPreThings},a.prototype.getCurrentTitle=function(){return this.currentTitle},a.prototype.getCurrentArgs=function(){return this.currentArgs},a.prototype.getPageStylesAdded=function(){return this.pageStylesAdded},a.prototype.getKeyUndefined=function(){return this.keyUndefined},a.prototype.enable=function(){this.oldInformation={map:this.GameStarter.MapsHandler.getMapName()},this.clearAllThings(),this.resetDisplay(),this.GameStarter.InputWriter.setCanTrigger(!1),this.setCurrentMode("Build"),this.setTextareaValue(this.stringifySmart(this.mapDefault),!0),this.resetDisplayMap(),this.disableThing(this.GameStarter.player),this.pageStylesAdded||(this.GameStarter.addPageStyles(this.createPageStyles()),this.pageStylesAdded=!0),this.GameStarter.container.insertBefore(this.display.container,this.GameStarter.container.children[0])},a.prototype.disable=function(){this.display&&(this.GameStarter.container.removeChild(this.display.container),this.display=void 0,this.GameStarter.InputWriter.setCanTrigger(!0),this.GameStarter.setMap(this.oldInformation.map))},a.prototype.minimize=function(){this.display.minimizer.innerText="+",this.display.minimizer.onclick=this.maximize.bind(this),this.display.container.className+=" minimized"},a.prototype.maximize=function(){this.display.minimizer.innerText="-",this.display.minimizer.onclick=this.minimize.bind(this),-1!==this.display.container.className.indexOf("minimized")&&(this.display.container.className=this.display.container.className.replace(/ minimized/g,""))},a.prototype.startBuilding=function(){this.beautifyTextareaValue(),this.setDisplayMap(!0),this.GameStarter.InputWriter.setCanTrigger(!1),this.setCurrentMode("Build"),this.maximize()},a.prototype.startPlaying=function(){this.beautifyTextareaValue(),this.setDisplayMap(!1),this.GameStarter.InputWriter.setCanTrigger(!0),this.setCurrentMode("Play"),this.minimize()},a.prototype.downloadCurrentJSON=function(){var a=this.downloadFile(this.getMapName()+".json",this.display.stringer.textarea.value||"");window.open(a.href)},a.prototype.setCurrentJSON=function(a){this.startBuilding(),this.setTextareaValue(a,!0),this.getMapObjectAndTry()},a.prototype.loadCurrentJSON=function(){this.display.inputDummy.click()},a.prototype.handleUploadCompletion=function(a){this.enable(),this.setCurrentJSON(a.currentTarget.result),this.setSectionJSON()},a.prototype.setCurrentMode=function(a){this.currentMode=a},a.prototype.setCurrentClickMode=function(a,b){this.currentClickMode=a,this.cancelEvent(b)},a.prototype.setCurrentThing=function(a,b,c,d){void 0===c&&(c=0),void 0===d&&(d=0),this.currentTitle=a,this.currentArgs=b,this.currentPreThings=[{xloc:0,yloc:0,thing:this.GameStarter.ObjectMaker.make(this.currentTitle,this.GameStarter.proliferate({onThingMake:void 0,onThingAdd:void 0,onThingAdded:void 0,outerok:!0},this.getNormalizedThingArguments(b)))}],this.disableThing(this.currentPreThings[0].thing),this.GameStarter.addThing(this.currentPreThings[0].thing,c,d)},a.prototype.setCurrentMacroThings=function(){var a,b;for(b=0;b<this.currentPreThings.length;b+=1)a=this.currentPreThings[b],a.thing.outerok=!0,this.disableThing(a.thing),this.GameStarter.addThing(a.thing,a.xloc||0,a.yloc||0)},a.prototype.setCurrentArgs=function(){"Thing"===this.currentClickMode?this.setCurrentThing(this.currentTitle,this.generateCurrentArgs()):this.onMacroIconClick(this.currentTitle,void 0,this.generateCurrentArgs())},a.prototype.onMouseDownScroller=function(a,b){var c=b.target,d=this;c.setAttribute("scrolling","1"),this.GameStarter.TimeHandler.addEventInterval(function(){return"1"!==c.getAttribute("scrolling")?!0:0>a&&d.GameStarter.MapScreener.left<=0?void(d.display.scrollers.left.style.opacity="0"):(d.GameStarter.scrollWindow(a),void(d.display.scrollers.left.style.opacity="1"))},1,1/0)},a.prototype.onMouseUpScrolling=function(a){a.target.setAttribute("scrolling","0")},a.prototype.onMouseMoveEditing=function(a){var b,c,d=a.x||a.clientX||0,e=a.y||a.clientY||0;for(c=0;c<this.currentPreThings.length;c+=1)b=this.currentPreThings[c],b.thing&&(this.GameStarter.setLeft(b.thing,this.roundTo(d-this.GameStarter.container.offsetLeft,this.blocksize)+(b.left||0)*this.GameStarter.unitsize),this.GameStarter.setTop(b.thing,this.roundTo(e-this.GameStarter.container.offsetTop,this.blocksize)-(b.top||0)*this.GameStarter.unitsize))},a.prototype.onClickEditingThing=function(a){if("Build"===this.currentMode){var b=this.roundTo(a.x||a.clientX||0,this.blocksize),c=this.roundTo(a.y||a.clientY||0,this.blocksize);this.currentPreThings.length&&this.addMapCreationThing(b,c)&&this.onClickEditingGenericAdd(b,c,this.currentTitle,this.currentArgs);
}},a.prototype.onClickEditingMacro=function(a){if("Build"===this.currentMode){var b,c,d=this.roundTo(a.x||a.clientX||0,this.blocksize),e=this.roundTo(a.y||a.clientY||0,this.blocksize);if(this.currentPreThings.length&&this.addMapCreationMacro(d,e))for(c=0;c<this.currentPreThings.length;c+=1)b=this.currentPreThings[c],this.onClickEditingGenericAdd(d+(b.left||0)*this.GameStarter.unitsize,e-(b.top||0)*this.GameStarter.unitsize,b.thing.title||b.title,b.reference)}},a.prototype.onClickEditingGenericAdd=function(a,b,c,d){var e=this.GameStarter.ObjectMaker.make(c,this.GameStarter.proliferate({onThingMake:void 0,onThingAdd:void 0,onThingAdded:void 0,movement:void 0},this.getNormalizedThingArguments(d)));"Build"===this.currentMode&&this.disableThing(e,.7),this.GameStarter.addThing(e,this.roundTo(a-this.GameStarter.container.offsetLeft,this.blocksize),this.roundTo(b-this.GameStarter.container.offsetTop,this.blocksize))},a.prototype.onThingIconClick=function(a,b){var c=b.x||b.clientX||0,d=b.y||b.clientY||0,e="DIV"===b.target.nodeName?b.target:b.target.parentNode,f=this;this.cancelEvent(b),this.killCurrentPreThings(),setTimeout(function(){f.setCurrentThing(a,f.getCurrentArgs(),c,d)}),this.setVisualOptions(e.getAttribute("name"),void 0,e.options)},a.prototype.onMacroIconClick=function(a,b,c){b&&this.setVisualOptions(a,b,c);var d=this.getMapObject();d&&(this.currentPreThings=[],this.GameStarter.MapsCreator.analyzePreMacro(this.GameStarter.proliferate({macro:a},this.generateCurrentArgs()),this.createPrethingsHolder(this.currentPreThings),this.getCurrentAreaObject(d),d),this.currentTitle=a,this.setCurrentMacroThings())},a.prototype.createPrethingsHolder=function(a){var b={};return this.thingGroups.forEach(function(c){b[c]=a}),b},a.prototype.generateCurrentArgs=function(){var a,b,c,d,e,f={},g=this.display.sections.ClickToPlace.VisualOptions,h=g.getElementsByClassName("VisualOptionsList");if(0===h.length)return f;for(h=h[0].childNodes,e=0;e<h.length;e+=1){switch(a=h[e],b=a.querySelector(".VisualOptionLabel"),c=a.querySelector(".VisualOptionValue"),(c.getAttribute("data:type")||c.type).toLowerCase()){case"boolean":d="true"===c.value?!0:!1;break;case"number":d=(Number(c.value)||0)*(Number(c.getAttribute("data:mod"))||1);break;default:d=c.value}d!==this.keyUndefined&&(f[b.textContent]=d)}return f},a.prototype.setMapName=function(){var a=this.getMapName(),b=this.getMapObject();b&&b.name!==a&&(b.name=a,this.display.namer.value=a,this.setTextareaValue(this.stringifySmart(b),!0),this.GameStarter.ItemsHolder.setItem("world",a))},a.prototype.setMapTime=function(a){var b,c=this.getMapObject();c&&(a?(b=Number(this.display.sections.MapSettings.Time.value),c.time=b):(b=c.time,this.display.sections.MapSettings.Time.value=b.toString()),this.setTextareaValue(this.stringifySmart(c),!0),this.GameStarter.ItemsHolder.setItem("time",b),this.GameStarter.TimeHandler.cancelAllEvents())},a.prototype.setMapSetting=function(a){var b,c,d=this.getMapObject();d&&(b=this.getCurrentAreaObject(d),a?(c=this.display.sections.MapSettings.Setting.Primary.value,this.display.sections.MapSettings.Setting.Secondary.value&&(c+=" "+this.display.sections.MapSettings.Setting.Secondary.value),this.display.sections.MapSettings.Setting.Tertiary.value&&(c+=" "+this.display.sections.MapSettings.Setting.Tertiary.value),b.setting=c):(c=b.setting.split(" "),this.display.sections.MapSettings.Setting.Primary.value=c[0],this.display.sections.MapSettings.Setting.Secondary.value=c[1],this.display.sections.MapSettings.Setting.Tertiary.value=c[2]),this.setTextareaValue(this.stringifySmart(d),!0),this.setDisplayMap(!0))},a.prototype.setLocationArea=function(){var a,b=this.getMapObject();b&&(a=this.getCurrentLocationObject(b),a.area=this.getCurrentArea(),this.setTextareaValue(this.stringifySmart(b),!0),this.setDisplayMap(!0))},a.prototype.setMapEntry=function(a){var b,c,d=this.getMapObject();d&&(b=this.getCurrentLocationObject(d),a?(c=this.display.sections.MapSettings.Entry.value,b.entry=c):(console.warn("Was this code ever reached? area.location?"),this.display.sections.MapSettings.Entry.value=c),this.setTextareaValue(this.stringifySmart(d),!0),this.setDisplayMap(!0))},a.prototype.setCurrentLocation=function(a){var b,c=this.getMapObject();c&&(b=this.getCurrentLocationObject(c),a?this.display.sections.MapSettings.Area.value=b.area?b.area.toString():"0":console.warn("This code is never reached, right?"),this.setTextareaValue(this.stringifySmart(c),!0),this.setDisplayMap(!0))},a.prototype.addLocationToMap=function(){var a=this.display.sections.MapSettings.Location.options.length.toString(),b=this.getMapObject();b&&(b.locations[a]={entry:this.mapEntryDefault},this.resetAllVisualOptionSelects("VisualOptionLocation",Object.keys(b.locations)),this.setTextareaValue(this.stringifySmart(b),!0),this.setDisplayMap(!0))},a.prototype.addAreaToMap=function(){var a=this.display.sections.MapSettings.Area.options.length.toString(),b=this.getMapObject();b&&(b.areas[a]={setting:this.mapSettingDefault,creation:[]},this.resetAllVisualOptionSelects("VisualOptionArea",Object.keys(b.areas)),this.setTextareaValue(this.stringifySmart(b),!0),this.setDisplayMap(!0))},a.prototype.resetAllVisualOptionSelects=function(a,b){var c,d,e,f=this.getMapObject(),g=this.display.container.getElementsByClassName(a),h={children:b.map(function(a){return new Option(a,a)})};if(f)for(e=0;e<g.length;e+=1)c=g[e],d=c.value,c.textContent="",this.GameStarter.proliferateElement(c,h),c.value=d},a.prototype.getMapObject=function(){var a;try{a=this.parseSmart(this.display.stringer.textarea.value),this.display.stringer.messenger.textContent="",this.display.namer.value=a.name||this.mapNameDefault}catch(b){this.setSectionJSON(),this.display.stringer.messenger.textContent=b.message}return a},a.prototype.getMapObjectAndTry=function(){var a=this.getMapName()+"::Temporary",b=this.getMapObject();if(!b)return!1;try{this.GameStarter.MapsCreator.storeMap(a,b),this.GameStarter.MapsCreator.getMap(a),this.setDisplayMap(!0)}catch(c){return this.display.stringer.messenger.textContent=c.message,!1}},a.prototype.getCurrentArea=function(){return this.display.sections.MapSettings.Area.value},a.prototype.getCurrentAreaObject=function(a){void 0===a&&(a=this.getMapObject());var b=a.locations[this.getCurrentLocation()].area;return a.areas[b?b.toString():"0"]},a.prototype.getCurrentLocation=function(){return this.display.sections.MapSettings.Location.value},a.prototype.getCurrentLocationObject=function(a){return a.locations[this.getCurrentLocation()]},a.prototype.addMapCreationThing=function(a,b){var c=this.getMapObject(),d=this.GameStarter.proliferate({thing:this.currentTitle,x:this.getNormalizedX(a)+this.GameStarter.MapScreener.left/this.GameStarter.unitsize,y:this.getNormalizedY(b)},this.currentArgs);return c?(c.areas[this.getCurrentArea()].creation.push(d),this.setTextareaValue(this.stringifySmart(c),!0),!0):!1},a.prototype.addMapCreationMacro=function(a,b){var c=this.getMapObject(),d=this.GameStarter.proliferate({macro:this.currentTitle,x:this.getNormalizedX(a)+this.GameStarter.MapScreener.left/this.GameStarter.unitsize,y:this.getNormalizedY(b)},this.generateCurrentArgs());return c?(c.areas[this.getCurrentArea()].creation.push(d),this.setTextareaValue(this.stringifySmart(c),!0),!0):!1},a.prototype.resetDisplay=function(){this.display={container:this.GameStarter.createElement("div",{className:"LevelEditor",onclick:this.cancelEvent.bind(this),ondragenter:this.handleDragEnter.bind(this),ondragover:this.handleDragOver.bind(this),ondrop:this.handleDragDrop.bind(this)}),scrollers:{},stringer:{},sections:{ClickToPlace:{},MapSettings:{Setting:{}},buttons:{ClickToPlace:{}}}},this.resetDisplayScrollers(),this.resetDisplayGui(),this.resetDisplayHead(),this.resetDisplaySectionChoosers(),this.resetDisplayOptionsList(),this.resetDisplayMapSettings()},a.prototype.resetDisplayGui=function(){this.display.gui=this.GameStarter.createElement("div",{className:"EditorGui"}),this.display.container.appendChild(this.display.gui)},a.prototype.resetDisplayScrollers=function(){this.display.scrollers={left:this.GameStarter.createElement("div",{className:"EditorScroller EditorScrollerLeft",onmousedown:this.onMouseDownScroller.bind(this,2*-this.GameStarter.unitsize),onmouseup:this.onMouseUpScrolling.bind(this),onmouseout:this.onMouseUpScrolling.bind(this),onclick:this.cancelEvent.bind(this),innerText:"<",style:{paddingTop:this.GameStarter.MapScreener.height/2-35+"px",fontSize:"70px",opacity:0}}),right:this.GameStarter.createElement("div",{className:"EditorScroller EditorScrollerRight",onmousedown:this.onMouseDownScroller.bind(this,2*this.GameStarter.unitsize),onmouseup:this.onMouseUpScrolling.bind(this),onmouseout:this.onMouseUpScrolling.bind(this),onclick:this.cancelEvent.bind(this),innerText:">",style:{paddingTop:this.GameStarter.MapScreener.height/2-35+"px",fontSize:"70px"}}),container:this.GameStarter.createElement("div",{className:"EditorScrollers",onmousemove:this.onMouseMoveEditing.bind(this),onclick:this.onClickEditingThing.bind(this)})},this.display.scrollers.container.appendChild(this.display.scrollers.left),this.display.scrollers.container.appendChild(this.display.scrollers.right),this.display.container.appendChild(this.display.scrollers.container)},a.prototype.resetDisplayHead=function(){this.display.minimizer=this.GameStarter.createElement("div",{className:"EditorHeadButton EditorMinimizer",onclick:this.minimize.bind(this),textContent:"-"}),this.display.head=this.GameStarter.createElement("div",{className:"EditorHead",children:[this.GameStarter.createElement("div",{className:"EditorNameContainer",children:[this.display.namer=this.GameStarter.createElement("input",{className:"EditorNameInput",type:"text",placeholder:this.mapNameDefault,value:this.mapNameDefault,onkeyup:this.setMapName.bind(this),onchange:this.setMapName.bind(this)})]}),this.display.minimizer,this.GameStarter.createElement("div",{className:"EditorHeadButton EditorCloser",textContent:"X",onclick:this.disable.bind(this)})]}),this.display.gui.appendChild(this.display.head)},a.prototype.resetDisplaySectionChoosers=function(){var a=this.GameStarter.createElement("div",{className:"EditorSectionChoosers",onclick:this.cancelEvent.bind(this),children:[this.display.sections.buttons.ClickToPlace.container=this.GameStarter.createElement("div",{className:"EditorMenuOption EditorSectionChooser EditorMenuOptionThird",style:{background:"white"},textContent:"Visual",onclick:this.setSectionClickToPlace.bind(this)}),this.display.sections.buttons.MapSettings=this.GameStarter.createElement("div",{className:"EditorMenuOption EditorSectionChooser EditorMenuOptionThird",style:{background:"gray"},textContent:"Map",onclick:this.setSectionMapSettings.bind(this)}),this.display.sections.buttons.JSON=this.GameStarter.createElement("div",{className:"EditorMenuOption EditorSectionChooser EditorMenuOptionThird",style:{background:"gray"},textContent:"JSON",onclick:this.setSectionJSON.bind(this)})]});this.display.gui.appendChild(a)},a.prototype.resetDisplayOptionsList=function(){this.display.sections.ClickToPlace.container=this.GameStarter.createElement("div",{className:"EditorOptionsList EditorSectionMain",onclick:this.cancelEvent.bind(this),style:{display:"block"}}),this.resetDisplayOptionsListSubOptionsMenu(),this.resetDisplayOptionsListSubOptions(),this.display.gui.appendChild(this.display.sections.ClickToPlace.container)},a.prototype.resetDisplayOptionsListSubOptionsMenu=function(){var a=this.GameStarter.createElement("div",{className:"EditorSubOptionsListsMenu"});this.display.sections.buttons.ClickToPlace.Things=this.GameStarter.createElement("div",{className:"EditorMenuOption EditorSubOptionsListChooser EditorMenuOptionHalf",textContent:"Things",onclick:this.setSectionClickToPlaceThings.bind(this),style:{background:"#CCC"}}),this.display.sections.buttons.ClickToPlace.Macros=this.GameStarter.createElement("div",{className:"EditorMenuOption EditorSubOptionsListChooser EditorMenuOptionHalf",textContent:"Macros",onclick:this.setSectionClickToPlaceMacros.bind(this),style:{background:"#777"}}),a.appendChild(this.display.sections.buttons.ClickToPlace.Things),a.appendChild(this.display.sections.buttons.ClickToPlace.Macros),this.display.sections.ClickToPlace.container.appendChild(a)},a.prototype.resetDisplayMapSettings=function(){this.display.sections.MapSettings.container=this.GameStarter.createElement("div",{className:"EditorMapSettings EditorSectionMain",onclick:this.cancelEvent.bind(this),style:{display:"none"},children:[this.GameStarter.createElement("div",{className:"EditorMenuOption",textContent:"+ Add Area",onclick:this.addAreaToMap.bind(this)}),this.GameStarter.createElement("div",{className:"EditorMenuOption",textContent:"+ Add Location",onclick:this.addLocationToMap.bind(this)})]}),this.resetDisplayMapSettingsCurrent(),this.resetDisplayMapSettingsMap(),this.resetDisplayMapSettingsLocation(),this.resetDisplayJSON(),this.resetDisplayVisualContainers(),this.resetDisplayButtons(),this.display.gui.appendChild(this.display.sections.MapSettings.container)},a.prototype.resetDisplayMapSettingsCurrent=function(){this.display.sections.MapSettings.container.appendChild(this.GameStarter.createElement("div",{className:"EditorMapSettingsSubGroup",children:[this.GameStarter.createElement("label",{textContent:"Current Location"}),this.display.sections.MapSettings.Location=this.createSelect(["0"],{className:"VisualOptionLocation",onchange:this.setCurrentLocation.bind(this,!0)})]}))},a.prototype.resetDisplayMapSettingsMap=function(){this.display.sections.MapSettings.container.appendChild(this.GameStarter.createElement("div",{className:"EditorMapSettingsGroup",children:[this.GameStarter.createElement("h4",{textContent:"Map"}),this.GameStarter.createElement("div",{className:"EditorMapSettingsSubGroup",children:[this.GameStarter.createElement("label",{className:"EditorMapSettingsLabel",textContent:"Time"}),this.display.sections.MapSettings.Time=this.createSelect(["100","200","300","400","500","1000","Infinity"],{value:this.mapTimeDefault.toString(),onchange:this.setMapTime.bind(this,!0)})]})]}))},a.prototype.resetDisplayMapSettingsLocation=function(){this.display.sections.MapSettings.container.appendChild(this.GameStarter.createElement("div",{className:"EditorMapSettingsGroup",children:[this.GameStarter.createElement("h4",{textContent:"Location"}),this.GameStarter.createElement("div",{className:"EditorMapSettingsSubGroup",children:[this.GameStarter.createElement("label",{textContent:"Area"}),this.display.sections.MapSettings.Area=this.createSelect(["0"],{className:"VisualOptionArea",onchange:this.setLocationArea.bind(this,!0)})]}),this.GameStarter.createElement("div",{className:"EditorMapSettingsSubGroup",children:[this.GameStarter.createElement("label",{textContent:"Setting"}),this.display.sections.MapSettings.Setting.Primary=this.createSelect(["Overworld","Underworld","Underwater","Castle"],{onchange:this.setMapSetting.bind(this,!0)}),this.display.sections.MapSettings.Setting.Secondary=this.createSelect(["","Night","Underwater","Alt"],{onchange:this.setMapSetting.bind(this,!0)}),this.display.sections.MapSettings.Setting.Tertiary=this.createSelect(["","Night","Underwater","Alt"],{onchange:this.setMapSetting.bind(this,!0)})]}),this.GameStarter.createElement("div",{className:"EditorMapSettingsSubGroup",children:[this.GameStarter.createElement("label",{textContent:"Entrance"}),this.display.sections.MapSettings.Entry=this.createSelect(["Plain","Normal","Castle","PipeVertical","PipeHorizontal"],{onchange:this.setMapEntry.bind(this,!0)})]})]}))},a.prototype.resetDisplayJSON=function(){this.display.sections.JSON=this.GameStarter.createElement("div",{className:"EditorJSON EditorSectionMain",onclick:this.cancelEvent.bind(this),style:{display:"none"},children:[this.display.stringer.textarea=this.GameStarter.createElement("textarea",{className:"EditorJSONInput",spellcheck:!1,onkeyup:this.getMapObjectAndTry.bind(this),onchange:this.getMapObjectAndTry.bind(this)}),this.display.stringer.messenger=this.GameStarter.createElement("div",{className:"EditorJSONInfo"})]}),this.display.gui.appendChild(this.display.sections.JSON)},a.prototype.resetDisplayVisualContainers=function(){this.display.sections.ClickToPlace.VisualSummary=this.GameStarter.createElement("div",{className:"EditorVisualSummary",onclick:this.cancelEvent.bind(this)}),this.display.sections.ClickToPlace.VisualOptions=this.GameStarter.createElement("div",{className:"EditorVisualOptions",onclick:this.cancelEvent.bind(this),textContent:"Click an icon to view options.",style:{display:"block"}}),this.display.gui.appendChild(this.display.sections.ClickToPlace.VisualSummary),this.display.gui.appendChild(this.display.sections.ClickToPlace.VisualOptions)},a.prototype.resetDisplayButtons=function(){var a=this;this.display.gui.appendChild(this.GameStarter.createElement("div",{className:"EditorMenu",onclick:this.cancelEvent.bind(this),children:function(b){return Object.keys(b).map(function(c){return a.GameStarter.createElement("div",{className:"EditorMenuOption EditorMenuOptionFifth EditorMenuOption-"+c,textContent:c,onclick:b[c][0].bind(a),children:b[c][1]})})}({Build:[this.startBuilding.bind(this)],Play:[this.startPlaying.bind(this)],Save:[this.downloadCurrentJSON.bind(this)],Load:[this.loadCurrentJSON.bind(this),this.display.inputDummy=this.GameStarter.createElement("input",{type:"file",style:{display:"none"},onchange:this.handleUploadStart.bind(this)})],Reset:[this.resetDisplayMap.bind(this)]})}))},a.prototype.resetDisplayOptionsListSubOptions=function(){this.resetDisplayOptionsListSubOptionsThings(),this.resetDisplayOptionsListSubOptionsMacros()},a.prototype.resetDisplayOptionsListSubOptionsThings=function(){var a=this,b=this.onThingIconClick;this.display.sections.ClickToPlace.Things=this.GameStarter.createElement("div",{className:"EditorSectionSecondary EditorOptions EditorOptions-Things",style:{display:"block"},children:function(){var c=0,d=Object.keys(a.prethings).map(function(c){var d=Object.keys(a.prethings[c]).map(function(d){var e=a.GameStarter.ObjectMaker.make(d),f=a.GameStarter.createElement("div",{className:"EditorListOption",name:d,options:a.prethings[c][d],children:[e.canvas],onclick:b.bind(a,d)}),g=70,h=e.width*a.GameStarter.unitsize,i=e.height*a.GameStarter.unitsize,j=(g-h)/2,k=(g-i)/2;return e.canvas.style.top=k+"px",e.canvas.style.right=j+"px",e.canvas.style.bottom=k+"px",e.canvas.style.left=j+"px",a.GameStarter.PixelDrawer.setThingSprite(e),f});return a.GameStarter.createElement("div",{className:"EditorOptionContainer",style:{display:"none"},children:d})}),e=a.createSelect(Object.keys(a.prethings),{className:"EditorOptionContainerSwitchers",onchange:function(){d[c+1].style.display="none",d[e.selectedIndex+1].style.display="block",c=e.selectedIndex}});return d[0].style.display="block",d.unshift(e),d}()}),this.display.sections.ClickToPlace.container.appendChild(this.display.sections.ClickToPlace.Things)},a.prototype.resetDisplayOptionsListSubOptionsMacros=function(){var a=this;a.display.sections.ClickToPlace.Macros=a.GameStarter.createElement("div",{className:"EditorSectionSecondary EditorOptions EditorOptions-Macros",style:{display:"none"},children:Object.keys(a.macros).map(function(b){var c=a.macros[b];return a.GameStarter.createElement("div",{className:"EditorOptionContainer",children:[a.GameStarter.createElement("div",{className:"EditorOptionTitle EditorMenuOption",textContent:b,onclick:a.onMacroIconClick.bind(a,b,c.description,c.options)})]})})}),this.display.sections.ClickToPlace.container.appendChild(this.display.sections.ClickToPlace.Macros)},a.prototype.setSectionClickToPlace=function(){this.display.sections.ClickToPlace.VisualOptions.style.display="block",this.display.sections.ClickToPlace.container.style.display="block",this.display.sections.MapSettings.container.style.display="none",this.display.sections.JSON.style.display="none",this.display.sections.buttons.ClickToPlace.container.style.backgroundColor="white",this.display.sections.buttons.MapSettings.style.background="gray",this.display.sections.buttons.JSON.style.background="gray"},a.prototype.setSectionMapSettings=function(){this.display.sections.ClickToPlace.VisualOptions.style.display="none",this.display.sections.ClickToPlace.container.style.display="none",this.display.sections.MapSettings.container.style.display="block",this.display.sections.JSON.style.display="none",this.display.sections.buttons.ClickToPlace.container.style.background="gray",this.display.sections.buttons.MapSettings.style.background="white",this.display.sections.buttons.JSON.style.background="gray"},a.prototype.setSectionJSON=function(){this.display.sections.ClickToPlace.VisualOptions.style.display="none",this.display.sections.ClickToPlace.container.style.display="none",this.display.sections.MapSettings.container.style.display="none",this.display.sections.JSON.style.display="block",this.display.sections.buttons.ClickToPlace.container.style.background="gray",this.display.sections.buttons.MapSettings.style.background="gray",this.display.sections.buttons.JSON.style.background="white"},a.prototype.setSectionClickToPlaceThings=function(a){this.setCurrentClickMode("Thing",a),this.display.container.onclick=this.onClickEditingThing.bind(this),this.display.scrollers.container.onclick=this.onClickEditingThing.bind(this),this.display.sections.ClickToPlace.VisualOptions.style.display="block",this.display.sections.ClickToPlace.Things.style.display="block",this.display.sections.ClickToPlace.Macros.style.display="none",this.display.sections.buttons.ClickToPlace.Things.style.background="#CCC",this.display.sections.buttons.ClickToPlace.Macros.style.background="#777"},a.prototype.setSectionClickToPlaceMacros=function(a){this.setCurrentClickMode("Macro",a),this.display.container.onclick=this.onClickEditingMacro.bind(this),this.display.scrollers.container.onclick=this.onClickEditingMacro.bind(this),this.display.sections.ClickToPlace.VisualOptions.style.display="block",this.display.sections.ClickToPlace.Things.style.display="none",this.display.sections.ClickToPlace.Macros.style.display="block",this.display.sections.buttons.ClickToPlace.Things.style.background="#777",this.display.sections.buttons.ClickToPlace.Macros.style.background="#CCC"},a.prototype.setTextareaValue=function(a,b){void 0===b&&(b=!1),this.display.stringer.textarea.value=b?this.beautifier(a):a},a.prototype.beautifyTextareaValue=function(){this.display.stringer.textarea.value=this.beautifier(this.display.stringer.textarea.value)},a.prototype.setVisualOptions=function(a,b,c){var d=this.display.sections.ClickToPlace.VisualOptions,e=this.createVisualOption.bind(this),f=this;d.textContent="",d.appendChild(this.GameStarter.createElement("h3",{className:"VisualOptionName",textContent:a})),b&&d.appendChild(this.GameStarter.createElement("div",{className:"VisualOptionDescription",textContent:b})),c&&d.appendChild(f.GameStarter.createElement("div",{className:"VisualOptionsList",children:Object.keys(c).map(function(a){return f.GameStarter.createElement("div",{className:"VisualOption",children:[f.GameStarter.createElement("div",{className:"VisualOptionLabel",textContent:a}),e(c[a])]})})})),this.display.sections.ClickToPlace.VisualSummary.textContent=a},a.prototype.createVisualOption=function(a){var b=this.createVisualOptionObject(a);switch(b.type){case"Boolean":return this.createVisualOptionBoolean();case"Number":return this.createVisualOptionNumber(b);case"Select":return this.createVisualOptionSelect(b);case"String":return this.createVisualOptionString(b);case"Location":return this.createVisualOptionLocation(b);case"Area":return this.createVisualOptionArea(b);case"Everything":return this.createVisualOptionEverything(b);default:return this.createVisualOptionDefault(b)}},a.prototype.createVisualOptionObject=function(a){var b;switch(a.constructor){case Number:b={type:"Number",mod:a};break;case String:b={type:a};break;case Array:b={type:"Select",options:a};break;default:b=a}return b},a.prototype.createVisualOptionBoolean=function(){return this.createSelect(["false","true"],{className:"VisualOptionValue","data:type":"Boolean",onchange:this.setCurrentArgs.bind(this)})},a.prototype.createVisualOptionNumber=function(a){var b=this;return this.GameStarter.createElement("div",{className:"VisualOptionHolder",children:function(){var c=a.mod||1,d=b.GameStarter.createElement("input",{type:"Number","data:type":"Number",value:void 0===a.value?1:a.value},{className:"VisualOptionValue modReal"+c,onchange:b.setCurrentArgs.bind(b)}),e=[d];if(d.setAttribute("data:mod",c.toString()),a.Infinite){var f=void 0,g=b.createSelect(["Number","Infinite"],{className:"VisualOptionInfiniter",onchange:function(){"Number"===g.value?(d.type="Number",d.disabled=!1,d.value=f,d.onchange(void 0)):(d.type="Text",d.disabled=!0,f=d.value,d.value="Infinity",d.onchange(void 0))}});a.value===1/0&&(g.value="Infinite",g.onchange(void 0)),e.push(g)}return c>1&&e.push(b.GameStarter.createElement("div",{className:"VisualOptionRecommendation",textContent:"x"+a.mod})),e}()})},a.prototype.createVisualOptionSelect=function(a){return this.createSelect(a.options,{className:"VisualOptionValue","data:type":"Boolean",onchange:this.setCurrentArgs.bind(this)})},a.prototype.createVisualOptionString=function(a){return this.createSelect(a.options,{className:"VisualOptionValue","data:type":"String",onchange:this.setCurrentArgs.bind(this)})},a.prototype.createVisualOptionLocation=function(){var a,b=this.getMapObject();return b?(a=Object.keys(b.locations),a.unshift(this.keyUndefined),this.createSelect(a,{className:"VisualOptionValue VisualOptionLocation","data-type":"Number"})):this.GameStarter.createElement("div",{className:"VisualOptionValue VisualOptionLocation EditorComplaint",text:"Fix map compilation to get locations!"})},a.prototype.createVisualOptionArea=function(){var a,b=this.getMapObject();return b?(a=Object.keys(b.areas),a.unshift(this.keyUndefined),this.createSelect(a,{className:"VisualOptionValue VisualOptionArea","data-type":"Number",onchange:this.setCurrentArgs.bind(this)})):this.GameStarter.createElement("div",{className:"VisualOptionValue VisualOptionArea EditorComplaint",text:"Fix map compilation to get areas!"})},a.prototype.createVisualOptionEverything=function(){return this.createSelect(this.thingKeys,{className:"VisualOptionValue VisualOptionEverything","data-type":"String",onchange:this.setCurrentArgs.bind(this)})},a.prototype.createVisualOptionDefault=function(a){return this.GameStarter.createElement("div",{className:"EditorComplaint",textContent:"Unknown type requested: "+a.type})},a.prototype.resetDisplayMap=function(){this.setTextareaValue(this.stringifySmart(this.mapDefault),!0),this.setDisplayMap(!0),this.GameStarter.InputWriter.setCanTrigger(!1)},a.prototype.setDisplayMap=function(a){void 0===a&&(a=!1);var b,c,d=this.display.stringer.textarea.value,e=this.getMapName();try{b=this.parseSmart(d),this.setTextareaValue(this.display.stringer.textarea.value)}catch(f){return this.setSectionJSON(),void(this.display.stringer.messenger.textContent=f.message)}try{this.GameStarter.MapsCreator.storeMap(e,b),c=this.GameStarter.MapsCreator.getMap(e)}catch(f){return this.setSectionJSON(),void(this.display.stringer.messenger.textContent=f.message)}this.display.stringer.messenger.textContent="",this.setTextareaValue(this.display.stringer.textarea.value),this.GameStarter.setMap(e,this.getCurrentLocation()),a&&this.disableAllThings()},a.prototype.getMapName=function(){return this.display.namer.value||this.mapNameDefault},a.prototype.roundTo=function(a,b){return Math.round(a/b)*b},a.prototype.stringifySmart=function(a){return void 0===a&&(a={}),JSON.stringify(a,this.jsonReplacerSmart)},a.prototype.parseSmart=function(a){return JSON.parse(a,this.jsonReplacerSmart)},a.prototype.jsonReplacerSmart=function(a,b){return b!==b?"NaN":b===1/0?"Infinity":b===-(1/0)?"-Infinity":b},a.prototype.disableThing=function(a,b){void 0===b&&(b=.49),a.movement=void 0,a.onThingMake=void 0,a.onThingAdd=void 0,a.onThingAdded=void 0,a.nofall=!0,a.nocollide=!0,a.xvel=0,a.yvel=0,a.opacity=typeof b},a.prototype.disableAllThings=function(){var a,b=this,c=this.GameStarter.GroupHolder.getGroups();for(a in c)c.hasOwnProperty(a)&&c[a].forEach(function(a){b.disableThing(a)});this.GameStarter.player.dead=!0,this.GameStarter.ItemsHolder.setItem("time",1/0)},a.prototype.clearAllThings=function(){var a,b=this,c=this.GameStarter.GroupHolder.getGroups();for(a in c)c.hasOwnProperty(a)&&c[a].forEach(function(a){b.GameStarter.killNormal(a)})},a.prototype.getNormalizedX=function(a){return a/this.GameStarter.unitsize},a.prototype.getNormalizedY=function(a){return this.GameStarter.MapScreener.floor-a/this.GameStarter.unitsize+3*this.GameStarter.unitsize},a.prototype.getNormalizedThingArguments=function(a){var b=this.GameStarter.proliferate({},a);return b.height===1/0&&(b.height=this.GameStarter.MapScreener.height),b.width===1/0&&(b.width=this.GameStarter.MapScreener.width),b},a.prototype.createSelect=function(a,b){var c,d=this.GameStarter.createElement("select",b);for(c=0;c<a.length;c+=1)d.appendChild(this.GameStarter.createElement("option",{value:a[c],textContent:a[c]}));return"undefined"!=typeof b.value&&(d.value=b.value),d},a.prototype.downloadFile=function(a,b){var c=this.GameStarter.createElement("a",{download:a,href:"data:text/json;charset=utf-8,"+encodeURIComponent(b)});return this.display.container.appendChild(c),c.click(),this.display.container.removeChild(c),c},a.prototype.killCurrentPreThings=function(){for(var a=0;a<this.currentPreThings.length-1;a+=1)this.GameStarter.killNormal(this.currentPreThings[a].thing)},a.prototype.handleUploadStart=function(a){var b,c;this.cancelEvent(a),a&&a.dataTransfer?b=a.dataTransfer.files[0]:(b=this.display.inputDummy.files[0],c=new FileReader),b&&(c=new FileReader,c.onloadend=this.handleUploadCompletion.bind(this),c.readAsText(b))},a.prototype.handleDragEnter=function(){this.setSectionJSON()},a.prototype.handleDragOver=function(a){this.cancelEvent(a)},a.prototype.handleDragDrop=function(a){this.handleUploadStart(a)},a.prototype.cancelEvent=function(a){a&&("function"==typeof a.preventDefault&&a.preventDefault(),"function"==typeof a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},a.prototype.createPageStyles=function(){return{".LevelEditor":{position:"absolute",top:"0",right:"0",bottom:"0",left:"0"},".LevelEditor h4":{margin:"14px 0 7px 0"},".LevelEditor select, .LevelEditor input":{margin:"7px",padding:"3px 7px","font-size":"1.17em"},".LevelEditor .EditorGui":{position:"absolute",top:"0",right:"0",bottom:"0",width:"50%",background:"rgba(0, 7, 14, .84)",overflow:"hidden","user-select":"none","box-sizing":"border-box","z-index":"70",transition:"117ms all"},".LevelEditor .EditorMenuContainer":{position:"absolute",top:"0",right:"0",bottom:"0",width:"50%",background:"rgba(0, 7, 14, .84)",overflow:"hidden","user-select":"none","box-sizing":"border-box","z-index":"70",transition:"117ms all"},".LevelEditor .EditorScrollers":{position:"absolute",top:"0",right:"50%",bottom:"0",left:"0",transition:"117ms all"},".EditorScroller":{position:"absolute",width:"70px",height:"101%",cursor:"pointer","box-sizing":"border-box","text-align":"center",transition:"280ms opacity"},".EditorScrollerRight":{right:"0"},".EditorScrollerLeft":{left:"0"},".LevelEditor.minimized .EditorGui":{width:"117px"},".LevelEditor.minimized .EditorMenuContainer":{width:"117px"},".LevelEditor.minimized .EditorScrollers":{right:"117px","padding-right":"117px"},".LevelEditor .EditorHead":{position:"relative",height:"35px"},".LevelEditor .EditorHead .EditorNameContainer":{position:"absolute",top:"1px",right:"73px",left:"2px",height:"35px"},".LevelEditor .EditorHead .EditorNameInput":{display:"block",margin:"0",padding:"3px 7px",width:"100%",background:"white",border:"1px solid black","font-size":"1.4em","box-sizing":"border-box"},".LevelEditor .EditorHead .EditorHeadButton":{position:"absolute",top:"2px",width:"32px",
height:"32px",background:"rgb(35,35,35)",border:"1px solid silver","box-sizing":"border-box","text-align":"center","padding-top":"7px",cursor:"pointer"},".LevelEditor .EditorHead .EditorMinimizer":{right:"38px"},".LevelEditor .EditorHead .EditorCloser":{right:"3px"},".LevelEditor .EditorSectionChooser":{width:"50%","box-sizing":"border-box",height:"35px",background:"white",border:"3px solid black",color:"black",cursor:"pointer"},".LevelEditor .EditorSectionChooser.Inactive":{background:"gray"},".LevelEditor.minimized .EditorSectionChoosers":{opacity:"0"},".LevelEditor .EditorSectionMain":{position:"absolute",top:"70px",right:"0",bottom:"49px",left:"0","overflow-y":"auto"},".LevelEditor .EditorSectionSecondary":{position:"absolute",top:"35px",right:"248px",bottom:"0px",left:"0","overflow-y":"auto"},".LevelEditor .EditorJSON":{"font-family":"Courier"},".LevelEditor .EditorJSONInput":{display:"block",width:"100%",height:"84%",background:"rgba(0, 3, 7, .91)",color:"rgba(255, 245, 245, .91)","box-sizing":"border-box","overflow-y":"auto",resize:"none"},".LevelEditor .EditorJSONInfo":{height:"1.75em",padding:"3px 7px"},".LevelEditor.minimized .EditorJSON":{opacity:"0"},".LevelEditor .EditorOptions, .LevelEditor .EditorOptionContainer":{"padding-left":"3px",clear:"both","min-width":"98px"},".LevelEditor.minimized .EditorOptionsList":{opacity:"0"},".LevelEditor .EditorListOption":{position:"relative","float":"left",margin:"0 7px 7px 0",width:"70px",height:"70px",background:"black",border:"white",overflow:"hidden",cursor:"pointer"},".LevelEditor .EditorListOption canvas":{position:"absolute"},".LevelEditor .EditorVisualSummary":{margin:"42px 7px",opacity:"0",transition:"117ms opacity"},".LevelEditor.minimized .EditorVisualSummary":{opacity:"0"},".LevelEditor .EditorVisualOptions":{position:"absolute",right:"21px",top:"119px",bottom:"42px",padding:"7px 11px",width:"210px",border:"1px solid silver","border-width":"1px 0 0 1px","overflow-x":"visible","overflow-y":"auto",opacity:"1","box-sizing":"border-box",transition:"117ms opacity"},".LevelEditor.minimized .EditorVisualOptions":{left:"100%"},".LevelEditor .EditorVisualOptions .VisualOption":{padding:"14px 0"},".LevelEditor .EditorVisualOptions .VisualOptionName":{margin:"3px 0 7px 0"},".LevelEditor .EditorVisualOptions .VisualOptionDescription":{"padding-bottom":"14px"},".LevelEditor .EditorVisualOptions .VisualOptionValue":{"max-width":"117px"},".LevelEditor .EditorVisualOptions .VisualOptionInfiniter, .LevelEditor .EditorVisualOptions .VisualOptionRecommendation":{display:"inline"},".LevelEditor .EditorMenu":{position:"absolute",right:"0",bottom:"0",left:"0"},".LevelEditor .EditorMenuOption":{display:"inline-block",padding:"7px 14px",background:"white",border:"3px solid black","box-sizing":"border-box",color:"black","text-align":"center",overflow:"hidden",cursor:"pointer"},".LevelEditor.minimized .EditorMenuOption:not(:first-of-type)":{display:"none"},".LevelEditor.minimized .EditorMenuOption:first-of-type":{width:"auto"},".LevelEditor .EditorMenuOption:hover":{opacity:".91"},".LevelEditor .EditorMenuOption.EditorMenuOptionHalf":{width:"50%"},".LevelEditor .EditorMenuOption.EditorMenuOptionThird":{width:"33%"},".LevelEditor .EditorMenuOption.EditorMenuOptionFifth":{width:"20%"},".LevelEditor .EditorMapSettingsGroup":{"padding-left":"7px"},".LevelEditor .EditorMapSettingsSubGroup":{"padding-left":"14px"},".LevelEditor.minimized .EditorMapSettings":{opacity:"0"}}},a}();a.LevelEditr=b}(LevelEditr||(LevelEditr={}));var MathDecidr;!function(a){"use strict";var b=function(){function a(a){void 0===a&&(a={});var b;if(this.constants=a.constants||{},this.equations={},this.equationsRaw=a.equations||{},this.equationsRaw)for(b in this.equationsRaw)this.equationsRaw.hasOwnProperty(b)&&this.addEquation(b,this.equationsRaw[b])}return a.prototype.getConstants=function(){return this.constants},a.prototype.getConstant=function(a){return this.constants[a]},a.prototype.getEquations=function(){return this.equations},a.prototype.getRawEquations=function(){return this.equationsRaw},a.prototype.getEquation=function(a){return this.equations[a]},a.prototype.getRawEquation=function(a){return this.equationsRaw[a]},a.prototype.addConstant=function(a,b){this.constants[a]=b},a.prototype.addEquation=function(a,b){this.equationsRaw[a]=b,this.equations[a]=b.bind(this,this.constants,this.equations)},a.prototype.compute=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.equations[a].apply(this,Array.prototype.slice.call(arguments,1))},a}();a.MathDecidr=b}(MathDecidr||(MathDecidr={}));var ModAttachr;!function(a){"use strict";var b=function(){function a(a){this.mods={},this.events={},a&&(this.scopeDefault=a.scopeDefault,a.ItemsHoldr?this.ItemsHolder=a.ItemsHoldr:a.storeLocally&&(this.ItemsHolder=new ItemsHoldr.ItemsHoldr),a.mods&&this.addMods(a.mods))}return a.prototype.getMods=function(){return this.mods},a.prototype.getMod=function(a){return this.mods[a]},a.prototype.getEvents=function(){return this.events},a.prototype.getEvent=function(a){return this.events[a]},a.prototype.getItemsHolder=function(){return this.ItemsHolder},a.prototype.addMod=function(a){var b,c=a.events;for(b in c)c.hasOwnProperty(b)&&(this.events.hasOwnProperty(b)?this.events[b].push(a):this.events[b]=[a]);a.scope=a.scope||this.scopeDefault,this.mods[a.name]=a,a.enabled&&a.events.hasOwnProperty("onModEnable")&&this.fireModEvent("onModEnable",a.name,arguments),this.ItemsHolder&&(this.ItemsHolder.addItem(a.name,{valueDefault:0,storeLocally:!0}),this.ItemsHolder.getItem(a.name)&&this.enableMod(a.name))},a.prototype.addMods=function(a){for(var b=0;b<a.length;b+=1)this.addMod(a[b])},a.prototype.enableMod=function(a){var b,c=this.mods[a];if(!c)throw new Error("No mod of name: '"+a+"'");return c.enabled=!0,b=Array.prototype.slice.call(arguments),b[0]=c,this.ItemsHolder&&this.ItemsHolder.setItem(a,!0),c.events.hasOwnProperty("onModEnable")?this.fireModEvent("onModEnable",c.name,arguments):void 0},a.prototype.enableMods=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.forEach(this.enableMod.bind(this))},a.prototype.disableMod=function(a){var b,c=this.mods[a];if(!this.mods[a])throw new Error("No mod of name: '"+a+"'");return this.mods[a].enabled=!1,b=Array.prototype.slice.call(arguments),b[0]=c,this.ItemsHolder&&this.ItemsHolder.setItem(a,!1),c.events.hasOwnProperty("onModDisable")?this.fireModEvent("onModDisable",c.name,b):void 0},a.prototype.disableMods=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.forEach(this.disableMod.bind(this))},a.prototype.toggleMod=function(a){var b=this.mods[a];if(!b)throw new Error("No mod found under "+a);return b.enabled?this.disableMod(a):this.enableMod(a)},a.prototype.toggleMods=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.forEach(this.toggleMod.bind(this))},a.prototype.fireEvent=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e,f=this.events[a],g=Array.prototype.splice.call(arguments,0);if(f)for(e=0;e<f.length;e+=1)d=f[e],g[0]=d,d.enabled&&d.events[a].apply(d.scope,g)},a.prototype.fireModEvent=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var e,f=this.mods[b],g=Array.prototype.slice.call(arguments,2);if(!f)throw new Error("Unknown mod requested: '"+b+"'");if(g[0]=f,e=f.events[a],!e)throw new Error("Mod does not contain event: '"+a+"'");return e.apply(f.scope,g)},a}();a.ModAttachr=b}(ModAttachr||(ModAttachr={}));var NumberMakr;!function(a){"use strict";var b=function(){function a(a){void 0===a&&(a={}),this.stateLength=a.stateLength||624,this.statePeriod=a.statePeriod||397,this.matrixA=a.matrixA||2567483615,this.maskUpper=a.maskUpper||2147483648,this.maskLower=a.maskLower||2147483647,this.stateVector=new Array(this.stateLength),this.stateIndex=this.stateLength+1,this.matrixAMagic=new Array(0,this.matrixA),this.resetFromSeed(a.seed||(new Date).getTime())}return a.prototype.getSeed=function(){return this.seed},a.prototype.getStateLength=function(){return this.stateLength},a.prototype.getStatePeriod=function(){return this.statePeriod},a.prototype.getMatrixA=function(){return this.matrixA},a.prototype.getMaskUpper=function(){return this.maskUpper},a.prototype.getMaskLower=function(){return this.maskLower},a.prototype.resetFromSeed=function(a){void 0===a&&(a=0);var b;for(this.stateVector[0]=a>>>0,this.stateIndex=1;this.stateIndex<this.stateLength;this.stateIndex+=1)b=this.stateVector[this.stateIndex-1]^this.stateVector[this.stateIndex-1]>>>30,this.stateVector[this.stateIndex]=(1812433253*((4294901760&b)>>>16)<<16)+1812433253*(65535&b)+this.stateIndex>>>0;this.seed=a},a.prototype.resetFromArray=function(a,b){void 0===b&&(b=a.length);var c,d,e=1,f=0;for(this.resetFromSeed(19650218),"undefined"==typeof b&&(b=a.length),c=this.stateLength>b?this.stateLength:b;c>0;)d=this.stateVector[e-1]^this.stateVector[e-1]>>>30,this.stateVector[e]=(this.stateVector[e]^(1664525*((4294901760&d)>>>16)<<16)+1664525*(65535&d)+a[f]+f)>>>0,e+=1,f+=1,e>=this.stateLength&&(this.stateVector[0]=this.stateVector[this.stateLength-1],e=1),f>=b&&(f=0);for(c=this.stateLength-1;c;c-=1)d=this.stateVector[e-1]^this.stateVector[e-1]>>>30,this.stateVector[e]=(this.stateVector[e]^(1566083941*((4294901760&d)>>>16)<<16)+1566083941*(65535&d))-e>>>0,e+=1,e>=this.stateLength&&(this.stateVector[0]=this.stateVector[this.stateLength-1],e=1);this.stateVector[0]=2147483648,this.seed=a},a.prototype.randomInt32=function(){var a,b;if(this.stateIndex>=this.stateLength){for(this.stateIndex===this.stateLength+1&&this.resetFromSeed(5489),b=0;b<this.stateLength-this.statePeriod;b+=1)a=this.stateVector[b]&this.maskUpper|this.stateVector[b+1]&this.maskLower,this.stateVector[b]=this.stateVector[b+this.statePeriod]^a>>>1^this.matrixAMagic[1&a];for(;b<this.stateLength-1;b+=1)a=this.stateVector[b]&this.maskUpper|this.stateVector[b+1]&this.maskLower,this.stateVector[b]=this.stateVector[b+(this.statePeriod-this.stateLength)]^a>>>1^this.matrixAMagic[1&a];a=this.stateVector[this.stateLength-1]&this.maskUpper|this.stateVector[0]&this.maskLower,this.stateVector[this.stateLength-1]=this.stateVector[this.statePeriod-1]^a>>>1^this.matrixAMagic[1&a],this.stateIndex=0}return a=this.stateVector[this.stateIndex],this.stateIndex+=1,a^=a>>>11,a^=a<<7&2636928640,a^=a<<15&4022730752,a^=a>>>18,a>>>0},a.prototype.random=function(){return this.randomInt32()*(1/4294967296)},a.prototype.randomInt31=function(){return this.randomInt32()>>>1},a.prototype.randomReal1=function(){return this.randomInt32()*(1/4294967295)},a.prototype.randomReal3=function(){return(this.randomInt32()+.5)*(1/4294967296)},a.prototype.randomReal53Bit=function(){var a=this.randomInt32()>>>5,b=this.randomInt32()>>>6;return(67108864*a+b)*(1/9007199254740992)},a.prototype.randomUnder=function(a){return this.random()*a},a.prototype.randomWithin=function(a,b){return this.randomUnder(b-a)+a},a.prototype.randomInt=function(a){return 0|this.randomUnder(a)},a.prototype.randomIntWithin=function(a,b){return this.randomUnder(b-a)+a|0},a.prototype.randomBoolean=function(){return 1===this.randomInt(2)},a.prototype.randomBooleanProbability=function(a){return this.random()<a},a.prototype.randomBooleanFraction=function(a,b){return this.random()<=a/b},a.prototype.randomArrayIndex=function(a){return this.randomIntWithin(0,a.length)},a.prototype.randomArrayMember=function(a){return a[this.randomArrayIndex(a)]},a}();a.NumberMakr=b}(NumberMakr||(NumberMakr={}));var ScenePlayr;!function(a){"use strict";var b=function(){function a(a){void 0===a&&(a={}),this.cutscenes=a.cutscenes||{},this.cutsceneArguments=a.cutsceneArguments||[]}return a.prototype.getCutscenes=function(){return this.cutscenes},a.prototype.getCutscene=function(){return this.cutscene},a.prototype.getOtherCutscene=function(a){return this.cutscenes[a]},a.prototype.getRoutine=function(){return this.routine},a.prototype.getOtherRoutine=function(a){return this.cutscene.routines[a]},a.prototype.getCutsceneName=function(){return this.cutsceneName},a.prototype.getCutsceneSettings=function(){return this.cutsceneSettings},a.prototype.startCutscene=function(a,b){if(void 0===b&&(b={}),!a)throw new Error("No name given to ScenePlayr.playScene.");this.cutsceneName&&this.stopCutscene(),this.cutscene=this.cutscenes[a],this.cutsceneName=a,this.cutsceneSettings=b||{},this.cutsceneSettings.cutscene=this.cutscene,this.cutsceneSettings.cutsceneName=a,this.cutsceneArguments.unshift(this.cutsceneSettings),this.cutscene.firstRoutine&&this.playRoutine(this.cutscene.firstRoutine)},a.prototype.bindCutscene=function(a,b){return this.startCutscene.bind(self,a,b)},a.prototype.stopCutscene=function(){this.cutscene=void 0,this.cutsceneName=void 0,this.cutsceneSettings=void 0,this.routine=void 0,this.cutsceneArguments.shift()},a.prototype.playRoutine=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(!this.cutscene)throw new Error("No cutscene is currently playing.");if(!this.cutscene.routines[a])throw new Error("The "+this.cutsceneName+" cutscene does not contain a "+a+" routine.");this.routine=this.cutscene.routines[a],this.cutsceneSettings.routine=this.routine,this.cutsceneSettings.routineName=a,this.cutsceneSettings.routineArguments=b,this.routine.apply(this,this.cutsceneArguments)},a.prototype.bindRoutine=function(a,b){return this.playRoutine.bind(this,a,b)},a}();a.ScenePlayr=b}(ScenePlayr||(ScenePlayr={}));var ThingHittr;!function(a){"use strict";var b=function(){function a(a){this.globalCheckGenerators=a.globalCheckGenerators,this.hitCheckGenerators=a.hitCheckGenerators,this.hitFunctionGenerators=a.hitFunctionGenerators,this.groupNames=a.groupNames,this.keyNumQuads=a.keyNumQuads||"numquads",this.keyQuadrants=a.keyQuadrants||"quadrants",this.keyGroupName=a.keyGroupName||"group",this.hitChecks={},this.globalChecks={},this.hitFunctions={},this.cachedGroupNames={},this.cachedTypeNames={},this.checkHitsOf={}}return a.prototype.cacheHitCheckGroup=function(a){this.cachedGroupNames[a]||(this.cachedGroupNames[a]=!0,"undefined"!=typeof this.globalCheckGenerators[a]&&(this.globalChecks[a]=this.cacheGlobalCheck(a)))},a.prototype.cacheHitCheckType=function(a,b){this.cachedTypeNames[a]||("undefined"!=typeof this.globalCheckGenerators[b]&&(this.globalChecks[a]=this.cacheGlobalCheck(b)),"undefined"!=typeof this.hitCheckGenerators[b]&&(this.hitChecks[a]=this.cacheFunctionGroup(this.hitCheckGenerators[b])),"undefined"!=typeof this.hitFunctionGenerators[b]&&(this.hitFunctions[a]=this.cacheFunctionGroup(this.hitFunctionGenerators[b])),this.cachedTypeNames[a]=!0,this.checkHitsOf[a]=this.generateHitsCheck(a).bind(this))},a.prototype.generateHitsCheck=function(a){return function(b){var c,d,e,f,g,h;if("undefined"==typeof this.globalChecks[this.typeName]||this.globalChecks[this.typeName](b))for(f=0;f<b[this.keyNumQuads];f+=1)for(g=0;g<this.groupNames.length;g+=1)if(e=this.hitChecks[a][this.groupNames[g]])for(c=b[this.keyQuadrants][f].things[this.groupNames[g]],h=0;h<c.length&&(d=c[h],b!==d);h+=1)("undefined"==typeof this.globalChecks[d[this.keyGroupName]]||this.globalChecks[d[this.keyGroupName]](d))&&e(b,d)&&this.hitFunctions[a][d[this.keyGroupName]](b,d)}},a.prototype.checkHit=function(a,b,c,d){var e,f=this.hitChecks[c];if(!f)throw new Error("No hit checks defined for "+c+".");if(e=f[d],!e)throw new Error("No hit check defined for "+c+" and "+d+".");return e(a,b)},a.prototype.cacheGlobalCheck=function(a){return this.globalCheckGenerators[a]()},a.prototype.cacheFunctionGroup=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]());return c},a}();a.ThingHittr=b}(ThingHittr||(ThingHittr={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},TouchPassr;!function(a){"use strict";var b=function(){function a(a,b,c){this.InputWriter=a,this.schema=b,this.resetElement(c)}return a.prototype.getElement=function(){return this.element},a.prototype.getElementInner=function(){return this.elementInner},a.prototype.createElement=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e=document.createElement(a||"div");for(d=1;d<arguments.length;d+=1)this.proliferateElement(e,arguments[d]);return e},a.prototype.proliferateElement=function(a,b,c){void 0===c&&(c=!1);var d,e,f;for(e in b)if(b.hasOwnProperty(e)){if(c&&a.hasOwnProperty(e))continue;switch(d=b[e],e){case"children":if("undefined"!=typeof d)for(f=0;f<d.length;f+=1)a.appendChild(d[f]);break;case"style":this.proliferateElement(a[e],d);break;default:null===d?a[e]=null:"object"==typeof d?(a.hasOwnProperty(e)||(a[e]=new d.constructor),this.proliferateElement(a[e],d,c)):a[e]=d}}return a},a.prototype.resetElement=function(a,b){var c=this.schema.position,d=c.offset;this.element=this.createElement("div",{className:"control",style:{position:"absolute",width:0,height:0,boxSizing:"border-box",opacity:".84"}}),this.elementInner=this.createElement("div",{className:"control-inner",textContent:this.schema.label,style:{position:"absolute",boxSizing:"border-box",textAlign:"center"}}),this.element.appendChild(this.elementInner),"left"===c.horizontal?this.element.style.left="0":"right"===c.horizontal?this.element.style.right="0":"center"===c.horizontal&&(this.element.style.left="50%"),"top"===c.vertical?this.element.style.top="0":"bottom"===c.vertical?this.element.style.bottom="0":"center"===c.vertical&&(this.element.style.top="50%"),this.passElementStyles(a.global),this.passElementStyles(a[b]),this.passElementStyles(this.schema.styles),d.left&&(this.elementInner.style.marginLeft=this.createPixelMeasurement(d.left)),d.top&&(this.elementInner.style.marginTop=this.createPixelMeasurement(d.top)),setTimeout(function(){"center"===c.horizontal&&(this.elementInner.style.left=Math.round(this.elementInner.offsetWidth/-2)+"px"),"center"===c.vertical&&(this.elementInner.style.top=Math.round(this.elementInner.offsetHeight/-2)+"px")}.bind(this))},a.prototype.createPixelMeasurement=function(a){return a?"number"==typeof a||a.constructor===Number?a+"px":a:"0"},a.prototype.passElementStyles=function(a){a&&(a.element&&this.proliferateElement(this.element,a.element),a.elementInner&&this.proliferateElement(this.elementInner,a.elementInner))},a.prototype.setRotation=function(a,b){a.style.transform="rotate("+b+"deg)"},a.prototype.getOffsets=function(a){var b;return a.offsetParent&&a!==a.offsetParent?(b=this.getOffsets(a.offsetParent),b[0]+=a.offsetLeft,b[1]+=a.offsetTop):b=[a.offsetLeft,a.offsetTop],b},a}();a.Control=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.resetElement=function(b){var c=this.onEvent.bind(this,"activated"),d=this.onEvent.bind(this,"deactivated");a.prototype.resetElement.call(this,b,"Button"),this.element.addEventListener("mousedown",c),this.element.addEventListener("touchstart",c),this.element.addEventListener("mouseup",d),this.element.addEventListener("touchend",d)},b.prototype.onEvent=function(a,b){var c,d,e=this.schema.pipes[a];if(e)for(c in e)if(e.hasOwnProperty(c))for(d=0;d<e[c].length;d+=1)this.InputWriter.callEvent(c,e[c][d],b)},b}(b);a.ButtonControl=c;var d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.resetElement=function(b){a.prototype.resetElement.call(this,b,"Joystick");var c,d,e,f,g,h,i,j=this.schema.directions;for(this.proliferateElement(this.elementInner,{style:{"border-radius":"100%"}}),this.elementCircle=this.createElement("div",{className:"control-inner control-joystick-circle",style:{position:"absolute",background:"red",borderRadius:"100%"}}),this.proliferateElement(this.elementCircle,b.Joystick.circle),i=0;i<j.length;i+=1)d=j[i].degrees,e=Math.sin(d*Math.PI/180),f=Math.cos(d*Math.PI/180),g=50*f+50,h=50*e+50,c=this.createElement("div",{className:"control-joystick-tick",style:{position:"absolute",left:g+"%",top:h+"%",marginLeft:5*-f-5+"px",marginTop:2*-e-1+"px"}}),this.proliferateElement(c,b.Joystick.tick),this.setRotation(c,d),this.elementCircle.appendChild(c);this.elementDragLine=this.createElement("div",{className:"control-joystick-drag-line",style:{position:"absolute",opacity:"0",top:".77cm",left:".77cm"}}),this.proliferateElement(this.elementDragLine,b.Joystick.dragLine),this.elementCircle.appendChild(this.elementDragLine),this.elementDragShadow=this.createElement("div",{className:"control-joystick-drag-shadow",style:{position:"absolute",opacity:"1",top:"14%",right:"14%",bottom:"14%",left:"14%",marginLeft:"0",marginTop:"0",borderRadius:"100%"}}),this.proliferateElement(this.elementDragShadow,b.Joystick.dragShadow),this.elementCircle.appendChild(this.elementDragShadow),this.elementInner.appendChild(this.elementCircle),this.elementInner.addEventListener("click",this.triggerDragger.bind(this)),this.elementInner.addEventListener("touchmove",this.triggerDragger.bind(this)),this.elementInner.addEventListener("mousemove",this.triggerDragger.bind(this)),this.elementInner.addEventListener("mouseover",this.positionDraggerEnable.bind(this)),this.elementInner.addEventListener("touchstart",this.positionDraggerEnable.bind(this)),this.elementInner.addEventListener("mouseout",this.positionDraggerDisable.bind(this)),this.elementInner.addEventListener("touchend",this.positionDraggerDisable.bind(this))},b.prototype.positionDraggerEnable=function(){this.dragEnabled=!0,this.elementDragLine.style.opacity="1"},b.prototype.positionDraggerDisable=function(){this.dragEnabled=!1,this.elementDragLine.style.opacity="0",this.elementDragShadow.style.top="14%",this.elementDragShadow.style.right="14%",this.elementDragShadow.style.bottom="14%",this.elementDragShadow.style.left="14%",this.currentDirection&&(this.currentDirection.pipes&&this.currentDirection.pipes.deactivated&&this.onEvent(this.currentDirection.pipes.deactivated,event),this.currentDirection=void 0)},b.prototype.triggerDragger=function(a){if(a.preventDefault(),this.dragEnabled){var b=this.getEventCoordinates(a),c=b[0],d=b[1],e=this.getOffsets(this.elementInner),f=e[0]+this.elementInner.offsetWidth/2,g=e[1]+this.elementInner.offsetHeight/2,h=c-f|0,i=g-d|0,j=this.getThetaRaw(h,i),k=this.findClosestDirection(j),l=this.schema.directions[k],m=l.degrees,n=this.getThetaComponents(m),o=n[0],p=-n[1];this.proliferateElement(this.elementDragLine,{style:{marginLeft:(77*o|0)+"%",marginTop:(77*p|0)+"%"}}),this.proliferateElement(this.elementDragShadow,{style:{top:(14+10*p|0)+"%",right:(14-10*o|0)+"%",bottom:(14-10*p|0)+"%",left:(14+10*o|0)+"%"}}),m=(m+450)%360,this.setRotation(this.elementDragLine,m),this.positionDraggerEnable(),this.setCurrentDirection(l,a)}},b.prototype.getEventCoordinates=function(a){if("touchmove"===a.type){var b=a.touches[0];return[b.pageX,b.pageY]}return[a.x,a.y]},b.prototype.getThetaRaw=function(a,b){return a>0?b>0?180*Math.atan(a/b)/Math.PI:180*-Math.atan(b/a)/Math.PI+90:0>b?180*Math.atan(a/b)/Math.PI+180:180*-Math.atan(b/a)/Math.PI+270},b.prototype.getThetaComponents=function(a){var b=a*Math.PI/180;return[Math.sin(b),Math.cos(b)]},b.prototype.findClosestDirection=function(a){var b,c,d=this.schema.directions,e=Math.abs(d[0].degrees-a),f=d[0].degrees,g=0,h=0;for(c=1;c<d.length;c+=1)b=Math.abs(d[c].degrees-a),e>b&&(e=b,h=c),d[c].degrees<f&&(f=d[c].degrees,g=c);return b=Math.abs(f+360-a),e>b&&(e=b,h=g),h},b.prototype.setCurrentDirection=function(a,b){this.currentDirection!==a&&(this.currentDirection&&this.currentDirection.pipes&&this.currentDirection.pipes.deactivated&&this.onEvent(this.currentDirection.pipes.deactivated,b),a.pipes&&a.pipes.activated&&this.onEvent(a.pipes.activated,b),this.currentDirection=a)},b.prototype.onEvent=function(a,b){var c,d;for(c in a)if(a.hasOwnProperty(c))for(d=0;d<a[c].length;d+=1)this.InputWriter.callEvent(c,a[c][d],b)},b}(b);a.JoystickControl=d;var e=function(){function a(a){this.InputWriter=a.InputWriter,this.styles=a.styles||{},this.resetContainer(a.container),this.controls={},a.controls&&this.addControls(a.controls),this.enabled="undefined"==typeof a.enabled?!0:a.enabled,this.enabled?this.enable():this.disable()}return a.prototype.getInputWriter=function(){return this.InputWriter},a.prototype.getEnabled=function(){return this.enabled},a.prototype.getStyles=function(){return this.styles},a.prototype.getControls=function(){return this.controls},a.prototype.getContainer=function(){return this.container},a.prototype.getParentContainer=function(){return this.parentContainer},a.prototype.enable=function(){this.enabled=!0,this.container.style.display="block"},a.prototype.disable=function(){this.enabled=!1,this.container.style.display="none"},a.prototype.setParentContainer=function(a){this.parentContainer=a,this.parentContainer.appendChild(this.container)},a.prototype.addControls=function(a){var b;for(b in a)a.hasOwnProperty(b)&&this.addControl(a[b])},a.prototype.addControl=function(a){var b;switch(a.control){case"Button":b=new c(this.InputWriter,a,this.styles);break;case"Joystick":b=new d(this.InputWriter,a,this.styles)}this.controls[a.name]=b,this.container.appendChild(b.getElement())},a.prototype.resetContainer=function(a){this.container=b.prototype.createElement("div",{className:"touch-passer-container",style:{position:"absolute",top:0,right:0,bottom:0,left:0}}),a&&this.setParentContainer(a)},a}();a.TouchPassr=e}(TouchPassr||(TouchPassr={}));var UserWrappr;!function(a){"use strict";var b=function(){function a(a){this.documentElement=document.documentElement,this.requestFullScreen=(this.documentElement.requestFullScreen||this.documentElement.webkitRequestFullScreen||this.documentElement.mozRequestFullScreen||this.documentElement.msRequestFullscreen||function(){console.warn("Not able to request full screen...")}).bind(this.documentElement),this.cancelFullScreen=(this.documentElement.cancelFullScreen||this.documentElement.webkitCancelFullScreen||this.documentElement.mozCancelFullScreen||this.documentElement.msCancelFullScreen||function(){console.warn("Not able to cancel full screen...")}).bind(document),this.customs=a.customs||{},this.GameStartrConstructor=a.GameStartrConstructor,this.settings=a,this.helpSettings=this.settings.helpSettings,this.globalName=a.globalName,this.importSizes(a.sizes),this.gameNameAlias=this.helpSettings.globalNameAlias||"{%%%%GAME%%%%}",this.gameElementSelector=a.gameElementSelector||"#game",this.gameControlsSelector=a.gameControlsSelector||"#controls",this.log=a.log||console.log.bind(console),this.isFullScreen=!1,this.setCurrentSize(this.sizes[a.sizeDefault]),this.allPossibleKeys=a.allPossibleKeys||["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","up","right","down","left","space","shift","ctrl"],this.GameStartrConstructor.prototype.proliferate(this.customs,this.currentSize,!0),this.resetGameStarter(a,this.customs)}return a.prototype.resetGameStarter=function(a,b){void 0===b&&(b={}),this.loadGameStarter(this.fixCustoms(b||{})),window[a.globalName||"GameStarter"]=this.GameStarter,this.GameStarter.UserWrapper=this,this.loadGenerators(),this.loadControls(a.schemas),a.styleSheet&&this.GameStarter.addPageStyles(a.styleSheet),this.resetPageVisibilityHandlers(),this.GameStarter.gameStart()},a.prototype.getGameStartrConstructor=function(){return this.GameStartrConstructor},a.prototype.getGameStarter=function(){return this.GameStarter},a.prototype.getItemsHolder=function(){return this.ItemsHolder},a.prototype.getSettings=function(){return this.settings},a.prototype.getCustoms=function(){return this.customs},a.prototype.getHelpSettings=function(){return this.helpSettings},a.prototype.getGlobalName=function(){return this.globalName},a.prototype.getGameNameAlias=function(){return this.gameNameAlias},a.prototype.getAllPossibleKeys=function(){return this.allPossibleKeys},a.prototype.getSizes=function(){return this.sizes},a.prototype.getCurrentSize=function(){return this.currentSize},a.prototype.getIsFullScreen=function(){return this.isFullScreen},a.prototype.getIsPageHidden=function(){return this.isPageHidden},a.prototype.getLog=function(){return this.log},a.prototype.getGenerators=function(){return this.generators},a.prototype.getDocumentElement=function(){return this.documentElement},a.prototype.getRequestFullScreen=function(){return this.requestFullScreen},a.prototype.getCancelFullScreen=function(){return this.cancelFullScreen},a.prototype.setCurrentSize=function(a){if("string"==typeof a||a.constructor===String){if(!this.sizes.hasOwnProperty(a))throw new Error("Size "+a+" does not exist on the UserWrappr.");a=this.sizes[a]}this.customs=this.fixCustoms(this.customs),a.full?(this.requestFullScreen(),this.isFullScreen=!0):this.isFullScreen&&(this.cancelFullScreen(),this.isFullScreen=!1),this.currentSize=a,this.GameStarter&&(this.GameStarter.container.parentNode.removeChild(this.GameStarter.container),this.resetGameStarter(this.settings,this.customs))},a.prototype.displayHelpMenu=function(){this.helpSettings.openings.forEach(this.logHelpText.bind(this))},a.prototype.displayHelpOptions=function(){this.logHelpText("To focus on a group, enter `"+this.globalName+'.UserWrapper.displayHelpOption("<group-name>");`'),Object.keys(this.helpSettings.options).forEach(this.displayHelpGroupSummary.bind(this)),this.logHelpText("\nTo focus on a group, enter `"+this.globalName+'.UserWrapper.displayHelpOption("<group-name>");`')},a.prototype.displayHelpGroupSummary=function(a){var b,c,d=this.helpSettings.options[a],e=0;for(this.log("\n"+a),c=0;c<d.length;c+=1)e=Math.max(e,this.filterHelpText(d[c].title).length);for(c=0;c<d.length;c+=1)b=d[c],this.log(this.padTextRight(this.filterHelpText(b.title),e)+" ... "+b.description)},a.prototype.displayHelpOption=function(a){var b,c,d,e,f,g=this.helpSettings.options[a];for(e=0;e<g.length;e+=1){if(b=g[e],d=0,this.logHelpText(b.title+" -- "+b.description),b.usage&&this.logHelpText(b.usage),b.examples){for(f=0;f<b.examples.length;f+=1)c=b.examples[f],d=Math.max(d,this.filterHelpText("    "+c.code).length);for(f=0;f<b.examples.length;f+=1)c=b.examples[f],this.logHelpText(this.padTextRight(this.filterHelpText("    "+c.code),d)+"  // "+c.comment)}this.log("\n")}},a.prototype.logHelpText=function(a){this.log(this.filterHelpText(a))},a.prototype.filterHelpText=function(a){return a.replace(new RegExp(this.gameNameAlias,"g"),this.globalName)},a.prototype.padTextRight=function(a,b){var c=1+b-a.length;return 0>=c?a:a+Array.call(Array,c).join(" ")},a.prototype.importSizes=function(a){var b;this.sizes=this.GameStartrConstructor.prototype.proliferate({},a);for(b in this.sizes)this.sizes.hasOwnProperty(b)&&(this.sizes[b].name=this.sizes[b].name||b)},a.prototype.fixCustoms=function(a){var b=this.GameStartrConstructor.prototype.proliferate({},a);return this.GameStartrConstructor.prototype.proliferate(b,this.currentSize),isFinite(b.width)||(b.width=document.body.clientWidth),isFinite(b.height)||(b.height=b.full?screen.height:this.isFullScreen?window.innerHeight-140:window.innerHeight,b.height-=84),b},a.prototype.resetPageVisibilityHandlers=function(){document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))},a.prototype.handleVisibilityChange=function(){switch(document.visibilityState){case"hidden":return void this.onPageHidden();case"visible":return void this.onPageVisible();default:return}},a.prototype.onPageHidden=function(){this.GameStarter.GamesRunner.getPaused()||(this.isPageHidden=!0,this.GameStarter.GamesRunner.pause())},a.prototype.onPageVisible=function(){this.isPageHidden&&(this.isPageHidden=!1,this.GameStarter.GamesRunner.play())},a.prototype.loadGameStarter=function(a){var b=document.querySelector(this.gameElementSelector);this.GameStarter&&this.GameStarter.GamesRunner.pause(),this.GameStarter=new this.GameStartrConstructor(a),b.textContent="",b.appendChild(this.GameStarter.container),this.GameStarter.proliferate(document.body,{onkeydown:this.GameStarter.InputWriter.makePipe("onkeydown","keyCode"),onkeyup:this.GameStarter.InputWriter.makePipe("onkeyup","keyCode")}),this.GameStarter.proliferate(b,{
onmousedown:this.GameStarter.InputWriter.makePipe("onmousedown","which"),oncontextmenu:this.GameStarter.InputWriter.makePipe("oncontextmenu",null,!0)})},a.prototype.loadGenerators=function(){this.generators={OptionsButtons:new c.OptionsButtonsGenerator(this),OptionsTable:new c.OptionsTableGenerator(this),LevelEditor:new c.LevelEditorGenerator(this),MapsGrid:new c.MapsGridGenerator(this)}},a.prototype.loadControls=function(a){var b,c=document.querySelector(this.gameControlsSelector),d=a.length;for(this.ItemsHolder=new ItemsHoldr.ItemsHoldr({prefix:this.globalName+"::UserWrapper::ItemsHolder"}),c.textContent="",c.className="length-"+d,b=0;d>b;b+=1)c.appendChild(this.loadControlDiv(a[b]))},a.prototype.loadControlDiv=function(a){var b=document.createElement("div"),c=document.createElement("h4"),d=document.createElement("div");return b.className="control",b.id="control-"+a.title,c.textContent=a.title,d.className="control-inner",d.appendChild(this.generators[a.generator].generate(a)),b.appendChild(c),b.appendChild(d),b.onmouseover=setTimeout.bind(void 0,function(){b.setAttribute("active","on")},35),b.onmouseout=function(){b.setAttribute("active","off")},b},a}();a.UserWrappr=b;var c;!function(a){var b=function(){function a(a){this.UserWrapper=a,this.GameStarter=this.UserWrapper.getGameStarter()}return a.prototype.generate=function(){throw new Error("AbstractOptionsGenerator is abstract. Subclass it.")},a.prototype.getParentControlDiv=function(a){return"control"===a.className?a:a.parentNode?this.getParentControlDiv(a.parentElement):void 0},a.prototype.ensureLocalStorageValue=function(a,b,c){if(a.constructor===Array)return void this.ensureLocalStorageValues(a,b,c);var d,e=a,f=c.title+"::"+b.title,g=b.source.call(this,this.GameStarter).toString();e.setAttribute("localStorageKey",f),this.GameStarter.ItemsHolder.addItem(f,{storeLocally:!0,valueDefault:g}),d=this.GameStarter.ItemsHolder.getItem(f),""!==d&&d!==e.value&&(e.value=d,e.setValue?e.setValue(d):e.onchange?e.onchange(void 0):e.onclick&&e.onclick(void 0))},a.prototype.ensureLocalStorageValues=function(a,b,c){var d,e,f,g,h=c.title+"::"+b.title,i=b.source.call(this,this.GameStarter);for(g=0;g<a.length;g+=1)d=h+"::"+g,f=a[g],f.setAttribute("localStorageKey",d),this.GameStarter.ItemsHolder.addItem(d,{storeLocally:!0,valueDefault:i[g]}),e=this.GameStarter.ItemsHolder.getItem(d),""!==e&&e!==f.value&&(f.value=e,f.onchange?f.onchange(void 0):f.onclick&&f.onclick(void 0))},a.prototype.storeLocalStorageValue=function(a,b){var c=a.getAttribute("localStorageKey");c&&this.GameStarter.ItemsHolder.setItem(c,b)},a}();a.AbstractOptionsGenerator=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.generate=function(a){var b,c,d,e=document.createElement("div"),f=a.options instanceof Function?a.options.call(self,this.GameStarter):a.options,g=Object.keys(f),h=a.keyActive||"active",i="select-option options-button-option",j=this;for(e.className="select-options select-options-buttons",d=0;d<g.length;d+=1)b=f[g[d]],c=document.createElement("div"),c.className=i,c.textContent=g[d],c.onclick=function(a,b){"on"===j.getParentControlDiv(b).getAttribute("active")&&(a.callback.call(j,j.GameStarter,a,b),"true"===b.getAttribute("option-enabled")?(b.setAttribute("option-enabled","false"),b.className=i+" option-disabled"):(b.setAttribute("option-enabled","true"),b.className=i+" option-enabled"))}.bind(void 0,a,c),b[h]?(c.className+=" option-enabled",c.setAttribute("option-enabled","true")):a.assumeInactive?(c.className+=" option-disabled",c.setAttribute("option-enabled","false")):c.setAttribute("option-enabled","true"),e.appendChild(c);return e},b}(b);a.OptionsButtonsGenerator=c;var d=function(a){function b(){a.apply(this,arguments),this.optionTypes={Boolean:this.setBooleanInput,Keys:this.setKeyInput,Number:this.setNumberInput,Select:this.setSelectInput,ScreenSize:this.setScreenSizeInput}}return __extends(b,a),b.prototype.generate=function(a){var b,c,d,e,f,g,h,i=document.createElement("div"),j=document.createElement("table");if(i.className="select-options select-options-table",a.options)for(h=0;h<a.options.length;h+=1)d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td"),b=a.options[h],e.className="options-label-"+b.type,e.textContent=b.title,f.className="options-cell-"+b.type,d.appendChild(e),d.appendChild(f),g=this.optionTypes[a.options[h].type].call(this,f,b,a),b.storeLocally&&this.ensureLocalStorageValue(g,b,a),j.appendChild(d);if(i.appendChild(j),a.actions)for(h=0;h<a.actions.length;h+=1)d=document.createElement("div"),c=a.actions[h],d.className="select-option options-button-option",d.textContent=c.title,d.onclick=c.action.bind(this,this.GameStarter),i.appendChild(d);return i},b.prototype.setBooleanInput=function(a,b){var c=b.source.call(this,this.GameStarter),d=c?"enabled":"disabled",e=this;return a.className="select-option options-button-option option-"+d,a.textContent=c?"on":"off",a.onclick=function(){a.setValue("off"===a.textContent)},a.setValue=function(c){c.constructor===String&&("false"===c||"off"===c?c=!1:("true"===c||"on"===c)&&(c=!0)),c?(b.enable.call(e,e.GameStarter),a.textContent="on",a.className=a.className.replace("disabled","enabled")):(b.disable.call(e,e.GameStarter),a.textContent="off",a.className=a.className.replace("enabled","disabled")),b.storeLocally&&e.storeLocalStorageValue(a,c.toString())},a},b.prototype.setKeyInput=function(a,b){var c,d,e,f,g=b.source.call(this,this.GameStarter),h=this.UserWrapper.getAllPossibleKeys(),i=[],j=this;for(e=0;e<g.length;e+=1){for(d=g[e].toLowerCase(),c=document.createElement("select"),c.className="options-key-option",c.value=c.valueOld=d,f=0;f<h.length;f+=1)c.appendChild(new Option(h[f])),h[f]===d&&(c.selectedIndex=f);c.onchange=function(a){b.callback.call(j,j.GameStarter,a.valueOld,a.value),b.storeLocally&&j.storeLocalStorageValue(a,a.value)}.bind(void 0,c),i.push(c),a.appendChild(c)}return i},b.prototype.setNumberInput=function(a,b){var c=document.createElement("input"),d=this;return c.type="number",c.value=Number(b.source.call(d,d.GameStarter)).toString(),c.min=(b.minimum||0).toString(),c.max=(b.maximum||Math.max(b.minimum+10,10)).toString(),c.onchange=c.oninput=function(){c.checkValidity()&&b.update.call(d,d.GameStarter,c.value),b.storeLocally&&d.storeLocalStorageValue(c,c.value)},a.appendChild(c),c},b.prototype.setSelectInput=function(a,b){var c,d=document.createElement("select"),e=b.options(this.GameStarter),f=this;for(c=0;c<e.length;c+=1)d.appendChild(new Option(e[c]));return d.value=b.source.call(f,f.GameStarter),d.onchange=function(){b.update.call(f,f.GameStarter,d.value),d.blur(),b.storeLocally&&f.storeLocalStorageValue(d,d.value)},a.appendChild(d),d},b.prototype.setScreenSizeInput=function(a,b,c){var d,e=this;return b.options=function(){return Object.keys(e.UserWrapper.getSizes())},b.source=function(){return e.UserWrapper.getCurrentSize().name},b.update=function(a,b){return b===e.UserWrapper.getCurrentSize()?void 0:void e.UserWrapper.setCurrentSize(b)},d=e.setSelectInput(a,b,c)},b}(b);a.OptionsTableGenerator=d;var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.generate=function(){var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=this.createUploaderDiv(),f=this;return a.className="select-options select-options-level-editor",b.className="select-option-title",b.textContent="Create your own custom levels:",c.className="select-option select-option-large options-button-option",c.innerHTML="Start the <br /> Level Editor!",c.onclick=function(){f.GameStarter.LevelEditor.enable()},d.className="select-option-title",d.innerHTML="<em>- or -</em><br />",a.appendChild(b),a.appendChild(c),a.appendChild(d),a.appendChild(e),a},b.prototype.createUploaderDiv=function(){var a=document.createElement("div"),b=document.createElement("input");return a.className="select-option select-option-large options-button-option",a.textContent="Click to upload and continue your editor files!",a.setAttribute("textOld",a.textContent),b.type="file",b.className="select-upload-input",b.onchange=this.handleFileDrop.bind(this,b,a),a.ondragenter=this.handleFileDragEnter.bind(this,a),a.ondragover=this.handleFileDragOver.bind(this,a),a.ondragleave=b.ondragend=this.handleFileDragLeave.bind(this,a),a.ondrop=this.handleFileDrop.bind(this,b,a),a.onclick=b.click.bind(b),a.appendChild(b),a},b.prototype.handleFileDragEnter=function(a,b){b.dataTransfer&&(b.dataTransfer.dropEffect="copy"),a.className+=" hovering"},b.prototype.handleFileDragOver=function(a,b){return b.preventDefault(),!1},b.prototype.handleFileDragLeave=function(a,b){b.dataTransfer&&(b.dataTransfer.dropEffect="none"),a.className=a.className.replace(" hovering","")},b.prototype.handleFileDrop=function(a,b,c){var d=a.files||c.dataTransfer.files,e=d[0],f=new FileReader;this.handleFileDragLeave(a,c),c.preventDefault(),c.stopPropagation(),f.onprogress=this.handleFileUploadProgress.bind(this,e,b),f.onloadend=this.handleFileUploadCompletion.bind(this,e,b),f.readAsText(e)},b.prototype.handleFileUploadProgress=function(a,b,c){var d;c.lengthComputable&&(d=Math.round(c.loaded/c.total*100),d>100&&(d=100),b.innerText="Uploading '"+a.name+"' ("+d+"%)...")},b.prototype.handleFileUploadCompletion=function(a,b,c){this.GameStarter.LevelEditor.handleUploadCompletion(c),b.innerText=b.getAttribute("textOld")},b}(b);a.LevelEditorGenerator=e;var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.generate=function(a){var b=document.createElement("div");return b.className="select-options select-options-maps-grid",a.rangeX&&a.rangeY&&b.appendChild(this.generateRangedTable(a)),a.extras&&this.appendExtras(b,a),b},b.prototype.generateRangedTable=function(a){var b,c,d,e,f=this,g=document.createElement("table"),h=a.rangeX,i=a.rangeY;for(d=i[0];d<=i[1];d+=1){for(b=document.createElement("tr"),b.className="maps-grid-row",e=h[0];e<=h[1];e+=1)c=document.createElement("td"),c.className="select-option maps-grid-option maps-grid-option-range",c.textContent=d+"-"+e,c.onclick=function(a){"on"===f.getParentControlDiv(c).getAttribute("active")&&a()}.bind(f,a.callback.bind(f,f.GameStarter,a,c)),b.appendChild(c);g.appendChild(b)}return g},b.prototype.appendExtras=function(a,b){var c,d,e,f;for(e in b.extras)if(b.extras.hasOwnProperty(e)&&(d=b.extras[e],c=document.createElement("div"),c.className="select-option maps-grid-option maps-grid-option-extra",c.textContent=d.title,c.setAttribute("value",d.title),c.onclick=d.callback.bind(this,this.GameStarter,b,c),a.appendChild(c),d.extraElements))for(f=0;f<d.extraElements.length;f+=1)a.appendChild(this.GameStarter.createElement.apply(this.GameStarter,d.extraElements[f]))},b}(b);a.MapsGridGenerator=f}(c=a.UISchemas||(a.UISchemas={}))}(UserWrappr||(UserWrappr={}));var WorldSeedr;!function(a){"use strict";var b=function(){function a(a){if(this.directionOpposites={top:"bottom",right:"left",bottom:"top",left:"right"},this.directionSizing={top:"height",right:"width",bottom:"height",left:"width"},this.directionNames=["top","right","bottom","left"],this.sizingNames=["width","height"],"undefined"==typeof a.possibilities)throw new Error("No possibilities given to WorldSeedr.");this.possibilities=a.possibilities,this.random=a.random||Math.random.bind(Math),this.onPlacement=a.onPlacement||console.log.bind(console,"Got:"),this.clearGeneratedCommands()}return a.prototype.getPossibilities=function(){return this.possibilities},a.prototype.setPossibilities=function(a){this.possibilities=a},a.prototype.getOnPlacement=function(){return this.onPlacement},a.prototype.setOnPlacement=function(a){this.onPlacement=a},a.prototype.clearGeneratedCommands=function(){this.generatedCommands=[]},a.prototype.runGeneratedCommands=function(){this.onPlacement(this.generatedCommands)},a.prototype.generate=function(a,b){var c=this.possibilities[a];if(!c)throw new Error("No possibility exists under '"+a+"'");if(!c.contents)throw new Error("Possibility '"+a+"' has no possibile outcomes.");return this.generateChildren(c,this.objectCopy(b))},a.prototype.generateFull=function(a){var b,c,d=this.generate(a.title,a);if(d&&d.children)for(c=0;c<d.children.length;c+=1)switch(b=d.children[c],b.type){case"Known":this.generatedCommands.push(b);break;case"Random":this.generateFull(b)}},a.prototype.generateChildren=function(a,b,c){void 0===c&&(c=void 0);var d,e=a.contents,f=e.spacing||0,g=this.objectMerge(a,b);switch(c=e.direction||c,e.mode){case"Random":d=this.generateChildrenRandom(e,g,c,f);break;case"Certain":d=this.generateChildrenCertain(e,g,c,f);break;case"Repeat":d=this.generateChildrenRepeat(e,g,c,f);break;case"Multiple":d=this.generateChildrenMultiple(e,g,c,f)}return this.wrapChoicePositionExtremes(d)},a.prototype.generateChildrenCertain=function(a,b,c,d){var e=this;return a.children.map(function(f){if("Final"===f.type)return e.parseChoiceFinal(a,f,b,c);var g=e.parseChoice(f,b,c);return g&&("Known"!==g.type&&(g.contents=e.generate(g.title,b)),e.shrinkPositionByChild(b,g,c,d)),g}).filter(function(a){return void 0!==a})},a.prototype.generateChildrenRepeat=function(a,b,c,d){for(var e,f,g=a.children,h=[],i=0;this.positionIsNotEmpty(b,c)&&(e=g[i],"Final"===e.type?f=this.parseChoiceFinal(a,e,b,c):(f=this.parseChoice(e,b,c),f&&"Known"!==f.type&&(f.contents=this.generate(f.title,b))),f&&this.choiceFitsPosition(f,b));)this.shrinkPositionByChild(b,f,c,d),h.push(f),i+=1,i>=g.length&&(i=0);return h},a.prototype.generateChildrenRandom=function(a,b,c,d){for(var e,f=[];this.positionIsNotEmpty(b,c)&&(e=this.generateChild(a,b,c));)if(this.shrinkPositionByChild(b,e,c,d),f.push(e),a.limit&&f.length>a.limit)return;return f},a.prototype.generateChildrenMultiple=function(a,b,c,d){var e=this;return a.children.map(function(a){var f=e.parseChoice(a,e.objectCopy(b),c);return c&&e.movePositionBySpacing(b,c,d),f})},a.prototype.generateChild=function(a,b,c){var d=this.chooseAmongPosition(a.children,b);return d?this.parseChoice(d,b,c):void 0},a.prototype.parseChoice=function(a,b,c){var d=a.title,e=this.possibilities[d],f={title:d,type:a.type,arguments:a.arguments instanceof Array?this.chooseAmong(a.arguments).values:a.arguments,width:void 0,height:void 0,top:void 0,right:void 0,bottom:void 0,left:void 0};switch(this.ensureSizingOnChoice(f,a,e),this.ensureDirectionBoundsOnChoice(f,b),f[c]=f[this.directionOpposites[c]]+f[this.directionSizing[c]],e.contents.snap){case"top":f.bottom=f.top-f.height;break;case"right":f.left=f.right-f.width;break;case"bottom":f.top=f.bottom+f.height;break;case"left":f.right=f.left+f.width}return a.stretch&&(f.arguments||(f.arguments={}),a.stretch.width&&(f.left=b.left,f.right=b.right,f.width=f.right-f.left,f.arguments.width=f.width),a.stretch.height&&(f.top=b.top,f.bottom=b.bottom,f.height=f.top-f.bottom,f.arguments.height=f.height)),this.copySchemaArguments(e,a,f),f},a.prototype.parseChoiceFinal=function(a,b,c){var d=this.possibilities[b.source],e={type:"Known",title:b.title,arguments:b.arguments,width:d.width,height:d.height,top:c.top,right:c.right,bottom:c.bottom,left:c.left};return this.copySchemaArguments(d,b,e),e},a.prototype.chooseAmong=function(a){if(!a.length)return void 0;if(1===a.length)return a[0];var b,c=this.randomPercentage(),d=0;for(b=0;b<a.length;b+=1)if(d+=a[b].percent,d>=c)return a[b]},a.prototype.chooseAmongPosition=function(a,b){var c=b.right-b.left,d=b.top-b.bottom,e=this;return this.chooseAmong(a.filter(function(a){return e.choiceFits(e.possibilities[a.title],c,d)}))},a.prototype.choiceFits=function(a,b,c){return a.width<=b&&a.height<=c},a.prototype.choiceFitsPosition=function(a,b){return this.choiceFits(a,b.right-b.left,b.top-b.bottom)},a.prototype.randomPercentage=function(){return Math.floor(100*this.random())+1},a.prototype.randomBetween=function(a,b){return Math.floor(this.random()*(1+b-a))+a},a.prototype.objectCopy=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c},a.prototype.objectMerge=function(a,b){var c,d=this.objectCopy(a);for(c in b)b.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=b[c]);return d},a.prototype.positionIsNotEmpty=function(a,b){return"right"===b||"left"===b?a.left<a.right:a.top>a.bottom},a.prototype.shrinkPositionByChild=function(a,b,c,d){switch(c){case"top":a.bottom=b.top+this.parseSpacing(d);break;case"right":a.left=b.right+this.parseSpacing(d);break;case"bottom":a.top=b.bottom-this.parseSpacing(d);break;case"left":a.right=b.left-this.parseSpacing(d)}},a.prototype.movePositionBySpacing=function(a,b,c){void 0===c&&(c=0);var d=this.parseSpacing(c);switch(b){case"top":a.top+=d,a.bottom+=d;break;case"right":a.left+=d,a.right+=d;break;case"bottom":a.top-=d,a.bottom-=d;break;case"left":a.left-=d,a.right-=d}},a.prototype.parseSpacing=function(a){if(!a)return 0;switch(a.constructor){case Array:return this.parseSpacingObject(a[0].constructor===Number?this.randomBetween(a[0],a[1]):this.chooseAmong(a).value);case Object:return this.parseSpacingObject(a);default:return a}},a.prototype.parseSpacingObject=function(a){if(a.constructor===Number)return a;var b=a.min,c=a.max,d=a.units||1;return this.randomBetween(b/d,c/d)*d},a.prototype.wrapChoicePositionExtremes=function(a){var b,c,d;if(!a||!a.length)return void 0;if(c=a[0],b={title:void 0,top:c.top,right:c.right,bottom:c.bottom,left:c.left,width:void 0,height:void 0,children:a},1===a.length)return b;for(d=1;d<a.length;d+=1){if(c=a[d],!Object.keys(c).length)return b;b.top=Math.max(b.top,c.top),b.right=Math.max(b.right,c.right),b.bottom=Math.min(b.bottom,c.bottom),b.left=Math.min(b.left,c.left)}return b.width=b.right-b.left,b.height=b.top-b.bottom,b},a.prototype.copySchemaArguments=function(a,b,c){var d,e=a.contents.argumentMap;if(e){c.arguments||(c.arguments={});for(d in e)e.hasOwnProperty(d)&&(c.arguments[e[d]]=b[d])}},a.prototype.ensureSizingOnChoice=function(a,b,c){var d,e;for(e in this.sizingNames)this.sizingNames.hasOwnProperty(e)&&(d=this.sizingNames[e],a[d]=b.sizing&&"undefined"!=typeof b.sizing[d]?b.sizing[d]:c[d])},a.prototype.ensureDirectionBoundsOnChoice=function(a,b){for(var c in this.directionNames)this.directionNames.hasOwnProperty(c)&&(a[this.directionNames[c]]=b[this.directionNames[c]])},a}();a.WorldSeedr=b}(WorldSeedr||(WorldSeedr={})),function(){function a(a,c){"use strict";var d=new b(a,c);return d.beautify()}function b(a,b){"use strict";function d(a,b){var c=0;a&&(c=a.indentation_level,!j()&&a.lineIndent_level>c&&(c=a.lineIndent_level));var d={mode:b,parent:a,last_text:a?a.last_text:"",last_word:a?a.last_word:"",declaration_statement:!1,declaration_assignment:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:c,lineIndent_level:a?a.lineIndent_level:c,start_lineIndex:X.length,had_comment:!1,ternary_depth:0};return d}function e(){return{text:[]}}function f(a){if(a=void 0===a?!1:a,X.length)for(g(X[X.length-1]);a&&X.length>1&&0===X[X.length-1].text.length;)X.pop(),g(X[X.length-1])}function g(a){for(;a.text.length&&(" "===a.text[a.text.length-1]||a.text[a.text.length-1]===aa||a.text[a.text.length-1]===ua);)a.text.pop()}function h(a){return a.replace(/^\s+|\s+$/g,"")}function i(a){a=a.replace(/\x0d/g,"");for(var b=[],c=a.indexOf("\n");-1!==c;)b.push(a.substring(0,c)),a=a.substring(c+1),c=a.indexOf("\n");return a.length&&b.push(a),b}function j(){var a=X[X.length-1];return 0===a.text.length}function k(){if(j()){if(1===X.length)return!0;var a=X[X.length-2];return 0===a.text.length}return!1}function l(a){if(a=void 0===a?!1:a,ta.wrap_line_length&&!a){var b=X[X.length-1],c=0;b.text.length>0&&(c=b.text.join("").length+Y.length+(na?1:0),c>=ta.wrap_line_length&&(a=!0))}(ta.preserve_newlines&&ma||a)&&!j()&&m(!1,!0)}function m(a,b){if(na=!1,!b&&";"!==ba.last_text&&","!==ba.last_text&&"="!==ba.last_text&&"TK_OPERATOR"!==$)for(;ba.mode===sa.Statement&&!ba.if_block&&!ba.do_block;)x();1===X.length&&j()||(a||!j())&&(ba.multiline_frame=!0,X.push(e()))}function n(){if(j()){var a=X[X.length-1];if(ta.keep_arrayIndentation&&v(ba.mode)&&ma){a.text.push("");for(var b=0;b<qa.length;b+=1)a.text.push(qa[b])}else ua&&a.text.push(ua),o(ba.indentation_level)}}function o(a){if(X.length>1){var b=X[X.length-1];ba.lineIndent_level=a;for(var c=0;a>c;c+=1)b.text.push(aa)}}function p(){var a=X[X.length-1];if(na&&a.text.length){var b=a.text[a.text.length-1];" "!==b&&b!==aa&&a.text.push(" ")}}function q(a){a=a||Y,n(),p(),na=!1,X[X.length-1].text.push(a)}function r(){ba.indentation_level+=1}function s(){ba.indentation_level>0&&(!ba.parent||ba.indentation_level>ba.parent.indentation_level)&&(ba.indentation_level-=1)}function t(a){if(!a.multiline_frame)for(var b,c=a.start_lineIndex,d=0;c<X.length;)b=X[c],c++,0!==b.text.length&&(d=ua&&b.text[0]===ua?1:0,b.text[d]===aa&&b.text.splice(d,1))}function u(a){ba?(da.push(ba),ca=ba):ca=d(null,a),ba=d(ca,a)}function v(a){return a===sa.ArrayLiteral}function w(a){return D(a,[sa.Expression,sa.ForInitializer,sa.Conditional])}function x(){da.length>0&&(ca=ba,ba=da.pop(),ca.mode===sa.Statement&&t(ca))}function y(){return ba.parent.mode===sa.ObjectLiteral&&ba.mode===sa.Statement&&":"===ba.last_text&&0===ba.ternary_depth}function z(){return"TK_RESERVED"===$&&D(ba.last_text,["var","let","const"])&&"TK_WORD"===Z||"TK_RESERVED"===$&&"do"===ba.last_text||"TK_RESERVED"===$&&"return"===ba.last_text&&!ma||"TK_RESERVED"===$&&"else"===ba.last_text&&("TK_RESERVED"!==Z||"if"!==Y)||"TK_END_EXPR"===$&&(ca.mode===sa.ForInitializer||ca.mode===sa.Conditional)||"TK_WORD"===$&&ba.mode===sa.BlockStatement&&!ba.in_case&&"--"!==Y&&"++"!==Y&&"TK_WORD"!==Z&&"TK_RESERVED"!==Z||ba.mode===sa.ObjectLiteral&&":"===ba.last_text&&0===ba.ternary_depth?(u(sa.Statement),r(),"TK_RESERVED"===$&&D(ba.last_text,["var","let","const"])&&"TK_WORD"===Z&&(ba.declaration_statement=!0),y()||l("TK_RESERVED"===Z&&D(Y,["do","for","if","while"])),!0):!1}function A(a,b){for(var c=0;c<a.length;c++){var d=h(a[c]);if(d.charAt(0)!==b)return!1}return!0}function B(a,b){for(var c,d=0,e=a.length;e>d;d++)if(c=a[d],c&&0!==c.indexOf(b))return!1;return!0}function C(a){return D(a,["case","return","do","if","throw","else"])}function D(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function E(a){for(var b,c=!1,d="",e=0,f="",g=0;c||e<a.length;)if(b=a.charAt(e),e++,c){if(c=!1,"x"===b)f=a.substr(e,2),e+=2;else{if("u"!==b){d+="\\"+b;continue}f=a.substr(e,4),e+=4}if(!f.match(/^[0123456789abcdefABCDEF]+$/))return a;if(g=parseInt(f,16),g>=0&&32>g){d+="x"===b?"\\x"+f:"\\u"+f;continue}if(34===g||39===g||92===g)d+="\\"+String.fromCharCode(g);else{if("x"===b&&g>126&&255>=g)return a;d+=String.fromCharCode(g)}}else"\\"===b?c=!0:d+=b;return d}function F(a){for(var b=ha,c=W.charAt(b);D(c,ea)&&c!==a;){if(b++,b>=oa)return!1;c=W.charAt(b)}return c===a}function G(){var a;if(pa=0,ha>=oa)return["","TK_EOF"];ma=!1,qa=[];var b=W.charAt(ha);for(ha+=1;D(b,ea);){if("\n"===b?(pa+=1,qa=[]):pa&&(b===aa?qa.push(aa):"\r"!==b&&qa.push(" ")),ha>=oa)return["","TK_EOF"];b=W.charAt(ha),ha+=1}if(c.isIdentifierChar(W.charCodeAt(ha-1))){if(oa>ha)for(;c.isIdentifierChar(W.charCodeAt(ha))&&(b+=W.charAt(ha),ha+=1,ha!==oa););if(ha!==oa&&b.match(/^[0-9]+[Ee]$/)&&("-"===W.charAt(ha)||"+"===W.charAt(ha))){var d=W.charAt(ha);ha+=1;var e=G();return b+=d+e[0],[b,"TK_WORD"]}return"TK_DOT"===$||"TK_RESERVED"===$&&D(ba.last_text,["set","get"])||!D(b,ja)?[b,"TK_WORD"]:"in"===b?[b,"TK_OPERATOR"]:[b,"TK_RESERVED"]}if("("===b||"["===b)return[b,"TK_START_EXPR"];if(")"===b||"]"===b)return[b,"TK_END_EXPR"];if("{"===b)return[b,"TK_START_BLOCK"];if("}"===b)return[b,"TK_END_BLOCK"];if(";"===b)return[b,"TK_SEMICOLON"];if("/"===b){var f="",g=!0;if("*"===W.charAt(ha)){if(ha+=1,oa>ha)for(;oa>ha&&("*"!==W.charAt(ha)||!W.charAt(ha+1)||"/"!==W.charAt(ha+1))&&(b=W.charAt(ha),f+=b,("\n"===b||"\r"===b)&&(g=!1),ha+=1,!(ha>=oa)););return ha+=2,g&&0===pa?["/*"+f+"*/","TKInLINE_COMMENT"]:["/*"+f+"*/","TK_BLOCK_COMMENT"]}if("/"===W.charAt(ha)){for(f=b;"\r"!==W.charAt(ha)&&"\n"!==W.charAt(ha)&&(f+=W.charAt(ha),ha+=1,!(ha>=oa)););return[f,"TK_COMMENT"]}}if("`"===b||"'"===b||'"'===b||("/"===b||ta.e4x&&"<"===b&&W.slice(ha-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===$&&C(ba.last_text)||"TK_END_EXPR"===$&&D(ca.mode,[sa.Conditional,sa.ForInitializer])||D($,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var i=b,j=!1,k=!1;if(a=b,oa>ha)if("/"===i){for(var l=!1;j||l||W.charAt(ha)!==i;)if(a+=W.charAt(ha),j?j=!1:(j="\\"===W.charAt(ha),"["===W.charAt(ha)?l=!0:"]"===W.charAt(ha)&&(l=!1)),ha+=1,ha>=oa)return[a,"TK_STRING"]}else if(ta.e4x&&"<"===i){var m=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,n=W.slice(ha-1),o=m.exec(n);if(o&&0===o.index){for(var p=o[2],q=0;o;){var r=!!o[1],s=o[2],t=!!o[o.length-1]||"![CDATA["===s.slice(0,8);if(s!==p||t||(r?--q:++q),0>=q)break;o=m.exec(n)}var u=o?o.index+o[0].length:n.length;return ha+=u-1,[n.slice(0,u),"TK_STRING"]}}else for(;j||W.charAt(ha)!==i;)if(a+=W.charAt(ha),j?(("x"===W.charAt(ha)||"u"===W.charAt(ha))&&(k=!0),j=!1):j="\\"===W.charAt(ha),ha+=1,ha>=oa)return[a,"TK_STRING"];if(ha+=1,a+=i,k&&ta.unescape_strings&&(a=E(a)),"/"===i)for(;oa>ha&&D(W.charAt(ha),fa);)a+=W.charAt(ha),ha+=1;return[a,"TK_STRING"]}if("#"===b){if(1===X.length&&0===X[0].text.length&&"!"===W.charAt(ha)){for(a=b;oa>ha&&"\n"!==b;)b=W.charAt(ha),a+=b,ha+=1;return[h(a)+"\n","TK_UNKNOWN"]}var v="#";if(oa>ha&&D(W.charAt(ha),ka)){do b=W.charAt(ha),v+=b,ha+=1;while(oa>ha&&"#"!==b&&"="!==b);return"#"===b||("["===W.charAt(ha)&&"]"===W.charAt(ha+1)?(v+="[]",ha+=2):"{"===W.charAt(ha)&&"}"===W.charAt(ha+1)&&(v+="{}",ha+=2)),[v,"TK_WORD"]}}if("<"===b&&"<!--"===W.substring(ha-1,ha+3)){for(ha+=3,b="<!--";"\n"!==W.charAt(ha)&&oa>ha;)b+=W.charAt(ha),ha++;return ba.in_html_comment=!0,[b,"TK_COMMENT"]}if("-"===b&&ba.in_html_comment&&"-->"===W.substring(ha-1,ha+2))return ba.in_html_comment=!1,ha+=2,["-->","TK_COMMENT"];if("."===b)return[b,"TK_DOT"];if(D(b,ga)){for(;oa>ha&&D(b+W.charAt(ha),ga)&&(b+=W.charAt(ha),ha+=1,!(ha>=oa)););return","===b?[b,"TK_COMMA"]:"="===b?[b,"TK_EQUALS"]:[b,"TK_OPERATOR"]}return[b,"TK_UNKNOWN"]}function H(){z();var a=sa.Expression;if("["===Y){if("TK_WORD"===$||")"===ba.last_text)return"TK_RESERVED"===$&&D(ba.last_text,ia)&&(na=!0),u(a),q(),r(),void(ta.spaceIn_paren&&(na=!0));a=sa.ArrayLiteral,v(ba.mode)&&("["===ba.last_text||","===ba.last_text&&("]"===_||"}"===_))&&(ta.keep_arrayIndentation||m())}else"TK_RESERVED"===$&&"for"===ba.last_text?a=sa.ForInitializer:"TK_RESERVED"===$&&D(ba.last_text,["if","while"])&&(a=sa.Conditional);";"===ba.last_text||"TK_START_BLOCK"===$?m():"TK_END_EXPR"===$||"TK_START_EXPR"===$||"TK_END_BLOCK"===$||"."===ba.last_text?l(ma):"TK_RESERVED"===$&&"("===Y||"TK_WORD"===$||"TK_OPERATOR"===$?"TK_RESERVED"===$&&("function"===ba.last_word||"typeof"===ba.last_word)||"*"===ba.last_text&&"function"===_?ta.jslint_happy&&(na=!0):"TK_RESERVED"!==$||!D(ba.last_text,ia)&&"catch"!==ba.last_text||ta.space_before_conditional&&(na=!0):na=!0,"("===Y&&("TK_EQUALS"===$||"TK_OPERATOR"===$)&&(y()||l()),u(a),q(),ta.spaceIn_paren&&(na=!0),r()}function I(){for(;ba.mode===sa.Statement;)x();ba.multiline_frame&&l("]"===Y&&v(ba.mode)&&!ta.keep_arrayIndentation),ta.spaceIn_paren&&("TK_START_EXPR"!==$||ta.spaceIn_empty_paren?na=!0:(f(),na=!1)),"]"===Y&&ta.keep_arrayIndentation?(q(),x()):(x(),q()),t(ca),ba.do_while&&ca.mode===sa.Conditional&&(ca.mode=sa.Expression,ba.do_block=!1,ba.do_while=!1)}function J(){u(sa.BlockStatement);var a=F("}"),b=a&&"function"===ba.last_word&&"TK_END_EXPR"===$;"expand"===ta.brace_style?"TK_OPERATOR"!==$&&(b||"TK_EQUALS"===$||"TK_RESERVED"===$&&C(ba.last_text)&&"else"!==ba.last_text)?na=!0:m(!1,!0):"TK_OPERATOR"!==$&&"TK_START_EXPR"!==$?"TK_START_BLOCK"===$?m():na=!0:v(ca.mode)&&","===ba.last_text&&("}"===_?na=!0:m()),q(),r()}function K(){for(;ba.mode===sa.Statement;)x();var a="TK_START_BLOCK"===$;"expand"===ta.brace_style?a||m():a||(v(ba.mode)&&ta.keep_arrayIndentation?(ta.keep_arrayIndentation=!1,m(),ta.keep_arrayIndentation=!0):m()),x(),q()}function L(){if(z()||!ma||w(ba.mode)||"TK_OPERATOR"===$&&"--"!==ba.last_text&&"++"!==ba.last_text||"TK_EQUALS"===$||!ta.preserve_newlines&&"TK_RESERVED"===$&&D(ba.last_text,["var","let","const","set","get"])||m(),ba.do_block&&!ba.do_while){if("TK_RESERVED"===Z&&"while"===Y)return na=!0,q(),na=!0,void(ba.do_while=!0);m(),ba.do_block=!1}if(ba.if_block)if(ba.else_block||"TK_RESERVED"!==Z||"else"!==Y){for(;ba.mode===sa.Statement;)x();ba.if_block=!1,ba.else_block=!1}else ba.else_block=!0;if("TK_RESERVED"===Z&&("case"===Y||"default"===Y&&ba.in_case_statement))return m(),(ba.case_body||ta.jslint_happy)&&(s(),ba.case_body=!1),q(),ba.in_case=!0,void(ba.in_case_statement=!0);if("TK_RESERVED"===Z&&"function"===Y&&((D(ba.last_text,["}",";"])||j()&&!D(ba.last_text,["[","{",":","=",","]))&&(k()||ba.had_comment||(m(),m(!0))),"TK_RESERVED"===$||"TK_WORD"===$?"TK_RESERVED"===$&&D(ba.last_text,["get","set","new","return"])?na=!0:m():"TK_OPERATOR"===$||"="===ba.last_text?na=!0:w(ba.mode)||m()),("TK_COMMA"===$||"TK_START_EXPR"===$||"TK_EQUALS"===$||"TK_OPERATOR"===$)&&(y()||l()),"TK_RESERVED"===Z&&"function"===Y)return q(),void(ba.last_word=Y);if(la="NONE","TK_END_BLOCK"===$?"TK_RESERVED"===Z&&D(Y,["else","catch","finally"])?"expand"===ta.brace_style||"end-expand"===ta.brace_style?la="NEWLINE":(la="SPACE",na=!0):la="NEWLINE":"TK_SEMICOLON"===$&&ba.mode===sa.BlockStatement?la="NEWLINE":"TK_SEMICOLON"===$&&w(ba.mode)?la="SPACE":"TK_STRING"===$?la="NEWLINE":"TK_RESERVED"===$||"TK_WORD"===$||"*"===ba.last_text&&"function"===_?la="SPACE":"TK_START_BLOCK"===$?la="NEWLINE":"TK_END_EXPR"===$&&(na=!0,la="NEWLINE"),"TK_RESERVED"===Z&&D(Y,ia)&&")"!==ba.last_text&&(la="else"===ba.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===Z&&D(Y,["else","catch","finally"]))if("TK_END_BLOCK"!==$||"expand"===ta.brace_style||"end-expand"===ta.brace_style)m();else{f(!0);var a=X[X.length-1];"}"!==a.text[a.text.length-1]&&m(),na=!0}else"NEWLINE"===la?"TK_RESERVED"===$&&C(ba.last_text)?na=!0:"TK_END_EXPR"!==$?"TK_START_EXPR"===$&&"TK_RESERVED"===Z&&D(Y,["var","let","const"])||":"===ba.last_text||("TK_RESERVED"===Z&&"if"===Y&&"else"===ba.last_word&&"{"!==ba.last_text?na=!0:m()):"TK_RESERVED"===Z&&D(Y,ia)&&")"!==ba.last_text&&m():v(ba.mode)&&","===ba.last_text&&"}"===_?m():"SPACE"===la&&(na=!0);q(),ba.last_word=Y,"TK_RESERVED"===Z&&"do"===Y&&(ba.do_block=!0),"TK_RESERVED"===Z&&"if"===Y&&(ba.if_block=!0)}function M(){for(z()&&(na=!1);ba.mode===sa.Statement&&!ba.if_block&&!ba.do_block;)x();q(),ba.mode===sa.ObjectLiteral&&(ba.mode=sa.BlockStatement)}function N(){z()?na=!0:"TK_RESERVED"===$||"TK_WORD"===$?na=!0:"TK_COMMA"===$||"TK_START_EXPR"===$||"TK_EQUALS"===$||"TK_OPERATOR"===$?y()||l():m(),q()}function O(){z(),ba.declaration_statement&&(ba.declaration_assignment=!0),na=!0,q(),na=!0}function P(){return ba.declaration_statement?(w(ba.parent.mode)&&(ba.declaration_assignment=!1),q(),void(ba.declaration_assignment?(ba.declaration_assignment=!1,m(!1,!0)):na=!0)):(q(),void(ba.mode===sa.ObjectLiteral||ba.mode===sa.Statement&&ba.parent.mode===sa.ObjectLiteral?(ba.mode===sa.Statement&&x(),m()):na=!0))}function Q(){":"!==Y||ba.mode!==sa.BlockStatement||"{"!==_||"TK_WORD"!==$&&"TK_RESERVED"!==$||(ba.mode=sa.ObjectLiteral),z();var a=!0,b=!0;return"TK_RESERVED"===$&&C(ba.last_text)?(na=!0,void q()):"*"!==Y||"TK_DOT"!==$||_.match(/^\d+$/)?":"===Y&&ba.in_case?(ba.case_body=!0,r(),q(),m(),void(ba.in_case=!1)):"::"===Y?void q():(!ma||"--"!==Y&&"++"!==Y||m(!1,!0),"TK_OPERATOR"===$&&l(),D(Y,["--","++","!","~"])||D(Y,["-","+"])&&(D($,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||D(ba.last_text,ia)||","===ba.last_text)?(a=!1,b=!1,";"===ba.last_text&&w(ba.mode)&&(a=!0),("TK_RESERVED"===$||"TK_END_EXPR"===$)&&(a=!0),ba.mode!==sa.BlockStatement&&ba.mode!==sa.Statement||"{"!==ba.last_text&&";"!==ba.last_text||m()):":"===Y?0===ba.ternary_depth?(ba.mode===sa.BlockStatement&&(ba.mode=sa.ObjectLiteral),
a=!1):ba.ternary_depth-=1:"?"===Y?ba.ternary_depth+=1:"*"===Y&&"TK_RESERVED"===$&&"function"===ba.last_text&&(a=!1,b=!1),na=na||a,q(),void(na=b)):void q()}function R(){var a,b=i(Y),c=!1,d=!1,e=qa.join(""),f=e.length;for(m(!1,!0),b.length>1&&(A(b.slice(1),"*")?c=!0:B(b.slice(1),e)&&(d=!0)),q(b[0]),a=1;a<b.length;a++)m(!1,!0),c?q(" "+h(b[a])):d&&b[a].length>f?q(b[a].substring(f)):X[X.length-1].text.push(b[a]);m(!1,!0)}function S(){na=!0,q(),na=!0}function T(){ma?m(!1,!0):f(!0),na=!0,q(),m(!1,!0)}function U(){z(),"TK_RESERVED"===$&&C(ba.last_text)?na=!0:l(")"===ba.last_text&&ta.break_chained_methods),q()}function V(){q(),"\n"===Y[Y.length-1]&&m()}var W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua="";for(ea="\n\r	 ".split(""),fa="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),ka="0123456789".split(""),ga="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>",ga+=" <%= <% %> <?= <? ?>",ga=ga.split(" "),ia="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,yield".split(","),ja=ia.concat(["do","in","else","get","set","new","catch","finally","typeof"]),sa={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},ra={TK_START_EXPR:H,TK_END_EXPR:I,TK_START_BLOCK:J,TK_END_BLOCK:K,TK_WORD:L,TK_RESERVED:L,TK_SEMICOLON:M,TK_STRING:N,TK_EQUALS:O,TK_OPERATOR:Q,TK_COMMA:P,TK_BLOCK_COMMENT:R,TKInLINE_COMMENT:S,TK_COMMENT:T,TK_DOT:U,TK_UNKNOWN:V},b=b?b:{},ta={},void 0!==b.spaceAfter_anon_function&&void 0===b.jslint_happy&&(b.jslint_happy=b.spaceAfter_anon_function),void 0!==b.braces_on_own_line&&(ta.brace_style=b.braces_on_own_line?"expand":"collapse"),ta.brace_style=b.brace_style?b.brace_style:ta.brace_style?ta.brace_style:"collapse","expand-strict"===ta.brace_style&&(ta.brace_style="expand"),ta.indent_size=b.indent_size?parseInt(b.indent_size,10):4,ta.indent_char=b.indent_char?b.indent_char:" ",ta.preserve_newlines=void 0===b.preserve_newlines?!0:b.preserve_newlines,ta.break_chained_methods=void 0===b.break_chained_methods?!1:b.break_chained_methods,ta.max_preserve_newlines=void 0===b.max_preserve_newlines?0:parseInt(b.max_preserve_newlines,10),ta.spaceIn_paren=void 0===b.spaceIn_paren?!1:b.spaceIn_paren,ta.spaceIn_empty_paren=void 0===b.spaceIn_empty_paren?!1:b.spaceIn_empty_paren,ta.jslint_happy=void 0===b.jslint_happy?!1:b.jslint_happy,ta.keep_arrayIndentation=void 0===b.keep_arrayIndentation?!1:b.keep_arrayIndentation,ta.space_before_conditional=void 0===b.space_before_conditional?!0:b.space_before_conditional,ta.unescape_strings=void 0===b.unescape_strings?!1:b.unescape_strings,ta.wrap_line_length=void 0===b.wrap_line_length?0:parseInt(b.wrap_line_length,10),ta.e4x=void 0===b.e4x?!1:b.e4x,b.indent_with_tabs&&(ta.indent_char="	",ta.indent_size=1),aa="";ta.indent_size>0;)aa+=ta.indent_char,ta.indent_size-=1;for(;a&&(" "===a.charAt(0)||"	"===a.charAt(0));)ua+=a.charAt(0),a=a.substring(1);W=a,oa=a.length,$="TK_START_BLOCK",_="",X=[e()],na=!1,qa=[],da=[],u(sa.BlockStatement),ha=0,this.beautify=function(){for(var a,b,c,d;;){if(a=G(),Y=a[0],Z=a[1],"TK_EOF"===Z){for(;ba.mode===sa.Statement;)x();break}if(c=ta.keep_arrayIndentation&&v(ba.mode),ma=pa>0,c)for(b=0;pa>b;b+=1)m(b>0);else if(ta.max_preserve_newlines&&pa>ta.max_preserve_newlines&&(pa=ta.max_preserve_newlines),ta.preserve_newlines&&pa>1)for(m(),b=1;pa>b;b+=1)m(!0);ra[Z](),"TKInLINE_COMMENT"!==Z&&"TK_COMMENT"!==Z&&"TK_BLOCK_COMMENT"!==Z&&"TK_UNKNOWN"!==Z&&(_=ba.last_text,$=Z,ba.last_text=Y),ba.had_comment="TKInLINE_COMMENT"===Z||"TK_COMMENT"===Z||"TK_BLOCK_COMMENT"===Z}d=X[0].text.join("");for(var e=1;e<X.length;e++)d+="\n"+X[e].text.join("");return d=d.replace(/[\r\n ]+$/,"")}}var c={};!function(a){var b="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",c="------------------------------------------------------------------------------------------------------------------------------------------",d=new RegExp("["+b+"]"),e=new RegExp("["+b+c+"]");a.isIdentifierStart=function(a){return 65>a?36===a:91>a?!0:97>a?95===a:123>a?!0:a>=170&&d.test(String.fromCharCode(a))},a.isIdentifierChar=function(a){return 48>a?36===a:58>a?!0:65>a?!1:91>a?!0:97>a?95===a:123>a?!0:a>=170&&e.test(String.fromCharCode(a))}}(c),"function"==typeof define&&define.amd?define([],function(){return{js_beautify:a}}):"undefined"!=typeof exports?exports.js_beautify=a:"undefined"!=typeof window?window.js_beautify=a:"undefined"!=typeof global&&(global.js_beautify=a)}();var GameStartr;!function(a){"use strict";var b=function(a){function b(b){void 0===b&&(b={}),a.call(this,{customs:b,constantsSource:b.constantsSource,constants:b.constants,requirements:{global:{AudioPlayr:"References/AudioPlayr/AudioPlayr.ts",ChangeLinr:"References/ChangeLinr/ChangeLinr.ts",FPSAnalyzr:"References/FPSAnalyzr/FPSAnalyzr.ts",GamesRunnr:"References/GamesRunnr/GamesRunnr.ts",GroupHoldr:"References/GroupHoldr/GroupHoldr.ts",InputWritr:"References/InputWritr/InputWritr.ts",LevelEditr:"References/LevelEditr/LevelEditr.ts",NumberMakr:"References/NumberMakr/NumberMakr.ts",MapScreenr:"References/MapScreenr/MapScreenr.ts",MapsHandlr:"References/MapsHandlr/MapsHandlr.ts",MathDecidr:"References/MathDecidr/MathDecidr.ts",ModAttachr:"References/ModAttachr/ModAttachr.ts",ObjectMakr:"References/ObjectMakr/ObjectMakr.ts",PixelDrawr:"References/PixelDrawr/PixelDrawr.ts",PixelRendr:"References/PixelRendr/PixelRendr.ts",ScenePlayr:"References/ScenePlayr/ScenePlayr.ts",QuadsKeepr:"References/QuadsKeepr/QuadsKeepr.ts",ItemsHoldr:"References/ItemsHoldr/ItemsHoldr.ts",StringFilr:"References/StringFilr/StringFilr.ts",ThingHittr:"References/ThingHittr/ThingHittr.ts",TimeHandlr:"References/TimeHandlr/TimeHandlr.ts"}}}),this.resets=["resetObjectMaker","resetPixelRender","resetTimeHandler","resetItemsHolder","resetAudioPlayer","resetQuadsKeeper","resetGamesRunner","resetGroupHolder","resetThingHitter","resetMapScreener","resetPixelDrawer","resetNumberMaker","resetMapsCreator","resetMapsHandler","resetInputWriter","resetTouchPasser","resetLevelEditor","resetWorldSeeder","resetScenePlayer","resetMathDecider","resetModAttacher","startModAttacher","resetContainer"],b.extraResets&&this.resets.push.apply(this.resets,b.extraResets)}return __extends(b,a),b.prototype.reset=function(b,c){a.prototype.reset.call(this,b,b.resets,c)},b.prototype.resetTimed=function(b,c){return a.prototype.resetTimed.call(this,b,b.resets,c)},b.prototype.resetObjectMaker=function(a){a.ObjectMaker=new ObjectMakr.ObjectMakr(a.proliferate({properties:{Quadrant:{EightBitter:a,GameStarter:a},Thing:{EightBitter:a,GameStarter:a}}},a.settings.objects))},b.prototype.resetQuadsKeeper=function(a,b){var c=b.width/(a.settings.quadrants.numCols-3),d=b.height/(a.settings.quadrants.numRows-2);a.QuadsKeeper=new QuadsKeepr.QuadsKeepr(a.proliferate({ObjectMaker:a.ObjectMaker,createCanvas:a.createCanvas,quadrantWidth:c,quadrantHeight:d,startLeft:-c,startHeight:-d,onAdd:a.onAreaSpawn.bind(a,a),onRemove:a.onAreaUnspawn.bind(a,a)},a.settings.quadrants))},b.prototype.resetPixelRender=function(a){a.PixelRender=new PixelRendr.PixelRendr(a.proliferate({scale:a.scale,QuadsKeeper:a.QuadsKeeper,unitsize:a.unitsize},a.settings.sprites))},b.prototype.resetPixelDrawer=function(a){a.PixelDrawer=new PixelDrawr.PixelDrawr(a.proliferate({PixelRender:a.PixelRender,MapScreener:a.MapScreener,createCanvas:a.createCanvas,unitsize:a.unitsize,generateObjectKey:a.generateObjectKey},a.settings.renderer))},b.prototype.resetTimeHandler=function(a){a.TimeHandler=new TimeHandlr.TimeHandlr(a.proliferate({classAdd:a.addClass,classRemove:a.removeClass},a.settings.events))},b.prototype.resetAudioPlayer=function(a){a.AudioPlayer=new AudioPlayr.AudioPlayr(a.proliferate({ItemsHolder:a.ItemsHolder},a.settings.audio))},b.prototype.resetGamesRunner=function(a){a.GamesRunner=new GamesRunnr.GamesRunnr(a.proliferate({adjustFramerate:!0,interval:1e3/60,scope:a,onPlay:a.onGamePlay.bind(a,a),onPause:a.onGamePause.bind(a,a),FPSAnalyzer:new FPSAnalyzr.FPSAnalyzr},a.settings.runner))},b.prototype.resetItemsHolder=function(a){a.ItemsHolder=new ItemsHoldr.ItemsHoldr(a.proliferate({callbackArgs:[a]},a.settings.statistics))},b.prototype.resetGroupHolder=function(a){a.GroupHolder=new GroupHoldr.GroupHoldr(a.settings.groups)},b.prototype.resetThingHitter=function(a){a.ThingHitter=new ThingHittr.ThingHittr(a.proliferate({scope:a},a.settings.collisions))},b.prototype.resetMapScreener=function(a,b){a.MapScreener=new MapScreenr.MapScreenr({EightBitter:a,unitsize:a.unitsize,width:b.width,height:b.height,variableArgs:[a],variables:a.settings.maps.screenVariables})},b.prototype.resetNumberMaker=function(a){a.NumberMaker=new NumberMakr.NumberMakr},b.prototype.resetMapsCreator=function(a){a.MapsCreator=new MapsCreatr.MapsCreatr({ObjectMaker:a.ObjectMaker,groupTypes:a.settings.maps.groupTypes,macros:a.settings.maps.macros,entrances:a.settings.maps.entrances,maps:a.settings.maps.library,scope:a})},b.prototype.resetMapsHandler=function(a){a.MapsHandler=new MapsHandlr.MapsHandlr({MapsCreator:a.MapsCreator,MapScreener:a.MapScreener,screenAttributes:a.settings.maps.screenAttributes,onSpawn:a.settings.maps.onSpawn,onUnspawn:a.settings.maps.onUnspawn})},b.prototype.resetInputWriter=function(a){a.InputWriter=new InputWritr.InputWritr(a.proliferate({canTrigger:a.canInputsTrigger.bind(a,a)},a.settings.input.InputWritrArgs))},b.prototype.resetTouchPasser=function(a){a.TouchPasser=new TouchPassr.TouchPassr(a.proliferate({InputWriter:a.InputWriter},a.settings.touch))},b.prototype.resetLevelEditor=function(a){a.LevelEditor=new LevelEditr.LevelEditr(a.proliferate({GameStarter:a,beautifier:js_beautify},a.settings.editor))},b.prototype.resetWorldSeeder=function(a){a.WorldSeeder=new WorldSeedr.WorldSeedr(a.proliferate({random:a.NumberMaker.random.bind(a.NumberMaker),onPlacement:a.mapPlaceRandomCommands.bind(a,a)},a.settings.generator))},b.prototype.resetScenePlayer=function(a){a.ScenePlayer=new ScenePlayr.ScenePlayr(a.proliferate({cutsceneArguments:[a]},a.settings.scenes))},b.prototype.resetMathDecider=function(a){a.MathDecider=new MathDecidr.MathDecidr(a.settings.math)},b.prototype.resetModAttacher=function(a){a.ModAttacher=new ModAttachr.ModAttachr(a.proliferate({scopeDefault:a,ItemsHoldr:a.ItemsHolder},a.settings.mods))},b.prototype.startModAttacher=function(a,b){var c,d=b.mods;if(d)for(c in d)d.hasOwnProperty(c)&&d[c]&&a.ModAttacher.enableMod(c);a.ModAttacher.fireEvent("onReady",a,a)},b.prototype.resetContainer=function(a,b){a.container=a.createElement("div",{className:"EightBitter",style:a.proliferate({position:"relative",width:b.width+"px",height:b.height+"px"},b.style)}),a.canvas=a.createCanvas(b.width,b.height),a.PixelDrawer.setCanvas(a.canvas),a.container.appendChild(a.canvas),a.TouchPasser.setParentContainer(a.container)},b.prototype.scrollWindow=function(a,c){var d=b.prototype.ensureCorrectCaller(this);a=0|a,c=0|c,(a||c)&&(d.MapScreener.shift(a,c),d.shiftAll(-a,-c),d.QuadsKeeper.shiftQuadrants(-a,-c))},b.prototype.scrollThing=function(a,b,c){var d=a.left,e=a.top;a.GameStarter.scrollWindow(b,c),a.GameStarter.setLeft(a,d),a.GameStarter.setTop(a,e)},b.prototype.onAreaSpawn=function(a,b,c,d,e,f){a.MapsHandler.spawnMap(b,(c+a.MapScreener.top)/a.unitsize,(d+a.MapScreener.left)/a.unitsize,(e+a.MapScreener.top)/a.unitsize,(f+a.MapScreener.left)/a.unitsize)},b.prototype.onAreaUnspawn=function(a,b,c,d,e,f){a.MapsHandler.unspawnMap(b,(c+a.MapScreener.top)/a.unitsize,(d+a.MapScreener.left)/a.unitsize,(e+a.MapScreener.top)/a.unitsize,(f+a.MapScreener.left)/a.unitsize)},b.prototype.addThing=function(a,b,c){void 0===b&&(b=0),void 0===c&&(c=0);var d;return d="string"==typeof a||a instanceof String?this.ObjectMaker.make(a):a.constructor===Array?this.ObjectMaker.make.apply(this.ObjectMaker,a):a,arguments.length>2?(d.GameStarter.setLeft(d,b),d.GameStarter.setTop(d,c)):arguments.length>1&&d.GameStarter.setLeft(d,b),d.GameStarter.updateSize(d),d.GameStarter.GroupHolder.getFunctions().add[d.groupType](d),d.placed=!0,d.onThingAdd&&d.onThingAdd(d),d.GameStarter.PixelDrawer.setThingSprite(d),d.onThingAdded&&d.onThingAdded(d),d.GameStarter.ModAttacher.fireEvent("onAddThing",d,b,c),d},b.prototype.thingProcess=function(a,b,c,d){var e,f,g=4;a.title=a.title||b,a.width&&!a.spritewidth&&(a.spritewidth=d.spritewidth||d.width),a.height&&!a.spriteheight&&(a.spriteheight=d.spriteheight||d.height),e=Math.floor(a.width*(a.GameStarter.unitsize/a.GameStarter.QuadsKeeper.getQuadrantWidth())),e>0&&(g+=(e+1)*g/2),e=Math.floor(a.height*a.GameStarter.unitsize/a.GameStarter.QuadsKeeper.getQuadrantHeight()),e>0&&(g+=(e+1)*g/2),a.maxquads=g,a.quadrants=new Array(g),a.spritewidth=a.spritewidth||a.width,a.spriteheight=a.spriteheight||a.height,a.spritewidthpixels=a.spritewidth*a.GameStarter.unitsize,a.spriteheightpixels=a.spriteheight*a.GameStarter.unitsize,a.canvas=a.GameStarter.createCanvas(a.spritewidthpixels,a.spriteheightpixels),a.context=a.canvas.getContext("2d"),a.imageData=a.context.getImageData(0,0,a.spritewidthpixels,a.spriteheightpixels),1!==a.opacity&&a.GameStarter.setOpacity(a,a.opacity),a.attributes&&a.GameStarter.thingProcessAttributes(a,a.attributes),a.onThingMake&&a.onThingMake(a,c),a.GameStarter.setSize(a,a.width,a.height),a.GameStarter.setClassInitial(a,a.name||a.title),a.spriteCycle&&(f=a.spriteCycle,a.GameStarter.TimeHandler.addClassCycle(a,f[0],f[1]||null,f[2]||null)),(f=a.spriteCycleSynched)&&a.GameStarter.TimeHandler.addClassCycleSynched(a,f[0],f[1]||null,f[2]||null),a.flipHoriz&&a.GameStarter.flipHoriz(a),a.flipVert&&a.GameStarter.flipVert(a),a.GameStarter.ModAttacher.fireEvent("onThingMake",a.GameStarter,a,b,c,d)},b.prototype.thingProcessAttributes=function(a,b){var c;for(c in b)a[c]&&(a.GameStarter.proliferate(a,b[c]),a.name?a.name+=" "+c:a.name=a.title+" "+c)},b.prototype.mapPlaceRandomCommands=function(a,b){var c,d,e,f=a.MapsCreator,g=a.MapsHandler,h=g.getPreThings(),i=g.getArea(),j=g.getMap();for(e=0;e<b.length;e+=1)c=b[e],d={thing:c.title,x:c.left,y:c.top},c.arguments&&a.proliferateHard(d,c.arguments,!0),f.analyzePreSwitch(d,h,i,j)},b.prototype.onGamePlay=function(a){a.AudioPlayer.resumeAll(),a.ModAttacher.fireEvent("onGamePlay")},b.prototype.onGamePause=function(a){a.AudioPlayer.pauseAll(),a.ModAttacher.fireEvent("onGamePause")},b.prototype.canInputsTrigger=function(){return!0},b.prototype.gameStart=function(){this.ModAttacher.fireEvent("onGameStart")},b.prototype.killNormal=function(a){a&&(a.alive=!1,a.hidden=!0,a.movement=void 0)},b.prototype.markChanged=function(a){a.changed=!0},b.prototype.shiftVert=function(a,b,c){EightBittr.EightBittr.prototype.shiftVert(a,b),c||a.GameStarter.markChanged(a)},b.prototype.shiftHoriz=function(a,b,c){EightBittr.EightBittr.prototype.shiftHoriz(a,b),c||a.GameStarter.markChanged(a)},b.prototype.setTop=function(a,b){EightBittr.EightBittr.prototype.setTop(a,b),a.GameStarter.markChanged(a)},b.prototype.setRight=function(a,b){EightBittr.EightBittr.prototype.setRight(a,b),a.GameStarter.markChanged(a)},b.prototype.setBottom=function(a,b){EightBittr.EightBittr.prototype.setBottom(a,b),a.GameStarter.markChanged(a)},b.prototype.setLeft=function(a,b){EightBittr.EightBittr.prototype.setLeft(a,b),a.GameStarter.markChanged(a)},b.prototype.shiftBoth=function(a,b,c,d){b=b||0,c=c||0,a.noshiftx||(a.parallaxHoriz?a.GameStarter.shiftHoriz(a,a.parallaxHoriz*b,d):a.GameStarter.shiftHoriz(a,b,d)),a.noshifty||(a.parallaxVert?a.GameStarter.shiftVert(a,a.parallaxVert*c,d):a.GameStarter.shiftVert(a,c,d))},b.prototype.shiftThings=function(a,b,c,d){for(var e=a.length-1;e>=0;e-=1)a[e].GameStarter.shiftBoth(a[e],b,c,d)},b.prototype.shiftAll=function(a,c){var d=b.prototype.ensureCorrectCaller(this);d.GroupHolder.callAll(d,d.shiftThings,a,c,!0)},b.prototype.setWidth=function(a,b,c,d){a.width=b,a.unitwidth=b*a.GameStarter.unitsize,c&&(a.spritewidth=b,a.spritewidthpixels=b*a.GameStarter.unitsize),d&&a.GameStarter.updateSize(a),a.GameStarter.markChanged(a)},b.prototype.setHeight=function(a,b,c,d){a.height=b,a.unitheight=b*a.GameStarter.unitsize,c&&(a.spriteheight=b,a.spriteheightpixels=b*a.GameStarter.unitsize),d&&a.GameStarter.updateSize(a),a.GameStarter.markChanged(a)},b.prototype.setSize=function(a,b,c,d,e){a.GameStarter.setWidth(a,b,d,e),a.GameStarter.setHeight(a,c,d,e)},b.prototype.updatePosition=function(a){a.GameStarter.shiftHoriz(a,a.xvel),a.GameStarter.shiftVert(a,a.yvel)},b.prototype.updateSize=function(a){a.unitwidth=a.width*a.GameStarter.unitsize,a.unitheight=a.height*a.GameStarter.unitsize,a.spritewidthpixels=a.spritewidth*a.GameStarter.unitsize,a.spriteheightpixels=a.spriteheight*a.GameStarter.unitsize,a.canvas.width=a.spritewidthpixels,a.canvas.height=a.spriteheightpixels,a.GameStarter.PixelDrawer.setThingSprite(a),a.GameStarter.markChanged(a)},b.prototype.reduceWidth=function(a,b,c){a.right-=b,a.width-=b/a.GameStarter.unitsize,c?a.GameStarter.updateSize(a):a.GameStarter.markChanged(a)},b.prototype.reduceHeight=function(a,b,c){a.top+=b,a.height-=b/a.GameStarter.unitsize,c?a.GameStarter.updateSize(a):a.GameStarter.markChanged(a)},b.prototype.increaseHeight=function(a,b,c){a.top-=b,a.height+=b/a.GameStarter.unitsize,a.unitheight=a.height*a.GameStarter.unitsize,c?a.GameStarter.updateSize(a):a.GameStarter.markChanged(a)},b.prototype.increaseWidth=function(a,b,c){a.right+=b,a.width+=b/a.GameStarter.unitsize,a.unitwidth=a.width*a.GameStarter.unitsize,c?a.GameStarter.updateSize(a):a.GameStarter.markChanged(a)},b.prototype.thingPauseVelocity=function(a,b){a.xvelOld=a.xvel||0,a.yvelOld=a.yvel||0,a.nofallOld=a.nofall||!1,a.nocollideOld=a.nocollide||!1,a.movementOld=a.movement||a.movementOld,a.nofall=a.nocollide=!0,a.xvel=a.yvel=0,b||(a.movement=void 0)},b.prototype.thingResumeVelocity=function(a,b){b||(a.xvel=a.xvelOld||0,a.yvel=a.yvelOld||0),a.movement=a.movementOld||a.movement,a.nofall=a.nofallOld||!1,a.nocollide=a.nocollideOld||!1},b.prototype.generateObjectKey=function(a){return a.GameStarter.MapsHandler.getArea().setting+" "+a.groupType+" "+a.title+" "+a.className},b.prototype.setClass=function(a,b){a.className=b,a.GameStarter.PixelDrawer.setThingSprite(a),a.GameStarter.markChanged(a)},b.prototype.setClassInitial=function(a,b){a.className=b},b.prototype.addClass=function(a,b){a.className+=" "+b,a.GameStarter.PixelDrawer.setThingSprite(a),a.GameStarter.markChanged(a)},b.prototype.addClasses=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e,f;for(e=0;e<b.length;e+=1)for(d=b[e],(d.constructor===String||"string"==typeof d)&&(d=d.split(" ")),f=d.length-1;f>=0;f-=1)a.GameStarter.addClass(a,d[f])},b.prototype.removeClass=function(a,b){b&&(-1!==b.indexOf(" ")&&a.GameStarter.removeClasses(a,b),a.className=a.className.replace(new RegExp(" "+b,"gm"),""),a.GameStarter.PixelDrawer.setThingSprite(a))},b.prototype.removeClasses=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d,e,f;for(e=0;e<b.length;e+=1)for(d=b[e],(d.constructor===String||"string"==typeof d)&&(d=d.split(" ")),f=d.length-1;f>=0;--f)a.GameStarter.removeClass(a,d[f])},b.prototype.hasClass=function(a,b){return-1!==a.className.indexOf(b)},b.prototype.switchClass=function(a,b,c){a.GameStarter.removeClass(a,b),a.GameStarter.addClass(a,c)},b.prototype.flipHoriz=function(a){a.flipHoriz=!0,a.GameStarter.addClass(a,"flipped")},b.prototype.flipVert=function(a){a.flipVert=!0,a.GameStarter.addClass(a,"flip-vert")},b.prototype.unflipHoriz=function(a){a.flipHoriz=!1,a.GameStarter.removeClass(a,"flipped")},b.prototype.unflipVert=function(a){a.flipVert=!1,a.GameStarter.removeClass(a,"flip-vert")},b.prototype.setOpacity=function(a,b){a.opacity=b,a.GameStarter.markChanged(a)},b.prototype.ensureCorrectCaller=function(a){if(!(a instanceof b))throw new Error("A function requires the scope ('this') to be the manipulated GameStartr object. Unfortunately, 'this' is a "+typeof this+".");return a},b.prototype.arrayDeleteThing=function(a,b,c){void 0===c&&(c=b.indexOf(a)),-1!==c&&(b.splice(c,1),"function"==typeof a.onDelete&&a.onDelete(a))},b.prototype.takeScreenshot=function(a,c){void 0===c&&(c="image/png");var d=b.prototype.ensureCorrectCaller(this),e=d.createElement("a",{download:a+"."+c.split("/")[1],href:d.canvas.toDataURL(c).replace(c,"image/octet-stream")});e.click()},b.prototype.addPageStyles=function(a){var c,d,e=b.prototype.ensureCorrectCaller(this),f=e.createElement("style",{type:"text/css"}),g="";for(c in a)if(a.hasOwnProperty(c)){g+=c+" { \r\n";for(d in a[c])a[c].hasOwnProperty(d)&&(g+="  "+d+": "+a[c][d]+";\r\n");g+="}\r\n"}f.styleSheet?f.style.cssText=g:f.appendChild(document.createTextNode(g)),document.querySelector("head").appendChild(f)},b}(EightBittr.EightBittr);a.GameStartr=b}(GameStartr||(GameStartr={}));var FullScreenMario;!function(a){"use strict";var b=function(a){function b(c){a.call(this,{customs:c,requirements:{settings:{audio:"settings/audio.js",collisions:"settings/collisions.js",editor:"settings/editor.js",events:"settings/events.js",generator:"settings/generator.js",input:"settings/inpug.js",maps:"settings/maps.js",math:"settings/math.js",mods:"settings/mods.js",numbers:"settings/number.js",objects:"settings/objetcs.js",quadrants:"settings/quadrants.js",renderer:"settings/renderer.js",runner:"settings/runner.js",scenes:"settings/scenes.js",sprites:"settings/sprites.js",statistics:"settings/statistics.js",touch:"settings/touch.js",ui:"settings/ui.js"}},constantsSource:b,constants:["unitsize","scale","gravity","pointLevels","customTextMappings"]}),this.settings=b.settings,this.deviceMotionStatus={motionDown:!1,motionLeft:!1,motionRight:!1,x:void 0,y:void 0,dy:void 0},c.resetTimed?this.resetTimes=this.resetTimed(this,c):this.reset(this,c)}return __extends(b,a),b.prototype.resetObjectMaker=function(a){a.ObjectMaker=new ObjectMakr.ObjectMakr(a.proliferate({properties:{Quadrant:{EightBitter:a,GameStarter:a,FSM:a},Thing:{EightBitter:a,GameStarter:a,FSM:a}}},a.settings.objects))},b.prototype.resetAudioPlayer=function(b,c){a.prototype.resetAudioPlayer.call(this,b,c),b.AudioPlayer.setGetVolumeLocal(b.getVolumeLocal.bind(b,b)),b.AudioPlayer.setGetThemeDefault(b.getAudioThemeDefault.bind(b,b))},b.prototype.resetThingHitter=function(b,c){a.prototype.resetThingHitter.call(this,b,c),b.ThingHitter.cacheHitCheckGroup("Solid"),b.ThingHitter.cacheHitCheckGroup("Character")},b.prototype.resetMapsHandler=function(a){a.MapsHandler=new MapsHandlr.MapsHandlr({MapsCreator:a.MapsCreator,MapScreener:a.MapScreener,screenAttributes:a.settings.maps.screenAttributes,onSpawn:a.settings.maps.onSpawn.bind(a),stretchAdd:a.mapAddStretched.bind(a),afterAdd:a.mapAddAfter.bind(a)})},b.prototype.resetItemsHolder=function(b,c){a.prototype.resetItemsHolder.call(this,b,c),c.width<560&&(b.ItemsHolder.getContainer().children[0].cells[4].style.display="none")},b.prototype.resetContainer=function(b,c){a.prototype.resetContainer.call(this,b,c),b.container.style.fontFamily="Press Start",b.container.className+=" FullScreenMario",b.PixelDrawer.setThingArrays([b.GroupHolder.getGroup("Scenery"),b.GroupHolder.getGroup("Solid"),b.GroupHolder.getGroup("Character"),b.GroupHolder.getGroup("Text")]),b.ItemsHolder.getContainer().style.width=c.width+"px",b.container.appendChild(b.ItemsHolder.getContainer())},b.prototype.gameStart=function(){window.parent.postMessage({event:"test"},"*");var a=b.prototype.ensureCorrectCaller(this);a.setMap(a.settings.maps.mapDefault,a.settings.maps.locationDefault),a.ItemsHolder.setItem("lives",a.settings.statistics.values.lives.valueDefault),a.ModAttacher.fireEvent("onGameStart")},b.prototype.gameOver=function(){var a,c,d,e=b.prototype.ensureCorrectCaller(this),f=e.ObjectMaker.make("CustomText",{texts:[{text:"GAME OVER"}]});for(e.killNPCs(),e.AudioPlayer.clearAll(),e.AudioPlayer.play("Game Over"),e.GroupHolder.clearArrays(),e.ItemsHolder.hideContainer(),e.TimeHandler.cancelAllEvents(),e.PixelDrawer.setBackground("black"),e.addThing(f,e.MapScreener.width/2,e.MapScreener.height/2),a=f.children,c=-(a[a.length-1].right-a[0].left)/2,d=0;d<a.length;d+=1)e.shiftHoriz(a[d],c);e.TimeHandler.addEvent(function(){e.gameStart(),e.ItemsHolder.displayContainer()},420),e.ModAttacher.fireEvent("onGameOver")},b.prototype.gameEnd=function(){var a,c,d,e=b.prototype.ensureCorrectCaller(this),f=e.ObjectMaker.make("CustomText",{texts:[{text:"YOU ARE A HUMAN!"}]});for(e.killNPCs(),e.AudioPlayer.clearAll(),e.AudioPlayer.play("Ending"),e.GroupHolder.clearArrays(),e.ItemsHolder.hideContainer(),e.TimeHandler.cancelAllEvents(),e.PixelDrawer.setBackground("green"),e.addThing(f,e.MapScreener.width/2,e.MapScreener.height/2),a=f.children,c=-(a[a.length-1].right-a[0].left)/2,d=0;d<a.length;d+=1)e.shiftHoriz(a[d],c);e.ModAttacher.fireEvent("onGameOver"),window.parent.postMessage({event:"success"},"*")},b.prototype.thingProcess=function(b,c,d,e){("Infinity"===b.height||b.height===1/0)&&(b.height=b.FSM.getAbsoluteHeight(b.y)/b.FSM.unitsize),a.prototype.thingProcess.call(this,b,c,d,e),b.FSM.ThingHitter.cacheHitCheckType(b.title,b.groupType)},b.prototype.addPreThing=function(a){var b=a.thing,c=a.position||b.position;b.FSM.addThing(b,a.left*b.FSM.unitsize-b.FSM.MapScreener.left,(b.FSM.MapScreener.floor-a.top)*b.FSM.unitsize),c&&b.FSM.TimeHandler.addEvent(function(){switch(c){case"beginning":b.FSM.arrayToBeginning(b,b.FSM.GroupHolder.getGroup(b.groupType));break;case"end":b.FSM.arrayToEnd(b,b.FSM.GroupHolder.getGroup(b.groupType))}}),b.FSM.ModAttacher.fireEvent("onAddPreThing",a)},b.prototype.addPlayer=function(a,c){void 0===a&&(a=16*this.unitsize),void 0===c&&(c=16*this.unitsize);var d,e=b.prototype.ensureCorrectCaller(this);return d=e.player=e.ObjectMaker.make("Player",{power:e.ItemsHolder.getItem("power")}),d.keys=d.getKeys(),e.InputWriter.setEventInformation(d),e.MapScreener.underwater&&(d.swimming=!0,e.TimeHandler.addClassCycle(d,["swim1","swim2"],"swimming",5),e.TimeHandler.addEventInterval(d.FSM.animatePlayerBubbling,96,1/0,d)),e.setPlayerSizeSmall(d),d.power>=2&&(e.playerGetsBig(d,!0),3===d.power&&e.playerGetsFire(d)),e.addThing(d,a,c-d.height*e.unitsize),e.ModAttacher.fireEvent("onAddPlayer",d),d},b.prototype.scrollPlayer=function(a,c){var d=b.prototype.ensureCorrectCaller(this);d.scrollThing(d.player,a,c),d.ModAttacher.fireEvent("onScrollPlayer",a,c)},b.prototype.onGamePause=function(a){a.AudioPlayer.pauseAll(),a.AudioPlayer.play("Pause"),a.ModAttacher.fireEvent("onGamePause")},b.prototype.onGamePlay=function(a){a.AudioPlayer.resumeAll(),a.ModAttacher.fireEvent("onGamePlay")},b.prototype.keyDownLeft=function(a){a.FSM.GamesRunner.getPaused()||(a.keys.run=-1,a.keys.leftDown=!0,a.FSM.ModAttacher.fireEvent("onKeyDownLeft"))},b.prototype.keyDownRight=function(a,b){a.FSM.GamesRunner.getPaused()||(a.keys.run=1,a.keys.rightDown=!0,a.FSM.ModAttacher.fireEvent("onKeyDownRight"),b.preventDefault())},b.prototype.keyDownUp=function(a,b){a.FSM.GamesRunner.getPaused()||(a.keys.up=!0,a.canjump&&(a.resting||a.FSM.MapScreener.underwater)&&(a.keys.jump=!0,a.canjump=!1,a.keys.jumplev=0,a.FSM.AudioPlayer.play(a.power>1?"Jump Super":"Jump Small"),a.FSM.MapScreener.underwater&&a.FSM.TimeHandler.addEvent(function(){a.jumping=a.keys.jump=!1},14)),a.FSM.ModAttacher.fireEvent("onKeyDownUp"),b.preventDefault())},b.prototype.keyDownDown=function(a,b){a.FSM.GamesRunner.getPaused()||(a.keys.crouch=!0,a.FSM.ModAttacher.fireEvent("onKeyDownDown"),b.preventDefault())},b.prototype.keyDownSprint=function(a,b){a.FSM.GamesRunner.getPaused()||(3!==a.power||a.keys.sprint!==!1||a.crouching||a.fire(a),a.keys.sprint=!0,a.FSM.ModAttacher.fireEvent("onKeyDownSprint"),b.preventDefault())},b.prototype.keyDownPause=function(a,b){a.FSM.GamesRunner.getPaused()||a.FSM.TimeHandler.addEvent(a.FSM.GamesRunner.pause.bind(a.FSM.GamesRunner),7,!0),a.FSM.ModAttacher.fireEvent("onKeyDownPause"),b.preventDefault()},b.prototype.keyDownMute=function(a,b){a.FSM.GamesRunner.getPaused()||(a.FSM.AudioPlayer.toggleMuted(),a.FSM.ModAttacher.fireEvent("onKeyDownMute"),b.preventDefault())},b.prototype.keyUpLeft=function(a,b){a.keys.run=0,a.keys.leftDown=!1,a.FSM.ModAttacher.fireEvent("onKeyUpLeft"),b.preventDefault()},b.prototype.keyUpRight=function(a,b){a.keys.run=0,a.keys.rightDown=!1,a.FSM.ModAttacher.fireEvent("onKeyUpRight"),b.preventDefault()},b.prototype.keyUpUp=function(a,b){a.FSM.MapScreener.underwater||(a.keys.jump=a.keys.up=!1),a.canjump=!0,a.FSM.ModAttacher.fireEvent("onKeyUpUp"),b.preventDefault()},b.prototype.keyUpDown=function(a,b){a.keys.crouch=!1,a.piping||a.FSM.animatePlayerRemoveCrouch(a),a.FSM.ModAttacher.fireEvent("onKeyUpDown"),b.preventDefault()},b.prototype.keyUpSprint=function(a,b){a.keys.sprint=!1,a.FSM.ModAttacher.fireEvent("onKeyUpSprint"),b.preventDefault()},b.prototype.keyUpPause=function(a,b){a.FSM.GamesRunner.getPaused()&&a.FSM.GamesRunner.play(),a.FSM.ModAttacher.fireEvent("onKeyUpPause"),b.preventDefault()},b.prototype.mouseDownRight=function(a,b){a.FSM.GamesRunner.togglePause(),a.FSM.ModAttacher.fireEvent("onMouseDownRight"),b.preventDefault()},b.prototype.deviceMotion=function(a,b){var c=a.FSM,d=c.deviceMotionStatus,e=b.accelerationIncludingGravity;c.ModAttacher.fireEvent("onDeviceMotion",b),void 0!==d.y&&(d.dy=e.y-d.y,d.dy>.21?a.FSM.keyDownUp(a):d.dy<-.14&&a.FSM.keyUpUp(a)),d.x=e.x,d.y=e.y,d.x>2.1?d.motionLeft||(a.FSM.keyDownLeft(a),d.motionLeft=!0):d.x<-2.1?d.motionRight||(a.FSM.keyDownRight(a),d.motionRight=!0):(d.motionLeft&&(a.FSM.keyUpLeft(a),d.motionLeft=!1),d.motionRight&&(a.FSM.keyUpRight(a),d.motionRight=!1))},b.prototype.canInputsTrigger=function(a){return!a.MapScreener.nokeys},b.prototype.maintainTime=function(a){return a.MapScreener.notime?a.ItemsHolder.getItem("time")?!1:!0:(a.ItemsHolder.decrease("time",1),!1)},b.prototype.maintainScenery=function(a){var b,c,d=a.GroupHolder.getGroup("Scenery"),e=a.QuadsKeeper.left;for(c=d.length-1;c>=0;c-=1)b=d[c],b.right<e&&a.arrayDeleteThing(b,d,c)},b.prototype.maintainSolids=function(a,b){var c,d,e=a.QuadsKeeper.left;for(a.QuadsKeeper.determineAllQuadrants("Solid",b),d=b.length-1;d>=0;d-=1)c=b[d],c.alive&&c.right>e?c.movement&&c.movement(c):a.arrayDeleteThing(c,b,d)},b.prototype.maintainCharacters=function(a,b){var c,d,e=a.QuadsKeeper.right;for(d=b.length-1;d>=0;d-=1)c=b[d],c.resting?c.yvel=0:(c.nofall||(c.yvel+=c.gravity||a.MapScreener.gravity),c.yvel=Math.min(c.yvel,a.MapScreener.maxyvel)),c.under=c.undermid=void 0,a.updatePosition(c),a.QuadsKeeper.determineThingQuadrants(c),a.ThingHitter.checkHitsOf[c.title](c),c.overlaps&&c.overlaps.length&&a.maintainOverlaps(c),c.resting&&(a.isCharacterOnResting(c,c.resting)?(c.yvel=0,a.setBottom(c,c.resting.top)):c.onRestingOff?c.onRestingOff(c,c.resting):c.resting=void 0),c.alive?!c.player&&(0===c.numquads||c.left>e)&&(!c.outerok||c.right<a.MapScreener.width-e)?a.arrayDeleteThing(c,b,d):!c.nomove&&c.movement&&c.movement(c):a.arrayDeleteThing(c,b,d);
},b.prototype.maintainOverlaps=function(a){if(!a.checkOverlaps||a.FSM.setOverlapBoundaries(a)){if(a.FSM.slideToX(a,a.overlapGoal,a.FSM.unitsize),a.overlapGoRight){if(!(a.left>=a.overlapCheck))return;a.FSM.setLeft(a,a.overlapCheck)}else{if(!(a.right<=a.overlapCheck))return;a.FSM.setRight(a,a.overlapCheck)}a.overlaps.length=0,a.checkOverlaps=!0}},b.prototype.setOverlapBoundaries=function(a){if(1===a.overlaps.length)return a.overlaps.length=0,!1;var b,c,d,e,f,g=-(1/0),h=1/0,i=a.overlaps;for(f=0;f<i.length;f+=1)b=i[f],b.right>g&&(d=b),b.left<h&&(c=b);return e=(h+g)/2,a.FSM.getMidX(a)>=e?(a.overlapGoal=1/0,a.overlapGoRight=!0,a.overlapCheck=d.right):(a.overlapGoal=-(1/0),a.overlapGoRight=!1,a.overlapCheck=c.left),a.checkOverlaps=!1,!0},b.prototype.maintainPlayer=function(a){var b=a.player;if(a.isThingAlive(b)){if(b.yvel>0&&(a.MapScreener.underwater||(b.keys.jump=!1),b.jumping||b.crouching||(a.MapScreener.underwater?b.paddling||(a.switchClass(b,"paddling","paddling"),b.paddling=!0):(a.addClass(b,"jumping"),b.jumping=!0)),!b.dying&&b.top>a.MapScreener.bottom))return void(a.MapsHandler.getArea().exit?a.setLocation(a.MapsHandler.getArea().exit):a.killPlayer(b,2));if(b.xvel>0?b.right>a.MapScreener.middleX&&b.right>a.MapScreener.right-a.MapScreener.left&&(b.xvel=Math.min(0,b.xvel)):b.left<0&&(b.xvel=Math.max(0,b.xvel)),b.under&&(b.jumpcount=0),a.MapScreener.canscroll){var c=b.right-a.MapScreener.middleX;c>0&&a.scrollWindow(Math.min(b.scrollspeed,c))}}},b.prototype.generateCanThingCollide=function(){return function(a){return a.alive&&!a.nocollide}},b.prototype.isThingAlive=function(a){return a&&a.alive&&!a.dead},b.prototype.isThingTouchingThing=function(a,b){return!a.nocollide&&!b.nocollide&&a.right-a.FSM.unitsize>b.left&&a.left+a.FSM.unitsize<b.right&&a.bottom>=b.top&&a.top<=b.bottom},b.prototype.isThingOnThing=function(a,b){return"Solid"===a.groupType&&b.yvel>0?!1:a.yvel<b.yvel&&"Solid"!==b.groupType?!1:a.player&&a.bottom<b.bottom&&"enemy"===b.type?!0:a.left+a.FSM.unitsize>=b.right?!1:a.right-a.FSM.unitsize<=b.left?!1:a.bottom<=b.top+b.toly+b.yvel?!0:a.bottom<=b.top+b.toly+Math.abs(a.yvel-b.yvel)?!0:!1},b.prototype.isThingOnSolid=function(a,b){return a.left+a.FSM.unitsize>=b.right?!1:a.right-a.FSM.unitsize<=b.left?!1:a.bottom-a.yvel<=b.top+b.toly+a.yvel?!0:a.bottom<=b.top+b.toly+Math.abs(a.yvel-b.yvel)?!0:!1},b.prototype.isCharacterOnSolid=function(a,b){return a.resting===b?!0:a.yvel<0?!1:a.FSM.isThingOnSolid(a,b)?a.left+a.xvel+a.FSM.unitsize===b.right?!1:a.right-a.xvel-a.FSM.unitsize===b.left?!1:!0:!1},b.prototype.isCharacterOnResting=function(a,b){return a.FSM.isThingOnSolid(a,b)?a.left+a.xvel+a.FSM.unitsize===b.right?!1:a.right-a.xvel-a.FSM.unitsize===b.left?!1:!0:!1},b.prototype.generateIsCharacterTouchingCharacter=function(){return function(a,b){return a.nocollidechar&&(!b.player||a.nocollideplayer)||b.nocollidechar&&(!a.player||b.nocollideplayer)?!1:a.FSM.isThingTouchingThing(a,b)}},b.prototype.generateIsCharacterTouchingSolid=function(){return function(a,b){return(!b.hidden||b.collideHidden||a.player&&a.FSM.isSolidOnCharacter(b,a))&&(!a.nocollidesolid||a.allowUpSolids&&b.up)?a.FSM.isThingTouchingThing(a,b):!1}},b.prototype.isCharacterAboveEnemy=function(a,b){return a.bottom<b.top+b.toly},b.prototype.isCharacterBumpingSolid=function(a,b){return a.top+a.toly+Math.abs(a.yvel)>b.bottom},b.prototype.isCharacterOverlappingSolid=function(a,b){return a.top<=b.top&&a.bottom>b.bottom},b.prototype.isSolidOnCharacter=function(a,b){if(b.yvel>=0)return!1;var c=a.FSM.getMidX(b);return c<=a.left||c>=a.right?!1:a.bottom-a.yvel>b.top+b.toly-b.yvel?!1:!0},b.prototype.gainLife=function(a,c){var d=b.prototype.ensureCorrectCaller(this);a=Number(a)||1,d.ItemsHolder.increase("lives",a),c||this.AudioPlayer.play("Gain Life"),d.ModAttacher.fireEvent("onGainLife",a)},b.prototype.itemJump=function(a){a.yvel-=1.4*b.unitsize,this.shiftVert(a,-b.unitsize)},b.prototype.jumpEnemy=function(a,b){a.yvel=a.keys.up?-1.4*a.FSM.unitsize:a.FSM.unitsize*-.7,a.xvel*=.91,a.FSM.AudioPlayer.play("Kick"),("item"!==b.group||b.shell)&&(a.jumpcount+=1,a.FSM.scoreOn(a.FSM.findScore(a.jumpcount+a.jumpers),b)),a.jumpers+=1,a.FSM.TimeHandler.addEvent(function(a){a.jumpers-=1},1,a)},b.prototype.playerShroom=function(a,b){!a.shrooming&&a.player&&(a.FSM.AudioPlayer.play("Powerup"),a.FSM.scoreOn(1e3,a.FSM.player),a.power<3&&(a.FSM.ItemsHolder.increase("power"),a.power<3&&(a.shrooming=!0,a.power+=1,3===a.power?a.FSM.playerGetsFire(a.FSM.player):a.FSM.playerGetsBig(a.FSM.player))),a.FSM.ModAttacher.fireEvent("onPlayerShroom",a,b))},b.prototype.playerShroom1Up=function(a,b){a.player&&(a.FSM.gainLife(1),a.FSM.ModAttacher.fireEvent("onPlayerShroom1Up",a,b))},b.prototype.playerStarUp=function(a,b){void 0===b&&(b=560),a.star+=1,a.FSM.switchClass(a,"normal fiery","star"),a.FSM.AudioPlayer.play("Powerup"),a.FSM.AudioPlayer.addEventListener("Powerup","ended",a.FSM.AudioPlayer.playTheme.bind(a.FSM.AudioPlayer,"Star",!0)),a.FSM.TimeHandler.addClassCycle(a,["star1","star2","star3","star4"],"star",2),a.FSM.TimeHandler.addEvent(a.FSM.playerStarDown,b||560,a),a.FSM.ModAttacher.fireEvent("onPlayerStarUp",a)},b.prototype.playerStarDown=function(a){a.player&&(a.FSM.TimeHandler.cancelClassCycle(a,"star"),a.FSM.TimeHandler.addClassCycle(a,["star1","star2","star3","star4"],"star",5),a.FSM.TimeHandler.addEvent(a.FSM.playerStarOffCycle,140,a),a.FSM.AudioPlayer.removeEventListeners("Powerup","ended"),a.FSM.ModAttacher.fireEvent("onPlayerStarDown",a))},b.prototype.playerStarOffCycle=function(a){if(a.player){if(a.star>1)return void(a.star-=1);a.FSM.AudioPlayer.getTheme().paused||a.FSM.AudioPlayer.playTheme(),a.FSM.TimeHandler.addEvent(a.FSM.playerStarOffFinal,70,a),a.FSM.ModAttacher.fireEvent("onPlayerStarOffCycle",a)}},b.prototype.playerStarOffFinal=function(a){a.player&&(a.star-=1,a.FSM.TimeHandler.cancelClassCycle(a,"star"),a.FSM.removeClasses(a,"star star1 star2 star3 star4"),a.FSM.addClass(a,"normal"),3===a.power&&a.FSM.addClass(a,"fiery"),a.FSM.ModAttacher.fireEvent("onPlayerStarOffFinal",a))},b.prototype.playerGetsBig=function(a,b){a.FSM.setPlayerSizeLarge(a),a.FSM.removeClasses(a,"crouching small"),a.FSM.updateBottom(a,0),a.FSM.updateSize(a),b?a.FSM.addClass(a,"large"):a.FSM.playerGetsBigAnimation(a),a.FSM.ModAttacher.fireEvent("onPlayerGetsBig",a)},b.prototype.playerGetsBigAnimation=function(a){var b=["shrooming1","shrooming2","shrooming1","shrooming2","shrooming3","shrooming2","shrooming3"];a.FSM.addClass(a,"shrooming"),a.FSM.thingPauseVelocity(a),b.push(function(a,b){return a.shrooming=!1,b.length=0,a.FSM.addClass(a,"large"),a.FSM.removeClasses(a,"shrooming shrooming3"),a.FSM.thingResumeVelocity(a),!0}),a.FSM.TimeHandler.addClassCycle(a,b,"shrooming",6)},b.prototype.playerGetsSmall=function(a){var c=a.bottom;a.FSM.thingPauseVelocity(a),a.nocollidechar=!0,a.FSM.animateFlicker(a),a.FSM.removeClasses(a,"running skidding jumping fiery"),a.FSM.addClasses(a,"paddling small"),a.FSM.TimeHandler.addEvent(function(a){a.FSM.removeClass(a,"large"),a.FSM.setPlayerSizeSmall(a),a.FSM.setBottom(a,c-b.unitsize)},21,a),a.FSM.TimeHandler.addEvent(function(a){a.FSM.thingResumeVelocity(a,!1),a.FSM.removeClass(a,"paddling"),(a.running||a.xvel)&&a.FSM.addClass(a,"running"),a.FSM.PixelDrawer.setThingSprite(a)},42,a),a.FSM.TimeHandler.addEvent(function(a){a.nocollidechar=!1},70,a),a.FSM.ModAttacher.fireEvent("onPlayerGetsSmall")},b.prototype.playerGetsFire=function(a){a.shrooming=!1,a.star||a.FSM.addClass(a,"fiery"),a.FSM.ModAttacher.fireEvent("onPlayerGetsFire")},b.prototype.setPlayerSizeSmall=function(a){a.FSM.setSize(a,8,8,!0),a.FSM.updateSize(a)},b.prototype.setPlayerSizeLarge=function(a){a.FSM.setSize(a,8,16,!0),a.FSM.updateSize(a)},b.prototype.animatePlayerRemoveCrouch=function(a){a.crouching=!1,a.toly=a.tolyOld||0,1!==a.power&&(a.FSM.setHeight(a,16,!0,!0),a.FSM.removeClasses(a,"crouching"),a.FSM.updateBottom(a,0),a.FSM.updateSize(a)),a.FSM.animatePlayerRunningCycle(a)},b.prototype.unattachPlayer=function(a,b){a.nofall=!1,a.nocollide=!1,a.checkOverlaps=!0,a.attachedSolid=void 0,a.xvel=a.keys?a.keys.run:0,a.movement=a.FSM.movePlayer,a.FSM.addClass(a,"jumping"),a.FSM.removeClasses(a,"climbing","animated"),b.attachedCharacter=void 0},b.prototype.playerAddRestingStone=function(a){var b=a.FSM.addThing("RestingStone",a.left,a.top+48*a.FSM.unitsize);a.nocollide=!0,a.FSM.TimeHandler.addEventInterval(function(){return a.bottom<b.top?!1:(a.nocollide=!1,a.FSM.setMidXObj(b,a),a.FSM.setBottom(a,b.top),!0)},1,1/0)},b.prototype.markOverlap=function(a,b){a.overlaps?a.overlaps.push(b):a.overlaps=[b]},b.prototype.spawnDeadGoomba=function(a){a.FSM.TimeHandler.addEvent(b.prototype.killNormal,21,a)},b.prototype.spawnHammerBro=function(a){a.counter=0,a.gravity=a.FSM.MapScreener.gravity/2.1,a.FSM.TimeHandler.addEvent(a.FSM.animateThrowingHammer,35,a,7),a.FSM.TimeHandler.addEventInterval(a.FSM.animateJump,140,1/0,a)},b.prototype.spawnBowser=function(a){var b;for(a.counter=0,a.deathcount=0,b=0;b<a.fireTimes.length;b+=1)a.FSM.TimeHandler.addEventInterval(a.FSM.animateBowserFire,a.fireTimes[b],1/0,a);for(b=0;b<a.jumpTimes.length;b+=1)a.FSM.TimeHandler.addEventInterval(a.FSM.animateBowserJump,a.jumpTimes[b],1/0,a);if(a.throwing)for(b=0;b<a.throwAmount;b+=1)a.FSM.TimeHandler.addEvent(function(){a.FSM.TimeHandler.addEventInterval(a.FSM.animateBowserThrow,a.throwPeriod,1/0,a)},a.throwDelay+b*a.throwBetween)},b.prototype.spawnPiranha=function(a){var b;a.counter=0,a.direction=a.FSM.unitsize/-40,a.onPipe&&(b=a.bottom,a.FSM.setHeight(a,6),a.FSM.setBottom(a,b))},b.prototype.spawnBlooper=function(a){a.squeeze=0,a.counter=0},b.prototype.spawnPodoboo=function(a){a.FSM.TimeHandler.addEventInterval(a.FSM.animatePodobooJumpUp,a.frequency,1/0,a)},b.prototype.spawnLakitu=function(a){a.FSM.MapScreener.lakitu=a,a.FSM.TimeHandler.addEventInterval(a.FSM.animateLakituThrowingSpiny,140,1/0,a)},b.prototype.spawnCannon=function(a){a.noBullets||a.FSM.TimeHandler.addEventInterval(a.FSM.animateCannonFiring,a.frequency,a.frequency,a)},b.prototype.spawnCastleBlock=function(a){if(a.fireballs){var b,c=[];for(b=0;b<a.fireballs;b+=1)c.push(a.FSM.addThing("CastleFireball")),a.FSM.setMidObj(c[b],a);a.speed>=0?(a.dt=.07,a.angle=.25):(a.dt=-.07,a.angle=-.25),a.direction||(a.direction=-1),a.FSM.TimeHandler.addEventInterval(a.FSM.animateCastleBlock,Math.round(7/Math.abs(a.speed)),1/0,a,c)}},b.prototype.spawnMoveFloating=function(a){a.FSM.setMovementEndpoints(a),a.begin=a.FSM.MapScreener.floor*a.FSM.unitsize-a.begin,a.end=a.FSM.MapScreener.floor*a.FSM.unitsize-a.end},b.prototype.spawnMoveSliding=function(a){a.FSM.setMovementEndpoints(a)},b.prototype.spawnScalePlatform=function(a){var b=a.collection,c="platformLeft"===a.collectionKey?"Left":"Right",d="Left"===c?"Right":"Left";a.partners={ownString:b["string"+c],partnerString:b["string"+d],partnerPlatform:b["platform"+d]}},b.prototype.spawnRandomCheep=function(a){if(!a.MapScreener.spawningCheeps)return!0;var b;return b=a.ObjectMaker.make("CheepCheep",{flying:!0,xvel:a.NumberMaker.random()*a.unitsize*1.4,yvel:-1.4*a.unitsize}),a.addThing(b,a.NumberMaker.random()*a.MapScreener.width,a.MapScreener.height),b.left<a.MapScreener.width/2?a.flipHoriz(b):b.xvel*=-1,!1},b.prototype.spawnRandomBulletBill=function(a){if(!a.MapScreener.spawningBulletBills)return!0;var b;return b=a.ObjectMaker.make("BulletBill"),b.direction=1,b.moveleft=!0,b.xvel*=-1,a.flipHoriz(b),a.addThing(b,a.MapScreener.width,8*Math.floor(a.NumberMaker.randomIntWithin(0,a.MapScreener.floor)/8)*a.unitsize),!1},b.prototype.spawnCustomText=function(a){var b,c,d,e,f,g,h=a.top,i=a.texts,j=a.textAttributes,k=a.spacingHorizontal*a.FSM.unitsize,l=a.spacingVertical*a.FSM.unitsize,m=a.spacingVerticalBlank*a.FSM.unitsize,n=[];for(a.children=n,f=0;f<i.length;f+=1)if(i[f]){for(c=i[f].text,b=i[f].offset?a.left+i[f].offset*a.FSM.unitsize:a.left,g=0;g<c.length;g+=1)d=c[g],a.FSM.customTextMappings.hasOwnProperty(d)&&(d=a.FSM.customTextMappings[d]),d="Text"+a.size+d,e=a.FSM.ObjectMaker.make(d,j),e.FSM.addThing(e,b,h),n.push(e),b+=e.width*a.FSM.unitsize,b+=k;h+=l}else h+=m;a.FSM.killNormal(a)},b.prototype.spawnDetector=function(a){a.activate(a),a.FSM.killNormal(a)},b.prototype.spawnScrollBlocker=function(a){a.FSM.MapScreener.width<a.right&&(a.setEdge=!0)},b.prototype.spawnCollectionComponent=function(a,b){b.collection=a,a[b.collectionName]=b},b.prototype.spawnCollectionPartner=function(a,b){var c,d=b.collectionPartnerNames,e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=a[d[c]]);b.partners={}},b.prototype.spawnRandomSpawner=function(a){var b=a.FSM,c=(a.left+b.MapScreener.left)/b.unitsize;b.WorldSeeder.clearGeneratedCommands(),b.WorldSeeder.generateFull({title:a.randomization,top:a.randomTop,right:c+a.randomWidth,bottom:a.randomBottom,left:c,width:a.randomWidth,height:a.randomTop-a.randomBottom}),b.WorldSeeder.runGeneratedCommands(),b.MapsHandler.spawnMap("xInc",b.QuadsKeeper.top/b.unitsize,b.QuadsKeeper.right/b.unitsize,b.QuadsKeeper.bottom/b.unitsize,b.QuadsKeeper.left/b.unitsize)},b.prototype.activateCheepsStart=function(a){a.FSM.MapScreener.spawningCheeps=!0,a.FSM.TimeHandler.addEventInterval(a.FSM.spawnRandomCheep,21,1/0,a.FSM)},b.prototype.activateCheepsStop=function(a){a.FSM.MapScreener.spawningCheeps=!1},b.prototype.activateBulletBillsStart=function(a){a.FSM.MapScreener.spawningBulletBills=!0,a.FSM.TimeHandler.addEventInterval(a.FSM.spawnRandomBulletBill,210,1/0,a.FSM)},b.prototype.activateBulletBillsStop=function(a){a.FSM.MapScreener.spawningBulletBills=!1},b.prototype.activateLakituStop=function(a){var b=a.FSM.MapScreener.lakitu;b&&(b.fleeing=!0,b.movement=a.FSM.moveLakituFleeing)},b.prototype.activateWarpWorld=function(a,b){var c,d,e,f=b.collection,g=0;if(a.player){for(d=f.Welcomer.children,e=0;e<d.length;e+=1)"TextSpace"!==d[e].title&&(d[e].hidden=!1);for(;c=g+"-Text",f.hasOwnProperty(c);){for(d=f[c].children,e=0;e<d.length;e+=1)"TextSpace"!==d[e].title&&(d[e].hidden=!1);a.FSM.killNormal(f[g+"-Piranha"]),g+=1}}},b.prototype.activateRestingStone=function(a,b){a.activated||(a.activated=!0,a.opacity=1,a.FSM.AudioPlayer.playTheme(),a.FSM.TimeHandler.addEventInterval(function(){return b.resting===a?!1:(a.FSM.killNormal(a),!0)},1,1/0))},b.prototype.activateWindowDetector=function(a){a.FSM.MapScreener.right-a.FSM.MapScreener.left<a.left||(a.activate(a),a.FSM.killNormal(a))},b.prototype.activateScrollBlocker=function(a){var b=a.FSM.MapScreener.width-a.left;a.FSM.MapScreener.canscroll=!1,a.setEdge&&b>0&&a.FSM.scrollWindow(-b)},b.prototype.activateScrollEnabler=function(a){a.FSM.MapScreener.canscroll=!0},b.prototype.activateSectionBefore=function(a){var b,c,d=a.FSM,e=d.MapsCreator,f=d.MapScreener,g=d.MapsHandler,h=g.getArea(),i=g.getMap(),j=g.getPreThings(),k=h.sections[a.section||0],l=(a.left+f.left)/d.unitsize,m=k.before?k.before.creation:void 0;if(m)for(c=0;c<m.length;c+=1)b=d.proliferate({},m[c]),b.x?b.x+=l:b.x=l,b.sliding&&(b.begin+=l,b.end+=l),e.analyzePreSwitch(b,j,h,i);b={thing:"DetectWindow",x:l+(m?k.before.width:0),y:0,activate:d.activateSectionStretch,section:a.section||0},e.analyzePreSwitch(b,j,h,i),g.spawnMap("xInc",f.top/d.unitsize,(f.left+d.QuadsKeeper.right)/d.unitsize,f.bottom/d.unitsize,l)},b.prototype.activateSectionStretch=function(a){var b,c,d=a.FSM,e=d.MapsCreator,f=d.MapScreener,g=d.MapsHandler,h=g.getArea(),i=g.getMap(),j=g.getPreThings(),k=h.sections[a.section||0],l=k.stretch?k.stretch.creation:void 0,m=(a.left+f.left)/d.unitsize,n=f.width/d.unitsize;if(l){for(c=0;c<l.length;c+=1)b=d.proliferate({},l[c]),b.x=m,b.width=n,e.analyzePreSwitch(b,j,h,i);b={thing:"DetectWindow",x:m+n,y:0,activate:d.activateSectionAfter,section:a.section||0},e.analyzePreSwitch(b,j,h,i)}g.spawnMap("xInc",f.top/d.unitsize,m+f.width/d.unitsize,f.bottom/d.unitsize,m)},b.prototype.activateSectionAfter=function(a){var b,c,d=a.FSM,e=d.MapsCreator,f=d.MapScreener,g=d.MapsHandler,h=g.getArea(),i=g.getMap(),j=g.getPreThings(),k=h.sections[a.section||0],l=(a.left+f.left)/d.unitsize,m=k.after?k.after.creation:void 0;if(m)for(c=0;c<m.length;c+=1)b=d.proliferate({},m[c]),b.x?b.x+=l:b.x=l,b.sliding&&(b.begin+=l,b.end+=l),e.analyzePreSwitch(b,j,h,i);g.spawnMap("xInc",f.top/d.unitsize,l+f.right/d.unitsize,f.bottom/d.unitsize,l)},b.prototype.generateHitCharacterSolid=function(){return function(a,b){return b.up&&a!==b.up?a.FSM.collideCharacterSolidUp(a,b):(b.collide(a,b),a.undermid?a.undermid.bottomBump&&a.undermid.bottomBump(a.undermid,a):a.under&&a.under&&a.under.bottomBump&&a.under.bottomBump(a.under[0],a),void(a.checkOverlaps&&a.FSM.isCharacterOverlappingSolid(a,b)&&a.FSM.markOverlap(a,b)))}},b.prototype.generateHitCharacterCharacter=function(){return function(a,b){if(a.player){if(b.collide)return b.collide(a,b)}else a.collide&&a.collide(b,a)}},b.prototype.collideFriendly=function(a,b){a.player&&a.FSM.isThingAlive(b)&&(b.action&&b.action(a,b),b.death(b))},b.prototype.collideCharacterSolid=function(a,b){if(b.up!==a){if(a.FSM.isCharacterOnSolid(a,b)){if(b.hidden&&!b.collideHidden)return;a.resting!==b&&(a.resting=b,a.onResting&&a.onResting(a,b),b.onRestedUpon&&b.onRestedUpon(b,a))}else if(a.FSM.isSolidOnCharacter(b,a)){var c=a.FSM.getMidX(a);if(c>b.left&&c<b.right)a.undermid=b;else if(b.hidden&&!b.collideHidden)return;a.under?a.under.push(b):a.under=[b],a.player&&(a.keys.jump=!1,a.FSM.setTop(a,b.bottom-a.toly+b.yvel)),a.yvel=b.yvel}(!b.hidden||b.collideHidden)&&(a.resting===b||a.FSM.isCharacterBumpingSolid(a,b)||a.FSM.isThingOnThing(a,b)||a.FSM.isThingOnThing(b,a)||a.under||(a.right<=b.right?(a.xvel=Math.min(a.xvel,0),a.FSM.shiftHoriz(a,Math.max(b.left+a.FSM.unitsize-a.right,a.FSM.unitsize/-2))):(a.xvel=Math.max(a.xvel,0),a.FSM.shiftHoriz(a,Math.min(b.right-a.FSM.unitsize-a.left,a.FSM.unitsize/2))),a.player?b.actionLeft&&(a.FSM.ModAttacher.fireEvent("onPlayerActionLeft",a,b),b.actionLeft(a,b,b.transport)):(a.noflip||(a.moveleft=!a.moveleft),"item"===a.group&&a.collide(b,a))))}},b.prototype.collideCharacterSolidUp=function(a,b){a.onCollideUp?a.onCollideUp(a,b):(a.FSM.scoreOn(a.scoreBelow,a),a.death(a,2))},b.prototype.collideUpItem=function(a,b){a.FSM.animateCharacterHop(a),a.moveleft=a.FSM.objectToLeft(a,b)},b.prototype.collideUpCoin=function(a,b){a.blockparent=b,a.animate(a,b)},b.prototype.collideCoin=function(a,b){a.player&&(a.FSM.AudioPlayer.play("Coin"),a.FSM.ItemsHolder.increase("score",200),a.FSM.ItemsHolder.increase("coins",1),a.FSM.killNormal(b))},b.prototype.collideStar=function(a,b){a.player&&!a.star&&(a.FSM.playerStarUp(a),a.FSM.ModAttacher.fireEvent("onCollideStar",a,b))},b.prototype.collideFireball=function(a,b){if(a.FSM.isThingAlive(a)&&!(a.height<a.FSM.unitsize)){if(a.nofire)return void(a.nofire>1&&b.death(b));a.nofiredeath?(a.FSM.AudioPlayer.playLocal("Bump",a.FSM.getMidX(b)),a.death(a)):(a.FSM.AudioPlayer.playLocal("Kick",a.FSM.getMidX(b)),a.death(a,2),a.FSM.scoreOn(a.scoreFire,a)),b.death(b)}},b.prototype.collideCastleFireball=function(a,b){a.star?b.death(b):a.death(a)},b.prototype.collideShell=function(a,b){return a.shell?b.shell?a.FSM.collideShellShell(a,b):a.FSM.collideShell(a,b):"Solid"===a.groupType?a.FSM.collideShellSolid(a,b):a.player?a.FSM.collideShellPlayer(a,b):void(b.xvel?(a.FSM.killFlip(a),a.shellspawn&&(a=a.FSM.killSpawn(a)),a.FSM.AudioPlayer.play("Kick"),a.FSM.scoreOn(a.FSM.findScore(b.enemyhitcount),a),b.enemyhitcount+=1):a.moveleft=a.FSM.objectToLeft(a,b))},b.prototype.collideShellSolid=function(a,b){b.right<a.right?(a.FSM.AudioPlayer.playLocal("Bump",a.left),a.FSM.setRight(b,a.left),b.xvel=-b.speed,b.moveleft=!0):(a.FSM.AudioPlayer.playLocal("Bump",a.right),a.FSM.setLeft(b,a.right),b.xvel=b.speed,b.moveleft=!1)},b.prototype.collideShellPlayer=function(a,b){var c=a.FSM.objectToLeft(b,a),d=a.yvel>0&&a.bottom<=b.top+2*a.FSM.unitsize;return a.star?(a.FSM.scorePlayerShell(a,b),void b.death(b,2)):b.landing?void(b.shelltoleft===c?(b.landing+=1,1===b.landing&&a.FSM.scorePlayerShell(a,b),a.FSM.TimeHandler.addEvent(function(a){a.landing-=1},2,b)):a.death(a)):void(0===b.xvel||d?(b.counting=0,0===b.xvel?(a.FSM.AudioPlayer.play("Kick"),a.FSM.scorePlayerShell(a,b),c?(b.moveleft=!0,b.xvel=-b.speed):(b.moveleft=!1,b.xvel=b.speed),b.hitcount+=1,a.FSM.TimeHandler.addEvent(function(a){a.hitcount-=1},2,b)):b.xvel=0,b.peeking&&(b.peeking=0,a.FSM.removeClass(b,"peeking"),b.height-=a.FSM.unitsize/8,a.FSM.updateSize(b)),d&&(a.FSM.AudioPlayer.play("Kick"),b.xvel||(a.FSM.jumpEnemy(a,b),a.yvel*=2,a.FSM.setBottom(a,b.top-a.FSM.unitsize)),b.landing+=1,b.shelltoleft=c,a.FSM.TimeHandler.addEvent(function(a){a.landing-=1},2,b))):!b.hitcount&&(c&&b.xvel>0||!c&&b.xvel<0)&&a.death(a))},b.prototype.collideShellShell=function(a,b){if(0!==a.xvel)if(0!==b.xvel){var c=a.xvel;a.xvel=b.xvel,b.xvel=c,a.FSM.shiftHoriz(a,a.xvel),a.FSM.shiftHoriz(b,b.xvel)}else a.FSM.ItemsHolder.increase("score",500),b.death(b);else a.FSM.ItemsHolder.increase("score",500),a.death(a)},b.prototype.collideEnemy=function(a,b){if(!a.player&&b.player)return a.FSM.collideEnemy(a,b);if(a.FSM.isThingAlive(a)&&a.FSM.isThingAlive(b))if("item"!==a.group){if(!a.player)return a.moveleft=a.FSM.objectToLeft(a,b),void(b.moveleft=!a.moveleft);if(a.star&&!b.nostar||!a.FSM.MapScreener.underwater&&!b.deadly&&a.FSM.isThingOnThing(a,b)){var c=a;if(c.FSM.isCharacterAboveEnemy(c,b))return;c.star?(b.nocollide=!0,b.death(b,2),c.FSM.scoreOn(b.scoreStar,b),c.FSM.AudioPlayer.play("Kick")):(c.FSM.setBottom(c,Math.min(c.bottom,b.top+c.FSM.unitsize)),c.FSM.TimeHandler.addEvent(c.FSM.jumpEnemy,0,c,b),b.death(b,c.star?2:0),c.FSM.addClass(c,"hopping"),c.FSM.removeClasses(c,"running skidding jumping one two three"),c.hopping=!0,1===c.power&&c.FSM.setPlayerSizeSmall(c))}else a.FSM.isCharacterAboveEnemy(a,b)||a.death(a)}else if(a.collidePrimary)return a.collide(b,a)},b.prototype.collideBottomBrick=function(a,b){if(b.solid&&!a.solid)return a.FSM.collideBottomBrick(b,a);if(!a.up&&b.player&&(a.FSM.AudioPlayer.play("Bump"),!a.used)){if(a.up=b,b.power>1&&a.breakable&&!a.contents)return void a.FSM.TimeHandler.addEvent(a.FSM.killBrick,2,a,b);a.FSM.animateSolidBump(a),a.contents&&a.FSM.TimeHandler.addEvent(function(){a.FSM.animateSolidContents(a,b),"Coin"!==a.contents?a.FSM.animateBlockBecomesUsed(a):a.lastcoin?a.FSM.animateBlockBecomesUsed(a):a.FSM.TimeHandler.addEvent(function(){a.lastcoin=!0},245)},7)}},b.prototype.collideBottomBlock=function(a,b){if(b.solid&&!a.solid)return a.FSM.collideBottomBlock(b,a);if(!a.up&&b.player){if(a.used)return void a.FSM.AudioPlayer.play("Bump");a.used=!0,a.hidden=!1,a.up=b,a.FSM.animateSolidBump(a),a.FSM.removeClass(a,"hidden"),a.FSM.switchClass(a,"unused","used"),a.FSM.TimeHandler.addEvent(a.FSM.animateSolidContents,7,a,b)}},b.prototype.collideVine=function(a,b){!a.player||a.attachedSolid||a.climbing||a.bottom>b.bottom+2*a.FSM.unitsize||(b.attachedCharacter=a,a.attachedSolid=b,a.nofall=!0,a.checkOverlaps=!1,a.resting=void 0,a.right<b.right?(a.lookleft=!1,a.moveleft=!1,a.attachedDirection=-1,a.FSM.unflipHoriz(a)):(a.lookleft=!0,a.moveleft=!0,a.attachedDirection=1,a.FSM.flipHoriz(a)),a.FSM.thingPauseVelocity(a),a.FSM.addClass(a,"climbing"),a.FSM.removeClasses(a,"running","jumping","skidding"),a.FSM.TimeHandler.cancelClassCycle(a,"running"),a.FSM.TimeHandler.addClassCycle(a,["one","two"],"climbing",0),a.attachedLeft=!a.FSM.objectToLeft(a,b),a.attachedOff=a.attachedLeft?1:-1,a.movement=a.FSM.movePlayerVine)},b.prototype.collideSpringboard=function(a,b){a.player&&a.yvel>=0&&!b.tension&&a.FSM.isCharacterOnSolid(a,b)?(b.tension=b.tensionSave=Math.max(.77*a.yvel,a.FSM.unitsize),a.movement=a.FSM.movePlayerSpringboardDown,a.spring=b,a.xvel/=2.8):a.FSM.collideCharacterSolid(a,b)},b.prototype.collideWaterBlocker=function(a,b){a.FSM.collideCharacterSolid(a,b)},b.prototype.collideFlagpole=function(a,b){if(!(a.bottom>b.bottom)){var c=b.bottom-a.bottom|0,d=a.FSM.scorePlayerFlag(a,c/a.FSM.unitsize),e=a.FSM.ObjectMaker.make("Text"+d);a.star=1,a.nocollidechar=!0,a.FSM.MapScreener.nokeys=!0,a.FSM.MapScreener.notime=!0,a.FSM.MapScreener.canscroll=!1,a.FSM.killNPCs(),a.FSM.thingPauseVelocity(a),a.FSM.setRight(a,b.left+3*a.FSM.unitsize),a.FSM.killNormal(b),a.FSM.removeClasses(a,"running jumping skidding"),a.FSM.addClass(a,"climbing animated"),a.FSM.TimeHandler.addClassCycle(a,["one","two"],"climbing",0),a.FSM.TimeHandler.addEventInterval(a.FSM.shiftVert,1,64,b.collection.Flag,a.FSM.unitsize),a.FSM.addThing(e,b.right,b.bottom),a.FSM.TimeHandler.addEventInterval(a.FSM.shiftVert,1,72,e,-a.FSM.unitsize),a.FSM.TimeHandler.addEvent(a.FSM.ItemsHolder.increase.bind(a.FSM.ItemsHolder),72,"score",d),a.FSM.AudioPlayer.clearAll(),a.FSM.AudioPlayer.clearTheme(),a.FSM.AudioPlayer.play("Flagpole"),a.FSM.TimeHandler.addEventInterval(function(){return a.bottom<b.bottom?(a.FSM.shiftVert(a,a.FSM.unitsize),!1):(0|b.collection.Flag.bottom)<(0|b.bottom)?!1:(a.movement=void 0,a.FSM.setBottom(a,b.bottom),a.FSM.TimeHandler.cancelClassCycle(a,"climbing"),a.FSM.TimeHandler.addEvent(function(){a.FSM.collideFlagBottom(a,b)},21),!0)},1,1/0)}},b.prototype.collideFlagBottom=function(a){a.keys.run=1,a.maxspeed=a.walkspeed,a.FSM.flipHoriz(a),a.FSM.shiftHoriz(a,(a.width+1)*a.FSM.unitsize),a.FSM.TimeHandler.addEvent(function(){a.FSM.AudioPlayer.play("Stage Clear"),a.FSM.animatePlayerOffPole(a,!0)},14)},b.prototype.collideCastleAxe=function(a,b){a.FSM.isThingAlive(a)&&(a.right<b.left+b.EightBitter.unitsize||a.bottom>b.bottom-b.EightBitter.unitsize||(a.FSM.thingPauseVelocity(a),a.FSM.killNormal(b),a.FSM.killNPCs(),a.FSM.AudioPlayer.clearTheme(),a.FSM.MapScreener.nokeys=!0,a.FSM.MapScreener.notime=!0,a.FSM.TimeHandler.addEvent(function(){a.keys.run=1,a.maxspeed=a.walkspeed,a.FSM.thingResumeVelocity(a),a.yvel=0,a.FSM.MapScreener.canscroll=!0,a.FSM.AudioPlayer.play("World Clear")},140)))},b.prototype.collideCastleDoor=function(a,b){var c=String(a.FSM.ItemsHolder.getItem("time")),d=Number(c[c.length-1]);return a.FSM.killNormal(a),a.player?(1!==d&&3!==d&&6!==d&&(d=0),a.FSM.ItemsHolder.getItem("time")===1/0?void a.FSM.animateEndLevelFireworks(a,b,d):void a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.ItemsHolder.decrease("time"),a.FSM.ItemsHolder.increase("score",50),a.FSM.AudioPlayer.play("Coin"),a.FSM.ItemsHolder.getItem("time")<=0?(a.FSM.TimeHandler.addEvent(function(){a.FSM.animateEndLevelFireworks(a,b,d)},35),!0):void 0},1,1/0)):void 0},b.prototype.collideCastleNPC=function(a,b){var c,d,e=b.collection.npc.collectionKeys,f=140,g=0;a.keys.run=0,a.FSM.killNormal(b),a.FSM.TimeHandler.addEventInterval(function(){for(d=b.collection[e[g]].children,c=0;c<d.length;c+=1)"TextSpace"!==d[c].title&&(d[c].hidden=!1);g+=1},f,e.length),a.FSM.TimeHandler.addEvent(function(){a.FSM.collideLevelTransport(a,b)},280+f*e.length)},b.prototype.collideTransport=function(a,b){a.player&&(a.FSM.collideCharacterSolid(a,b),a.resting===b&&(b.xvel=a.FSM.unitsize/2,b.movement=a.FSM.movePlatform,b.collide=a.FSM.collideCharacterSolid))},b.prototype.collideDetector=function(a,b){return a.player?(b.activate(a,b),void(b.noActivateDeath||a.FSM.killNormal(b))):void(b.activateFail&&b.activateFail(a))},b.prototype.collideLevelTransport=function(a,b){var c=b.transport;if(a.player){if("undefined"==typeof c)throw new Error("No transport given to collideLevelTransport");if(c.constructor===String)a.FSM.setLocation(c);else if("undefined"!=typeof c.map)a.FSM.setMap(c.map);else{if("undefined"==typeof c.location)throw new Error("Unknown transport type:"+c);a.FSM.setLocation(c.location)}}},b.prototype.moveSimple=function(a){a.direction!==a.moveleft&&(a.moveleft?(a.xvel=-a.speed,a.noflip||a.FSM.unflipHoriz(a)):(a.xvel=a.speed,a.noflip||a.FSM.flipHoriz(a)),a.direction=a.moveleft)},b.prototype.moveSmart=function(a){a.FSM.moveSimple(a),0===a.yvel&&(a.resting&&a.FSM.isCharacterOnResting(a,a.resting)||(a.moveleft?a.FSM.shiftHoriz(a,a.FSM.unitsize,!0):a.FSM.shiftHoriz(a,-a.FSM.unitsize,!0),a.moveleft=!a.moveleft))},b.prototype.moveJumping=function(a){a.FSM.moveSimple(a),a.resting&&(a.yvel=-Math.abs(a.jumpheight),a.resting=void 0)},b.prototype.movePacing=function(a){a.counter+=.007,a.xvel=Math.sin(Math.PI*a.counter)/2.1},b.prototype.moveHammerBro=function(a){a.FSM.movePacing(a),a.FSM.lookTowardsPlayer(a),a.nocollidesolid=a.yvel<0||a.falling},b.prototype.moveBowser=function(a){a.flipHoriz?a.FSM.objectToLeft(a,a.FSM.player)?a.FSM.moveSimple(a):(a.lookleft=a.moveleft=!0,a.FSM.unflipHoriz(a),a.FSM.movePacing(a)):a.FSM.objectToLeft(a,a.FSM.player)?(a.lookleft=a.moveleft=!1,a.FSM.flipHoriz(a),a.FSM.moveSimple(a)):a.FSM.movePacing(a)},b.prototype.moveBowserFire=function(a){return Math.round(a.bottom)===Math.round(a.ylev)?void(a.movement=void 0):void a.FSM.shiftVert(a,Math.min(Math.max(0,a.ylev-a.bottom),a.FSM.unitsize))},b.prototype.moveFloating=function(a){a.top<=a.end?a.yvel=Math.min(a.yvel+a.FSM.unitsize/64,a.maxvel):a.bottom>=a.begin&&(a.yvel=Math.max(a.yvel-a.FSM.unitsize/64,-a.maxvel)),a.FSM.movePlatform(a)},b.prototype.moveSliding=function(a){a.FSM.MapScreener.left+a.left<=a.begin?a.xvel=Math.min(a.xvel+a.FSM.unitsize/64,a.maxvel):a.FSM.MapScreener.left+a.right>a.end&&(a.xvel=Math.max(a.xvel-a.FSM.unitsize/64,-a.maxvel)),a.FSM.movePlatform(a)},b.prototype.setMovementEndpoints=function(a){if(a.begin>a.end){var b=a.begin;a.begin=a.end,a.end=b}a.begin*=a.FSM.unitsize,a.end*=a.FSM.unitsize},b.prototype.movePlatform=function(a){a.FSM.shiftHoriz(a,a.xvel),a.FSM.shiftVert(a,a.yvel),a===a.FSM.player.resting&&a.FSM.player.alive&&(a.FSM.setBottom(a.FSM.player,a.top),a.FSM.shiftHoriz(a.FSM.player,a.xvel),a.FSM.player.right>a.FSM.MapScreener.width?a.FSM.setRight(a.FSM.player,a.FSM.MapScreener.width):a.FSM.player.left<0&&a.FSM.setLeft(a.FSM.player,0))},b.prototype.movePlatformSpawn=function(a){if(a.bottom<0)a.FSM.setTop(a,a.FSM.MapScreener.bottomPlatformMax);else{if(!(a.top>a.FSM.MapScreener.bottomPlatformMax))return void a.FSM.movePlatform(a);a.FSM.setBottom(a,0)}a.FSM.player&&a.FSM.player.resting===a&&(a.FSM.player.resting=void 0)},b.prototype.moveFalling=function(a){return a.FSM.player.resting!==a?void(a.yvel=0):(a.FSM.shiftVert(a,a.yvel+=a.FSM.unitsize/8),a.FSM.setBottom(a.FSM.player,a.top),void(a.yvel>=(a.fallThresholdStart||2.8*a.FSM.unitsize)&&(a.freefall=!0,a.movement=a.FSM.moveFreeFalling)))},b.prototype.moveFreeFalling=function(a){a.yvel+=a.acceleration||a.FSM.unitsize/16,a.FSM.shiftVert(a,a.yvel),a.yvel>=(a.fallThresholdEnd||2*a.FSM.unitsize)&&(a.movement=a.FSM.movePlatform)},b.prototype.movePlatformScale=function(a){if(a.FSM.player.resting===a)a.yvel+=a.FSM.unitsize/16;else{if(!(a.yvel>0))return;a.yvel=a.partners?Math.max(a.yvel-a.FSM.unitsize/16,0):0}a.tension+=a.yvel,a.FSM.shiftVert(a,a.yvel),a.partners&&(a.partners.partnerPlatform.tension-=a.yvel,a.partners.partnerPlatform.tension<=0&&(a.FSM.scoreOn(1e3,a),a.partners.partnerPlatform.yvel=a.FSM.unitsize/2,a.collide=a.partners.partnerPlatform.collide=a.FSM.collideCharacterSolid,a.movement=a.partners.partnerPlatform.movement=a.FSM.moveFreeFalling),a.FSM.shiftVert(a.partners.partnerPlatform,-a.yvel),a.FSM.setHeight(a.partners.ownString,a.partners.ownString.height+a.yvel/a.FSM.unitsize),a.FSM.setHeight(a.partners.partnerString,Math.max(a.partners.partnerString.height-a.yvel/a.FSM.unitsize,0)))},b.prototype.moveVine=function(a){a.FSM.increaseHeight(a,a.speed),a.FSM.updateSize(a),a.attachedSolid&&a.FSM.setBottom(a,a.attachedSolid.top),a.attachedCharacter&&a.FSM.shiftVert(a.attachedCharacter,-a.speed)},b.prototype.moveSpringboardUp=function(a){var c=a.FSM.player;a.FSM.reduceHeight(a,-a.tension,!0),a.tension*=2,a.height>a.heightNormal?(a.FSM.reduceHeight(a,(a.height-a.heightNormal)*a.FSM.unitsize),a===c.spring&&(c.yvel=Math.max(-2*a.FSM.unitsize,a.tensionSave*-.98),c.resting=c.spring=void 0,c.movement=b.prototype.movePlayer),a.tension=0,a.movement=void 0):a.FSM.setBottom(c,a.top),a===c.spring&&(a.FSM.isThingTouchingThing(c,a)||(c.spring=void 0,c.movement=b.prototype.movePlayer))},b.prototype.moveShell=function(a){0===a.xvel&&(a.counting+=1,350===a.counting?(a.peeking=1,a.height+=a.FSM.unitsize/8,a.FSM.addClass(a,"peeking"),a.FSM.updateSize(a)):455===a.counting?a.peeking=2:490===a.counting&&(a.spawnSettings={smart:a.smart},a.FSM.killSpawn(a)))},b.prototype.movePiranha=function(a){
var b=a.bottom,c=a.height+a.direction,d=!1;a.resting&&!a.FSM.isThingAlive(a.resting)&&(b=a.constructor.prototype.height*a.FSM.unitsize+a.top,c=1/0,a.resting=void 0),0>=c?(c=a.height=0,d=!0):c>=a.constructor.prototype.height&&(c=a.height=a.constructor.prototype.height,d=!0),a.FSM.setHeight(a,c),a.FSM.setBottom(a,b),a.canvas.height=c*a.FSM.unitsize,a.FSM.PixelDrawer.setThingSprite(a),d&&(a.counter=0,a.movement=a.FSM.movePiranhaLatent)},b.prototype.movePiranhaLatent=function(a){var b=a.FSM.getMidX(a.FSM.player);a.counter>=a.countermax&&(a.height>0||b<a.left-8*a.FSM.unitsize||b>a.right+8*a.FSM.unitsize)?(a.movement=void 0,a.direction*=-1,a.FSM.TimeHandler.addEvent(function(){a.movement=a.FSM.movePiranha},7)):a.counter+=1},b.prototype.moveBubble=function(a){a.top<a.FSM.MapScreener.top+16*a.FSM.unitsize&&a.FSM.killNormal(a)},b.prototype.moveCheepCheep=function(a){return a.top<16*a.FSM.unitsize?(a.FSM.setTop(a,16*a.FSM.unitsize),void(a.yvel*=-1)):void 0},b.prototype.moveCheepCheepFlying=function(a){a.top<28*a.FSM.unitsize&&(a.movement=void 0,a.nofall=!1)},b.prototype.moveBlooper=function(a){if(!a.FSM.isThingAlive(a.FSM.player))return a.xvel=a.FSM.unitsize/-4,a.yvel=0,void(a.movement=void 0);switch(a.counter){case 56:a.squeeze=1,a.counter+=1;break;case 63:a.FSM.moveBlooperSqueezing(a);break;default:a.counter+=1,a.top<18*a.FSM.unitsize&&a.FSM.moveBlooperSqueezing(a)}a.yvel=a.squeeze?Math.max(a.yvel+.021,.7):Math.min(a.yvel-.035,-.7),a.top>16*a.FSM.unitsize&&a.FSM.shiftVert(a,a.yvel,!0),a.squeeze||(a.FSM.player.left>a.right+8*a.FSM.unitsize?a.xvel=Math.min(a.speed,a.xvel+a.FSM.unitsize/32):a.FSM.player.right<a.left-8*a.FSM.unitsize&&(a.xvel=Math.max(-a.speed,a.xvel-a.FSM.unitsize/32)))},b.prototype.moveBlooperSqueezing=function(a){2!==a.squeeze&&(a.squeeze=2,a.FSM.addClass(a,"squeeze"),a.FSM.setHeight(a,10,!0,!0)),a.squeeze<7?a.xvel/=1.4:7===a.squeeze&&(a.xvel=0),a.squeeze+=1,(a.top>a.FSM.player.bottom||a.bottom>91*a.FSM.unitsize)&&a.FSM.animateBlooperUnsqueezing(a)},b.prototype.movePodobooFalling=function(a){return a.top>=a.starty?(a.yvel=0,a.movement=void 0,a.FSM.unflipVert(a),void a.FSM.setTop(a,a.starty)):a.yvel>=a.speed?void(a.yvel=a.speed):(!a.flipVert&&a.yvel>0&&a.FSM.flipVert(a),void(a.yvel+=a.acceleration))},b.prototype.moveLakitu=function(a){var b=a.FSM.player;b.xvel>a.FSM.unitsize/8&&b.left>a.FSM.MapScreener.width/2?a.left<b.right+16*a.FSM.unitsize&&(a.FSM.slideToX(a,b.right+b.xvel+32*a.FSM.unitsize,1.4*b.maxspeed),a.counter=0):(a.counter+=.007,a.FSM.slideToX(a,b.left+b.xvel+117*Math.sin(Math.PI*a.counter),.7*b.maxspeed))},b.prototype.moveLakituInitial=function(a){return a.right<a.FSM.player.left?(a.counter=0,a.movement=a.FSM.moveLakitu,void a.movement(a)):void a.FSM.shiftHoriz(a,-a.FSM.unitsize)},b.prototype.moveLakituFleeing=function(a){a.FSM.shiftHoriz(a,-a.FSM.unitsize)},b.prototype.moveCoinEmerge=function(a,b){a.FSM.shiftVert(a,a.yvel),b&&a.bottom>=a.blockparent.bottom&&a.FSM.killNormal(a)},b.prototype.movePlayer=function(a){var c=0;if(a.keys.up){if(a.keys.jump&&(a.yvel<=0||a.FSM.MapScreener.underwater)&&(a.FSM.MapScreener.underwater&&(a.FSM.animatePlayerPaddling(a),a.FSM.removeClass(a,"running")),a.resting?(a.resting.xvel&&(a.xvel+=a.resting.xvel),a.resting=void 0):(a.jumping||a.FSM.MapScreener.underwater||a.FSM.switchClass(a,"running skidding","jumping"),a.jumping=!0,a.power>1&&a.crouching&&a.FSM.removeClass(a,"jumping")),!a.FSM.MapScreener.underwater)){a.keys.jumplev+=1;var d=b.unitsize/Math.pow(a.keys.jumplev,a.FSM.MapScreener.jumpmod-.0014*a.xvel);a.yvel=Math.max(a.yvel-d,a.FSM.MapScreener.maxyvelinv)}}else a.keys.jump=!1;if(a.keys.crouch&&!a.crouching&&a.resting&&(a.power>1&&(a.crouching=!0,a.FSM.removeClass(a,"running"),a.FSM.addClass(a,"crouching"),a.FSM.setHeight(a,11,!0,!0),a.height=11,a.tolyOld=a.toly,a.toly=4*a.FSM.unitsize,a.FSM.updateBottom(a,0),a.FSM.updateSize(a)),a.resting.actionTop&&(a.FSM.ModAttacher.fireEvent("onPlayerActionTop",a,a.resting),a.resting.actionTop(a,a.resting))),0===a.keys.run||a.crouching)a.xvel*=.98,c=.035;else{var e=a.keys.run,f=Number(a.keys.sprint&&!a.FSM.MapScreener.underwater)||0,g=.098*e*(Number(f)+1);a.xvel+=g||0,a.xvel*=.98,c=7e-4,a.keys.run>0===a.moveleft?a.skidding||(a.FSM.addClass(a,"skidding"),a.skidding=!0):a.skidding&&(a.FSM.removeClass(a,"skidding"),a.skidding=!1)}a.xvel>c?a.xvel-=c:a.xvel<-c?a.xvel+=c:0!==a.xvel&&(a.xvel=0,a.FSM.MapScreener.nokeys||0!==a.keys.run||(a.keys.leftDown?a.keys.run=-1:a.keys.rightDown&&(a.keys.run=1))),Math.abs(a.xvel)<.14?a.running&&(a.running=!1,1===a.power&&a.FSM.setPlayerSizeSmall(a),a.FSM.removeClasses(a,"running skidding one two three"),a.FSM.addClass(a,"still"),a.FSM.TimeHandler.cancelClassCycle(a,"running")):a.running||(a.running=!0,a.FSM.animatePlayerRunningCycle(a),1===a.power&&a.FSM.setPlayerSizeSmall(a)),a.xvel>0?(a.xvel=Math.min(a.xvel,a.maxspeed),a.moveleft&&(a.resting||a.FSM.MapScreener.underwater)&&(a.FSM.unflipHoriz(a),a.moveleft=!1)):a.xvel<0&&(a.xvel=Math.max(a.xvel,-1*a.maxspeed),a.moveleft||!a.resting&&!a.FSM.MapScreener.underwater||(a.moveleft=!0,a.FSM.flipHoriz(a))),a.resting&&(a.hopping&&(a.hopping=!1,a.FSM.removeClass(a,"hopping"),a.xvel&&a.FSM.addClass(a,"running")),a.keys.jumplev=a.yvel=a.jumpcount=0,a.jumping&&(a.jumping=!1,a.FSM.removeClass(a,"jumping"),1===a.power&&a.FSM.setPlayerSizeSmall(a),a.FSM.addClass(a,Math.abs(a.xvel)<.14?"still":"running")),a.paddling&&(a.paddling=a.swimming=!1,a.FSM.TimeHandler.cancelClassCycle(a,"paddling"),a.FSM.removeClasses(a,"paddling swim1 swim2"),a.FSM.addClass(a,"running")))},b.prototype.movePlayerVine=function(a){var b,c=a.attachedSolid;if(!c)return void(a.movement=a.FSM.movePlayer);if(a.bottom<a.attachedSolid.top)return void a.FSM.unattachPlayer(a,a.attachedSolid);if(0!==a.keys.run&&a.keys.run===a.attachedDirection)return-1===a.attachedDirection?a.FSM.setRight(a,c.left-a.FSM.unitsize):1===a.attachedDirection&&a.FSM.setLeft(a,c.right+a.FSM.unitsize),void a.FSM.unattachPlayer(a,c);if(a.keys.up)b=!0,a.FSM.shiftVert(a,a.FSM.unitsize/-4);else{if(a.keys.crouch)return b=!0,a.FSM.shiftVert(a,a.FSM.unitsize/2),void(a.top>c.bottom&&a.FSM.unattachPlayer(a,a.attachedSolid));b=!1}b&&!a.animatedClimbing?a.FSM.addClass(a,"animated"):!b&&a.animatedClimbing&&a.FSM.removeClass(a,"animated"),a.animatedClimbing=b,a.bottom<a.FSM.MapScreener.top-4*a.FSM.unitsize&&a.FSM.setLocation(a.attachedSolid.transport)},b.prototype.movePlayerSpringboardDown=function(a){var b=a.spring;return a.FSM.isThingTouchingThing(a,b)?b.height<2.5*a.FSM.unitsize||b.tension<a.FSM.unitsize/32?(a.movement=void 0,void(b.movement=a.FSM.moveSpringboardUp)):((a.left<b.left+2*a.FSM.unitsize||a.right>b.right-2*a.FSM.unitsize)&&(a.xvel/=1.4),a.FSM.reduceHeight(b,b.tension,!0),b.tension/=2,a.FSM.setBottom(a,b.top),void a.FSM.updateSize(b)):(a.movement=a.FSM.movePlayer,b.movement=a.FSM.moveSpringboardUp,void(a.spring=void 0))},b.prototype.animateSolidBump=function(a){var b=-3;a.FSM.TimeHandler.addEventInterval(function(a){return a.FSM.shiftVert(a,b),b+=.5,3.5===b?(a.up=void 0,!0):!1},1,1/0,a)},b.prototype.animateBlockBecomesUsed=function(a){a.used=!0,a.FSM.switchClass(a,"unused","used")},b.prototype.animateSolidContents=function(a,b){var c;return b&&b.player&&b.power>1&&"Mushroom"===a.contents&&(a.contents="FireFlower"),c=a.FSM.addThing(a.contents||a.constructor.prototype.contents),a.FSM.setMidXObj(c,a),a.FSM.setTop(c,a.top),c.blockparent=a,c.animate(c,a),c},b.prototype.animateBrickShards=function(a){var b,c,d,e,f=a.FSM.unitsize;for(e=0;4>e;e+=1)c=a.left+Number(2>e)*a.width*f-2*f,d=a.top+e%2*a.height*f-2*f,b=a.FSM.addThing("BrickShard",c,d),b.xvel=b.speed=f/2-f*Number(e>1),b.yvel=-1.4*f+e%2,a.FSM.TimeHandler.addEvent(a.FSM.killNormal,70,b)},b.prototype.animateEmerge=function(a,b){a.nomove=a.nocollide=a.nofall=a.alive=!0,a.FSM.flipHoriz(a),a.FSM.AudioPlayer.play("Powerup Appears"),a.FSM.arraySwitch(a,a.FSM.GroupHolder.getGroup("Character"),a.FSM.GroupHolder.getGroup("Scenery")),a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.shiftVert(a,a.FSM.unitsize/-8),a.bottom>b.top?!1:(a.FSM.setBottom(a,b.top),a.FSM.GroupHolder.switchObjectGroup(a,"Scenery","Character"),a.nomove=a.nocollide=a.nofall=a.moveleft=!1,a.emergeOut&&a.emergeOut(a,b),a.movement&&(a.movementOld=a.movement,a.movement=a.FSM.moveSimple,a.FSM.TimeHandler.addEventInterval(function(){return a.resting===b?!1:(a.FSM.TimeHandler.addEvent(function(){a.movement=a.movementOld},1),!0)},1,1/0)),!0)},1,1/0)},b.prototype.animateEmergeCoin=function(a,b){a.nocollide=a.alive=a.nofall=!0,a.yvel-=a.FSM.unitsize,a.FSM.switchClass(a,"still","anim"),a.FSM.GroupHolder.switchObjectGroup(a,"Character","Scenery"),a.FSM.AudioPlayer.play("Coin"),a.FSM.ItemsHolder.increase("coins",1),a.FSM.ItemsHolder.increase("score",200),a.FSM.TimeHandler.cancelClassCycle(a,"0"),a.FSM.TimeHandler.addClassCycle(a,["anim1","anim2","anim3","anim4","anim3","anim2"],"0",5),a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.moveCoinEmerge(a,b),!a.FSM.isThingAlive(a)},1,1/0),a.FSM.TimeHandler.addEvent(function(){a.FSM.killNormal(a)},49),a.FSM.TimeHandler.addEvent(function(){a.yvel*=-1},25)},b.prototype.animateEmergeVine=function(a,b){a.attachedSolid=b,a.FSM.setHeight(a,0),a.FSM.AudioPlayer.play("Vine Emerging"),a.FSM.TimeHandler.addEvent(function(){a.nocollide=!1},14),a.FSM.TimeHandler.addEvent(function(){a.movement=void 0},700)},b.prototype.animateFlicker=function(a,b,c){b=Math.round(b)||49,c=Math.round(c)||2,a.flickering=!0,a.FSM.TimeHandler.addEventInterval(function(){a.hidden=!a.hidden,a.FSM.PixelDrawer.setThingSprite(a)},c,b),a.FSM.TimeHandler.addEvent(function(){a.flickering=a.hidden=!1,a.FSM.PixelDrawer.setThingSprite(a)},b*c+1)},b.prototype.animateThrowingHammer=function(a,b){return!a.FSM.isThingAlive(a)||!a.FSM.isThingAlive(a.FSM.player)||a.right<-32*a.FSM.unitsize?!0:(3!==b&&a.FSM.switchClass(a,"thrown","throwing"),a.FSM.TimeHandler.addEvent(function(){return a.FSM.isThingAlive(a)?(3!==b&&(a.FSM.switchClass(a,"throwing","thrown"),a.FSM.addThing(["Hammer",{xvel:a.lookleft?a.FSM.unitsize/-1.4:a.FSM.unitsize/1.4,yvel:-1.4*a.FSM.unitsize,gravity:a.FSM.MapScreener.gravity/2.1}],a.left-2*a.FSM.unitsize,a.top-2*a.FSM.unitsize)),void(b>0?a.FSM.TimeHandler.addEvent(a.FSM.animateThrowingHammer,7,a,b-1):(a.FSM.TimeHandler.addEvent(a.FSM.animateThrowingHammer,70,a,7),a.FSM.removeClass(a,"thrown")))):!1},14),!1)},b.prototype.animateBowserJump=function(a){return a.lookleft&&a.FSM.player?a.FSM.isThingAlive(a)&&a.FSM.isThingAlive(a.FSM.player)?(a.resting=void 0,a.yvel=-1.4*a.FSM.unitsize,a.nocollidesolid=!0,a.FSM.TimeHandler.addEventInterval(function(){return a.dead||a.yvel>a.FSM.unitsize?(a.nocollidesolid=!1,!0):!1},3,1/0),!1):!0:!1},b.prototype.animateBowserFire=function(a){return a.lookleft&&a.lookleft&&a.FSM.player?a.FSM.isThingAlive(a)&&a.FSM.isThingAlive(a.FSM.player)?(a.FSM.addClass(a,"firing"),a.FSM.AudioPlayer.playLocal("Bowser Fires",a.left),a.FSM.TimeHandler.addEvent(a.FSM.animateBowserFireOpen,14,a),!1):!0:!1},b.prototype.animateBowserFireOpen=function(a){var b=a.FSM.unitsize,c=Math.max(-a.height*b,Math.round(a.FSM.player.bottom/(8*b))*b*8);return a.FSM.isThingAlive(a)?(a.FSM.removeClass(a,"firing"),a.FSM.addThing(["BowserFire",{ylev:c}],a.left-8*a.FSM.unitsize,a.top+4*a.FSM.unitsize),!1):!0},b.prototype.animateBowserThrow=function(a){if(a.lookleft&&a.FSM.isThingAlive(a)){var b=a.FSM.addThing("Hammer",a.left+2*a.FSM.unitsize,a.top-2*a.FSM.unitsize);return a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.isThingAlive(a)?(a.FSM.setTop(b,a.top-2*a.FSM.unitsize),a.lookleft?a.FSM.setLeft(b,a.left+2*a.FSM.unitsize):a.FSM.setLeft(b,a.right-2*a.FSM.unitsize),!0):(a.FSM.killNormal(b),!0)},1,14),a.FSM.TimeHandler.addEvent(function(){b.xvel=1.17*a.FSM.unitsize,b.yvel=-2.1*a.FSM.unitsize,a.lookleft&&(b.xvel*=-1)},14),!1}},b.prototype.animateBowserFreeze=function(a){a.nofall=!0,a.nothrow=!0,a.movement=void 0,a.dead=!0,a.FSM.thingPauseVelocity(a),a.FSM.TimeHandler.addEvent(function(){a.nofall=!1},70)},b.prototype.animateJump=function(a){return a.FSM.isThingAlive(a)&&a.FSM.isThingAlive(a.FSM.player)?a.resting?(a.FSM.MapScreener.floor-a.bottom/a.FSM.unitsize>=30&&"Floor"!==a.resting.title&&a.FSM.NumberMaker.randomBoolean()?(a.falling=!0,a.yvel=a.FSM.unitsize*-.7,a.FSM.TimeHandler.addEvent(function(){a.falling=!1},42)):(a.nocollidesolid=!0,a.yvel=-2.1*a.FSM.unitsize,a.FSM.TimeHandler.addEvent(function(){a.nocollidesolid=!1},42)),a.resting=void 0,!1):!1:!0},b.prototype.animateBlooperUnsqueezing=function(a){a.counter=0,a.squeeze=0,a.FSM.removeClass(a,"squeeze"),a.FSM.setHeight(a,12,!0,!0)},b.prototype.animatePodobooJumpUp=function(a){a.starty=a.top,a.yvel=-1*a.speed,a.FSM.TimeHandler.addEvent(a.FSM.animatePodobooJumpDown,a.jumpHeight,a)},b.prototype.animatePodobooJumpDown=function(a){a.movement=a.FSM.movePodobooFalling},b.prototype.animateLakituThrowingSpiny=function(a){return a.fleeing||!a.FSM.isThingAlive(a)?!0:(a.FSM.switchClass(a,"out","hiding"),void a.FSM.TimeHandler.addEvent(function(){if(!a.dead){var b=a.FSM.addThing("SpinyEgg",a.left,a.top);b.yvel=-2.1*a.FSM.unitsize,a.FSM.switchClass(a,"hiding","out")}},21))},b.prototype.animateSpinyEggHatching=function(a){if(a.FSM.isThingAlive(a)){var b=a.FSM.addThing("Spiny",a.left,a.top-a.yvel);b.moveleft=a.FSM.objectToLeft(a.FSM.player,b),a.FSM.killNormal(a)}},b.prototype.animateFireballEmerge=function(a){a.FSM.AudioPlayer.play("Fireball")},b.prototype.animateFireballExplode=function(a,b){if(a.nocollide=!0,a.FSM.killNormal(a),2!==b){var c=a.FSM.addThing("Firework");a.FSM.setMidXObj(c,a),a.FSM.setMidYObj(c,a),c.animate(c)}},b.prototype.animateFirework=function(a){var b,c=a.className+" n";for(b=0;3>b;b+=1)a.FSM.TimeHandler.addEvent(function(b){a.FSM.setClass(a,c+String(b+1))},7*b,b);a.FSM.AudioPlayer.play("Firework"),a.FSM.TimeHandler.addEvent(function(){a.FSM.killNormal(a)},7*b)},b.prototype.animateEndLevelFireworks=function(a,b,c){var d,e,f=b.left,g=f-8*a.FSM.unitsize,h=b.bottom,i=h-16*a.FSM.unitsize,j=a.FSM.ObjectMaker.make("CastleFlag",{position:"beginning"}),k=28,l=28,m=[[0,-48],[-8,-40],[8,-40],[-8,-32],[0,-48],[-8,-40]],n=0;a.FSM.addThing(j,g+a.FSM.unitsize,i-24*a.FSM.unitsize),a.FSM.arrayToBeginning(j,a.FSM.GroupHolder.getGroup(j.groupType)),a.FSM.TimeHandler.addEventInterval(function(){a.FSM.shiftVert(j,a.FSM.unitsize*-.25)},1,k),c>0&&a.FSM.TimeHandler.addEventInterval(function(){e=m[n],d=a.FSM.addThing("Firework",a.left+e[0]*a.FSM.unitsize,a.top+e[1]*a.FSM.unitsize),d.animate(d),n+=1},l,c),a.FSM.TimeHandler.addEvent(function(){a.FSM.AudioPlayer.addEventImmediate("Stage Clear","ended",function(){a.FSM.collideLevelTransport(a,b)})},n*l+120)},b.prototype.animateCannonFiring=function(a){if(a.FSM.isThingAlive(a)&&!(a.FSM.player.right>a.left-8*a.FSM.unitsize&&a.FSM.player.left<a.right+8*a.FSM.unitsize)){var b=a.FSM.ObjectMaker.make("BulletBill");a.FSM.objectToLeft(a.FSM.player,a)?(b.direction=b.moveleft=!0,b.xvel*=-1,a.FSM.flipHoriz(b),a.FSM.addThing(b,a.left,a.top)):a.FSM.addThing(b,a.left+a.width,a.top),a.FSM.AudioPlayer.playLocal("Bump",a.right)}},b.prototype.animatePlayerFire=function(a){if(!(a.numballs>=2)){var b=a.moveleft?a.left-a.FSM.unitsize/4:a.right+a.FSM.unitsize/4,c=a.FSM.ObjectMaker.make("Fireball",{moveleft:a.moveleft,speed:1.75*a.FSM.unitsize,jumpheight:1.56*a.FSM.unitsize,gravity:1.56*a.FSM.MapScreener.gravity,yvel:a.FSM.unitsize,movement:a.FSM.moveJumping});a.FSM.addThing(c,b,a.top+8*a.FSM.unitsize),c.animate(c),c.onDelete=function(){a.numballs-=1},a.numballs+=1,a.FSM.addClass(a,"firing"),a.FSM.TimeHandler.addEvent(function(){a.FSM.removeClass(a,"firing")},7)}},b.prototype.animateCastleBlock=function(a,b){var c,d=Math.cos(a.angle*Math.PI)*a.FSM.unitsize*4,e=Math.sin(a.angle*Math.PI)*a.FSM.unitsize*4;for(c=0;c<b.length;c+=1)a.FSM.setMidX(b[c],a.left+d*c),a.FSM.setMidY(b[c],a.top+e*c);a.angle+=a.dt*a.direction},b.prototype.animateCastleBridgeOpen=function(a){a.FSM.TimeHandler.addEvent(function(){a.FSM.TimeHandler.addEventInterval(function(){return a.right-=2*a.FSM.unitsize,a.FSM.setWidth(a,a.width-2),a.FSM.AudioPlayer.play("Break Block"),a.width<=0?(a.FSM.AudioPlayer.play("Bowser Falls"),!0):!1},1,1/0)},7)},b.prototype.animateCastleChainOpen=function(a){a.FSM.TimeHandler.addEvent(a.FSM.killNormal,7,a)},b.prototype.animatePlayerPaddling=function(a){a.paddlingCycle||(a.FSM.removeClasses(a,"skidding paddle1 paddle2 paddle3 paddle4 paddle5"),a.FSM.addClass(a,"paddling"),a.FSM.TimeHandler.cancelClassCycle(a,"paddlingCycle"),a.FSM.TimeHandler.addClassCycle(a,["paddle1","paddle2","paddle3","paddle2","paddle1",function(){return a.paddlingCycle=!1}],"paddlingCycle",7)),a.paddling=a.paddlingCycle=a.swimming=!0,a.yvel=a.FSM.unitsize*-.84},b.prototype.animatePlayerLanding=function(a){a.crouching&&a.power>1&&a.FSM.setHeight(a,11,!0,!0),a.FSM.hasClass(a,"hopping")&&a.FSM.switchClass(a,"hopping","jumping"),a.FSM.MapScreener.underwater&&a.FSM.removeClass(a,"paddling"),a.FSM.ModAttacher.fireEvent("onPlayerLanding",a,a.resting)},b.prototype.animatePlayerRestingOff=function(a){a.resting=void 0,a.FSM.MapScreener.underwater&&a.FSM.switchClass(a,"running","paddling")},b.prototype.animatePlayerBubbling=function(a){a.FSM.addThing("Bubble",a.right,a.top)},b.prototype.animatePlayerRunningCycle=function(a){a.FSM.switchClass(a,"still","running"),a.running=a.FSM.TimeHandler.addClassCycle(a,["one","two","three","two"],"running",function(b){b.timeout=5+Math.ceil(a.maxspeedsave-Math.abs(a.xvel))})},b.prototype.animateCharacterHop=function(a){a.resting=void 0,a.yvel=-1.4*a.FSM.unitsize},b.prototype.animatePlayerPipingStart=function(a){a.nocollide=a.nofall=a.piping=!0,a.xvel=a.yvel=0,a.movementOld=a.movement,a.movement=void 0,a.power>1?(a.FSM.animatePlayerRemoveCrouch(a),a.FSM.setPlayerSizeLarge(a)):a.FSM.setPlayerSizeSmall(a),a.FSM.removeClasses(a,"jumping running crouching"),a.FSM.AudioPlayer.clearTheme(),a.FSM.TimeHandler.cancelAllCycles(a),a.FSM.GroupHolder.switchObjectGroup(a,"Character","Scenery")},b.prototype.animatePlayerPipingEnd=function(a){a.movement=a.movementOld,a.nocollide=a.nofall=a.piping=!1,a.FSM.AudioPlayer.resumeTheme(),a.FSM.GroupHolder.switchObjectGroup(a,"Scenery","Character")},b.prototype.animatePlayerOffPole=function(a,b){a.FSM.removeClasses(a,"climbing running"),a.FSM.addClass(a,"jumping"),a.xvel=1.4,a.yvel=-.7,a.nocollide=a.nofall=!1,a.gravity=a.FSM.MapScreener.gravity/14,a.FSM.TimeHandler.addEvent(function(){a.movement=a.FSM.movePlayer,a.gravity=a.FSM.MapScreener.gravity,a.FSM.unflipHoriz(a),b&&a.FSM.animatePlayerRunningCycle(a)},21)},b.prototype.animatePlayerOffVine=function(a){a.FSM.flipHoriz(a),a.FSM.shiftHoriz(a,(a.width-1)*a.FSM.unitsize),a.FSM.TimeHandler.addEvent(a.FSM.animatePlayerOffPole,14,a)},b.prototype.lookTowardsThing=function(a,b){b.right<=a.left?(a.lookleft=!0,a.moveleft=!0,a.FSM.unflipHoriz(a)):b.left>=a.right&&(a.lookleft=!1,a.moveleft=!1,a.FSM.flipHoriz(a))},b.prototype.lookTowardsPlayer=function(a,b){a.FSM.player.right<=a.left?(!a.lookleft||b)&&(a.lookleft=!0,a.moveleft=!1,a.FSM.unflipHoriz(a)):a.FSM.player.left>=a.right&&(a.lookleft||b)&&(a.lookleft=!1,a.moveleft=!0,a.FSM.flipHoriz(a))},b.prototype.killNormal=function(a){a&&(a.hidden=a.dead=!0,a.alive=!1,a.numquads=0,a.movement=void 0,this.hasOwnProperty("resting")&&(a.resting=void 0),a.FSM&&a.FSM.TimeHandler.cancelAllCycles(a),a.FSM.ModAttacher.fireEvent("onKillNormal",a))},b.prototype.killFlip=function(a,b){void 0===b&&(b=0),a.FSM.flipVert(a),a.bottomBump&&(a.bottomBump=void 0),a.nocollide=a.dead=!0,a.speed=a.xvel=0,a.nofall=!1,a.resting=a.movement=void 0,a.yvel=-a.FSM.unitsize,a.FSM.TimeHandler.addEvent(a.FSM.killNormal,70+b,a)},b.prototype.killSpawn=function(a,b){if(b)return void a.FSM.killNormal(a);if(!a.spawnType)throw new Error("Thing "+a.title+" has no .spawnType.");var c=a.FSM.ObjectMaker.make(a.spawnType,a.spawnSettings||{});return a.FSM.addThing(c),a.FSM.setBottom(c,a.bottom),a.FSM.setMidXObj(c,a),a.FSM.killNormal(a),c},b.prototype.killReplace=function(a,b,c,d){var e,f;if("undefined"==typeof c&&(c={}),"undefined"!=typeof d)for(f=0;f<d.length;f+=1)c[d[f]]=a[d[f]];return e=a.FSM.ObjectMaker.make(b,c),a.flipHoriz&&a.FSM.flipHoriz(e),a.flipVert&&a.FSM.flipVert(e),a.FSM.addThing(e,a.left,a.top),a.FSM.killNormal(a),e},b.prototype.killGoomba=function(a,b){return b?void a.FSM.killFlip(a):void a.FSM.killSpawn(a)},b.prototype.killKoopa=function(a,b){var c;return a.jumping||a.floating?(c=a.FSM.killReplace(a,"Koopa",void 0,["smart","direction","moveleft"]),c.xvel=c.moveleft?-c.speed:c.speed):c=a.FSM.killToShell(a,Number(b)),c},b.prototype.killLakitu=function(a){var b,c=a.FSM.GroupHolder.getGroup("Character");for(a.FSM.killFlip(a),a.FSM.MapScreener.lakitu=void 0,b=0;b<c.length;b+=1)if("Lakitu"===c[b].title)return void(a.FSM.MapScreener.lakitu=c[b]);a.FSM.TimeHandler.addEvent(a.FSM.addThing.bind(a.FSM),350,"Lakitu",a.FSM.MapScreener.right,a.top)},b.prototype.killBowser=function(a,b){return b?(a.nofall=!1,a.movement=void 0,void a.FSM.killFlip(a.FSM.killSpawn(a))):(a.deathcount+=1,void(5===a.deathcount&&(a.yvel=a.speed=0,a.movement=void 0,a.FSM.killFlip(a.FSM.killSpawn(a),350),a.FSM.scoreOn(5e3,a))))},b.prototype.killToShell=function(a,b){var c,d,e;return a.spawnSettings={smart:a.smart},a.spawnType=b&&2!==b?a.title:a.shelltype||"Shell",a.spawnSettings={smart:a.smart},c=a.FSM.killSpawn(a),d=c.nocollidechar,e=c.nocollideplayer,c.nocollidechar=!0,c.nocollideplayer=!0,a.FSM.TimeHandler.addEvent(function(){c.nocollidechar=d,c.nocollideplayer=e},7),a.FSM.killNormal(a),2===b&&a.FSM.killFlip(c),c},b.prototype.killNPCs=function(){var a,c,d,e,f=b.prototype.ensureCorrectCaller(this);for(a=f.GroupHolder.getGroup("Character"),e=a.length-1;e>=0;--e)c=a[e],c.nokillend?c.killonend&&c.killonend(c):(c.FSM.killNormal(c),c.FSM.arrayDeleteThing(c,a,e));for(a=f.GroupHolder.getGroup("Solid"),e=a.length-1;e>=0;--e)d=a[e],d.killonend&&(d.killonend.constructor===Function?d.killonend(d,a,e):d.FSM.arrayDeleteThing(d,a,e))},b.prototype.killBrick=function(a,b){a.FSM.AudioPlayer.play("Break Block"),a.FSM.TimeHandler.addEvent(a.FSM.animateBrickShards,1,a),a.FSM.killNormal(a),a.up=b instanceof a.FSM.ObjectMaker.getFunction("Thing")?b:void 0},b.prototype.killPlayer=function(a,c){if(a.alive&&!a.flickering&&!a.dying){var d=a.FSM,e=a.FSM.MapsHandler.getArea();if(2===c)a.dead=a.dying=!0,a.alive=!1,d.MapScreener.notime=!0;else{if(!c&&a.power>1)return a.power=1,d.ItemsHolder.setItem("power",1),d.AudioPlayer.play("Power Down"),void d.playerGetsSmall(a);a.dying=!0,d.setSize(a,7.5,7,!0),d.updateSize(a),d.setClass(a,"character player dead"),d.thingPauseVelocity(a),d.arrayToEnd(a,d.GroupHolder.getGroup(a.groupType)),d.MapScreener.notime=!0,d.MapScreener.nokeys=!0,d.TimeHandler.cancelAllCycles(a),d.TimeHandler.addEvent(function(){d.thingResumeVelocity(a,!0),a.nocollide=!0,a.movement=a.resting=void 0,a.gravity=d.MapScreener.gravity/2.1,a.yvel=-1.4*b.unitsize},7)}a.nocollide=a.nomove=a.dead=!0,d.MapScreener.nokeys=!0,d.AudioPlayer.clearAll(),d.AudioPlayer.play("Player Dies"),d.ItemsHolder.decrease("lives"),d.ItemsHolder.setItem("power",1),d.ItemsHolder.getItem("lives")>0?d.TimeHandler.addEvent(e.onPlayerDeath.bind(d),e.onPlayerDeathTimeout,d):d.TimeHandler.addEvent(e.onGameOver.bind(d),e.onGameOverTimeout,d),window.parent.postMessage({event:"error"},"*")}},b.prototype.findScore=function(a){var c=b.prototype.ensureCorrectCaller(this);return a<c.pointLevels.length?c.pointLevels[a]:(c.gainLife(1),0)},b.prototype.score=function(a,c){if(a){var d=b.prototype.ensureCorrectCaller(this);d.scoreOn(a,d.player,!0),c||this.ItemsHolder.increase("score",a)}},b.prototype.scoreOn=function(a,b,c){if(a){var d=b.FSM.addThing("Text"+a);b.FSM.scoreAnimateOn(d,b),c||this.ItemsHolder.increase("score",a),b.FSM.ModAttacher.fireEvent("onScoreOn",a,b,c)}},b.prototype.scoreAnimateOn=function(a,b){b.FSM.setMidXObj(a,b),b.FSM.setBottom(a,b.top),b.FSM.scoreAnimate(a)},b.prototype.scoreAnimate=function(a,b){void 0===b&&(b=28),a.FSM.TimeHandler.addEventInterval(a.FSM.shiftVert,1,b,a,-a.FSM.unitsize/6),a.FSM.TimeHandler.addEvent(a.FSM.killNormal,b,a)},b.prototype.scorePlayerShell=function(a,b){return a.star?void a.FSM.scoreOn(200,b):b.resting?b.peeking?void a.FSM.scoreOn(1e3,b):a.jumpcount?void a.FSM.scoreOn(500,b):void a.FSM.scoreOn(400,b):void a.FSM.scoreOn(8e3,b)},b.prototype.scorePlayerFlag=function(a,b){var c;return c=28>b?8>b?100:400:40>b?800:62>b?2e3:5e3},b.prototype.getVolumeLocal=function(a,b){return b>a.MapScreener.right?0:Math.max(.14,Math.min(.84,(a.MapScreener.width-Math.abs(b-a.player.left))/a.MapScreener.width))},b.prototype.getAudioThemeDefault=function(a){return a.MapsHandler.getArea().setting.split(" ")[0]},b.prototype.setMap=function(a,c){var d,e,f=b.prototype.ensureCorrectCaller(this);("undefined"==typeof a||a.constructor===b)&&(a=f.MapsHandler.getMapName()),e=f.MapsHandler.setMap(a),f.ModAttacher.fireEvent("onPreSetMap",e),e.seed&&f.NumberMaker.resetFromSeed(e.seed),f.ItemsHolder.setItem("world",a),f.InputWriter.restartHistory(),f.ModAttacher.fireEvent("onSetMap",e),f.setLocation(c||e.locationDefault||f.settings.maps.locationDefault),d=f.MapsHandler.getArea().time||f.MapsHandler.getMap().time,f.ItemsHolder.setItem("time",Number(d)),"1-2"===a&&f.gameEnd()},b.prototype.setLocation=function(a){void 0===a&&(a=0);var c,d=b.prototype.ensureCorrectCaller(this);d.MapScreener.nokeys=!1,d.MapScreener.notime=!1,d.MapScreener.canscroll=!0,d.MapScreener.clearScreen(),d.GroupHolder.clearArrays(),d.TimeHandler.cancelAllEvents(),d.MapsHandler.setLocation((a||0).toString()),d.MapScreener.setVariables(),c=d.MapsHandler.getLocation((a||0).toString()),d.ModAttacher.fireEvent("onPreSetLocation",c),d.PixelDrawer.setBackground(d.MapsHandler.getArea().background),d.TimeHandler.addEventInterval(d.maintainTime,25,1/0,d),d.TimeHandler.addEventInterval(d.maintainScenery,350,1/0,d),d.AudioPlayer.clearAll(),d.AudioPlayer.playTheme(),d.QuadsKeeper.resetQuadrants(),c.entry(d,c),d.ModAttacher.fireEvent("onSetLocation",c),d.GamesRunner.play()},b.prototype.mapEntranceNormal=function(a,b){b&&b.xloc&&a.scrollWindow(b.xloc*a.unitsize),a.addPlayer(16*a.unitsize,16*a.unitsize)},b.prototype.mapEntrancePlain=function(a,b){b&&b.xloc&&a.scrollWindow(b.xloc*a.unitsize),a.addPlayer(16*a.unitsize,a.MapScreener.floor*a.unitsize)},b.prototype.mapEntranceWalking=function(a,b){a.mapEntrancePlain(a,b),a.player.keys.run=1,a.player.maxspeed=a.player.walkspeed,a.MapScreener.nokeys=!0,a.MapScreener.notime=!0},b.prototype.mapEntranceCastle=function(a){a.addPlayer(2*a.unitsize,56*a.unitsize)},b.prototype.mapEntranceVine=function(a){var b=a.MapScreener.bottom-40*a.unitsize,c=a.addThing("Vine",32*a.unitsize,a.MapScreener.bottom+8*a.unitsize);a.TimeHandler.addEventInterval(function(){return c.top>=b?!1:(c.movement=void 0,a.mapEntranceVinePlayer(a,c),!0)},1,1/0)},b.prototype.mapEntranceVinePlayer=function(a,b){var c=a.MapScreener.bottom-24*a.unitsize,d=a.unitsize/-4,e=a.addPlayer(29*a.unitsize,a.MapScreener.bottom-4*a.unitsize);a.shiftVert(e,e.height*a.unitsize),a.collideVine(e,b),a.TimeHandler.addEventInterval(function(){return a.shiftVert(e,d),e.top<c?(a.TimeHandler.addEvent(a.animatePlayerOffVine,49,e),!0):!1},1,1/0)},b.prototype.mapEntrancePipeVertical=function(a,b){b&&b.xloc&&a.scrollWindow(b.xloc*a.unitsize),a.addPlayer(b.entrance.left+a.player.width*a.unitsize/2,b.entrance.top+a.player.height*a.unitsize),a.animatePlayerPipingStart(a.player),a.AudioPlayer.play("Pipe"),a.TimeHandler.addEventInterval(function(){return a.shiftVert(a.player,a.unitsize/-4),a.player.bottom<=b.entrance.top?(a.animatePlayerPipingEnd(a.player),!0):!1},1,1/0)},b.prototype.mapEntrancePipeHorizontal=function(){throw new Error("mapEntrancePipeHorizontal is not yet implemented.")},b.prototype.mapEntranceRespawn=function(a){a.MapScreener.nokeys=!1,a.MapScreener.notime=!1,a.MapScreener.canscroll=!0,a.addPlayer(16*a.unitsize,0),a.animateFlicker(a.player),a.MapScreener.underwater||a.playerAddRestingStone(a.player),a.ModAttacher.fireEvent("onPlayerRespawn")},b.prototype.mapExitPipeVertical=function(a,b){!a.resting||"undefined"==typeof b.transport||a.right+2*a.FSM.unitsize>b.right||a.left-2*a.FSM.unitsize<b.left||(a.FSM.animatePlayerPipingStart(a),a.FSM.AudioPlayer.play("Pipe"),a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.shiftVert(a,a.FSM.unitsize/4),a.top<=b.top?!1:(a.FSM.TimeHandler.addEvent(function(){b.transport.constructor===Object?a.FSM.setMap(b.transport.map):a.FSM.setLocation(b.transport)},42),!0)},1,1/0))},b.prototype.mapExitPipeHorizontal=function(a,b,c){(c||a.resting||a.paddling)&&(a.top<b.top||a.bottom>b.bottom||a.keys.run&&(a.FSM.animatePlayerPipingStart(a),a.FSM.AudioPlayer.play("Pipe"),a.FSM.TimeHandler.addEventInterval(function(){return a.FSM.shiftHoriz(a,a.FSM.unitsize/4),a.left<=b.left?!1:(a.FSM.TimeHandler.addEvent(function(){a.FSM.setLocation(b.transport)},42),!0)},1,1/0)))},b.prototype.initializeArea=function(){var a,c=this;if(c.attributes)for(a in c.attributes)c.hasOwnProperty(a)&&c[a]&&b.prototype.proliferate(c,c.attributes[a]);c.setBackground(c)},b.prototype.setAreaBackground=function(a){a.background=-1!==a.setting.indexOf("Underwater")||-1===a.setting.indexOf("Underworld")&&-1===a.setting.indexOf("Castle")&&-1===a.setting.indexOf("Night")?"#5c94fc":"#000000"},b.prototype.getAbsoluteHeight=function(a,c){var d=b.prototype.ensureCorrectCaller(this),e=a+d.MapScreener.height;return c||(e*=d.unitsize),e},b.prototype.mapAddStretched=function(a){var c=b.prototype.ensureCorrectCaller(this),d=c.MapsHandler.getArea().boundaries,e=(c.MapScreener.floor-a.y)*c.unitsize,f=c.ObjectMaker.make(a.thing,{width:d.right-d.left,height:a.height||c.getAbsoluteHeight(a.y)});return c.addThing(f,d.left,e)},b.prototype.mapAddAfter=function(a){var c=b.prototype.ensureCorrectCaller(this),d=c.MapsCreator,e=c.MapsHandler,f=e.getPreThings(),g=e.getArea(),h=e.getMap(),i=c.MapsHandler.getArea().boundaries;a.x=i.right,d.analyzePreSwitch(a,f,g,h)},b.prototype.macroExample=function(a,b,c,d,e){console.log("This is a macro that may be called by a map creation."),console.log("The arguments are:\n"),console.log("Reference (the listing from area.creation):  ",a),console.log("Prethings (the area's listing of prethings): ",b),console.log("Area      (the currently generated area):    ",c),console.log("Map       (the map containing the area):     ",d),console.log("Scope     (the custom scope container):      ",e)},b.prototype.macroFillPreThings=function(a,c,d,e,f){var g,h,i,j,k=f.ObjectMaker.getFullPropertiesOf(a.thing),l=a.xnum||1,m=a.ynum||1,n=a.xwidth||k.width,o=a.yheight||k.height,p=a.x||0,q=a.y||0,r=[],s=0;for(i=0;l>i;++i){for(h=q,j=0;m>j;++j)g={x:p,y:h,macro:void 0},r.push(b.prototype.proliferate(g,a,!0)),s+=1,h+=o;p+=n}return r},b.prototype.macroFillPrePattern=function(a,b,c,d,e){if(!e.settings.maps.patterns[a.pattern])return void console.warn("An unknown pattern is referenced: "+a);var f,g,h,i,j=e.settings.maps.patterns[a.pattern],k=j.length,l=e.ObjectMaker.getFullProperties(),m=a.repeat||1,n=a.x||0,o=a.y||0,p=[],q=0,r={};if("undefined"!=typeof a.skips)for(h=0;h<a.skips.length;h+=1)r[a.skips[h]]=!0;for(h=0;m>h;h+=1){for(i=0;k>i;i+=1)r[i]||(f=j[i],g={thing:f[0],x:n+f[1],y:o+f[2]},g.y+=l[f[0]].height,f[3]&&(g.width=f[3]),p.push(g),q+=1);n+=j.width}return p},b.prototype.macroFloor=function(a){var c=a.x||0,d=a.y||0,e=b.prototype.proliferate({thing:"Floor",x:c,y:d,width:a.width||8,height:"Infinity"},a,!0);return e.macro=void 0,e},b.prototype.macroPipe=function(a,c,d,e,f){var g=a.x||0,h=a.y||0,i=a.height||16,j=b.prototype.proliferate({thing:"Pipe",x:g,y:h,width:16,height:a.height||8},a,!0),k=[j];return j.macro=void 0,"Infinity"===i?j.height=f.MapScreener.height:j.y+=i,a.piranha&&k.push({thing:"Piranha",x:g+4,y:j.y+12,onPipe:!0}),k},b.prototype.macroPipeCorner=function(a){var b=a.x||0,c=a.y||0,d=a.height||16,e=[{thing:"PipeHorizontal",x:b,y:c,transport:a.transport||0},{thing:"PipeVertical",x:b+16,y:c+d-16,height:d}];return a.scrollEnabler&&e.push({thing:"ScrollEnabler",x:b+16,y:c+d+48,height:64,width:16}),a.scrollBlocker&&e.push({thing:"ScrollBlocker",x:b+32}),e},b.prototype.macroTree=function(a){var b=a.x||0,c=a.y||0,d=a.width||24,e=[{
thing:"TreeTop",x:b,y:c,width:d}];return d>16&&e.push({thing:"TreeTrunk",x:b+8,y:c-8,width:d-16,height:"Infinity",groupType:a.solidTrunk?"Solid":"Scenery"}),e},b.prototype.macroShroom=function(a){var b=a.x||0,c=a.y||0,d=a.width||24,e=[{thing:"ShroomTop",x:b,y:c,width:d}];return d>16&&e.push({thing:"ShroomTrunk",x:b+(d-8)/2,y:c-8,height:1/0,groupType:a.solidTrunk?"Solid":"Scenery"}),e},b.prototype.macroWater=function(a){var c=a.x||0,d=(a.y||0)+2,e=b.prototype.proliferate({thing:"Water",x:c,y:d,height:"Infinity",macro:void 0},a,!0);return e},b.prototype.macroCeiling=function(a){return{macro:"Fill",thing:"Brick",x:a.x,y:88,xnum:a.width/8|0,xwidth:8}},b.prototype.macroBridge=function(a){var b=a.x||0,c=a.y||0,d=Math.max(a.width||0,16),e=[];return a.begin&&(d-=8,e.push({thing:"Stone",x:b,y:c,height:"Infinity"}),b+=8),a.end&&(d-=8,e.push({thing:"Stone",x:b+d,y:c,height:"Infinity"})),e.push({thing:"BridgeBase",x:b,y:c,width:d}),e.push({thing:"Railing",x:b,y:c+4,width:d}),e},b.prototype.macroScale=function(a,b,c,d,e){var f=a.x||0,g=a.y||0,h=e.unitsize,i=a.widthLeft||24,j=a.widthRight||24,k=a.between||40,l=a.dropLeft||24,m=a.dropRight||24,n="ScaleCollection--"+[f,g,i,j,l,m].join(","),o={thing:"String",x:f,y:g-4,height:l-4,collectionName:n,collectionKey:"stringLeft"},p={thing:"String",x:f+k,y:g-4,height:m-4,collectionName:n,collectionKey:"stringRight"},q={thing:"String",x:f+4,y:g,width:k-7,collectionName:n,collectionKey:"stringMiddle"},r={thing:"StringCornerLeft",x:f,y:g},s={thing:"StringCornerRight",x:f+k-4,y:g},t={thing:"Platform",x:f-i/2,y:g-l,width:i,inScale:!0,tension:(l-1.5)*h,onThingAdd:e.spawnScalePlatform,collectionName:n,collectionKey:"platformLeft"},u={thing:"Platform",x:f+k-j/2,y:g-m,width:j,inScale:!0,tension:(m-1.5)*h,onThingAdd:e.spawnScalePlatform,collectionName:n,collectionKey:"platformRight"};return[o,p,q,r,s,t,u]},b.prototype.macroPlatformGenerator=function(a,b,c,d,e){var f,g=[],h=a.direction||1,i=h>0?[0,48]:[8,56],j=a.width||16,k=a.x||0,l=h*e.unitsize*.42;for(f=0;f<i.length;f+=1)g.push({thing:"Platform",x:k,y:i[f],width:j,yvel:l,movement:e.movePlatformSpawn});return g.push({thing:"PlatformString",x:k+j/2-.5,y:e.MapScreener.floor,width:1,height:e.MapScreener.height/e.unitsize}),g},b.prototype.macroWarpWorld=function(a,b,c,d,e){var f,g=[],h=a.x||0,i=a.y||0,j=a.hasOwnProperty("textHeight")?a.textHeight:8,k=a.warps,l="WarpWorldCollection-"+k.join("."),m=[];for(g.push({thing:"CustomText",x:h+8,y:i+j+56,texts:[{text:"WELCOME TO WARP WORLD!"}],textAttributes:{hidden:!0},collectionName:l,collectionKey:"Welcomer"}),g.push({thing:"DetectCollision",x:h+64,y:i+174,width:40,height:102,activate:e.activateWarpWorld,collectionName:l,collectionKey:"Detector"}),f=0;f<k.length;f+=1)m.push(f),g.push({macro:"Pipe",x:h+8+32*f,height:24,transport:{map:k[f]+"-1"},collectionName:l,collectionKey:f+"-Pipe"}),g.push({thing:"Piranha",x:h+12+32*f,y:i+36,collectionName:l,collectionKey:f+"-Piranha"}),g.push({thing:"CustomText",x:h+14+32*f,y:i+32+j,texts:[{text:String(k[f])}],textAttributes:{hidden:!0},collectionName:l,collectionKey:f+"-Text"});if(1===k.length)for(f=2;f<g.length;f+=1)g[f].x+=32;return g},b.prototype.macroCheepsStart=function(a,b,c,d,e){return{thing:"DetectCollision",x:a.x||0,y:e.MapScreener.floor,width:a.width||8,height:e.MapScreener.height/e.unitsize,activate:e.activateCheepsStart}},b.prototype.macroCheepsStop=function(a,b,c,d,e){return{thing:"DetectCollision",x:a.x||0,y:e.MapScreener.floor,width:a.width||8,height:e.MapScreener.height/e.unitsize,activate:e.activateCheepsStop}},b.prototype.macroBulletBillsStart=function(a,b,c,d,e){return{thing:"DetectCollision",x:a.x||0,y:e.MapScreener.floor,width:a.width||8,height:e.MapScreener.height/e.unitsize,activate:e.activateBulletBillsStart}},b.prototype.macroBulletBillsStop=function(a,b,c,d,e){return{thing:"DetectCollision",x:a.x||0,y:e.MapScreener.floor,width:a.width||8,height:e.MapScreener.height/e.unitsize,activate:e.activateBulletBillsStop}},b.prototype.macroLakituStop=function(a,b,c,d,e){return{thing:"DetectCollision",x:a.x||0,y:e.MapScreener.floor,width:a.width||8,height:e.MapScreener.height/e.unitsize,activate:e.activateLakituStop}},b.prototype.macroCastleSmall=function(a){var c,d,e=[],f=a.x||0,g=a.y||0;for(c=0;2>c;c+=1)for(e.push({thing:"BrickHalf",x:f+8*c,y:g+4,position:"end"}),d=1;3>d;d+=1)e.push({thing:"BrickPlain",x:f+8*c,y:g+4+8*d,position:"end"});for(c=0;2>c;c+=1)for(e.push({thing:"BrickHalf",x:f+24+8*c,y:g+4,position:"end"}),d=1;3>d;d+=1)e.push({thing:"BrickPlain",x:f+24+8*c,y:g+4+8*d,position:"end"});for(e.push({thing:"CastleRailing",x:f,y:g+24,position:"end"}),c=0;3>c;c+=1)e.push({thing:"CastleRailingFilled",x:f+8*(c+1),y:g+24,position:"end"});for(e.push({thing:"CastleRailing",x:f+32,y:g+24,position:"end"}),c=0;3>c;c+=1)e.push({thing:"CastleRailing",x:f+8*(c+1),y:g+40,position:"end"});for(c=0;2>c;c+=1)e.push({thing:"CastleTop",x:f+8+12*c,y:g+36,position:"end"});return e.push({thing:"CastleDoor",x:f+16,y:g+20,position:"end"}),a.transport&&e.push({thing:"DetectCollision",x:f+24,y:g+16,height:16,activate:b.prototype.collideCastleDoor,transport:a.transport,position:"end"}),e},b.prototype.macroCastleLarge=function(a){var c,d,e=[],f=a.x||0,g=a.y||0;for(e.push({macro:"CastleSmall",x:f+16,y:g+48}),c=0;2>c;c+=1)e.push({thing:"CastleWall",x:f+8*c,y:g+48});for(c=0;3>c;c+=1)for(e.push({thing:"CastleDoor",x:f+16+16*c,y:g+20,position:"end"}),d=0;2>d;d+=1)e.push({thing:"BrickPlain",x:f+16+16*c,y:g+28+8*d}),e.push({thing:"BrickHalf",x:f+16+16*c,y:g+40+4*d});for(c=0;2>c;c+=1){for(d=0;3>d;d+=1)e.push({thing:"BrickPlain",x:f+24+16*c,y:g+8+8*d});e.push({thing:"CastleDoor",x:f+24+16*c,y:g+44})}for(c=0;5>c;c+=1)e.push({thing:"CastleRailingFilled",x:f+16+8*c,y:g+48});for(d=a.hasOwnProperty("walls")?a.walls:2,c=0;d>c;c+=1)e.push({thing:"CastleWall",x:f+56+8*c,y:g+48,position:"end"});return a.transport&&e.push({thing:"DetectCollision",x:f+24,y:g+16,height:16,activate:b.prototype.collideCastleDoor,transport:a.transport,position:"end"}),e},b.prototype.macroStartInsideCastle=function(a){var b=a.x||0,c=a.y||0,d=(a.width||0)-40,e=[{thing:"Stone",x:b,y:c+48,width:24,height:1/0},{thing:"Stone",x:b+24,y:c+40,width:8,height:1/0},{thing:"Stone",x:b+32,y:c+32,width:8,height:1/0}];return d>0&&e.push({macro:"Floor",x:b+40,y:c+24,width:d}),e},b.prototype.macroEndOutsideCastle=function(a){var c,d=a.x||0,e=a.y||0,f="EndOutsideCastle-"+[a.x,a.y,a.large].join(",");return c=[{thing:"DetectCollision",x:d,y:e+108,height:100,activate:b.prototype.collideFlagpole,activateFail:b.prototype.killNormal,noActivateDeath:!0,collectionName:f,collectionKey:"DetectCollision"},{thing:"Flag",x:d-4.5,y:e+79.5,collectionName:f,collectionKey:"Flag"},{thing:"FlagTop",x:d+1.5,y:e+84,collectionName:f,collectionKey:"FlagTop"},{thing:"FlagPole",x:d+3,y:e+80,collectionName:f,collectionKey:"FlagPole"},{thing:"Stone",x:d,y:e+8,collectionName:f,collectionKey:"FlagPole"}],c.push(a.large?{macro:"CastleLarge",x:d+(a.castleDistance||24),y:e,transport:a.transport,walls:a.walls||8}:{macro:"CastleSmall",x:d+(a.castleDistance||32),y:e,transport:a.transport}),c},b.prototype.macroEndInsideCastle=function(a,b,c,d,e){var f,g,h,i=a.x||0,j=a.y||0,k=a.npc||"Toad";return"Toad"===k?(h=["1","2"],g=[{thing:"CustomText",x:i+164,y:j+64,texts:[{text:"THANK YOU MARIO!"}],textAttributes:{hidden:!0},collectionName:"endInsideCastleText",collectionKey:"1"},{thing:"CustomText",x:i+152,y:j+48,texts:[{text:"BUT OUR PRINCESS IS IN"},{text:"ANOTHER CASTLE!"}],textAttributes:{hidden:!0},collectionName:"endInsideCastleText",collectionKey:"2"}]):"Peach"===k&&(h=["1","2","3"],g=[{thing:"CustomText",x:i+164,y:j+64,texts:[{text:"THANK YOU MARIO!"}],textAttributes:{hidden:!0},collectionName:"endInsideCastleText",collectionKey:"1"},{thing:"CustomText",x:i+152,y:j+48,texts:[{text:"YOUR QUEST IS OVER.",offset:12},{text:"WE PRESENT YOU A NEW QUEST."}],textAttributes:{hidden:!0},collectionName:"endInsideCastleText",collectionKey:"2"},{thing:"CustomText",x:i+152,y:32,texts:[{text:"PRESS BUTTON B",offset:8},{text:"TO SELECT A WORLD"}],textAttributes:{hidden:!0},collectionName:"endInsideCastleText",collectionKey:"3"}]),f=[{thing:"Stone",x:i,y:j+88,width:256},{macro:"Water",x:i,y:j,width:104},{thing:"CastleBridge",x:i,y:j+24,width:104},{thing:"Bowser",x:i+69,y:j+42,hard:a.hard,spawnType:a.spawnType||"Goomba",throwing:a.throwing},{thing:"CastleChain",x:i+96,y:j+32},{thing:"CastleAxe",x:i+104,y:j+40},{thing:"ScrollBlocker",x:i+112},{macro:"Floor",x:i+104,y:j,width:152},{thing:"Stone",x:i+104,y:j+32,width:24,height:32},{thing:"Stone",x:i+112,y:j+80,width:16,height:24},{thing:"DetectCollision",x:i+180,activate:e.collideCastleNPC,transport:a.transport,collectionName:"endInsideCastleText",collectionKey:"npc",collectionKeys:h},{thing:k,x:i+200,y:13},{thing:"ScrollBlocker",x:i+256}],a.topScrollEnabler&&(f.push({thing:"ScrollEnabler",x:i+96,y:j+140,height:52,width:16}),f.push({thing:"ScrollEnabler",x:i+240,y:j+140,height:52,width:16})),f.push.apply(f,g),f},b.prototype.macroSection=function(a,b,c,d,e){return{thing:"DetectSpawn",x:a.x||0,y:a.y||0,activate:e.activateSectionBefore,section:a.section||0}},b.prototype.macroSectionPass=function(a){return{thing:"DetectCollision",x:a.x||0,y:a.y||0,width:a.width||8,height:a.height||8,activate:function(a){a.FSM.MapScreener.sectionPassed=!0}}},b.prototype.macroSectionFail=function(a){return[{thing:"DetectCollision",x:a.x,y:a.y,width:a.width||8,height:a.height||8,activate:function(a){a.FSM.MapScreener.sectionPassed=!1}}]},b.prototype.macroSectionDecider=function(a){return{thing:"DetectSpawn",x:a.x||0,y:a.y||0,activate:function(b){b.section=b.FSM.MapScreener.sectionPassed?a.pass||0:a.fail||0,b.FSM.activateSectionBefore(b)}}},b.prototype.ensureCorrectCaller=function(a){if(!(a instanceof b))throw new Error("A function requires the scope ('this') to be the manipulated FullScreenMario object. Unfortunately, 'this' is a "+typeof this+".");return a},b.settings={audio:void 0,collisions:void 0,editor:void 0,generator:void 0,groups:void 0,events:void 0,input:void 0,math:void 0,maps:void 0,mods:void 0,objects:void 0,quadrants:void 0,renderer:void 0,runner:void 0,scenes:void 0,sprites:void 0,statistics:void 0,touch:void 0,ui:void 0},b.unitsize=4,b.scale=2,b.gravity=Math.round(12*b.unitsize)/100,b.pointLevels=[100,200,400,500,800,1e3,2e3,4e3,5e3,8e3],b.customTextMappings={" ":"Space",".":"Period","!":"ExclamationMark",":":"Colon","/":"Slash","":"Copyright"},b}(GameStartr.GameStartr);a.FullScreenMario=b}(FullScreenMario||(FullScreenMario={})),FullScreenMario.FullScreenMario.settings.audio={directory:"Sounds",fileTypes:["mp3","ogg"],library:{Sounds:["Bowser Falls","Bowser Fires","Break Block","Bump","Coin","Ending","Fireball","Firework","Flagpole","Gain Life","Game Over 2","Game Over","Hurry","Jump Small","Jump Super","Kick","Level Complete","Player Dies","Pause","Pipe","Power Down","Powerup Appears","Powerup","Stage Clear","Vine Emerging","World Clear","You Dead"],Themes:["Castle","Overworld","Underwater","Underworld","Star","Sky","Hurry Castle","Hurry Overworld","Hurry Underwater","Hurry Underworld","Hurry Star","Hurry Sky"]}},FullScreenMario.FullScreenMario.settings.collisions={groupNames:["Solid","Character"],keyGroupName:"groupType",globalCheckGenerators:{Character:FullScreenMario.FullScreenMario.prototype.generateCanThingCollide,Solid:FullScreenMario.FullScreenMario.prototype.generateCanThingCollide},hitCheckGenerators:{Character:{Character:FullScreenMario.FullScreenMario.prototype.generateIsCharacterTouchingCharacter,Solid:FullScreenMario.FullScreenMario.prototype.generateIsCharacterTouchingSolid}},hitFunctionGenerators:{Character:{Solid:FullScreenMario.FullScreenMario.prototype.generateHitCharacterSolid,Character:FullScreenMario.FullScreenMario.prototype.generateHitCharacterCharacter}}},FullScreenMario.FullScreenMario.settings.editor=function(a,b){return{blocksize:4*FullScreenMario.FullScreenMario.unitsize,mapDefault:{name:"New Map",time:"Infinity",locations:[{entry:"Plain"}],areas:[{setting:"Overworld",creation:[{macro:"Floor",x:0,y:0,width:128}]}]},mapSettingDefault:"Overworld",mapEntryDefault:"Plain",prethings:a,thingGroups:["Text","Character","Solid","Scenery"],thingKeys:function(){var b=[];return Object.keys(a).forEach(function(c){b.push.apply(b,Object.keys(a[c]))}),b}(),macros:b}}({Characters:{Goomba:void 0,Koopa:{smart:"Boolean",jumping:"Boolean",flying:"Boolean"},Beetle:void 0,Piranha:{evil:"Boolean"},Blooper:void 0,CheepCheep:{smart:"Boolean"},Podoboo:void 0,Lakitu:void 0,HammerBro:void 0,Bowser:{contents:{type:"String",options:["Gooma","Koopa","HammerBro","Bowser"]}}},Items:{Mushroom:void 0,Mushroom1Up:void 0,MushroomDeathly:void 0,FireFlower:void 0,Star:void 0,Shell:{smart:"Boolean"},BeetleShell:void 0,Coin:void 0},Solids:{Block:{contents:{type:"String",options:["Coin","Mushroom","Star","Mushroom1Up","MushroomDeathly"]},hidden:"Boolean"},Brick:{contents:{type:"String",options:["","Coin","Mushroom","Star","Mushroom1Up","MushroomDeathly"]}},Pipe:{height:{type:"Number",value:8,mod:8,Infinite:!0}},PipeHorizontal:{width:{type:"Number",value:2,mod:8},transport:"Location"},PipeVertical:{height:{type:"Number",value:2,mod:8,Infinite:!0},transport:"Location"},Platform:{width:2},Stone:{width:1,height:{type:"Number",value:1,Infinite:!0}},Cannon:{height:1},Springboard:void 0,Floor:{width:8,height:{type:"Number",value:1/0,Infinite:!0}},CastleBlock:{fireballs:{value:0,mod:4}},CastleBridge:{width:8},Coral:{width:8,height:8}},Scenery:{BrickPlain:void 0,Bush1:void 0,Bush2:void 0,Bush3:void 0,Cloud1:void 0,Cloud2:void 0,Cloud3:void 0,Fence:{width:8},HillSmall:void 0,HillLarge:void 0,PlantSmall:void 0,PlantLarge:void 0,Railing:void 0,Water:void 0}},{Fill:{description:"Place a bunch of Things at once, as a grid.",options:{thing:"Everything",xnum:1,ynum:1,xwidth:8,yheight:8}},Pattern:{description:"Fill one of the preset Scenery background patterns.",options:{pattern:["BackRegular","BackCloud","BackFence","BackFenceMin","BackFenceMin2","BackFenceMin3"],repeat:"Number"}},Floor:{description:"Place a floor of infinite height.",options:{width:{type:"Number",value:8,mod:4}}},Pipe:{description:"Add a pipe with the option for piranhas and moving to locations.",options:{height:8,piranha:"Boolean",transport:"Location",entrance:"Location"}},Tree:{description:"Add a tree to the map.",options:{width:{type:"Number",value:4,mod:8}}},Shroom:{"function":"macroShroom",description:"Add a mushroom tree to the map.",options:{width:{type:"Number",value:4,mod:8}}},Scale:{"function":"macroScale",description:"Add two platforms suspended by string to the map.",options:{widthLeft:{type:"Number",value:6,mod:4},widthRight:{type:"Number",value:6,mod:4},between:{type:"Number",value:10,mod:4},dropLeft:{type:"Number",value:6,mod:4},dropRight:{type:"Number",value:6,mod:4}}},Water:{"function":"macroWater",description:"Fill water of infinite height.",options:{width:4}},CastleSmall:{description:"Add a one-story castle to the map."},CastleLarge:{description:"Add a two-story castle to the map."},Ceiling:{description:"Add an Underworld-style ceiling of Bricks.",options:{width:"Number"}},Bridge:{description:"Create a bridge, complete with stone columns.",options:{width:8,start:"Boolean",end:"Boolean"}},PlatformGenerator:{description:"Add a columnn of infinitely generated platforms.",options:{width:8,direction:{type:"Number",options:[1,-1]}}},StartInsideCastle:{description:"Add the castle stones similar to typical Castles.",options:{width:8}},EndOutsideCastle:{description:"End the map off with an outdoor flag and Castle.",options:{transport:"Location",large:"Boolean",castleDistance:{type:"Number",value:24,mod:1},walls:{type:"Number",value:2}}},EndInsideCastle:{description:"End the map off with an indoor bridge, Bowser, and Toad.",options:{transport:"Location",npc:{type:"String",options:["Toad","Peach"]},hard:"Boolean",spawnType:"Everything",throwing:"Boolean",topScrollEnabler:"Boolean"}}}),FullScreenMario.FullScreenMario.settings.events={keyOnClassCycleStart:"onThingAdd",keyDoClassCycleStart:"placed",keyCycleCheckValidity:"alive",timingDefault:9},FullScreenMario.FullScreenMario.settings.generator={possibilities:{Overworld:{height:80,width:2992,contents:{mode:"Certain",direction:"right",children:[{type:"Known",title:"ScrollEnabler"},{type:"Random",title:"OverworldStart"},{type:"Random",title:"OverworldBody"},{type:"Random",title:"OverworldEnd"}]}},OverworldStart:{width:112,height:80,contents:{mode:"Certain",direction:"top",spacing:-8,children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:112}},{type:"Random",title:"OverworldScenery"}]}},OverworldBody:{width:2480,height:80,contents:{mode:"Multiple",children:[{type:"Random",title:"OverworldRandomization"},{type:"Random",title:"OverworldClouds"}]}},OverworldRandomization:{width:2480,height:80,contents:{mode:"Repeat",direction:"right",children:[{type:"Random",title:"OverworldClump"},{type:"Random",title:"OverworldSegwaySpotty"},{type:"Random",title:"OverworldSegway"},{type:"Random",title:"OverworldSegwaySpotty"}]}},OverworldClump:{width:320,height:80,contents:{mode:"Random",direction:"right",children:[{percent:60,type:"Random",title:"OverworldClumpLand"},{percent:20,type:"Random",title:"OverworldClumpWater"},{percent:20,type:"Random",title:"OverworldClumpTrees"}]}},OverworldClumpLand:{width:160,height:80,contents:{mode:"Multiple",children:[{type:"Random",title:"OverworldScenery"},{type:"Random",title:"OverworldLandArea"}]}},OverworldLandArea:{width:160,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:160}},{type:"Random",title:"LandObstacleGroup"}]}},OverworldClumpWater:{width:320,height:80,contents:{mode:"Multiple",children:[{type:"Random",title:"Water",sizing:{height:8,width:320}},{type:"Random",title:"OverworldClumpWaterMain"}]}},OverworldClumpWaterMain:{width:320,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"OverworldClumpWaterContents"}]}},OverworldClumpWaterContents:{width:320,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"CheepsStart"},{type:"Random",title:"OverworldClumpWaterBridge"},{type:"Random",title:"CheepsStop"}]}},OverworldClumpWaterBridge:{width:320,height:8,contents:{mode:"Certain",direction:"top",spacing:24,children:[{type:"Known",title:"Bridge",sizing:{width:320},arguments:{macro:"Bridge",width:320,begin:!0,end:!0}},{type:"Random",title:"OverworldClumpWaterBridgeBlock"}]}},OverworldClumpWaterBridgeBlock:{width:320,height:8,contents:{mode:"Certain",direction:"right",spacing:{min:80,max:240,units:8},children:[{type:"Random",title:"Nothing"},{type:"Known",title:"Block",arguments:[{percent:70,values:{contents:"Mushroom"}},{percent:30,values:{contents:"Star"}}]}]}},OverworldClumpTrees:{width:320,height:80,contents:{mode:"Random",direction:"right",spacing:{min:0,max:24,units:8},children:[{percent:40,type:"Random",title:"OverworldTreeLarge"},{percent:40,type:"Random",title:"OverworldTreesSmall"},{percent:20,type:"Random",title:"PlatformGenerator"}]}},OverworldTreesSmall:{width:64,height:80,contents:{mode:"Certain",direction:"right",spacing:{min:0,max:8,units:8},children:[{type:"Random",title:"OverworldTreeSmallShort"},{type:"Random",title:"OverworldTreeSmall"}]}},OverworldTreeSmall:{width:24,height:80,contents:{mode:"Repeat",limit:1,direction:"top",spacing:{min:32,max:88,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"TreeFancy"}]}},OverworldTreeSmallShort:{width:24,height:80,contents:{mode:"Certain",direction:"top",snap:"bottom",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing"},{type:"Known",title:"Tree",arguments:{macro:"Tree",width:24}}]}},OverworldTreeLarge:{width:64,height:80,contents:{mode:"Multiple",direction:"right",spacing:{min:0,max:40,units:8},children:[{type:"Random",title:"OverworldTreeLargeBase"},{type:"Random",title:"OverworldTreeSmall"}]}},OverworldTreeLargeBase:{width:64,height:80,contents:{mode:"Certain",direction:"top",snap:"bottom",spacing:[0,8,8],children:[{type:"Random",title:"Nothing"},{type:"Known",title:"Tree",arguments:{macro:"Tree",width:64}},{type:"Random",title:"TreeLargeCoins"}]}},OverworldSegway:{width:112,height:80,contents:{mode:"Random",direction:"right",children:[{percent:30,type:"Random",title:"OverworldSegwaySpotty"},{percent:20,type:"Random",title:"OverworldSegwayEnemySpots"},{percent:15,type:"Random",title:"OverworldSegwayRamps"},{percent:15,type:"Random",title:"OverworldSegwayWatery"},{percent:10,type:"Random",title:"OverworldSegwaySpring"},{percent:10,type:"Random",title:"OverworldSegwayPipeTransit"}]}},OverworldSegwaySpotty:{width:112,height:80,contents:{mode:"Random",direction:"right",children:[{percent:60,type:"Random",title:"OverworldSegwaySpot"},{percent:40,type:"Random",title:"Nothing"}]}},OverworldSegwaySpot:{width:8,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor"}},{type:"Random",title:"OverworldSegwaySpotContent"}]}},OverworldSegwaySpotContent:{width:8,height:24,contents:{mode:"Random",direction:"top",spacing:24,children:[{percent:90,type:"Random",title:"OverworldSegwaySpotScenery"},{percent:10,type:"Random",title:"KoopaJumping"}]}},OverworldSegwayEnemySpots:{width:112,height:24,contents:{mode:"Repeat",direction:"right",spacing:[{percent:60,value:0},{percent:25,value:8},{percent:15,value:16}],children:[{type:"Random",title:"OverworldSegwayEnemySpot"}]}},OverworldSegwayEnemySpot:{width:32,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:32}},{type:"Random",title:"OverworldSegwayEnemySpotContent"}]}},OverworldSegwayEnemySpotContent:{width:32,height:80,contents:{mode:"Random",direction:"right",children:[{percent:45,type:"Random",title:"EnemyEasy"},{percent:15,type:"Random",title:"Nothing"},{percent:40,type:"Random",title:"LandObstacleGroupVertical"}]}},OverworldSegwayRamps:{width:112,height:80,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"RampUpSmallFloor"},{type:"Random",title:"Nothing",sizing:{width:48}},{type:"Random",title:"RampDownSmallFloor"}]}},OverworldSegwayFloating:{width:112,height:80,contents:{mode:"Random",direction:"right",children:[{percent:50,type:"Random",title:"Nothing"},{percent:50,type:"Random",title:"OverworldSegwayFloat"}]}},OverworldSegwayFloat:{width:8,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"Stone"}]}},OverworldSegwayWatery:{width:112,height:80,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"RampUpSmallFloor"},{type:"Random",title:"OverworldSegwayWateryBridge"},{type:"Random",title:"RampDownSmallFloor"}]}},OverworldSegwayWateryBridge:{width:48,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"Water",sizing:{height:8}},{type:"Random",title:"Nothing",sizing:{height:24}},{type:"Random",title:"Bridge"},{type:"Random",title:"OverworldSegwayWateryBridgeTop"}]}},OverworldSegwayWateryBridgeTop:{width:48,height:40,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"OverworldSegwayWateryBridgeTopEnemies"},{type:"Random",title:"OverworldSegwayWateryBridgeTopSolid"}]}},OverworldSegwayWateryBridgeTopEnemies:{width:48,height:16,contents:{mode:"Certain",direction:"right",snap:"bottom",spacing:{min:4,max:20,units:4},children:[{type:"Random",title:"Nothing",sizing:16},{type:"Random",title:"EnemyEasy"},{type:"Random",title:"EnemyEasy"},{type:"Random",title:"EnemyEasy"}]}},OverworldSegwayWateryBridgeTopSolid:{width:48,height:24,contents:{mode:"Certain",direction:"right",snap:"bottom",spacing:{min:0,max:24,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"BlockReward"}]}},OverworldSegwaySpring:{width:112,height:80,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"OverworldSegwaySpringLand"},{type:"Random",title:"OverworldSegwaySpringGap"}]}},OverworldSegwaySpringLand:{width:8,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor"}},{type:"Known",title:"Springboard"}]}},OverworldSegwaySpringGap:{width:104,height:80,contents:{mode:"Certain",direction:"right",spacing:{min:48,max:80,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"OverworldSegwaySpringReward"}]}},OverworldSegwaySpringReward:{width:8,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:16,max:40,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"Brick"},{type:"Random",title:"BlockTreasureFloating"}]}},OverworldSegwayPipeTransit:{width:112,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:112}},{type:"Random",title:"OverworldSegwayPipeTransitLand"}]}},OverworldSegwayPipeTransitLand:{width:104,height:80,contents:{mode:"Certain",direction:"right",snap:"bottom",spacing:{min:32,max:80,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"PipeRandomTransit"}]}},LandObstacleGroup:{width:160,height:80,contents:{mode:"Random",direction:"right",spacing:{min:0,max:8,units:16},children:[{percent:30,type:"Random",title:"LandObstacleGroupDoubleStory"},{percent:30,type:"Random",title:"LandObstacleGroupSingleStory"},{percent:25,type:"Random",title:"LandObstacleGroupVertical"},{percent:20,type:"Random",title:"LandObstacleGroupPipes"},{percent:3,type:"Random",title:"LandObstacleGroupPitSmall"},{percent:2,type:"Random",title:"LandObstacleGroupPitLarge"}]}},LandObstacleGroupEnemies:{width:64,height:80,contents:{mode:"Random",direction:"right",spacing:4,children:[{percent:65,type:"Random",title:"EnemyEasyScattered"},{percent:2,type:"Random",title:"EnemyHard"},{percent:13,type:"Random",title:"LandObstacleGroupVertical"}]}},LandObstacleGroupEnemiesPure:{width:64,height:80,contents:{mode:"Random",direction:"right",spacing:{min:4,max:8,units:4},children:[{percent:90,type:"Random",title:"EnemyEasyScattered"},{percent:5,type:"Random",title:"EnemyHard"}]}},LandObstacleGroupSingleStory:{width:64,height:80,contents:{mode:"Multiple",snap:"bottom",children:[{type:"Random",title:"LandObstacleGroupSolidsSpotty"},{type:"Random",title:"EnemyEasy"}]}},LandObstacleGroupSingleStorySolids:{width:64,height:40,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"Nothing",sizing:{height:32}},{type:"Random",title:"LandObstacleGroupSolidsSpotty"}]}},LandObstacleGroupDoubleStory:{width:64,height:80,contents:{mode:"Multiple",snap:"bottom",children:[{type:"Random",title:"LandObstacleGroupDoubleStorySolids"},{type:"Random",title:"LandObstacleGroupEnemiesPure"}]}},LandObstacleGroupDoubleStorySolids:{width:64,height:80,contents:{mode:"Certain",snap:"bottom",direction:"top",children:[{type:"Random",title:"LandObstacleGroupSolidsPopulated"},{type:"Random",title:"LandObstacleGroupSolidsSpotty"}]}},LandObstacleGroupSolidsPopulated:{width:64,height:32,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"Nothing",sizing:{height:24}},{type:"Random",title:"LandObstacleGroupSolid"},{type:"Random",title:"EnemyEasyElevated"}]}},LandObstacleGroupSolids:{width:64,height:32,contents:{mode:"Random",snap:"bottom",direction:"right",children:[{percent:75,type:"Random",title:"Brick"},{percent:25,type:"Random",title:"Block"}]}},LandObstacleGroupSolidsSpotty:{width:64,height:32,contents:{mode:"Random",snap:"bottom",direction:"right",children:[{percent:30,type:"Random",title:"Brick"},{percent:20,type:"Random",title:"Block"},{percent:50,type:"Random",title:"Nothing"}]}},LandObstacleGroupPipes:{width:112,height:80,contents:{mode:"Random",snap:"bottom",direction:"right",children:[{percent:80,type:"Random",title:"PipeRandom"},{percent:10,type:"Random",title:"PipeRandomTransit"},{percent:10,type:"Random",title:"PipeFloating"}]}},LandObstacleGroupVertical:{width:32,height:80,contents:{mode:"Random",snap:"bottom",direction:"right",spacing:{min:0,max:16,units:8},children:[{percent:40,type:"Random",title:"PipeRandom"},{percent:35,type:"Random",title:"StoneTower"},{percent:25,type:"Random",title:"CannonTower"}]}},LandObstacleGroupPitSmall:{width:40,height:80,contents:{mode:"Certain",snap:"bottom",direction:"right",children:[{type:"Random",title:"StoneTower"},{type:"Random",title:"Nothing"},{type:"Random",title:"PitTreasure"},{type:"Random",title:"Nothing"},{type:"Random",title:"StoneTower"}]}},LandObstacleGroupPitLarge:{width:56,height:80,contents:{mode:"Certain",snap:"bottom",direction:"right",children:[{type:"Random",title:"StoneTower"},{type:"Random",title:"Nothing",sizing:{width:16}},{type:"Random",title:"PitTreasure"},{type:"Random",title:"EnemyEasy"},{type:"Random",title:"Nothing"},{type:"Random",title:"StoneTower"}]}},PitTreasure:{width:8,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:0,max:40,units:8},children:[{type:"Random",title:"Nothing",sizing:{height:32}},{type:"Random",title:"BlockTreasure"}]}},Underworld:{width:1520,height:88,contents:{mode:"Certain",direction:"right",snap:"left",children:[{type:"Random",title:"UnderworldStart"},{type:"Random",title:"UnderworldRandomization"},{type:"Random",title:"UnderworldPreEnd"},{type:"Random",title:"Nothing"},{type:"Random",title:"UnderworldEnd"}]}},UnderworldStart:{width:128,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Known",title:"Floor",arguments:[{percent:25,values:{macro:"Floor",width:80}},{percent:25,values:{macro:"Floor",width:96}},{percent:25,values:{macro:"Floor",width:104}},{percent:25,values:{macro:"Floor",width:128}}]},{type:"Known",title:"Brick",arguments:{macro:"Fill",ynum:11}}]}},UnderworldRandomization:{width:1512,height:80,contents:{mode:"Random",direction:"right",children:[{percent:40,type:"Random",title:"UnderworldLandArea"},{percent:40,type:"Random",title:"UnderworldSegway"},{percent:20,type:"Random",title:"Nothing"}]}},UnderworldLandArea:{width:160,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:160}},{type:"Random",title:"UnderworldObstacleGroup"},{type:"Random",title:"Brick",sizing:{width:160}}]}},UnderworldObstacleGroup:{width:160,height:80,contents:{mode:"Random",direction:"right",spacing:[{percent:50,value:0},{percent:30,value:8},{percent:20,value:16}],children:[{percent:30,type:"Random",title:"EnemyEasyScattered"},{percent:25,type:"Random",title:"UnderworldBricksOverhangs"},{percent:20,type:"Random",title:"LandObstacleGroupSingleStory"},{percent:25,type:"Random",title:"LandObstacleGroupVertical"}]}},UnderworldBricksOverhangs:{width:160,height:64,contents:{mode:"Repeat",direction:"right",snap:"bottom",spacing:{min:0,max:24,units:8},children:[{percent:100,type:"Random",title:"UnderworldBricksOverhang"}]}},UnderworldBricksOverhang:{width:32,height:64,contents:{mode:"Random",direction:"top",snap:"left",spacing:[{percent:40,value:0},{percent:40,value:16},{percent:20,value:8}],children:[{percent:40,type:"Random",title:"UnderworldBrickCluster"},{percent:30,type:"Known",title:"Coin",arguments:{macro:"Fill",xnum:4,xwidth:8},sizing:{width:32,height:16}},{percent:30,type:"Random",title:"EnemyEasyScattered"}]}},UnderworldBrickCluster:{width:32,height:16,contents:{mode:"Repeat",direction:"top",children:[{type:"Random",title:"UnderworldBrickRow"}]}},UnderworldBrickRow:{width:32,height:8,contents:{mode:"Random",direction:"right",children:[{percent:97,type:"Known",title:"Brick"},{percent:3,type:"Known",title:"Brick",arguments:{contents:"Coin"}}]}},UnderworldSegway:{width:112,height:80,contents:{mode:"Random",direction:"right",children:[{percent:30,type:"Random",title:"UnderworldSegwaySpotty"},{percent:25,type:"Random",title:"OverworldSegwayWatery"},{percent:25,type:"Random",title:"UnderworldSegwayPlatforms"},{percent:20,type:"Random",title:"OverworldSegwayRamps"}]}},UnderworldSegwaySpotty:{width:112,height:80,contents:{mode:"Multiple",direction:"right",snap:"bottom",
children:[{type:"Random",title:"UnderworldSegwaySpots"},{type:"Random",title:"UnderworldBrickCeiling",sizing:{width:112}}]}},UnderworldSegwaySpots:{width:112,height:80,contents:{mode:"Random",direction:"right",snap:"bottom",children:[{percent:50,type:"Random",title:"UnderworldSegwaySpot"},{percent:50,type:"Random",title:"Nothing"}]}},UnderworldSegwaySpot:{width:8,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:[{percent:40,values:{macro:"Floor"}},{percent:30,values:{macro:"Floor",y:8}},{percent:30,values:{macro:"Floor",y:16}}]}]}},UnderworldSegwayPlatforms:{width:112,height:80,contents:{mode:"Certain",direction:"right",spacing:{min:0,max:8,units:8},children:[{type:"Random",title:"Nothing",sizing:{width:16}},{type:"Random",title:"PlatformGenerator"},{type:"Random",title:"Nothing"},{type:"Random",title:"PlatformGenerator"},{type:"Random",title:"Nothing"}]}},UnderworldBrickCeiling:{width:8,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Random",title:"Nothing",sizing:{height:88}},{type:"Random",title:"Brick"}]}},UnderworldPreEnd:{width:112,height:80,contents:{mode:"Random",direction:"right",snap:"left",spacing:32,children:[{percent:50,type:"Random",title:"OverworldSegwaySpring"},{percent:50,type:"Random",title:"PlatformGenerator"}]}},UnderworldEnd:{width:480,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Random",title:"UnderworldEndFloor"},{type:"Random",title:"UnderworldEndLand"}]}},UnderworldEndFloor:{width:480,height:8,contents:{mode:"Certain",children:[{type:"Random",title:"Floor"}]}},UnderworldEndLand:{width:488,height:72,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"LakituStop",sizing:{width:0}},{type:"Random",title:"UnderworldEndPipeArea"},{type:"Random",title:"Nothing",sizing:{width:64}},{type:"Random",title:"RampUpLarge"},{type:"Random",title:"Nothing",sizing:{width:64}},{type:"Random",title:"UnderworldEndOutsideCastle"},{type:"Known",title:"ScrollBlocker",sizing:{width:0,height:0}}]}},UnderworldEndPipeArea:{width:144,height:88,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"UnderworldEndPipeFront"},{type:"Random",title:"UnderworldEndPipeTransport"},{type:"Known",title:"Brick",arguments:{macro:"Fill",xnum:7,ynum:11,yheight:-8}}]}},UnderworldEndPipeFront:{width:80,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Known",title:"Brick",arguments:{macro:"Fill",xnum:10,ynum:3}},{type:"Random",title:"Nothing",sizing:{height:40}},{type:"Known",title:"Block",arguments:{hidden:!0}},{type:"Random",title:"Nothing",sizing:{height:24}},{type:"Known",title:"Brick",arguments:{macro:"Fill",xnum:10,ynum:1}}]}},UnderworldEndPipeTransport:{width:32,height:80,contents:{mode:"Certain",direction:"top",snap:"right",children:[{type:"Known",title:"Brick",arguments:{macro:"Fill",xnum:4,ynum:3,yheight:-8},sizing:{height:24}},{type:"Known",title:"PipeCorner",arguments:{macro:"PipeCorner",height:64,transport:"Overworld",scrollEnabler:!0,scrollBlocker:!0}},{type:"Random",title:"Nothing",sizing:{height:40}},{type:"Known",title:"Brick",arguments:{macro:"Fill",xnum:2}}]}},Sky:{width:1400,height:80,contents:{mode:"Certain",direction:"right",snap:"left",children:[{type:"Random",title:"SkyStart"},{type:"Random",title:"Nothing"},{type:"Random",title:"SkyBeforeMain"},{type:"Random",title:"SkyMain"},{type:"Random",title:"SkyEnd"}]}},SkyStart:{width:32,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Known",title:"Stone",arguments:{width:32},sizing:{width:32}}]}},SkyBeforeMain:{width:80,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Known",title:"Stone",arguments:{width:80},sizing:{width:80}}]}},SkyMain:{width:560,height:80,contents:{mode:"Multiple",children:[{type:"Random",title:"SkyMainLand"},{type:"Random",title:"SkyMainTransport"},{type:"Random",title:"SkyMainAir"}]}},SkyMainLand:{width:560,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Known",title:"Stone",arguments:{width:560}}]}},SkyMainTransport:{width:140,height:40,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Random",title:"Nothing",sizing:{height:32}},{type:"Known",title:"Platform",arguments:{width:24,transport:"true"}}]}},SkyMainAir:{width:560,height:80,contents:{mode:"Random",direction:"right",snap:"bottom",spacing:8,children:[{percent:20,type:"Random",title:"SkyCoinsShort"},{percent:20,type:"Random",title:"SkyCoinsMedium"},{percent:20,type:"Random",title:"SkyCoinsLong"},{percent:40,type:"Random",title:"SkyCoinsStone"}]}},SkyCoinsShort:{width:24,height:80,contents:{mode:"Certain",direction:"top",snap:"left",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing",sizing:{height:56}},{type:"Random",title:"SkyCoinsRow",stretch:{width:!0}}]}},SkyCoinsMedium:{width:56,height:80,contents:{mode:"Certain",direction:"top",snap:"left",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing",sizing:{height:56}},{type:"Random",title:"SkyCoinsRow",stretch:{width:!0}}]}},SkyCoinsLong:{width:128,height:80,contents:{mode:"Certain",direction:"top",snap:"left",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing",sizing:{height:56}},{type:"Random",title:"SkyCoinsRow",stretch:{width:!0}}]}},SkyCoinsRow:{width:5,height:7,contents:{mode:"Repeat",direction:"right",snap:"top",spacing:3,children:[{type:"Random",title:"Coin"}]}},SkyCoinsStone:{width:24,height:80,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"SkyCoinsStoneVertical"}]}},SkyCoinsStoneVertical:{width:8,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:0,max:8,units:8},children:[{type:"Random",title:"Nothing",sizing:{height:64}},{type:"Known",title:"Stone",arguments:[{percent:33,values:{}},{percent:34,values:{width:16}},{percent:33,values:{height:16}}]}]}},SkyEnd:{width:320,height:80,contents:{mode:"Certain",direction:"top",snap:"right",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"SkyEndCoins"}]}},SkyEndCoins:{width:24,height:7,contents:{mode:"Certain",direction:"right",snap:"bottom",spacing:3,children:[{type:"Random",title:"Nothing",sizing:{width:64}},{type:"Known",title:"Coin"},{type:"Known",title:"Coin"},{type:"Known",title:"Coin"}]}},Castle:{height:80,width:2e3,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"CastleStart"},{type:"Random",title:"CastleBody"},{type:"Random",title:"CastleEnd"}]}},CastleStart:{width:112,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"StartInsideCastle"},{type:"Random",title:"Nothing",sizing:{height:80}},{type:"Known",title:"Stone",arguments:{height:24,width:112}}]}},CastleBody:{width:1632,height:80,contents:{mode:"Repeat",direction:"right",children:[{type:"Random",title:"CastleSegway"},{type:"Random",title:"CastleLandArea"},{type:"Random",title:"CastleSegway"},{type:"Random",title:"CastleLandAreaLarge"}]}},CastleSegway:{width:168,height:80,contents:{mode:"Random",direction:"right",snap:"bottom",children:[{percent:50,type:"Random",title:"CastleSegwayFloatingGap"},{percent:50,type:"Random",title:"CastleSegwayPlatformGap"}]}},CastleSegwayFloatingGap:{width:168,height:80,contents:{mode:"Repeat",direction:"right",snap:"bottom",children:[{type:"Random",title:"CastleSegwayGapSpace"},{type:"Random",title:"CastleSegwayGapChunk"}]}},CastleSegwayGapSpace:{width:24,height:80,contents:{mode:"Multiple",children:[{type:"Random",title:"CastleSegwayGapSpaceWater"},{type:"Random",title:"CastleSegwayGapSpaceEnemyArea"}]}},CastleSegwayGapSpaceWater:{width:24,height:80,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Water",sizing:{width:24}}]}},CastleSegwayGapSpaceEnemyArea:{width:24,height:40,contents:{mode:"Repeat",direction:"right",snap:"bottom",spacing:[{percent:60,value:24},{percent:15,value:0},{percent:15,value:8},{percent:15,value:16}],children:[{type:"Random",title:"Nothing",sizing:{width:0}},{type:"Random",title:"Podoboo"}]}},CastleSegwayGapChunk:{width:24,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:16,max:40,units:8},children:[{type:"Random",title:"Water",sizing:{width:24}},{type:"Random",title:"CastleSegwayGapChunkSolids"},{type:"Random",title:"CastleSegwayGapChunkReward"}]}},CastleSegwayGapChunkSolids:{width:24,height:8,contents:{mode:"Repeat",direction:"right",children:[{percent:80,type:"Random",title:"Stone"},{percent:20,type:"Random",title:"CastleBlockActive"}]}},CastleSegwayGapChunkReward:{width:16,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"CastleSegwayGapChunkBlock"}]}},CastleSegwayGapChunkBlock:{width:8,height:8,contents:{mode:"Random",direction:"right",children:[{percent:50,type:"Random",title:"Nothing"},{percent:50,type:"Known",title:"Block",arguments:{contents:"Mushroom"}}]}},CastleSegwayPlatformGap:{width:168,height:80,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"CastleSegwayPlatformGapBorder"},{type:"Random",title:"CastleSegwayPlatformGapPlatforms"},{type:"Random",title:"CastleSegwayPlatformGapBorder"}]}},CastleSegwayPlatformGapBorder:{width:24,height:80,contents:{mode:"Certain",direction:"top",spacing:{min:0,max:24,units:8},children:[{type:"Known",title:"Floor",arguments:{macro:"Floor"},sizing:{height:32},stretch:{width:!0}},{type:"Random",title:"CastleSegwayPlatformGapBorderCastleBlock"}]}},CastleSegwayPlatformGapBorderCastleBlock:{width:24,height:8,contents:{mode:"Certain",direction:"right",spacing:{min:0,max:16,units:8},children:[{type:"Random",title:"Nothing",sizing:{width:0}},{type:"Random",title:"CastleBlockActive"}]}},CastleSegwayPlatformGapPlatforms:{width:120,height:80,contents:{mode:"Repeat",direction:"right",spacing:{min:0,max:16,units:16},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"PlatformGenerator"}]}},CastleLandArea:{width:160,height:80,contents:{mode:"Random",direction:"right",children:[{percent:100,type:"Random",title:"CastleLandTunnel"}]}},CastleLandTunnel:{width:160,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:160},sizing:{height:32}},{type:"Random",title:"CastleLandTunnelEnemies"},{type:"Random",title:"CastleLandTunnelTop"}]}},CastleLandTunnelEnemies:{width:160,height:16,contents:{mode:"Random",direction:"right",snap:"bottom",spacing:[{percent:10,value:4},{percent:15,value:8},{percent:85,value:{min:32,max:64,units:8}}],children:[{percent:70,type:"Random",title:"Goomba"},{percent:15,type:"Random",title:"Beetle"},{percent:15,type:"Random",title:"Koopa"}]}},CastleLandTunnelTop:{width:160,height:32,contents:{mode:"Certain",direction:"bottom",children:[{type:"Known",title:"Stone",stretch:{width:!0},arguments:[{percent:33,values:{height:24}},{percent:34,values:{height:32}},{percent:33,values:{height:40}}]}]}},CastleLandAreaLarge:{width:320,height:80,contents:{mode:"Repeat",direction:"right",children:[{type:"Random",title:"CastleLandAreaChunk"},{type:"Random",title:"CastleLandAreaBetween"}]}},CastleLandAreaChunk:{width:152,height:80,contents:{mode:"Repeat",direction:"right",children:[{percent:100,type:"Random",title:"CastleLandAreaCavern"}]}},CastleLandAreaCavern:{width:152,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:152}},{type:"Random",title:"CastleLandAreaCavernInside"},{type:"Known",title:"Stone",arguments:{width:152}}]}},CastleLandAreaCavernInside:{width:152,height:80,contents:{mode:"Random",direction:"right",snap:"bottom",spacing:{min:8,max:40,units:8},children:[{percent:40,type:"Random",title:"CastleLandAreaCavernInsideTites"},{percent:35,type:"Random",title:"CastleLandAreaCavernInsideBonus"},{percent:25,type:"Random",title:"Nothing",sizing:{width:24}}]}},CastleLandAreaCavernInsideTites:{width:24,height:80,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Known",title:"Stone",arguments:{width:24}},{type:"Random",title:"CastleLandAreaCavernInsideTitesCastleBlock"},{type:"Random",title:"Nothing",sizing:{height:40}},{type:"Random",title:"CastleLandAreaCavernInsideTitesCastleBlock"},{type:"Known",title:"Stone",sizing:{width:24,height:16},arguments:{width:24,height:16}}]}},CastleLandAreaCavernInsideTitesCastleBlock:{width:24,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"CastleBlockActive"}]}},CastleLandAreaCavernInsideBonus:{width:24,height:64,contents:{mode:"Certain",direction:"top",spacing:{min:8,max:24,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"CastleLandAreaCavernInsideBonusBlocks"},{type:"Random",title:"CastleLandAreaCavernInsideBonusBlocks"}]}},CastleLandAreaCavernInsideBonusBlocks:{width:24,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"Nothing"},{type:"Known",title:"Block",arguments:[{percent:45,values:{hidden:!0}},{percent:35,values:{}},{percent:15,values:{contents:"Mushroom",hidden:!0}},{percent:5,values:{contents:"Mushroom"}}]}]}},CastleLandAreaBetween:{width:16,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Water",arguments:{macro:"Water",width:16}},{type:"Random",title:"Nothing",sizing:{height:83}},{type:"Known",title:"Stone",arguments:{width:16}}]}},CastleEnd:{width:256,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"CastlePreEnd"},{type:"Random",title:"EndInsideCastle"},{type:"Random",title:"Overworld"}]}},CastlePreEnd:{width:80,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:80}},{type:"Random",title:"CastlePreEndBlocks"},{type:"Random",title:"Nothing",sizing:{height:56}},{type:"Known",title:"Stone",arguments:[{percent:50,values:{width:80,height:24}},{percent:50,values:{width:80,height:32}}]}]}},CastlePreEndBlocks:{width:80,height:24,contents:{mode:"Repeat",direction:"right",snap:"top",spacing:16,children:[{type:"Known",title:"Stone",sizing:{width:16,height:24},arguments:{width:16,height:24}}]}},EnemyEasy:{width:8,height:12,contents:{mode:"Random",direction:"right",spacing:[{percent:75,value:4},{percent:25,value:8}],children:[{percent:45,type:"Random",title:"Goomba"},{percent:35,type:"Random",title:"Koopa"},{percent:20,type:"Random",title:"Beetle"}]}},EnemyEasyScattered:{width:8,height:12,contents:{mode:"Random",direction:"right",spacing:[{percent:45,value:8},{percent:25,value:4},{percent:15,value:12},{percent:15,value:16}],children:[{percent:40,type:"Random",title:"Goomba"},{percent:30,type:"Random",title:"Koopa"},{percent:15,type:"Random",title:"Beetle"},{percent:15,type:"Random",title:"Nothing"}]}},EnemyEasyElevated:{width:64,height:12,contents:{mode:"Random",direction:"right",snap:"bottom",spacing:4,children:[{percent:25,type:"Random",title:"Goomba"},{percent:15,type:"Random",title:"Koopa"},{percent:10,type:"Random",title:"Beetle"},{percent:50,type:"Random",title:"Nothing"}]}},EnemyHard:{width:8,height:12,contents:{mode:"Random",direction:"right",children:[{percent:40,type:"Random",title:"HammerBro"},{percent:40,type:"Random",title:"Blooper"},{percent:20,type:"Random",title:"Lakitu"}]}},SolidSmall:{width:8,height:12,contents:{mode:"Random",direction:"right",children:[{percent:80,type:"Random",title:"Brick"},{percent:20,type:"Random",title:"Block"}]}},SolidSmallSpotty:{width:8,height:12,contents:{mode:"Random",direction:"right",children:[{percent:50,type:"Random",title:"Brick"},{percent:30,type:"Random",title:"Nothing"},{percent:20,type:"Random",title:"Block"}]}},LandObstacleGroupSolid:{width:8,height:8,contents:{mode:"Random",direction:"right",children:[{percent:70,type:"Random",title:"Brick"},{percent:30,type:"Random",title:"Block"}]}},Cannon:{width:8,height:32,contents:{mode:"Random",direction:"top",snap:"bottom",spacing:[{percent:50,value:0},{percent:50,value:24}],children:[{percent:50,type:"Random",title:"CannonMedium"},{percent:10,type:"Random",title:"CannonSmall"},{percent:40,type:"Random",title:"CannonLarge"}]}},CannonStack:{width:8,height:32,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Random",title:"Cannon"},{type:"Random",title:"Cannon"}]}},RampUpSmall:{width:32,height:32,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Stone"},{type:"Known",title:"Stone",sizing:{height:16},arguments:{height:16}},{type:"Known",title:"Stone",sizing:{height:24},arguments:{height:24}},{type:"Known",title:"Stone",sizing:{height:32},arguments:{height:32}}]}},RampUpSmallFloor:{width:32,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:32}},{type:"Random",title:"RampUpSmall"}]}},RampUpLarge:{width:64,height:64,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Stone"},{type:"Known",title:"Stone",sizing:{height:16},arguments:{height:16}},{type:"Known",title:"Stone",sizing:{height:24},arguments:{height:24}},{type:"Known",title:"Stone",sizing:{height:32},arguments:{height:32}},{type:"Known",title:"Stone",sizing:{height:40},arguments:{height:40}},{type:"Known",title:"Stone",sizing:{height:48},arguments:{height:48}},{type:"Known",title:"Stone",sizing:{height:56},arguments:{height:56}},{type:"Known",title:"Stone",sizing:{height:64},arguments:{height:64}}]}},RampUpLargeFloor:{width:64,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:64}},{type:"Random",title:"RampUpLarge"}]}},RampDownSmall:{width:32,height:32,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Stone",sizing:{height:32},arguments:{height:32}},{type:"Known",title:"Stone",sizing:{height:24},arguments:{height:24}},{type:"Known",title:"Stone",sizing:{height:16},arguments:{height:16}},{type:"Known",title:"Stone"}]}},RampDownSmallFloor:{width:32,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:32}},{type:"Random",title:"RampDownSmall"}]}},RampDownLarge:{width:64,height:64,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Stone",sizing:{height:64},arguments:{height:64}},{type:"Known",title:"Stone",sizing:{height:56},arguments:{height:56}},{type:"Known",title:"Stone",sizing:{height:48},arguments:{height:48}},{type:"Known",title:"Stone",sizing:{height:40},arguments:{height:40}},{type:"Known",title:"Stone",sizing:{height:32},arguments:{height:32}},{type:"Known",title:"Stone",sizing:{height:24},arguments:{height:24}},{type:"Known",title:"Stone",sizing:{height:16},arguments:{height:16}},{type:"Known",title:"Stone"}]}},RampDownLargeFloor:{width:64,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Floor",arguments:{macro:"Floor",width:64}},{type:"Random",title:"RampDownLarge"}]}},StoneTower:{width:8,height:32,contents:{mode:"Random",direction:"right",snap:"bottom",children:[{percent:50,type:"Known",title:"Stone",snap:"bottom",sizing:{height:24},arguments:{height:24}},{percent:50,type:"Known",title:"Stone",stretch:{height:!0}}]}},StoneTowerLarge:{width:8,height:64,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Stone",arguments:{height:64},sizing:{height:64}}]}},CannonTower:{width:24,height:32,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"Cannon"},{type:"Random",title:"Nothing"}]}},OverworldScenery:{width:160,height:80,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Random",title:"Nothing",sizing:{height:8}},{type:"Random",title:"OverworldLandScenery"},{type:"Random",title:"Nothing",sizing:{height:32}}]}},OverworldLandScenery:{height:40,width:160,contents:{mode:"Random",direction:"right",snap:"bottom",spacing:{min:-4,max:40,units:4},children:[{percent:25,type:"Random",title:"HillSmall"},{percent:25,type:"Random",title:"HillLarge"},{percent:12,type:"Random",title:"Bush1"},{percent:11,type:"Random",title:"Bush2"},{percent:12,type:"Random",title:"Bush3"},{percent:10,type:"Random",title:"Fence"},{percent:5,type:"Random",title:"PlantSmall"},{percent:5,type:"Random",title:"PlantLarge"}]}},OverworldClouds:{height:56,width:2528,contents:{mode:"Random",direction:"right",snap:"top",spacing:{min:16,max:80,units:8},children:[{percent:40,type:"Random",title:"CloudClump1"},{percent:35,type:"Random",title:"CloudClump2"},{percent:25,type:"Random",title:"CloudClump3"}]}},CloudClump1:{height:56,width:16,contents:{mode:"Certain",direction:"top",spacing:{min:16,max:40,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"Cloud1"}]}},CloudClump2:{height:56,width:24,contents:{mode:"Certain",direction:"top",spacing:{min:16,max:40,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"Cloud2"}]}},CloudClump3:{height:56,width:32,contents:{mode:"Certain",direction:"top",spacing:{min:16,max:40,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"Cloud3"}]}},Cloud:{width:32,height:12,contents:{mode:"Random",direction:"right",limit:1,children:[{percent:40,type:"Random",title:"Cloud1"},{percent:35,type:"Random",title:"Cloud2"},{percent:25,type:"Random",title:"Cloud3"}]}},OverworldSegwaySpotScenery:{width:8,height:23,contents:{mode:"Random",direction:"top",snap:"bottom",children:[{percent:70,type:"Random",title:"Nothing",stretch:{height:!0}},{percent:15,type:"Random",title:"PlantSmall"},{percent:15,type:"Random",title:"PlantLarge"}]}},Goomba:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Goomba"}]}},Koopa:{width:8,height:12,contents:{mode:"Random",direction:"right",snap:"bottom",children:[{percent:20,type:"Known",title:"Koopa"},{percent:40,type:"Known",title:"Koopa",arguments:{smart:!0}},{percent:15,type:"Known",title:"Koopa",arguments:{jumping:!0}},{percent:25,type:"Known",title:"Koopa",arguments:{smart:!0,jumping:!0}}]}},KoopaJumping:{width:8,height:12,contents:{mode:"Random",direction:"top",snap:"left",children:[{percent:35,type:"Known",title:"Koopa",arguments:{jumping:!0}},{percent:65,type:"Known",title:"Koopa",arguments:{smart:!0,jumping:!0}}]}},Beetle:{width:8,height:8.5,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Beetle"}]}},HammerBro:{width:8,height:12,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"HammerBro"}]}},Blooper:{width:8,height:40,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Blooper"}]}},Lakitu:{width:8,height:80,contents:{mode:"Certain",direction:"top",snap:"right",spacing:4,children:[{type:"Random",title:"Nothing",sizing:{height:0}},{type:"Known",title:"Lakitu"}]}},Podoboo:{width:8,height:8,contents:{mode:"Certain",direction:"top",spacing:-40,snap:"bottom",children:[{type:"Random",title:"Nothing"},{type:"Known",title:"Podoboo"}]}},Brick:{width:8,height:8,contents:{mode:"Random",direction:"right",snap:"top",children:[{percent:85,type:"Known",title:"Brick"},{percent:10,type:"Known",title:"Brick",arguments:{contents:"Coin"}},{percent:5,type:"Known",title:"Brick",arguments:{contents:"Star"}}]}},Block:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Block",arguments:[{percent:90,values:{}},{percent:9,values:{contents:"Mushroom"}},{percent:1,values:{contents:"Mushroom1Up",hidden:!0}}]}]}},BlockTreasure:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Block",arguments:[{percent:35,values:{contents:"Mushroom"}},{percent:35,values:{contents:"Star"}},{percent:30,values:{contents:"Mushroom1Up"}}]}]}},BlockTreasureFloating:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Block",arguments:[{percent:20,values:{contents:"Mushroom"}},{percent:20,values:{hidden:!0,contents:"Mushroom"}},{percent:15,values:{contents:"Star"}},{percent:15,values:{hidden:!0,contents:"Star"}},{percent:20,values:{contents:"Mushroom1Up"}},{percent:20,values:{hidden:!0,contents:"Mushroom1Up"}}]}]}},BlockReward:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Block",arguments:[{percent:30,values:{hidden:!0}},{percent:30,values:{hidden:!0,contents:"Mushroom"}},{percent:30,values:{hidden:!0,contents:"Star"}},{percent:30,values:{hidden:!0,contents:"Mushroom1Up"}}]}]}},Bridge:{width:8,height:8,contents:{mode:"Certain",snap:"bottom",direction:"right",children:[{type:"Known",title:"Bridge",stretch:{width:!0},arguments:{macro:"Bridge"}}]}},Tree:{width:24,height:8,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Tree",stretch:{width:!0},arguments:{macro:"Tree"}}]}},TreeCoin:{width:8,height:12,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Random",title:"Nothing",sizing:{height:4}},{type:"Random",title:"Coin",sizing:{height:4}}]}},TreeCoins:{width:8,height:12,contents:{mode:"Random",direction:"right",stretch:{width:!0},spacing:4,children:[{percent:55,type:"Random",title:"TreeCoin"},{percent:30,type:"Random",title:"Nothing"},{percent:15,type:"Random",title:"EnemyEasy"}]}},TreeLargeCoins:{width:64,height:12,contents:{mode:"Certain",direction:"right",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"TreeCoins",sizing:{width:56}}]}},TreeFancy:{width:24,height:8,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Tree",stretch:{width:!0},arguments:{macro:"Tree"}},{type:"Random",title:"TreeCoins",stretch:{width:!0}}]}},Coin:{width:5,height:7,contents:{mode:"Certain",direction:"right",children:[{type:"Known",title:"Coin"}]}},PipeRandom:{width:16,height:40,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Random",title:"Nothing",sizing:{height:0}},{type:"Known",title:"Pipe",sizing:{height:0},arguments:[{percent:25,values:{macro:"Pipe",piranha:!0,height:16}},{percent:5,values:{macro:"Pipe",height:16}},{percent:25,values:{macro:"Pipe",piranha:!0,height:24}},{percent:5,values:{macro:"Pipe",height:24}},{percent:20,values:{macro:"Pipe",piranha:!0,height:32}},{percent:5,values:{macro:"Pipe",height:32}},{percent:5,values:{macro:"Pipe",piranha:!0,transport:"Underworld",height:32}},{percent:5,values:{macro:"Pipe",transport:"Underworld",height:32}},{percent:3,values:{macro:"Pipe",piranha:!0,transport:"Underwater",height:32}},{percent:2,values:{macro:"Pipe",transport:"Underwater",height:32}}]}]}},PipeRandomTransit:{width:16,height:40,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Known",title:"Pipe",sizing:{height:0},arguments:[{percent:50,values:{macro:"Pipe",piranha:!0,height:24,transport:"Underworld"}},{percent:50,values:{macro:"Pipe",piranha:!0,height:32,transport:"Underworld"}}]}]}},PipeFloating:{width:64,height:80,contents:{mode:"Certain",direction:"top",snap:"bottom",spacing:{min:8,max:32,units:8},children:[{type:"Random",title:"Nothing"},{type:"Random",title:"PipeFloatingContents"}]}},PipeFloatingContents:{width:64,height:8,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"Nothing"},{type:"Random",title:"PipeFloatingSolid"},{type:"Random",title:"PipeFloatingCenter"},{type:"Random",title:"PipeFloatingSolid"}]}},PipeFloatingSolid:{width:8,height:8,contents:{mode:"Random",direction:"right",children:[{percent:65,type:"Random",title:"Brick"},{percent:35,type:"Random",title:"Block"}]}},PipeFloatingCenter:{width:16,height:8,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"Stone",arguments:{width:16}},{type:"Random",title:"PipeRandomTransit"}]}},Pipe:{width:16,height:32,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"Pipe"}]}},PipeHorizontal:{width:16,height:16,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"PipeHorizontal"}]}},PipeVertical:{width:16,height:16,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"PipeVertical"}]}},PipeCorner:{width:32,height:16,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"PipeCorner",arguments:{macro:"PipeCorner"}}]}},CannonSmall:{width:8,height:8,contents:{mode:"Certain",snap:"bottom",children:[{type:"Final",source:"CannonSmall",title:"Cannon"}]}},CannonMedium:{width:8,height:16,contents:{mode:"Certain",children:[{type:"Final",source:"CannonMedium",title:"Cannon",arguments:{height:16}}]}},CannonLarge:{width:8,height:24,contents:{mode:"Certain",children:[{type:"Final",source:"CannonLarge",title:"Cannon",arguments:{height:24}}]}},Floor:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"top",children:[{type:"Known",title:"Floor",stretch:{width:!0},arguments:{height:"Infinity"}}]}},Springboard:{width:8,height:14.5,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Springboard"}]}},Stone:{width:8,height:8,contents:{mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Known",title:"Stone"}]}},CastleBlock:{width:8,height:8,contents:{mode:"Certain",children:[{type:"Known",title:"CastleBlock"}]}},CastleBlockActive:{width:8,height:8,contents:{mode:"Certain",direction:"right",children:[{type:"Known",title:"CastleBlock",arguments:[{percent:30,values:{}},{percent:30,values:{fireballs:6}},{percent:30,values:{fireballs:6,direction:1}},{percent:5,values:{fireballs:12}},{percent:5,values:{fireballs:12,direction:1}}]}]}},Bush1:{width:16,height:8,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"Bush1"}]}},Bush2:{width:24,height:8,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"Bush2"}]}},Bush3:{width:32,height:8,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"Bush3"}]}},Cloud1:{width:16,height:12,contents:{mode:"Certain",children:[{type:"Known",title:"Cloud1"}]}},Cloud2:{width:24,height:12,contents:{mode:"Certain",children:[{type:"Known",title:"Cloud2"}]}},Cloud3:{width:32,height:12,contents:{mode:"Certain",children:[{type:"Known",title:"Cloud3"}]}},Fence:{width:8,height:8,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"Fence"}]}},HillSmall:{width:24,height:9.5,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"HillSmall"}]}},HillLarge:{width:40,height:17.5,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"HillLarge"}]}},PlantSmall:{width:7,height:15,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"PlantSmall"}]}},PlantLarge:{width:8,height:23,contents:{mode:"Certain",snap:"bottom",children:[{type:"Known",title:"PlantLarge"}]}},Water:{width:4,height:5,contents:{mode:"Certain",snap:"bottom",direction:"right",children:[{type:"Known",title:"Water",stretch:{width:!0},arguments:{macro:"Water"}}]}},LakituStop:{width:8,height:8,contents:{mode:"Certain",children:[{type:"Known",title:"LakituStop",arguments:{macro:"LakituStop"}}]}},Platform:{width:16,height:4,contents:{mode:"Certain",children:[{type:"Known",title:"Platform",stretch:{width:!0}}]}},PlatformGenerator:{width:24,height:80,contents:{mode:"Certain",children:[{type:"Known",title:"PlatformGenerator",arguments:[{percent:25,values:{macro:"PlatformGenerator"}},{percent:25,values:{macro:"PlatformGenerator",width:24}},{percent:25,values:{macro:"PlatformGenerator",direction:-1,width:24}},{percent:25,values:{macro:"PlatformGenerator",direction:-1}}]}]}},OverworldEnd:{width:288,height:80,contents:{mode:"Certain",direction:"top",snap:"left",children:[{type:"Random",title:"OverworldEndFloor"},{type:"Random",title:"OverworldEndLand"}]}},OverworldEndFloor:{width:288,height:8,contents:{mode:"Certain",children:[{type:"Random",title:"Floor"}]}},OverworldEndLand:{width:288,height:64,contents:{
mode:"Certain",direction:"right",snap:"bottom",children:[{type:"Random",title:"LakituStop"},{type:"Random",title:"RampUpLarge"},{type:"Random",title:"StoneTowerLarge"},{type:"Random",title:"Nothing",sizing:{width:64}},{type:"Random",title:"OverworldEndOutsideCastle"},{type:"Random",title:"ScrollBlocker"}]}},OverworldEndOutsideCastle:{width:144,height:80,contents:{mode:"Multiple",direction:"right",spacing:-112,children:[{type:"Random",title:"EndOutsideCastle"},{type:"Random",title:"OverworldEndOutsideCastleScenery"}]}},OverworldEndOutsideCastleScenery:{width:144,height:80,contents:{mode:"Multiple",direction:"top",spacing:-8,children:[{type:"Random",title:"Nothing",sizing:{height:0}},{type:"Random",title:"OverworldScenery"}]}},EndOutsideCastle:{width:144,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"EndOutsideCastle",arguments:{macro:"EndOutsideCastle",transport:"Castle",large:!0},sizing:{height:0}}]}},UnderworldEndOutsideCastle:{width:144,Height:88,contents:{mode:"Certain",direction:"top",children:[{type:"Random",title:"EndOutsideCastle"}]}},StartInsideCastle:{width:112,height:8,contents:{mode:"Certain",direction:"top",snap:"bottom",children:[{type:"Known",title:"StartInsideCastle",arguments:{macro:"StartInsideCastle",width:112}}]}},EndInsideCastle:{width:248,height:80,contents:{mode:"Certain",direction:"top",children:[{type:"Known",title:"EndInsideCastle",arguments:{macro:"EndInsideCastle",spawnType:"Bowser",npc:"Peach",transport:{map:"Random",location:"Overworld"},topScrollEnabler:!0},sizing:{height:8}}]}},CheepsStart:{width:0,height:0,contents:{mode:"Certain",children:[{type:"Known",title:"CheepsStart",arguments:{macro:"CheepsStart"}}]}},CheepsStop:{width:0,height:0,contents:{mode:"Certain",children:[{type:"Known",title:"CheepsStop",arguments:{macro:"CheepsStop"}}]}},ScrollEnabler:{width:0,height:0,contents:{mode:"Certain",direction:"right",children:[{type:"Known",title:"ScrollEnabler"}]}},ScrollBlocker:{width:0,height:0,contents:{mode:"Certain",direction:"right",children:[{type:"Known",title:"ScrollBlocker"}]}},Nothing:{width:8,height:8,contents:{mode:"Certain",children:[]}}}},FullScreenMario.FullScreenMario.settings.groups={groupNames:["Solid","Character","Scenery","Text"],groupTypes:"Array"},FullScreenMario.FullScreenMario.settings.input={InputWritrArgs:{aliases:{left:[65,37],right:[68,39],up:[87,38,32],down:[83,40],sprint:[16,17],pause:[80],rightclick:[3]},triggers:{onkeydown:{left:FullScreenMario.FullScreenMario.prototype.keyDownLeft,right:FullScreenMario.FullScreenMario.prototype.keyDownRight,up:FullScreenMario.FullScreenMario.prototype.keyDownUp,down:FullScreenMario.FullScreenMario.prototype.keyDownDown,sprint:FullScreenMario.FullScreenMario.prototype.keyDownSprint,pause:FullScreenMario.FullScreenMario.prototype.keyDownPause,mute:FullScreenMario.FullScreenMario.prototype.keyDownMute},onkeyup:{left:FullScreenMario.FullScreenMario.prototype.keyUpLeft,right:FullScreenMario.FullScreenMario.prototype.keyUpRight,up:FullScreenMario.FullScreenMario.prototype.keyUpUp,down:FullScreenMario.FullScreenMario.prototype.keyUpDown,sprint:FullScreenMario.FullScreenMario.prototype.keyUpSprint,pause:FullScreenMario.FullScreenMario.prototype.keyUpPause},onmousedown:{rightclick:FullScreenMario.FullScreenMario.prototype.mouseDownRight},oncontextmenu:{},ondevicemotion:{devicemotion:FullScreenMario.FullScreenMario.prototype.deviceMotion}}}},FullScreenMario.FullScreenMario.settings.maps={mapDefault:"1-1",locationDefault:"0",groupTypes:["Character","Solid","Scenery","Text"],requireEntrance:!0,screenAttributes:["gravity","setting","time","underwater","floor","jumpmod","maxyvel","maxyvelinv","notime","nokeys","canscroll"],screenVariables:{bottomDeathDifference:function(a){return 12*a.unitsize},bottomPlatformMax:function(a){var b=a.MapsHandler.getArea(),c=a.MapScreener.bottomDeathDifference;return b?(b.floor+c)*a.unitsize:-1},gravity:function(a){var b=a.MapsHandler.getArea();return b&&b.underwater?a.gravity/2.8:a.gravity}},onSpawn:FullScreenMario.FullScreenMario.prototype.addPreThing,macros:{Example:FullScreenMario.FullScreenMario.prototype.macroExample,Fill:FullScreenMario.FullScreenMario.prototype.macroFillPreThings,Pattern:FullScreenMario.FullScreenMario.prototype.macroFillPrePattern,Floor:FullScreenMario.FullScreenMario.prototype.macroFloor,Pipe:FullScreenMario.FullScreenMario.prototype.macroPipe,PipeCorner:FullScreenMario.FullScreenMario.prototype.macroPipeCorner,Tree:FullScreenMario.FullScreenMario.prototype.macroTree,Shroom:FullScreenMario.FullScreenMario.prototype.macroShroom,Water:FullScreenMario.FullScreenMario.prototype.macroWater,CastleSmall:FullScreenMario.FullScreenMario.prototype.macroCastleSmall,CastleLarge:FullScreenMario.FullScreenMario.prototype.macroCastleLarge,Ceiling:FullScreenMario.FullScreenMario.prototype.macroCeiling,Bridge:FullScreenMario.FullScreenMario.prototype.macroBridge,Scale:FullScreenMario.FullScreenMario.prototype.macroScale,PlatformGenerator:FullScreenMario.FullScreenMario.prototype.macroPlatformGenerator,WarpWorld:FullScreenMario.FullScreenMario.prototype.macroWarpWorld,CheepsStart:FullScreenMario.FullScreenMario.prototype.macroCheepsStart,CheepsStop:FullScreenMario.FullScreenMario.prototype.macroCheepsStop,BulletBillsStart:FullScreenMario.FullScreenMario.prototype.macroBulletBillsStart,BulletBillsStop:FullScreenMario.FullScreenMario.prototype.macroBulletBillsStop,LakituStop:FullScreenMario.FullScreenMario.prototype.macroLakituStop,StartInsideCastle:FullScreenMario.FullScreenMario.prototype.macroStartInsideCastle,EndOutsideCastle:FullScreenMario.FullScreenMario.prototype.macroEndOutsideCastle,EndInsideCastle:FullScreenMario.FullScreenMario.prototype.macroEndInsideCastle,Section:FullScreenMario.FullScreenMario.prototype.macroSection,SectionPass:FullScreenMario.FullScreenMario.prototype.macroSectionPass,SectionFail:FullScreenMario.FullScreenMario.prototype.macroSectionFail,SectionDecider:FullScreenMario.FullScreenMario.prototype.macroSectionDecider},entrances:{Normal:FullScreenMario.FullScreenMario.prototype.mapEntranceNormal,Plain:FullScreenMario.FullScreenMario.prototype.mapEntrancePlain,Castle:FullScreenMario.FullScreenMario.prototype.mapEntranceCastle,Walking:FullScreenMario.FullScreenMario.prototype.mapEntranceWalking,Vine:FullScreenMario.FullScreenMario.prototype.mapEntranceVine,PipeVertical:FullScreenMario.FullScreenMario.prototype.mapEntrancePipeVertical,PipeHorizontal:FullScreenMario.FullScreenMario.prototype.mapEntrancePipeHorizontal},patterns:function(a){var b,c;for(c in a)if(a.hasOwnProperty(c)){if(b=a[c],!b.length)continue;b.width=b[b.length-1][1],b.pop()}return a}({BackRegular:[["HillLarge",0,0],["Cloud1",68,68],["Bush3",92,0],["HillSmall",128,0],["Cloud1",156,76],["Bush1",188,0],["Cloud3",220,68],["Cloud2",292,76],["Bush2",332,0],["Blank",384]],BackCloud:[["Cloud2",28,64],["Cloud1",76,32],["Cloud2",148,72],["Cloud1",228,0],["Cloud1",284,32],["Cloud1",308,40],["Cloud1",372,0],["Blank",384]],BackFence:[["PlantSmall",88,0],["PlantLarge",104,0],["Fence",112,0,32],["Cloud1",148,68],["PlantLarge",168,0],["PlantSmall",184,0],["PlantSmall",192,0],["Cloud1",220,76],["Cloud2",244,68],["Fence",304,0,16],["PlantSmall",320,0],["Fence",328,0],["PlantLarge",344,0],["Cloud1",364,76],["Cloud2",388,68],["Blank",384]],BackFenceMin:[["PlantLarge",104,0],["Fence",112,0,32],["Cloud1",148,68],["PlantLarge",168,0],["PlantSmall",184,0],["PlantSmall",192,0],["Cloud1",220,76],["Cloud2",244,68],["Fence",304,0,16],["PlantSmall",320,0],["Fence",328,0],["Cloud1",364,76],["Cloud2",388,68],["Blank",384]],BackFenceMin2:[["Cloud2",4,68],["PlantSmall",88,0],["PlantLarge",104,0],["Fence",112,0],["Fence",128,0,16],["Cloud1",148,68],["PlantSmall",184,0],["PlantSmall",192,0],["Cloud1",220,76],["Cloud2",244,68],["Fence",304,0,16],["PlantSmall",320,0],["Fence",328,0],["PlantLarge",344,0],["Cloud1",364,76],["Cloud2",388,68],["Blank",384]],BackFenceMin3:[["Cloud2",4,68],["PlantSmall",88,0],["PlantLarge",104,0],["Fence",112,0,4],["Cloud1",148,68],["PlantSmall",184,0],["PlantSmall",192,0],["Cloud1",220,76],["Cloud2",244,68],["Cloud1",364,76],["Cloud2",388,68],["Blank",384]]}),library:function(a){var b,c={};for(b=0;b<a.length;b+=1)c[a[b].name]=a[b];return c}([{name:"1-1",locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackRegular",repeat:5},{macro:"Floor",width:552},{thing:"DecorativeBack",x:20,y:88},{thing:"DecorativeDot",x:21.5,y:46.5},{thing:"DecorativeDot",x:21.5,y:86.5},{thing:"CustomText",x:20,y:36,texts:[{text:"CAPTCHA EDITION",offset:12}]},{thing:"CustomText",x:24.5,y:84,size:"Large",texts:[{text:"SUPER"}]},{thing:"CustomText",x:24.5,y:68,size:"Huge",texts:[{text:"MARIO BROS."}]},{thing:"DecorativeDot",x:105.5,y:46.5},{thing:"DecorativeDot",x:105.5,y:86.5},{thing:"CustomText",x:52,y:44,size:"Colored",texts:[{text:"1985 NINTENDO"}]},{thing:"Block",x:128,y:32},{thing:"Brick",x:160,y:32},{thing:"Block",x:168,y:32,contents:"Mushroom"},{thing:"Goomba",x:176,y:8},{thing:"Brick",x:176,y:32},{thing:"Block",x:176,y:64},{thing:"Block",x:184,y:32},{thing:"Brick",x:192,y:32},{macro:"Pipe",x:224,height:16},{macro:"Pipe",x:304,height:24},{thing:"Goomba",x:340,y:8},{macro:"Pipe",x:368,height:32},{thing:"Goomba",x:412,y:8},{thing:"Goomba",x:422,y:8},{macro:"Pipe",x:456,height:32,transport:2},{thing:"Block",x:512,y:40,contents:"Mushroom1Up",hidden:!0},{macro:"Floor",x:568,width:120},{thing:"Brick",x:616,y:32},{thing:"Block",x:624,y:32,contents:"Mushroom"},{thing:"Brick",x:632,y:32},{thing:"Brick",x:640,y:32},{thing:"Goomba",x:640,y:72},{thing:"Brick",x:648,y:64},{thing:"Brick",x:656,y:64},{thing:"Goomba",x:656,y:72},{macro:"Fill",thing:"Brick",x:664,y:64,xnum:5,xwidth:8},{macro:"Floor",x:712,width:512},{macro:"Fill",thing:"Brick",x:728,y:64,xnum:3,xwidth:8},{thing:"Brick",x:752,y:32,contents:"Coin"},{thing:"Block",x:752,y:64},{thing:"Goomba",x:776,y:8},{thing:"Goomba",x:788,y:8},{thing:"Brick",x:800,y:32},{thing:"Brick",x:808,y:32,contents:"Star"},{thing:"Block",x:848,y:32},{thing:"Koopa",x:856,y:12},{thing:"Block",x:872,y:32},{thing:"Block",x:872,y:64,contents:"Mushroom"},{thing:"Block",x:896,y:32},{thing:"Goomba",x:912,y:8},{thing:"Goomba",x:924,y:8},{thing:"Brick",x:944,y:32},{macro:"Fill",thing:"Brick",x:968,y:64,xnum:3,xwidth:8},{macro:"Fill",thing:"Goomba",x:992,y:8,xnum:4,xwidth:16},{thing:"Brick",x:1024,y:64},{thing:"Brick",x:1032,y:32},{thing:"Block",x:1032,y:64},{thing:"Brick",x:1040,y:32},{thing:"Block",x:1040,y:64},{thing:"Brick",x:1048,y:64},{thing:"Stone",x:1072,y:8},{thing:"Stone",x:1080,y:16,height:16},{thing:"Stone",x:1088,y:24,height:24},{thing:"Stone",x:1096,y:32,height:32},{thing:"Stone",x:1120,y:32,height:32},{thing:"Stone",x:1128,y:24,height:24},{thing:"Stone",x:1136,y:16,height:16},{thing:"Stone",x:1144,y:8},{thing:"Stone",x:1184,y:8},{thing:"Stone",x:1192,y:16,height:16},{thing:"Stone",x:1200,y:24,height:24},{thing:"Stone",x:1208,y:32,height:32},{thing:"Stone",x:1216,y:32,height:32},{macro:"Floor",x:1240,width:656},{thing:"Stone",x:1240,y:32,height:32},{thing:"Stone",x:1248,y:24,height:24},{thing:"Stone",x:1256,y:16,height:16},{thing:"Stone",x:1264,y:8},{macro:"Pipe",x:1304,height:16,entrance:1},{thing:"Brick",x:1344,y:32},{thing:"Brick",x:1352,y:32},{thing:"Block",x:1360,y:32},{thing:"Brick",x:1368,y:32},{thing:"Goomba",x:1392,y:8},{thing:"Goomba",x:1404,y:8},{macro:"Pipe",x:1432,height:16},{thing:"Stone",x:1448,y:8},{thing:"Stone",x:1456,y:16,height:16},{thing:"Stone",x:1464,y:24,height:24},{thing:"Stone",x:1472,y:32,height:32},{thing:"Stone",x:1480,y:40,height:40},{thing:"Stone",x:1488,y:48,height:48},{thing:"Stone",x:1496,y:56,height:56},{thing:"Stone",x:1504,y:64,height:64,width:16},{macro:"EndOutsideCastle",x:1584,y:0,transport:{map:"1-2"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:56},{macro:"Floor",x:0,y:0,width:136},{macro:"Fill",thing:"Brick",x:0,y:8,ynum:11,yheight:8},{macro:"Fill",thing:"Brick",x:32,y:8,xnum:7,ynum:3,xwidth:8,yheight:8},{macro:"Fill",thing:"Coin",x:33,y:31,xnum:7,ynum:2,xwidth:8,yheight:16},{macro:"Fill",thing:"Coin",x:41,y:63,xnum:5,ynum:1,xwidth:8},{thing:"PipeHorizontal",x:104,y:16,transport:1,width:16},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"1-2",locations:[{entry:"Walking"},{area:1},{area:2},{area:1,entry:"PipeVertical"},{area:3,entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",y:4,repeat:1},{macro:"Floor",width:192},{macro:"CastleSmall"},{thing:"PipeHorizontal",x:80,y:16,transport:1},{macro:"Pipe",x:96,height:32}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:640},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Ceiling",x:48,width:664},{thing:"Block",x:80,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Block",x:88,y:32,xnum:4},{thing:"Goomba",x:128,y:8},{thing:"Stone",x:136,y:8},{thing:"Goomba",x:136,y:16},{thing:"Stone",x:152,y:16,height:16},{thing:"Stone",x:168,y:24,height:24},{thing:"Stone",x:184,y:32,height:32},{thing:"Stone",x:200,y:32,height:32},{thing:"Stone",x:216,y:24,height:24},{thing:"Goomba",x:232,y:8},{thing:"Brick",x:232,y:40,contents:"Coin"},{thing:"Stone",x:248,y:24,height:24},{thing:"Stone",x:264,y:16,height:16},{macro:"Fill",thing:"Brick",x:312,y:32,ynum:3},{thing:"Brick",x:320,y:32},{thing:"Coin",x:321,y:39},{macro:"Fill",thing:"Brick",x:328,y:32,ynum:3},{macro:"Fill",thing:"Coin",x:330,y:60,xnum:4,xwidth:8},{thing:"Brick",x:336,y:48},{thing:"Brick",x:344,y:48},{macro:"Fill",thing:"Koopa",x:352,y:12,xnum:2,xwidth:12},{macro:"Fill",thing:"Brick",x:352,y:32,ynum:3},{thing:"Brick",x:360,y:32},{thing:"Coin",x:361,y:39},{macro:"Fill",thing:"Brick",x:368,y:32,ynum:2},{thing:"Brick",x:368,y:48,contents:"Star"},{macro:"Fill",thing:"Brick",x:416,y:32,xnum:2,ynum:5},{macro:"Fill",thing:"Brick",x:432,y:16,xnum:2,ynum:3},{macro:"Fill",thing:"Brick",x:432,y:72,xnum:2,ynum:2},{macro:"Fill",thing:"Brick",x:464,y:32,xnum:4,ynum:1},{macro:"Fill",thing:"Brick",x:464,y:72,xnum:5,ynum:2},{macro:"Fill",thing:"Coin",x:465,y:39,xnum:4,xwidth:8},{thing:"Koopa",x:472,y:12},{macro:"Fill",thing:"Brick",x:496,y:32,xnum:2,ynum:7},{thing:"Goomba",x:494,y:8},{thing:"Goomba",x:510,y:8},{macro:"Fill",thing:"Brick",x:528,y:72,xnum:4,ynum:2},{macro:"Fill",thing:"Brick",x:536,y:32,ynum:5},{macro:"Fill",thing:"Brick",x:544,y:32,xnum:2},{thing:"Coin",x:545,y:39},{thing:"Brick",x:552,y:40,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:576,y:32,xnum:2},{thing:"Brick",x:576,y:40},{macro:"Fill",thing:"Brick",x:576,y:48,xnum:2,ynum:3},{thing:"Brick",x:584,y:40,contents:"Coin"},{thing:"Goomba",x:584,y:72},{macro:"Fill",thing:"Brick",x:608,y:32,xnum:4},{macro:"Fill",thing:"Goomba",x:608,y:40,xnum:2,xwidth:12},{macro:"Fill",thing:"Brick",x:608,y:72,xnum:4,ynum:2},{macro:"Floor",x:664,width:272},{macro:"Fill",thing:"Brick",x:672,y:40,xnum:6,ynum:2},{macro:"Fill",thing:"Coin",x:674,y:64,xnum:6,xwidth:8},{thing:"Brick",x:712,y:88,contents:"Mushroom1Up"},{macro:"Ceiling",x:720,width:360},{macro:"Fill",thing:"Goomba",x:768,y:8,xnum:3,xwidth:12},{macro:"Pipe",x:800,height:24,piranha:!0,transport:2},{macro:"Pipe",x:848,height:32,piranha:!0},{thing:"Goomba",x:872,y:8},{macro:"Pipe",x:896,height:16,piranha:!0,entrance:3},{macro:"Floor",x:952,width:16},{macro:"Fill",thing:"Brick",x:952,y:8,xnum:2,ynum:3},{macro:"Floor",x:984,width:96},{thing:"Stone",x:1040,y:8},{thing:"Stone",x:1048,y:16,height:16},{thing:"Stone",x:1056,y:24,height:24},{thing:"Goomba",x:1056,y:32},{thing:"Stone",x:1064,y:32,height:32},{thing:"Goomba",x:1064,y:48},{thing:"Stone",x:1072,y:32,height:32},{macro:"PlatformGenerator",x:1096,width:24},{macro:"Floor",x:1144,width:64},{macro:"Fill",thing:"Brick",x:1144,y:40,xnum:5,ynum:1},{thing:"Koopa",x:1152,y:12,smart:!0},{thing:"Brick",x:1184,y:40,contents:"Mushroom"},{macro:"PlatformGenerator",x:1224,width:24,direction:-1},{macro:"Floor",x:1264,width:256},{macro:"Fill",thing:"Brick",x:1264,y:8,xnum:17,ynum:3},{thing:"PipeHorizontal",x:1312,y:40,transport:4},{thing:"PipeVertical",x:1328,y:88,height:64},{thing:"ScrollEnabler",x:1328,y:120,height:48},{macro:"Ceiling",x:1272,width:56},{macro:"Fill",thing:"Brick",x:1344,y:32,xnum:7,ynum:7},{macro:"Ceiling",x:1344,width:136},{thing:"ScrollBlocker",x:1344},{macro:"WarpWorld",x:1400,warps:[4,3,2]},{macro:"Fill",thing:"Brick",x:1504,y:8,xnum:2,ynum:11},{thing:"ScrollBlocker",x:1518,y:8}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:24,y:32,xnum:9},{macro:"Fill",thing:"Brick",x:24,y:64,xnum:10,ynum:4},{macro:"Fill",thing:"Coin",x:25,y:7,xnum:9,xwidth:8},{macro:"Fill",thing:"Coin",x:33,y:39,xnum:8,xwidth:8},{thing:"Brick",x:96,y:32,contents:"Coin"},{macro:"Fill",thing:"Brick",x:104,y:24,xnum:2,ynum:9},{thing:"PipeHorizontal",x:104,y:16,transport:3},{thing:"PipeVertical",x:120,y:100,height:100}]},{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:464},{macro:"Pipe",height:16,piranha:!0,entrance:4},{macro:"Pattern",pattern:"BackRegular",x:104},{thing:"Stone",x:16,y:8},{thing:"Stone",x:24,y:16,height:16},{thing:"Stone",x:32,y:24,height:24},{thing:"Stone",x:40,y:32,height:32},{thing:"Stone",x:48,y:40,height:40},{thing:"Stone",x:56,y:48,height:48},{thing:"Stone",x:64,y:56,height:56},{thing:"Stone",x:72,y:64,height:64,width:16},{macro:"EndOutsideCastle",x:152,transport:{map:"1-3"}}]}]},{name:"1-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",x:0,y:4,repeat:5},{macro:"Floor",x:0,y:0,width:128},{macro:"CastleSmall"},{macro:"Tree",x:144,y:8,width:32},{macro:"Tree",x:192,y:32,width:64,solidTrunk:!0},{macro:"Tree",x:208,y:64,width:40},{macro:"Fill",thing:"Coin",x:217,y:71,xnum:3,xwidth:8},{thing:"Koopa",x:240,y:76,smart:!0},{macro:"Tree",x:256,y:8,width:24},{thing:"Coin",x:266,y:15},{macro:"Tree",x:280,y:40,width:40},{macro:"Fill",thing:"Coin",x:297,y:87,xnum:2,xwidth:8},{macro:"Tree",x:320,y:72,width:56},{macro:"Fill",thing:"Goomba",x:352,y:80,xnum:2,xwidth:16},{macro:"Tree",x:400,width:32},{macro:"Fill",thing:"Coin",x:402,y:55,xnum:2,xwidth:8},{thing:"Platform",x:440,y:56,width:24,floating:!0,begin:-4,end:56},{macro:"Tree",x:472,width:40},{thing:"Block",x:472,y:24,contents:"Mushroom"},{macro:"Tree",x:480,y:64,width:32},{macro:"Fill",thing:"Coin",x:482,y:71,xnum:4,xwidth:8},{macro:"Tree",x:520,width:40},{macro:"Tree",x:560,y:32,width:24},{thing:"Koopa",x:592,y:76,smart:!0,jumping:!0,floating:!0,begin:16,end:88},{macro:"Tree",x:608,y:56,width:48},{thing:"Goomba",x:640,y:64},{macro:"Fill",thing:"Coin",x:681,y:63,xnum:2,xwidth:8},{thing:"Platform",x:688,y:40,width:24,sliding:!0,begin:660,end:720},{macro:"Fill",thing:"Coin",x:745,y:71,xnum:2,xwidth:8},{thing:"Platform",x:752,y:32,width:24,sliding:!0,begin:708,end:776},{macro:"Fill",thing:"Coin",x:777,y:71,xnum:2,xwidth:8},{macro:"Tree",x:784,y:16,width:32},{macro:"Tree",x:832,y:48,width:64,solidTrunk:!0},{thing:"Koopa",x:880,y:60,smart:!0},{macro:"Tree",x:904,width:24},{macro:"Fill",thing:"Coin",x:906,y:7,xnum:3,xwidth:8},{thing:"Koopa",x:912,y:68,smart:!0,jumping:!0,floating:!0,begin:4,end:76},{macro:"Tree",x:928,y:32,width:32},{macro:"Fill",thing:"Coin",x:963,y:63,xnum:2,xwidth:8},{macro:"Tree",x:976,y:32,width:32,solidTrunk:!0},{macro:"Floor",x:1032,width:368},{thing:"Platform",x:1048,y:56,width:24,sliding:!0,begin:1024,end:1068},{thing:"Koopa",x:1064,y:12,smart:!0},{thing:"Stone",x:1104,y:32,width:16,height:32},{thing:"Stone",x:1120,y:48,width:16,height:48},{thing:"Stone",x:1136,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1224,large:!0,walls:12,transport:{map:"1-4"}}]}]},{name:"1-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",blockBoundaries:!0,creation:[{macro:"StartInsideCastle",width:104},{thing:"Stone",y:88,width:192,height:24},{macro:"Water",x:104,y:8,width:24},{macro:"Floor",x:120,y:24,width:88},{thing:"Stone",x:184,y:64},{thing:"CastleBlock",x:184,y:56},{thing:"Stone",x:192,y:88,width:1088},{macro:"Water",x:208,width:24},{macro:"Floor",x:232,y:24,width:8},{macro:"Floor",x:240,y:16,width:8},{thing:"CastleBlock",x:240,y:24,fireballs:6,speed:-1},{thing:"Block",x:240,y:56,contents:"Mushroom"},{macro:"Floor",x:248,y:24,width:8},{macro:"Water",x:256,width:24},{macro:"Floor",x:280,y:0,width:744},{thing:"Stone",x:280,y:32,width:296},{thing:"Stone",x:280,y:24,width:552,height:24},{thing:"Stone",x:296,y:80,width:280,height:24},{thing:"CastleBlock",x:296,y:56},{thing:"CastleBlock",x:392,y:56,fireballs:6},{thing:"CastleBlock",x:480,y:56,fireballs:6},{thing:"CastleBlock",x:536,y:56,fireballs:6},{thing:"CastleBlock",x:608,y:32,fireballs:6},{thing:"CastleBlock",x:640,y:72},{thing:"Stone",x:640,y:80},{thing:"CastleBlock",x:672,y:32,fireballs:6},{thing:"CastleBlock",x:704,y:72,fireballs:6,direction:1},{thing:"Stone",x:704,y:80},{thing:"CastleBlock",x:736,y:32},{thing:"Stone",x:776,y:80,width:56,height:16},{macro:"Fill",thing:"Block",x:848,y:32,xnum:3,xwidth:24,hidden:!0},{macro:"Fill",thing:"Block",x:856,y:64,xnum:3,xwidth:24,hidden:!0},{thing:"Stone",x:928,y:24,width:32,height:24},{thing:"Stone",x:984,y:24,width:40,height:24},{thing:"Stone",x:984,y:80,width:40,height:16},{macro:"EndInsideCastle",x:1024,transport:{map:"2-1"}},{thing:"Platform",x:1108,y:56,width:16,sliding:!0,begin:1080,end:1112,nocollidechar:!0}]}]},{name:"2-1",locations:[{entry:"Plain"},{xloc:1288},{entry:"PipeVertical"},{area:1,entry:"Vine"},{area:2}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:736},{macro:"CastleLarge",x:-16},{macro:"Pattern",pattern:"BackFence",repeat:2},{thing:"Brick",x:120,y:32},{thing:"Brick",x:128,y:32,contents:"Mushroom"},{thing:"Brick",x:136,y:32},{thing:"Stone",x:160,y:8},{thing:"Stone",x:168,y:16,height:16},{thing:"Stone",x:176,y:24,height:24},{thing:"Stone",x:184,y:32,height:32},{thing:"Stone",x:192,y:40,height:40},{thing:"Goomba",x:192,y:48},{thing:"Block",x:224,y:32,hidden:!0},{thing:"Block",x:224,y:64,contents:"Mushroom1Up",hidden:!0},{macro:"Fill",thing:"Brick",x:232,y:64,xnum:3},{thing:"Koopa",x:256,y:12},{thing:"Koopa",x:264,y:12},{thing:"Stone",x:272,y:32,height:32},{thing:"Stone",x:280,y:16,height:16},{thing:"Goomba",x:336,y:8},{thing:"Goomba",x:348,y:8},{macro:"Pipe",x:368,height:32,Piranha:"true"},{thing:"Block",x:424,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Block",x:424,y:64,xnum:5},{macro:"Fill",thing:"Block",x:432,y:32,xnum:4},{thing:"Koopa",x:440,y:44},{thing:"Goomba",x:472,y:8},{thing:"Goomba",x:484,y:8},{thing:"Koopa",x:528,y:12},{macro:"Fill",thing:"Goomba",x:544,y:8,xnum:3,xwidth:12},{thing:"Brick",x:544,y:32},{thing:"Brick",x:552,y:64,contents:"Star"},{thing:"Brick",x:560,y:64,xnum:3},{macro:"Pipe",x:592,height:32,piranha:!0},{macro:"Fill",thing:"Block",x:632,y:32,xnum:4},{macro:"Fill",thing:"Brick",x:648,y:64,xnum:2},{thing:"Brick",x:664,y:64,contents:["Vine",{transport:3}]},{macro:"Fill",thing:"Brick",x:672,y:64,xnum:2},{macro:"Fill",thing:"Block",x:680,y:32,xnum:3},{macro:"Fill",thing:"Goomba",x:704,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Brick",x:736,y:64,xnum:4},{macro:"Floor",x:768,width:80},{macro:"Pattern",pattern:"BackFenceMin",x:768},{thing:"Goomba",x:820,y:40},{macro:"Pipe",x:824,height:32,piranha:!0,transport:4},{macro:"Floor",x:872,width:240},{thing:"Goomba",x:916,y:24},{macro:"Pipe",x:920,height:16,piranha:!0,entrance:2},{thing:"Goomba",x:962,y:8},{macro:"Pipe",x:976,height:32,piranha:!0},{thing:"Brick",x:1e3,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:1008,y:64,xnum:3},{macro:"Pipe",x:1008,height:24},{macro:"Pipe",x:1040,height:40,piranha:!0},{macro:"Floor",x:1136,width:80},{macro:"Pattern",pattern:"BackFence",x:1152,repeat:2},{thing:"Koopa",x:1200,y:36,jumping:!0},{macro:"Floor",x:1232,width:576},{thing:"Stone",x:1232,y:24,height:24},{thing:"Brick",x:1288,y:32,contents:"Coin"},{macro:"Fill",thing:"Goomba",x:1296,y:8,xnum:2,xwidth:12},{macro:"Fill",thing:"Brick",x:1312,y:64,xnum:5},{macro:"Fill",thing:"Koopa",x:1352,y:12,xnum:2,xwidth:16},{thing:"Block",x:1360,y:32},{thing:"Block",x:1374,y:64,contents:"Mushroom"},{macro:"Pipe",x:1408,height:24,piranha:!0},{thing:"Koopa",x:1480,y:12},{macro:"Fill",thing:"Brick",x:1480,y:32,xnum:2},{thing:"Block",x:1488,y:64,contents:"Coin",hidden:!0},{thing:"Springboard",x:1504,y:14.5},{macro:"Fill",thing:"Stone",x:1520,y:80,xnum:2,height:80},{macro:"EndOutsideCastle",x:1600,transport:{map:"2-2"}}]},{setting:"Sky",exit:1,creation:[{thing:"Stone",width:32},{thing:"Stone",x:40,width:456},{macro:"Fill",thing:"Coin",x:121,y:55,xnum:16,xwidth:8},{thing:"Platform",x:128,y:24,width:24,transport:!0},{macro:"Fill",thing:"Coin",x:257,y:71,xnum:3,xwidth:8},{macro:"Fill",thing:"Coin",x:289,y:63,xnum:16,xwidth:8},{macro:"Fill",thing:"Coin",x:425,y:71,xnum:3,xwidth:8},{macro:"Fill",thing:"Coin",x:553,y:7,xnum:3,xwidth:8}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:56},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:8,xnum:7,ynum:3},{macro:"Fill",thing:"Coin",x:33,y:31,xnum:7,ynum:2,yheight:16,xwidth:8},{macro:"Fill",thing:"Coin",x:41,y:63,xnum:5,xwidth:8},{thing:"PipeHorizontal",x:104,y:16,transport:2},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"2-2",locations:[{entry:"Walking"},{area:1},{area:2,entry:"PipeVertical"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",y:4,repeat:2},{macro:"Floor",width:192},{macro:"CastleSmall"},{thing:"PipeHorizontal",x:80,y:16,transport:1},{macro:"Pipe",x:96,height:32}]},{setting:"Underwater",blockBoundaries:!0,underwater:!0,creation:[{macro:"Floor",width:536},{thing:"Coral",x:96,y:24,height:24},{macro:"Fill",thing:"Coin",x:121,y:7,xnum:2,xwidth:8},{thing:"Stone",x:152,y:32,width:24},{thing:"Blooper",x:184,y:16},{macro:"Fill",thing:"Coin",x:224,y:64,xnum:3,xwidth:8},{thing:"Coral",x:272,y:40,height:40},{macro:"Fill",thing:"Coin",x:296,y:7,xnum:3,xwidth:8},{thing:"Stone",x:344,y:32,width:16},{thing:"Coral",x:344,y:48,height:16},{thing:"Blooper",x:376,y:32},{thing:"Coral",x:408,y:32,height:32},{thing:"Blooper",x:448,y:24},{thing:"Stone",x:520,y:24,height:24},{thing:"Stone",x:528,y:40,height:40},{macro:"Fill",thing:"Coin",x:546,y:23,xnum:3,xwidth:8},{macro:"Floor",x:576,width:480},{thing:"Stone",x:576,y:40,height:40},{thing:"Stone",x:584,y:24,height:24},{thing:"CheepCheep",x:616,y:24},{thing:"Stone",x:632,y:24,width:16,height:24},{thing:"Stone",x:632,y:88,width:16,height:24},{thing:"CheepCheep",x:640,y:48},{thing:"CheepCheep",x:656,y:16},{thing:"Stone",x:664,y:64,width:24},{thing:"Blooper",x:672,y:40},{thing:"Coral",x:672,y:80,height:16},{thing:"Coral",x:720,y:24,height:24},{thing:"Blooper",x:760,y:80},{thing:"CheepCheep",x:760,y:56},{thing:"CheepCheep",x:784,y:80,smart:!0},{macro:"Fill",thing:"Coin",x:816,y:15,xnum:3,xwidth:8},{thing:"Stone",x:824,y:32,width:16},{thing:"Coral",x:824,y:64,height:32},{thing:"Blooper",x:848,y:16},{macro:"Fill",thing:"Coin",x:912,y:55,xnum:3,xwidth:8},{thing:"Stone",x:928,y:40,width:16},{thing:"CheepCheep",x:944,y:72},{thing:"Coral",x:968,y:32,height:32},{thing:"CheepCheep",x:1032,y:24,smart:!0},{thing:"Stone",x:1040,y:32,height:32},{thing:"Stone",x:1048,y:16,height:16},{thing:"CheepCheep",x:1056,y:16},{thing:"Stone",x:1056,y:88,height:24},{thing:"Stone",x:1064,y:72,width:64},{thing:"Coin",x:1073,y:15},{macro:"Fill",thing:"Coin",x:1080,y:7,xnum:3,xwidth:8},{thing:"Coin",x:1105,y:15},{thing:"CheepCheep",x:1100,y:40},{macro:"Floor",x:1128,width:136},{thing:"Stone",x:1128,y:16,height:16},{thing:"Stone",x:1136,y:32,height:32},{thing:"CheepCheep",x:1160,y:32},{thing:"Coral",x:1184,y:16,height:16},{thing:"Coral",x:1200,y:24,height:24},{thing:"CheepCheep",x:1206,y:56,smart:!0},{thing:"Stone",x:1256,y:64,height:64},{thing:"Stone",x:1264,y:64,width:16},{macro:"Fill",thing:"Coin",x:1281,y:7,xnum:3,ynum:2,xwidth:8,yheight:24},{thing:"Stone",x:1304,y:64,width:16},{thing:"Stone",x:1320,y:64,height:64},{macro:"Floor",x:1320,width:320},{thing:"CheepCheep",x:1320,y:80},{thing:"CheepCheep",x:1344,y:16},{macro:"Fill",thing:"Stone",x:1384,y:32,ynum:2,yheight:32,width:40},{thing:"Coral",x:1392,y:80,height:16},{thing:"CheepCheep",x:1408,y:40},{macro:"Fill",thing:"Stone",x:1448,y:32,ynum:2,yheight:32,width:32},{thing:"CheepCheep",x:1472,y:72,smart:!0},{thing:"CheepCheep",x:1496,y:48,smart:!0},{thing:"Stone",x:1488,y:8,width:40},{thing:"Stone",x:1496,y:16,width:32},{thing:"Stone",x:1504,y:24,width:24},{thing:"Stone",x:1512,y:32,width:16},{thing:"Stone",x:1512,y:88,width:16,height:32},{thing:"PipeHorizontal",x:1520,y:48,transport:2,small:!0},{thing:"Stone",x:1528,y:88,width:128,height:88},{macro:"Floor",x:1640,width:16}]},{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:464},{macro:"Pipe",height:16,piranha:!0,entrance:2},{macro:"Pattern",pattern:"BackRegular",x:104},{thing:"Stone",x:16,y:8},{thing:"Stone",x:24,y:16,height:16},{thing:"Stone",x:32,y:24,height:24},{thing:"Stone",x:40,y:32,height:32},{thing:"Stone",x:48,y:40,height:40},{thing:"Stone",x:56,y:48,height:48},{thing:"Stone",x:64,y:56,height:56},{thing:"Stone",x:72,y:64,height:64,width:16},{macro:"EndOutsideCastle",x:152,transport:{map:"2-3"}}]}]},{name:"2-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:56},{macro:"CastleSmall"},{macro:"Pattern",pattern:"BackCloud",y:4,repeat:4},{macro:"CheepsStart",x:64},{macro:"Tree",x:64,width:64},{thing:"Stone",x:80,y:8},{thing:"Stone",x:88,y:16,height:16},{thing:"Stone",x:96,y:24,height:24,width:24},{macro:"Bridge",x:120,y:24,width:136,end:!0},{macro:"Bridge",x:256,y:24,width:128,end:!0},{macro:"Fill",thing:"Coin",x:290,y:63,xnum:4,xwidth:8},{macro:"Bridge",x:384,y:24,width:128,end:!0},{macro:"Fill",thing:"Coin",x:441,y:63,xnum:3,xwidth:16},{macro:"Fill",thing:"Coin",x:449,y:55,xnum:2,xwidth:16},{macro:"Bridge",x:544,y:24,width:96,begin:!0,end:!0},{macro:"Bridge",x:672,y:24,width:96,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:777,y:63,xnum:3,xwidth:8},{macro:"Bridge",x:792,y:32,width:56,begin:!0,end:!0},{thing:"Block",x:816,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Coin",x:865,y:63,xnum:3,xwidth:8},{macro:"Tree",x:896,width:64},{macro:"Bridge",x:976,y:24,width:24},{macro:"Bridge",x:1016,y:24,width:136,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:1064,y:63,xnum:6,xwidth:8},{macro:"Bridge",x:1168,y:8,width:80,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:1193,y:39,xnum:4,xwidth:8},{macro:"Bridge",x:1272,y:24,width:80,begin:!0,end:!0},{macro:"Bridge",x:1368,y:24,width:16},{macro:"Fill",thing:"Coin",x:1385,y:55,xnum:6,xwidth:8},{macro:"Bridge",x:1400,y:24,width:16},{macro:"Bridge",x:1432,y:24,width:16},{macro:"Bridge",x:1464,y:24,width:80,begin:!0},{macro:"Tree",x:1536,width:104},{macro:"Pattern",pattern:"BackCloud",x:1536,y:4,skips:[5]},{thing:"Stone",x:1544,y:24,width:16,height:24},{thing:"Stone",x:1560,y:16,height:16},{thing:"Stone",x:1568,y:8},{macro:"CheepsStop",x:1600},{macro:"Floor",x:1656,width:280},{thing:"Stone",x:1664,y:8},{thing:"Stone",x:1672,y:16,height:16},{thing:"Stone",x:1680,y:24,height:24},{thing:"Stone",x:1688,y:32,height:32},{thing:"Stone",x:1696,y:40,height:40},{thing:"Stone",x:1704,y:48,height:48},{thing:"Stone",x:1712,y:56,height:56},{thing:"Stone",x:1720,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1800,large:!0,walls:7,transport:{map:"2-4"}}]}]},{name:"2-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",blockBoundaries:!0,creation:[{macro:"StartInsideCastle",width:128},{thing:"Stone",y:88,width:128,height:24},{thing:"Podoboo",x:128,y:-32},{macro:"Water",x:128,width:128},{thing:"Stone",x:144,y:32,width:16},{thing:"Stone",x:176,y:48},{thing:"CastleBlock",x:184,y:48},{thing:"Block",x:184,y:80,contents:"Mushroom"},{thing:"Stone",x:192,y:48},{thing:"Stone",x:216,y:32,width:16},{thing:"Podoboo",x:240,y:-32},{macro:"Floor",x:256,y:-8,width:416},{thing:"Stone",x:256,
y:24,width:16,height:32},{thing:"Stone",x:272,y:88,width:392,height:24},{thing:"Stone",x:272,y:64,width:168},{thing:"Stone",x:272,width:72},{thing:"Stone",x:296,y:32,width:96},{thing:"CastleBlock",x:344},{thing:"Stone",x:352,width:88},{thing:"CastleBlock",x:392,y:32,fireballs:6},{thing:"Stone",x:400,y:32,width:88},{thing:"CastleBlock",x:440,y:64,fireballs:6},{thing:"CastleBlock",x:440},{thing:"Stone",x:448,width:88},{thing:"Stone",x:448,y:64,width:216},{thing:"CastleBlock",x:488,y:32,fireballs:6},{thing:"Stone",x:496,y:32,width:88},{thing:"CastleBlock",x:536},{thing:"Stone",x:544,width:96},{thing:"CastleBlock",x:584,y:32,fireballs:6},{thing:"Stone",x:640,y:24,width:32,height:32},{thing:"CastleBlock",x:656,y:56,fireballs:6},{macro:"PlatformGenerator",x:686,width:12,direction:-1},{macro:"PlatformGenerator",x:710,width:12},{macro:"Floor",x:736,y:16},{thing:"CastleBlock",x:736,y:24,fireballs:6,direction:1},{macro:"Floor",x:744,y:24,width:48},{thing:"Stone",x:744,y:88,width:48,height:24},{macro:"Floor",x:792,width:80},{macro:"Fill",thing:"Coin",x:817,y:7,xnum:3,ynum:2,xwidth:8,yheight:32},{thing:"CastleBlock",x:824,y:16},{thing:"Stone",x:864,y:24,height:24},{macro:"Water",x:872,width:16},{thing:"Stone",x:864,y:24,height:24},{macro:"Floor",x:888,y:24,width:16},{macro:"Water",x:904,width:32},{macro:"Floor",x:920,width:104},{thing:"Stone",x:920,y:24,width:40,height:24},{thing:"Stone",x:920,y:88,width:104,height:24},{macro:"Fill",thing:"Stone",x:976,y:24,xnum:2,xwidth:32,width:16,height:24},{macro:"Fill",thing:"Brick",x:1024,y:64,xnum:6},{macro:"EndInsideCastle",x:1024,spawnType:"Shell",transport:{map:"3-1"}},{thing:"Platform",x:1108,y:56,width:16,sliding:!0,begin:1080,end:1112,nocollidechar:!0}]}]},{name:"3-1",time:300,locations:[{entry:"Plain"},{entry:"PipeVertical"},{xloc:1272},{area:1},{area:2,entry:"Vine"}],areas:[{setting:"Overworld Night Alt",blockBoundaries:!0,creation:[{macro:"Floor",width:360},{macro:"CastleLarge",x:-16},{macro:"Pattern",pattern:"BackFence",repeat:5},{thing:"Block",x:128,y:32},{thing:"Block",x:152,y:40},{thing:"Block",x:176,y:40,contents:"Mushroom"},{thing:"Koopa",x:200,y:12,jumping:!0},{macro:"Fill",thing:"Brick",x:208,y:32,xnum:3},{thing:"Koopa",x:224,y:20,jumping:!0},{macro:"Pipe",x:256,height:24,piranha:!0},{thing:"Goomba",x:296,y:8},{macro:"Pipe",x:304,height:32,piranha:!0,transport:3},{macro:"Floor",x:384,width:232},{macro:"Fill",thing:"Goomba",x:424,y:8,xnum:3,xwidth:12},{macro:"Pipe",x:456,height:24,piranha:!0},{thing:"Brick",x:488,y:32},{thing:"Koopa",x:520,y:12},{macro:"Pipe",x:536,height:16,piranha:!0,entrance:1},{thing:"Stone",x:584,y:8},{thing:"Stone",x:592,y:16,height:16},{thing:"Stone",x:600,y:24,height:24},{thing:"Stone",x:608,y:32,height:32},{macro:"Water",x:616,y:10,width:64},{macro:"Bridge",x:616,y:32,width:64},{macro:"Fill",thing:"Goomba",x:656,y:40,xnum:3,xwidth:12},{thing:"Block",x:656,y:64,contents:"Mushroom1Up",hidden:!0},{macro:"Floor",x:680},{thing:"Stone",x:680,y:32,height:32},{macro:"Water",x:688,y:10,width:16},{macro:"Floor",x:704,width:320},{thing:"Stone",x:704,y:32,height:32},{thing:"Stone",x:712,y:16,height:16},{thing:"Brick",x:720,y:64,contents:"Star"},{macro:"Fill",thing:"Brick",x:728,y:64,xnum:2},{macro:"Fill",thing:"Goomba",x:752,y:8,xnum:2,xwidth:12},{thing:"Koopa",x:808,y:12},{macro:"Pipe",x:824,height:32,piranha:!0},{macro:"Fill",thing:"Brick",x:888,y:32,xnum:11},{macro:"Fill",thing:"Brick",x:888,y:64,xnum:2},{thing:"HammerBro",x:904,y:44},{thing:"Block",x:904,y:64},{macro:"Fill",thing:"Brick",x:912,y:64,xnum:3},{thing:"HammerBro",x:936,y:12},{thing:"Block",x:936,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:944,y:64,xnum:3},{macro:"Fill",thing:"Brick",x:1032,y:40,xnum:3},{macro:"Fill",thing:"Brick",x:1032,y:64,xnum:2},{thing:"Brick",thing:"Brick",x:1048,y:64,contents:["Vine",{entrance:4}]},{macro:"Floor",x:1056,width:80},{thing:"Stone",x:1088,y:8},{thing:"Stone",x:1096,y:16,height:16},{thing:"Stone",x:1104,y:24,height:24},{thing:"Stone",x:1112,y:32,height:32},{thing:"Goomba",x:1112,y:40},{thing:"Stone",x:1120,y:40,height:40},{thing:"Goomba",x:1120,y:48},{thing:"Stone",x:1128,y:48,height:48},{macro:"Floor",x:1152,width:264},{thing:"Koopa",x:1192,y:12},{macro:"Fill",thing:"Brick",x:1200,y:32,xnum:2,ynum:2,xwidth:16,yheight:32},{macro:"Fill",thing:"Block",x:1208,y:32,ynum:2,yheight:32},{thing:"Koopa",x:1216,y:76},{macro:"Fill",thing:"Goomba",x:1232,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Brick",x:1240,y:32,xnum:2,ynum:2,xwidth:16,yheight:32},{thing:"Block",x:1248,y:32,contents:"Mushroom"},{thing:"Block",x:1248,y:64},{thing:"Koopa",x:1320,y:12,jumping:!0},{thing:"Brick",x:1328,y:32},{thing:"Brick",x:1336,y:32,contents:"Coin"},{thing:"Koopa",x:1344,y:18,jumping:!0},{macro:"Fill",thing:"Brick",x:1344,y:32,xnum:3},{thing:"Koopa",x:1360,y:44},{thing:"Koopa",x:1368,y:12,jumping:!0},{thing:"Stone",x:1392,y:24,height:24},{thing:"Stone",x:1400,y:48,height:48},{macro:"Floor",x:1440,width:320},{thing:"Stone",x:1464,y:8},{thing:"Stone",x:1472,y:16,height:16},{thing:"Stone",x:1480,y:24,height:24},{thing:"Stone",x:1488,y:32,height:32},{thing:"Stone",x:1496,y:40,height:40},{thing:"Stone",x:1504,y:48,height:48},{thing:"Koopa",x:1504,y:60},{thing:"Stone",x:1512,y:56,height:56},{thing:"Stone",x:1520,y:64,width:16,height:64},{thing:"Koopa",x:1528,y:76},{macro:"EndOutsideCastle",x:1600,transport:{map:"3-2"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:24,y:40,xnum:2,ynum:4,xwidth:72},{macro:"Fill",thing:"Brick",x:32,y:32,xnum:2,xwidth:56},{macro:"Fill",thing:"Brick",x:32,y:56,xnum:2,ynum:2,xwidth:56},{macro:"Fill",thing:"Coin",x:33,y:39,xnum:2,xwidth:56},{macro:"Fill",thing:"Brick",x:40,y:40,xnum:2,xwidth:40},{thing:"Brick",x:40,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Coin",x:41,y:47,xnum:2,xwidth:40},{macro:"Fill",thing:"Brick",x:48,y:48,xnum:2,xwidth:24},{macro:"Fill",thing:"Coin",x:49,y:55,xnum:2,ynum:2,xwidth:24,yheight:16},{macro:"Fill",thing:"Brick",x:56,y:56,xnum:2,ynum:2},{macro:"Fill",thing:"Coin",x:57,y:71,xnum:2,ynum:2,xwidth:8,yheight:8},{thing:"Brick",x:80,y:64},{thing:"PipeHorizontal",x:104,y:16,entrance:1},{thing:"PipeVertical",x:120,y:88,height:88}]},{setting:"Sky Night",blockBoundaries:!1,exit:2,creation:[{thing:"Stone",width:32},{thing:"Stone",x:40,width:624},{thing:"Platform",x:128,y:24,width:24,transport:!0},{macro:"Fill",thing:"Coin",x:121,y:55,xnum:16,xwidth:8},{thing:"Stone",x:256,y:40},{macro:"Fill",thing:"Coin",x:273,y:55,xnum:16,xwidth:8},{thing:"Stone",x:408,y:48,height:16},{macro:"Fill",thing:"Coin",x:425,y:63,xnum:7,xwidth:8},{thing:"Stone",x:488,y:48,height:16},{thing:"Stone",x:536,y:56,width:16},{macro:"Fill",thing:"Stone",x:568,y:56,xnum:5,xwidth:16},{macro:"Fill",thing:"Coin",x:569,y:63,xnum:10,xwidth:8},{macro:"Fill",thing:"Coin",x:681,y:15,xnum:3,xwidth:8}]}]},{name:"3-2",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld Night Alt",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFence",x:-384,repeat:6},{macro:"Floor",width:640},{macro:"CastleSmall"},{thing:"Koopa",x:136,y:12},{macro:"Fill",thing:"Goomba",x:192,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Koopa",x:264,y:12,xnum:3,xwidth:12},{macro:"Fill",thing:"Koopa",x:344,y:12,xnum:2,xwidth:12},{thing:"Stone",x:392,y:8},{macro:"Fill",thing:"Coin",x:441,y:31,xnum:3,xwidth:8},{thing:"Stone",x:480,y:24,height:24},{thing:"Block",x:480,y:56,contents:"Mushroom"},{thing:"Koopa",x:528,y:12},{macro:"Fill",thing:"Goomba",x:568,y:8,xnum:3,xwidth:12},{thing:"Stone",x:600,y:16,height:16},{thing:"Brick",x:616,y:32,contents:"Coin"},{thing:"Brick",x:616,y:64,contents:"Star"},{thing:"Koopa",x:624,y:12},{thing:"Stone",x:632,y:16,height:16},{macro:"Floor",x:656,width:328},{thing:"Koopa",x:736,y:34,jumping:!0},{thing:"Koopa",x:888,y:12},{macro:"Fill",thing:"Goomba",x:952,y:8,xnum:3,xwidth:12},{macro:"Floor",x:1e3,width:24},{thing:"Stone",x:1008,y:16,height:16},{thing:"Brick",x:1008,y:56},{macro:"Floor",x:1040,width:752},{thing:"Koopa",x:1072,y:12},{macro:"Fill",thing:"Koopa",x:1120,y:12,xnum:3,xwidth:12},{macro:"Fill",thing:"Koopa",x:1200,y:12,xnum:2,xwidth:12},{macro:"Fill",thing:"Koopa",x:1296,y:12,xnum:3,xwidth:12},{macro:"Fill",thing:"Coin",x:1345,y:55,xnum:4,xwidth:8},{macro:"Pipe",x:1352,height:24,piranha:!0},{thing:"Koopa",x:1400,y:12},{macro:"Fill",thing:"Goomba",x:1432,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Goomba",x:1504,y:8,xnum:3,xwidth:12},{thing:"Stone",x:1536,y:8},{thing:"Stone",x:1544,y:16,height:16},{thing:"Stone",x:1552,y:24,height:24},{thing:"Stone",x:1560,y:32,height:32},{thing:"Stone",x:1568,y:40,height:40},{thing:"Stone",x:1576,y:48,height:48},{thing:"Stone",x:1584,y:56,height:56},{thing:"Stone",x:1592,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1672,transport:{map:"3-3"}}]}]},{name:"3-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld Night",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",y:4,repeat:7},{macro:"Floor",width:128},{macro:"CastleSmall"},{macro:"Tree",x:144,y:24,width:40},{macro:"Tree",x:176,y:48,width:48},{thing:"Goomba",x:208,y:56},{thing:"Platform",x:240,y:72,width:24,sliding:!0,begin:228,end:260},{macro:"Tree",x:240,width:24},{macro:"Fill",thing:"Coin",x:249,y:7,xnum:2,xwidth:8},{thing:"Platform",x:264,y:40,width:24,sliding:!0,begin:244,end:276},{macro:"Tree",x:288,y:8,width:56},{thing:"Coin",x:298,y:55},{macro:"Fill",thing:"Coin",x:337,y:55,xnum:3,xwidth:8},{macro:"Tree",x:344,y:32,width:32},{macro:"Tree",x:368,y:16,width:80},{macro:"Tree",x:376,y:48,width:48},{thing:"Block",x:392,y:80,contents:"Mushroom"},{macro:"Fill",thing:"Coin",x:417,y:31,xnum:3,xwidth:8},{thing:"Koopa",x:416,y:60,smart:!0},{thing:"Koopa",x:432,y:28,smart:!0},{macro:"Tree",x:440,y:80,width:32},{macro:"Fill",thing:"Coin",x:449,y:87,xnum:2,xwidth:8},{thing:"Platform",x:482,y:56,width:24,falling:!0},{macro:"Tree",x:520,width:128},{macro:"Tree",x:520,y:48,width:24},{macro:"Fill",thing:"Coin",x:529,y:55,xnum:3,xwidth:32},{macro:"Tree",x:552,y:48,width:24},{thing:"Koopa",x:584,y:12,smart:!0},{macro:"Tree",x:584,y:48,width:24},{macro:"Tree",x:616,y:72,width:24},{thing:"Coin",x:625,y:79},{macro:"Scale",x:660,y:86,between:56,dropRight:44},{macro:"Tree",x:672,y:16,width:32},{thing:"Platform",x:752,y:32,width:24,falling:!0},{thing:"Platform",x:768,y:64,width:24,falling:!0},{macro:"Tree",x:776,y:32,width:24},{thing:"Platform",x:824,y:16,width:24,falling:!0},{macro:"Tree",x:832,y:64,width:32},{macro:"Fill",thing:"Coin",x:841,y:71,xnum:2,xwidth:8},{macro:"Tree",x:856,y:16,width:40},{thing:"Coin",x:865,y:23},{macro:"Tree",x:864,y:48,width:24},{thing:"Coin",x:873,y:55},{thing:"Koopa",x:912,y:66,smart:!0,jumping:!0,floating:!0,begin:14,end:66},{macro:"Tree",x:928,width:24},{macro:"Tree",x:952,y:24,width:96,solidTrunk:!0},{macro:"Fill",thing:"Koopa",x:992,y:36,xnum:2,xwidth:14,smart:!0},{thing:"Platform",x:1056,y:56,width:24},{macro:"Scale",x:1100,y:86,between:32,dropRight:48},{macro:"Floor",x:1152,width:256},{macro:"EndOutsideCastle",x:1208,large:!0,walls:15,transport:{map:"3-4"}}]}]},{name:"3-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",blockBoundaries:!0,creation:[{macro:"StartInsideCastle",width:128},{thing:"Stone",y:88,width:128,height:24},{thing:"Stone",x:128,y:88,width:896},{thing:"Podoboo",x:128,y:-32},{macro:"Floor",x:144,y:24},{macro:"Floor",x:152,y:8},{macro:"Fill",thing:"Stone",x:152,y:24,xnum:3,xwidth:40},{macro:"Fill",thing:"CastleBlock",x:152,y:16,xnum:3,xwidth:40,fireballs:6},{macro:"Floor",x:160,y:24},{macro:"Floor",x:184,y:24},{macro:"Floor",x:192,y:8},{macro:"Floor",x:200,y:24},{thing:"Podoboo",x:208,y:-32},{macro:"Floor",x:224,y:24},{macro:"Floor",x:232,y:8},{macro:"Floor",x:240,y:24},{macro:"Floor",x:264,width:104},{thing:"Stone",x:264,y:24,width:16,height:24},{thing:"Stone",x:280,y:80,width:88,height:16},{thing:"Block",x:336,y:32},{thing:"Block",x:344,y:32,contents:"Mushroom"},{thing:"Block",x:352,y:32},{macro:"Water",x:368,width:16},{macro:"Floor",x:384,width:320},{macro:"Fill",thing:"Stone",x:424,y:8,xnum:2,xwidth:80,width:24},{macro:"Fill",thing:"Stone",x:424,y:80,xnum:2,xwidth:80,width:24,height:16},{macro:"Fill",thing:"CastleBlock",x:432,y:16,xnum:2,xwidth:80,fireballs:6,direction:1},{macro:"Fill",thing:"CastleBlock",x:432,y:64,xnum:2,xwidth:80,fireballs:6},{thing:"Stone",x:632,y:8,width:24},{thing:"Stone",x:632,y:80,width:24,height:16},{thing:"CastleBlock",x:640,y:16,fireballs:6},{thing:"CastleBlock",x:640,y:64,fireballs:6,direction:1},{macro:"Fill",thing:"Coin",x:649,y:55,xnum:3,xwidth:8},{thing:"Podoboo",x:704,y:-32},{macro:"Water",x:704,width:16},{macro:"Floor",x:720,y:24,width:48},{thing:"Stone",x:720,y:80,width:48,height:16},{macro:"Water",x:768,width:24},{thing:"Podoboo",x:776,y:-32},{macro:"Floor",x:792,y:24,width:24},{macro:"Water",x:816,width:24},{thing:"Podoboo",x:824,y:-32},{macro:"Floor",x:840,y:24,width:24},{macro:"Water",x:864,width:24},{thing:"Podoboo",x:872,y:-32},{macro:"Floor",x:888,width:136},{thing:"Stone",x:888,y:24,width:40,height:24},{thing:"Stone",x:888,y:80,width:136,height:16},{thing:"Stone",x:944,y:24,width:80,height:24},{macro:"EndInsideCastle",x:1024,spawnType:"Beetle",transport:{map:"4-1"}},{macro:"Fill",thing:"Brick",x:1056,y:64,xnum:2,ynum:3},{thing:"Platform",x:1084,y:56,width:16}]}]},{name:"4-1",locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:256},{macro:"CastleLarge",x:-16},{macro:"Pattern",pattern:"BackRegular",repeat:5},{macro:"Pipe",x:168,height:24,piranha:!0},{thing:"Block",x:200,y:32,contents:"Mushroom"},{thing:"Block",x:200,y:64},{thing:"Lakitu",x:212,y:84},{macro:"Floor",x:272,width:352},{macro:"Fill",thing:"Coin",x:329,y:31,xnum:2,xwidth:24},{macro:"Fill",thing:"Coin",x:337,y:39,xnum:2,xwidth:8},{macro:"Fill",thing:"Block",x:512,y:32,xnum:2,ynum:2,xwidth:24,yheight:32},{macro:"Floor",x:656,width:536},{macro:"Fill",thing:"Block",x:720,y:32,xnum:4},{thing:"Block",x:736,y:64,contents:"Mushroom1Up",hidden:!0},{thing:"Stone",x:824,y:24,height:24},{macro:"Fill",thing:"Coin",x:841,y:55,xnum:4,xwidth:8},{macro:"Pipe",x:928,height:32,piranha:!0},{macro:"Fill",thing:"Coin",x:953,y:55,xnum:4,xwidth:8},{macro:"Pipe",x:1056,height:32,piranha:!0,transport:2},{macro:"Fill",thing:"Coin",x:1081,y:55,xnum:4,xwidth:8},{macro:"Fill",thing:"Block",x:1168,y:32,xnum:2},{thing:"Block",x:1184,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Block",x:1184,y:64,xnum:4},{macro:"Fill",thing:"Brick",x:1192,y:32,xnum:2},{macro:"Fill",thing:"Block",x:1208,y:32,xnum:3},{macro:"Floor",x:1208,width:184},{macro:"Pipe",x:1304,height:16,piranha:!0,entrance:1},{macro:"Floor",x:1416,width:24},{macro:"Floor",x:1456,width:64},{thing:"Stone",x:1512,y:24,height:24},{macro:"Floor",x:1536,width:384},{macro:"LakituStop",x:1664},{thing:"Stone",x:1664,y:8},{thing:"Stone",x:1672,y:16,height:16},{thing:"Stone",x:1680,y:24,height:24},{thing:"Stone",x:1688,y:32,height:32},{thing:"Stone",x:1696,y:40,height:40},{thing:"Stone",x:1704,y:48,height:48},{thing:"Stone",x:1712,y:56,height:56},{thing:"Stone",x:1720,y:64,width:16,height:64},{thing:"Brick",x:1760,y:32,contents:"Coin"},{macro:"EndOutsideCastle",x:1800,transport:{map:"4-2"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:24,y:16,ynum:3},{macro:"Fill",thing:"Brick",x:24,y:80,xnum:12},{macro:"Fill",thing:"Coin",x:25,y:39,xnum:8,xwidth:8},{macro:"Fill",thing:"Coin",x:25,y:7,xnum:10,xwidth:8},{macro:"Fill",thing:"Brick",x:32,y:32,xnum:6},{macro:"Fill",thing:"Brick",x:80,y:16,ynum:3},{thing:"PipeHorizontal",x:104,y:16,transport:1},{thing:"Brick",x:104,y:32,contents:"Mushroom"},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"4-2",locations:[{entry:"Walking"},{area:1},{area:1,entry:"PipeVertical"},{area:2},{area:3,entry:"PipeVertical"},{area:4,entry:"Vine"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",y:4,repeat:1},{macro:"Floor",width:192},{macro:"CastleSmall"},{thing:"PipeHorizontal",x:80,y:16,transport:1},{macro:"Pipe",x:96,height:32}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:88},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Ceiling",x:48,width:408},{macro:"Floor",x:104,width:16},{macro:"Floor",x:136},{macro:"Fill",thing:"Brick",x:160,y:64,xnum:23,ynum:3},{macro:"Floor",x:168,width:288},{macro:"Fill",thing:"Brick",x:176,y:16,xnum:5,ynum:3},{thing:"Brick",x:216,y:32},{macro:"Fill",thing:"Coin",x:217,y:7,xnum:3,xwidth:8,xwidth:8},{thing:"Brick",x:224,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:240,y:8,xnum:18,ynum:4},{macro:"Fill",thing:"Goomba",x:344,y:40,xnum:3,xwidth:12},{thing:"Brick",x:344,y:64},{thing:"Brick",x:344,y:72,contents:"Coin"},{thing:"Brick",x:344,y:80},{macro:"Fill",thing:"Brick",x:352,y:64,xnum:4,ynum:3},{macro:"Fill",thing:"Block",x:400,y:32,xnum:2,ynum:2,yheight:32},{macro:"Fill",thing:"Block",x:432,y:32,xnum:2,xwidth:16},{thing:"Block",x:440,y:32,contents:"Mushroom"},{macro:"PlatformGenerator",x:470,width:24},{macro:"Floor",x:504,width:336},{thing:"Block",x:504,y:40,hidden:!0},{thing:"Block",x:512,y:48,hidden:!0},{thing:"Brick",x:512,y:64,contents:["Vine",{transport:5}]},{thing:"Block",x:520,y:40,hidden:!0},{macro:"Fill",thing:"Brick",x:520,y:64,xnum:2},{thing:"Block",x:528,y:32,hidden:!0},{macro:"Ceiling",x:536,width:360},{macro:"Pipe",x:576,height:24,piranha:!0},{thing:"Brick",x:608,y:32},{thing:"Brick",x:616,y:32,contents:"Coin"},{thing:"Koopa",x:616,y:12},{macro:"Pipe",x:624,height:56,piranha:!0},{thing:"Brick",x:640,y:32},{thing:"Brick",x:648,y:32,contents:"Star"},{thing:"Beetle",x:664,y:8.5},{macro:"Pipe",x:672,height:24,piranha:!0,transport:3},{thing:"Brick",x:696,y:40},{thing:"Beetle",x:704,y:8.5},{macro:"Pipe",x:712,height:24},{macro:"Fill",thing:"Koopa",x:800,y:12,xnum:2,xwidth:12},{thing:"Stone",x:824,y:16,height:16},{thing:"Stone",x:832,y:24,height:24},{macro:"Floor",x:856,width:16},{macro:"Pipe",x:856,height:32},{macro:"Floor",x:888,width:16},{thing:"Stone",x:888,y:24,width:16,height:24},{macro:"PlatformGenerator",x:918,width:24},{macro:"Floor",x:952,width:32},{macro:"Fill",thing:"Brick",x:952,y:32,xnum:4},{thing:"Brick",x:952,y:64},{macro:"Ceiling",x:952,width:32},{thing:"Brick",x:960,y:64,contents:"Mushroom"},{thing:"Brick",x:968,y:64},{macro:"PlatformGenerator",x:992,width:24},{macro:"Ceiling",x:1024,width:216},{macro:"Floor",x:1032,width:120},{macro:"Pipe",x:1048,height:16,entrance:2},{thing:"Koopa",x:1096,y:12},{macro:"Pipe",x:1104,height:24,piranha:!0},{macro:"Pipe",x:1136,height:32,piranha:!0},{macro:"Floor",x:1168,width:72},{thing:"Stone",x:1216,y:8},{thing:"Stone",x:1224,y:16,height:16},{thing:"Stone",x:1232,y:24,height:24},{thing:"Beetle",x:1232,y:32.5},{macro:"PlatformGenerator",x:1246,width:24},{macro:"Floor",x:1280,width:184},{macro:"Fill",thing:"Brick",x:1280,y:48,ynum:2},{macro:"Fill",thing:"Brick",x:1280,y:64,xnum:16,ynum:3},{macro:"Ceiling",x:1280,width:232},{thing:"Brick",x:1288,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:1296,y:32,xnum:10},{macro:"Fill",thing:"Coin",x:1297,y:39,xnum:10,xwidth:8},{macro:"Fill",thing:"Koopa",x:1344,y:12,xnum:2,xwidth:12},{thing:"Stone",x:1384,y:8},{thing:"Stone",x:1392,y:16,height:16},{thing:"Stone",x:1400,y:24,height:24},{thing:"Stone",x:1408,y:32,height:32},{thing:"Beetle",x:1432,y:8.5},{macro:"Pipe",x:1440,height:56,piranha:!0},{macro:"Floor",x:1480,width:312},{macro:"Fill",thing:"Brick",x:1480,y:8,xnum:24,ynum:3},{thing:"PipeHorizontal",x:1496,y:40,transport:4},{thing:"PipeVertical",x:1512,y:88,height:64},{macro:"Fill",thing:"Brick",x:1528,y:32,xnum:18,ynum:7},{macro:"Ceiling",x:1528,width:184},{macro:"Fill",thing:"Brick",x:1616,y:32,xnum:7,ynum:7},{thing:"ScrollEnabler",x:1512,y:184,height:96,width:16},{thing:"ScrollBlocker",x:1528},{macro:"Ceiling",x:1616,width:136},{macro:"WarpWorld",x:1672,warps:[5]},{macro:"Fill",thing:"Brick",x:1776,y:8,xnum:2,ynum:11}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:56},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:48,xnum:7},{thing:"Brick",x:32,y:56},{macro:"Fill",thing:"Coin",x:42,y:55,xnum:5,ynum:2,xwidth:8,yheight:8},{macro:"Fill",thing:"Brick",x:80,y:56,ynum:4},{macro:"Fill",thing:"Brick",x:88,y:56,xnum:2},{thing:"Brick",x:112,y:48,contents:"Coin"},{thing:"PipeHorizontal",x:104,y:16,transport:2},{thing:"PipeVertical",x:120,y:88,height:88}]},{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackRegular",x:-280,repeat:2},{macro:"Floor",width:464},{macro:"Pipe",height:16,piranha:!0,entrance:4},{thing:"Stone",x:16,y:8},{thing:"Stone",x:24,y:16,height:16},{thing:"Stone",x:32,y:24,height:24},{thing:"Stone",x:40,y:32,height:32},{thing:"Stone",x:48,y:40,height:40},{thing:"Stone",x:56,y:48,height:48},{thing:"Stone",x:64,y:56,height:56},{thing:"Stone",x:72,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:152,transport:{map:"4-3"}}]},{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",x:-384,y:4,repeat:3},{macro:"Floor",width:32},{macro:"Floor",x:40,width:472},{macro:"Shroom",x:96,y:32,width:24},{macro:"Fill",thing:"Coin",x:97,y:39,xnum:3,xwidth:8},{macro:"Shroom",x:128,y:64,width:24},{macro:"Fill",thing:"Coin",x:129,y:71,xnum:3,xwidth:8},{macro:"Shroom",x:144,y:16,width:24},{macro:"Shroom",x:176,y:16,width:40},{macro:"Shroom",x:176,y:64,width:24},{macro:"Fill",thing:"Coin",x:177,y:71,xnum:3,xwidth:8},{macro:"Shroom",x:208,y:48,width:24},{macro:"Fill",thing:"Coin",x:209,y:55,xnum:3,xwidth:8},{macro:"Shroom",x:240,y:72,width:40},{macro:"Fill",thing:"Coin",x:241,y:79,xnum:5,xwidth:8},{macro:"Shroom",x:248,y:24,width:56},{macro:"Fill",thing:"Coin",x:281,y:31,xnum:2,xwidth:8},{thing:"Stone",x:320,y:8},{thing:"Stone",x:328,y:16,height:16},{thing:"Stone",x:336,y:24,height:24},{thing:"Stone",x:344,y:32,height:32},{thing:"Stone",x:352,y:40,height:40},{thing:"Stone",x:360,y:48,height:48},{thing:"Stone",x:368,y:56,height:56},{thing:"Stone",x:376,y:64,height:64},{thing:"Stone",x:384,y:72,height:72},{thing:"Stone",x:392,y:72,width:88},{macro:"WarpWorld",x:392,warps:[8,7,6],textHeight:0},{thing:"Stone",x:496,y:88,width:16,height:88},{thing:"ScrollBlocker",x:512,y:88}]}]},{name:"4-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld Shrooms",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",x:0,y:4,repeat:3},{macro:"Floor",x:0,y:0,width:120},{macro:"CastleSmall"},{macro:"Shroom",x:128,width:40},{macro:"Shroom",x:152,y:64,width:40},{macro:"Fill",thing:"Coin",x:161,y:71,xnum:3,xwidth:8},{macro:"Shroom",x:184,y:32,width:56},{macro:"Fill",thing:"Coin",x:193,y:39,xnum:4,xwidth:8},{macro:"Fill",thing:"Koopa",x:224,y:44,xnum:2,smart:!0},{macro:"Shroom",x:256,y:72,width:24},{macro:"Shroom",x:288,y:8,width:56},{thing:"Koopa",x:288,y:84,smart:!0,floating:!0,jumping:!0,begin:32,end:88},{thing:"Coin",x:302,y:15},{thing:"Koopa",x:312,y:20,smart:!0},{macro:"Shroom",x:312,y:64,width:40},{thing:"Coin",x:321,y:15},{thing:"Block",x:344,y:88,contents:"Mushroom"},{macro:"Shroom",x:352,y:32,width:24},{thing:"Coin",x:385,y:47},{macro:"Scale",x:396,y:86,between:56,dropRight:44},{macro:"Shroom",x:408,y:40,width:24},{thing:"Platform",x:464,y:20,width:24,floating:!0,begin:16,end:72},{thing:"Platform",x:496,y:66,width:24,floating:!0,begin:32,end:88},{macro:"Shroom",x:520,width:40},{macro:"Shroom",x:536,y:48,width:24},{macro:"Fill",thing:"Coin",x:537,y:55,xnum:3,xwidth:8},{thing:"Koopa",x:544,y:12,smart:!0},{macro:"Shroom",x:560,y:80,width:24},{macro:"Fill",thing:"Coin",x:561,y:87,xnum:3,xwidth:8},{macro:"Shroom",x:576,y:32,width:24},{thing:"Coin",x:585,y:39},{macro:"Shroom",x:592,y:64,width:40},{thing:"Koopa",x:624,y:76,smart:!0},{macro:"Scale",x:652,y:86,between:64,dropRight:52},{macro:"Shroom",x:672,y:32},{macro:"Scale",x:740,y:86,dropRight:56},{thing:"Coin",x:770,y:47},{macro:"Shroom",x:792,y:16,width:24},{macro:"Scale",x:828,y:86,between:48,dropRight:56},{macro:"Shroom",x:840,y:24,width:24},{macro:"Shroom",x:904,y:32,width:40},{macro:"Fill",thing:"Coin",x:905,y:39,xnum:5,xwidth:8},{macro:"Shroom",x:936,y:56,width:24},{macro:"Shroom",x:968,width:56},{macro:"Shroom",x:1040,y:24,width:40},{thing:"Platform",x:1088,y:67,width:24,floating:!0,begin:8,end:88},{macro:"Floor",x:1128,width:152},{macro:"EndOutsideCastle",x:1176,large:!0,walls:3,transport:{map:"4-4"}}]}]},{name:"4-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",creation:[{macro:"StartInsideCastle",width:48},{thing:"Stone",y:88,width:48,height:24},{macro:"Floor",x:48,y:24},{thing:"Stone",x:48,y:88,width:80},{macro:"Water",x:56,width:16},{macro:"Floor",x:72,y:24,width:16},{macro:"Water",x:88,width:16},{macro:"Floor",x:104,y:24,width:24},{macro:"Section",x:128,section:0}],sections:[{before:{width:400,creation:[{macro:"Floor",width:400},{thing:"Stone",y:88,width:400},{thing:"Stone",x:16,y:56,width:48,height:32},{macro:"Fill",thing:"Stone",x:72,y:56,xnum:5,xwidth:16,height:32},{thing:"Stone",x:152,y:56,width:24,height:32},{thing:"Stone",x:176,y:56,width:48},{macro:"Pipe",x:192,height:24,piranha:!0},{thing:"Stone",x:224,y:56,width:136,height:32},{thing:"CastleBlock",x:296,y:56,fireballs:6,hidden:!0},{thing:"CastleBlock",x:352,y:32,fireballs:6,hidden:!0},{macro:"SectionFail",x:384,y:24,width:40,height:24},{macro:"SectionPass",x:394,y:80,width:40,height:24}]},stretch:{width:8,creation:[{macro:"Floor"},{thing:"Stone",y:56,height:32},{thing:"Stone",y:88}]},after:{width:40,creation:[{macro:"Floor",width:40},{thing:"Stone",y:88,width:40},{thing:"Stone",x:16,y:80,width:24,height:24},{thing:"Stone",x:16,y:24,width:24,height:24},{macro:"SectionDecider",x:40,pass:1,fail:0}]}},{before:{width:320,creation:[{macro:"Floor",width:64},{thing:"Stone",y:88,width:336},{thing:"Stone",x:48,y:24,width:16},{macro:"Water",x:64,width:16},{thing:"Stone",x:72,y:40,width:16},{macro:"Floor",x:80,y:16},{thing:"Stone",x:80,y:24,width:40},{macro:"Water",x:88,width:32},{thing:"Stone",x:104,y:48},{thing:"Stone",x:112,y:40,height:16},{macro:"Floor",x:120,width:216},{thing:"Stone",x:120,y:56,height:16},{thing:"Stone",x:128,y:24,width:208},{thing:"Stone",x:128,y:56,width:16},{thing:"Stone",x:160,y:56,width:32},{thing:"Stone",x:200,y:48,height:24},{thing:"Stone",x:200,y:56,width:24},{thing:"Stone",x:240,y:56,width:96},{thing:"CastleBlock",x:280,y:56,fireballs:6,hidden:!0},{thing:"CastleBlock",x:328,y:24,fireballs:6,hidden:!0},{macro:"SectionPass",x:360,y:16,width:40,height:16},{macro:"SectionFail",x:360,y:48,width:40,height:24},{macro:"SectionFail",x:360,y:80,width:40,height:24}]},stretch:{width:8,creation:[{macro:"Floor"},{thing:"Stone",y:24},{thing:"Stone",y:56},{thing:"Stone",y:88}]},after:{width:136,creation:[{macro:"Floor",width:80},{thing:"Stone",y:64,height:40},{thing:"Stone",y:88},{thing:"Stone",x:8,y:88,width:16,height:24},{macro:"Floor",x:72,y:24,width:32},{thing:"Stone",x:72,y:88,width:64},{macro:"Floor",x:96,width:32},{macro:"Floor",x:120,y:24,width:16},{macro:"SectionDecider",x:136,pass:2}]}},{before:{width:256,creation:[{macro:"EndInsideCastle",spawnType:"SpinyEgg",transport:{map:"5-1"}}]}}]}]},{name:"5-1",locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld Alt",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFence",x:-384,repeat:6},{macro:"Floor",width:392},{macro:"CastleLarge",x:-16},{thing:"Koopa",x:128,y:12},{macro:"Fill",thing:"Goomba",x:152,y:8,xnum:3,xwidth:21},{macro:"Fill",thing:"Goomba",x:240,y:8,xnum:3,xwidth:21},{macro:"Fill",thing:"Goomba",x:328,y:12,xnum:2,xwidth:21},{macro:"Pipe",x:352,height:24,piranha:!0},{macro:"Floor",x:408,width:328},{macro:"Pipe",x:408,height:24,piranha:!0},{thing:"Koopa",x:488,y:32,jumping:!0},{thing:"Goomba",x:520,y:8,xnum:3,xwidth:12},{thing:"Goomba",x:608,y:8,xnum:3,xwidth:12},{thing:"Koopa",x:696,y:16,jumping:!0},{thing:"Stone",x:712,y:24,height:24},{thing:"Stone",x:712,y:32,width:40},{macro:"Fill",thing:"Brick",x:720,y:64,xnum:2,xwidth:16},{thing:"Brick",x:728,y:64,contents:"Star"},{macro:"Floor",x:768,width:324},{macro:"Fill",thing:"Goomba",x:824,y:8,xnum:3,xwidth:12},{thing:"Cannon",x:888,y:16,height:16},{macro:"Floor",x:928,width:288},{thing:"Stone",x:928,y:24,height:24},{macro:"Fill",thing:"Goomba",x:968,y:8,xnum:3,xwidth:12},{thing:"Koopa",x:1016,y:12},{macro:"Fill",thing:"Goomba",x:1080,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Koopa",x:1152,y:12,xnum:2,xwidth:12},{thing:"Stone",x:1176,y:32,width:32},{thing:"Block",x:1184,y:32,contents:"Mushroom1Up",hidden:!0},{macro:"Fill",thing:"Brick",x:1192,y:32,xnum:2},{macro:"Floor",x:1240,width:552},{thing:"Stone",x:1248,y:32,width:16},{macro:"Pipe",x:1248,y:32,height:16,piranha:!0,transport:2},{thing:"Cannon",x:1272,y:16,height:16},{macro:"Pipe",x:1304,height:16,piranha:!0,entrance:1},{thing:"Cannon",x:1360,y:16,height:16},{thing:"Koopa",x:1424,y:12,jumping:!0},{thing:"Stone",x:1456,y:8},{thing:"Brick",x:1456,y:44},{thing:"Stone",x:1464,y:16,height:16},{thing:"Stone",x:1472,y:24,height:24},{thing:"Stone",x:1480,y:32,height:32},{thing:"Stone",x:1488,y:40,height:40},{thing:"Stone",x:1512,y:64,width:16,height:48},{macro:"EndOutsideCastle",x:1592,transport:{map:"5-2"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:136},{macro:"Ceiling",x:32,width:56},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:48,xnum:7},{thing:"Brick",x:32,y:56},{macro:"Fill",thing:"Coin",x:41,y:55,xnum:5,ynum:2,xwidth:8,yheight:8},{macro:"Fill",thing:"Brick",x:80,y:56,ynum:4},{thing:"Brick",x:88,y:56,xnum:2},{thing:"Brick",x:112,y:48,contents:"Coin"},{thing:"PipeHorizontal",x:104,y:16,transport:1},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"5-2",locations:[{entry:"Plain"},{entry:"PipeVertical"},{xloc:1032},{area:1},{area:2,entry:"Plain"}],areas:[{setting:"Overworld Alt",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFence",x:-384,repeat:4},{macro:"Floor",width:208},{macro:"CastleSmall"},{thing:"Stone",x:96,y:8},{thing:"Stone",x:104,y:16,height:16},{thing:"Stone",x:112,y:24,width:16,height:24},{thing:"Stone",x:120,y:32,width:32},{thing:"Cannon",x:136,y:48,height:16},{macro:"Fill",thing:"Coin",x:169,y:71,xnum:3,xwidth:8},{thing:"Koopa",x:184,y:12},{thing:"Springboard",x:200,y:14.5},{macro:"Floor",x:232,width:296},{macro:"Fill",thing:"Brick",x:232,y:32,xnum:6},{macro:"Fill",thing:"Brick",x:232,y:64,xnum:5},{macro:"Fill",thing:"Coin",x:233,y:39,xnum:3,xwidth:8},{thing:"Brick",x:272,y:64,contents:"Mushroom"},{thing:"Koopa",x:320,y:32,jumping:!0},{thing:"Stone",x:352,y:8},{thing:"Stone",x:360,y:16,height:16},{thing:"Stone",x:368,y:24,height:24},{thing:"HammerBro",x:368,y:36},{thing:"Stone",x:376,y:32,width:16,height:32},{thing:"Stone",x:392,y:16,height:16},{macro:"Pipe",x:440,height:24,piranha:!0,transport:3},{thing:"Stone",x:496,y:8},{thing:"Stone",x:504,y:16,height:16},{thing:"Goomba",x:504,y:24},{thing:"Stone",x:512,y:24,height:24},{thing:"Stone",x:520,y:32,height:32},{thing:"Goomba",x:520,y:40},{macro:"Floor",x:544,width:192},{thing:"Stone",x:544,y:40,height:40},{thing:"Stone",x:552,y:48,width:16,height:48},{macro:"Fill",thing:"Block",x:624,y:32,xnum:5},{thing:"HammerBro",x:648,y:46},{thing:"Block",x:672,y:32,hidden:!0},{thing:"Brick",x:680,y:64,contents:["Vine",{entrance:4}]},{macro:"Fill",thing:"Brick",x:688,y:64,xnum:2},{macro:"Fill",thing:"Coin",x:689,y:71,xnum:2,xwidth:8},{macro:"Fill",thing:"Brick",x:712,y:40,xnum:3},{macro:"Fill",thing:"Coin",x:713,y:7,xnum:2,xwidth:8},{macro:"Floor",x:768,width:248},{thing:"Koopa",x:848,y:32,jumping:!0},{thing:"Cannon",x:856,y:16,height:16},{macro:"Pipe",x:920,height:16,piranha:!0,entrance:1},{macro:"Fill",thing:"Brick",x:944,y:32,xnum:8},{macro:"Fill",thing:"Brick",x:944,y:64,xnum:7},{thing:"HammerBro",x:960,y:44},{thing:"HammerBro",x:992,y:76},{thing:"Brick",x:1e3,y:64,contents:"Star"},{macro:"Floor",x:1032,width:120},{thing:"Stone",x:1032,y:24,height:24},{macro:"Fill",thing:"Beetle",
x:1088,y:8.5,xnum:3,xwidth:8.5},{thing:"Brick",x:1128,y:16,contents:"Coin"},{thing:"Brick",x:1136,y:16,contents:"Mushroom"},{macro:"Pattern",pattern:"BackFence",x:1142,repeat:2},{macro:"Fill",thing:"Brick",x:1176,y:32,xnum:3},{macro:"Floor",x:1208,width:152},{macro:"Fill",thing:"Brick",x:1124,y:64,xnum:5},{macro:"Fill",thing:"Goomba",x:1240,y:8,xnum:2,xwidth:12},{thing:"Koopa",x:1256,y:76,smart:!0},{thing:"Koopa",x:1304,y:28,jumping:!0},{thing:"Koopa",x:1328,y:20,jumping:!0},{thing:"Block",x:1344,y:32,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:1376,y:64,xnum:4},{macro:"Fill",thing:"Coin",x:1377,y:71,xnum:2,xwidth:8},{macro:"Floor",x:1384,width:16},{macro:"Pipe",x:1384,height:16},{macro:"Floor",x:1416,width:64},{thing:"Stone",x:1464,y:8},{thing:"Stone",x:1472,y:16,height:16},{macro:"Floor",x:1488,width:16},{thing:"Stone",x:1488,y:32,height:32},{thing:"Koopa",x:1488,y:64,jumping:!0},{thing:"Stone",x:1496,y:40,height:40},{macro:"Floor",x:1512,width:280},{thing:"Stone",x:1512,y:56,height:56},{thing:"Stone",x:1520,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1600,transport:{map:"5-3"}}]},{setting:"Underwater",blockBoundaries:!0,underwater:!0,creation:[{macro:"Floor",width:176},{thing:"Stone",x:88,y:56,width:40},{thing:"Coral",x:96,y:24,height:24},{thing:"Coral",x:120,y:72,height:16},{thing:"Blooper",x:136,y:24},{thing:"Coral",x:160,y:32,height:32},{macro:"Fill",thing:"Coin",x:177,y:47,xnum:10,xwidth:8},{macro:"PlatformGenerator",x:182,width:24},{macro:"Floor",x:208,y:24,width:16},{thing:"Stone",x:208,y:88,width:16,height:24},{thing:"CheepCheep",x:220,y:60},{macro:"PlatformGenerator",x:230,width:24},{macro:"Floor",x:256,y:24,width:16},{thing:"Stone",x:256,height:88,width:16,height:24},{macro:"Floor",x:272,width:32},{thing:"Blooper",x:272,y:24},{thing:"Coral",x:304,y:64,height:32},{thing:"Stone",x:304,y:72,width:48},{thing:"CheepCheep",x:312,y:20},{macro:"Floor",x:320,width:16},{macro:"Fill",thing:"Coin",x:321,y:7,xnum:2,xwidth:8},{thing:"Coral",x:344,y:64,height:32},{thing:"Blooper",x:348,y:22},{macro:"Floor",x:352,width:168},{thing:"Coral",x:368,y:16,height:16},{thing:"CheepCheep",x:388,y:40,smart:!0},{thing:"Stone",x:400,y:32,width:32},{macro:"Fill",thing:"Coin",x:401,y:39,xnum:4,xwidth:8},{thing:"CheepCheep",x:424,y:84},{thing:"Stone",x:432,y:56,width:32},{macro:"Fill",thing:"Coin",x:433,y:63,xnum:4,xwidth:8},{thing:"Stone",x:472,y:8},{thing:"Stone",x:480,y:16,height:16},{thing:"Stone",x:488,y:32,width:16,height:40},{thing:"Stone",x:488,y:88,width:16,height:40},{thing:"PipeHorizontal",x:496,y:48,transport:1},{thing:"Stone",x:504,y:88,width:16,height:88}]},{setting:"Sky",blockBoundaries:!0,exit:2,creation:[{thing:"Stone",width:32},{thing:"Stone",x:40,width:576},{thing:"Platform",x:120,y:32,width:16,transport:!0},{macro:"Fill",thing:"Coin",x:120,y:64,xnum:16},{macro:"Fill",thing:"Coin",x:256,y:80,xnum:3},{macro:"Fill",thing:"Coin",x:288,y:72,xnum:16},{macro:"Fill",thing:"Coin",x:424,y:80,xnum:3}]}]},{name:"5-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackCloud",x:0,y:4,repeat:5},{macro:"Floor",x:0,y:0,width:128},{macro:"CastleSmall"},{macro:"BulletBillsStart",width:128},{macro:"Tree",x:144,y:8,width:32},{macro:"Tree",x:192,y:32,width:64,solidTrunk:!0},{macro:"Tree",x:208,y:64,width:40},{macro:"Fill",thing:"Coin",x:217,y:71,xnum:3,xwidth:8},{thing:"Koopa",x:240,y:76,smart:!0},{macro:"Tree",x:256,y:8,width:24},{thing:"Coin",x:266,y:15},{macro:"Tree",x:280,y:40,width:40},{macro:"Fill",thing:"Coin",x:297,y:87,xnum:2,xwidth:8},{macro:"Tree",x:320,y:72,width:56},{macro:"Fill",thing:"Goomba",x:352,y:80,xnum:2,xwidth:16},{macro:"Tree",x:400,width:32},{macro:"Fill",thing:"Coin",x:402,y:55,xnum:2,xwidth:8},{thing:"Platform",x:440,y:56,width:16,floating:!0,begin:-4,end:56},{macro:"Tree",x:472,width:40},{thing:"Block",x:472,y:24,contents:"Mushroom"},{macro:"Tree",x:480,y:64,width:32},{macro:"Fill",thing:"Coin",x:482,y:71,xnum:4,xwidth:8},{macro:"Tree",x:520,width:40},{macro:"Tree",x:560,y:32,width:24},{thing:"Koopa",x:592,y:76,smart:!0,jumping:!0,floating:!0,begin:16,end:88},{macro:"Tree",x:608,y:56,width:48},{thing:"Goomba",x:640,y:64},{macro:"Fill",thing:"Coin",x:681,y:63,xnum:2,xwidth:8},{thing:"Platform",x:672,y:40,width:20,sliding:!0,begin:660,end:720},{macro:"Fill",thing:"Coin",x:745,y:71,xnum:2,xwidth:8},{thing:"Platform",x:756,y:32,width:20,sliding:!0,begin:708,end:776},{macro:"Fill",thing:"Coin",x:777,y:71,xnum:2,xwidth:8},{macro:"Tree",x:784,y:16,width:32},{macro:"Tree",x:832,y:48,width:64,solidTrunk:!0},{thing:"Koopa",x:880,y:60,smart:!0},{macro:"Tree",x:904,width:24},{macro:"Fill",thing:"Coin",x:906,y:7,xnum:3,xwidth:8},{thing:"Koopa",x:912,y:68,smart:!0,jumping:!0,floating:!0,begin:4,end:76},{macro:"Tree",x:928,y:32,width:32},{macro:"Fill",thing:"Coin",x:963,y:63,xnum:2,xwidth:8},{macro:"Tree",x:976,y:32,width:32,solidTrunk:!0},{macro:"Floor",x:1032,width:368},{thing:"Platform",x:1052,y:56,width:20,sliding:!0,begin:1008,end:1076},{thing:"Koopa",x:1064,y:12,smart:!0},{thing:"Stone",x:1104,y:32,width:16,height:32},{thing:"Stone",x:1120,y:48,width:16,height:48},{thing:"Stone",x:1136,y:64,width:16,height:64},{macro:"BulletBillsStop",x:1152},{macro:"EndOutsideCastle",x:1224,large:!0,walls:12,transport:{map:"5-4"}}]}]},{name:"5-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",blockBoundaries:!0,creation:[{macro:"StartInsideCastle",width:128},{thing:"Stone",y:88,width:128,height:24},{thing:"Podoboo",x:128,y:-32},{macro:"Water",x:128,width:128},{thing:"Stone",x:144,y:32,width:16},{thing:"Podoboo",x:160,y:-24},{thing:"Stone",x:176,y:48},{thing:"CastleBlock",x:184,y:48,fireballs:12,direction:1},{thing:"Block",x:184,y:80,contents:"Mushroom"},{thing:"Stone",x:192,y:48},{thing:"Stone",x:216,y:32,width:16},{thing:"Podoboo",x:240,y:-32},{macro:"Floor",x:256,y:-8,width:416},{thing:"Stone",x:256,y:24,width:16,height:32},{thing:"Stone",x:272,y:88,width:392,height:24},{thing:"Stone",x:272,y:64,width:168},{thing:"Stone",x:272,width:72},{thing:"Stone",x:296,y:32,width:96},{thing:"CastleBlock",x:344,fireballs:6,direction:1},{thing:"Stone",x:352,width:88},{thing:"CastleBlock",x:392,y:32,fireballs:6},{thing:"Stone",x:400,y:32,width:88},{thing:"CastleBlock",x:440,y:64,fireballs:6},{thing:"CastleBlock",x:440,fireballs:6,direction:1},{thing:"Stone",x:448,width:88},{thing:"Stone",x:448,y:64,width:216},{thing:"CastleBlock",x:488,y:32,fireballs:6},{thing:"Stone",x:496,y:32,width:88},{thing:"CastleBlock",x:536,fireballs:6,direction:1},{thing:"Stone",x:544,width:96},{thing:"CastleBlock",x:584,y:32,fireballs:6},{thing:"Stone",x:640,y:24,width:32,height:32},{thing:"CastleBlock",x:656,y:56,fireballs:6},{macro:"PlatformGenerator",x:686,width:12,direction:-1},{macro:"PlatformGenerator",x:710,width:12},{macro:"Floor",x:736,y:16},{thing:"CastleBlock",x:736,y:24,fireballs:6,direction:1},{macro:"Floor",x:744,y:24,width:48},{thing:"Stone",x:744,y:88,width:48,height:24},{macro:"Floor",x:792,width:80},{macro:"Fill",thing:"Coin",x:817,y:7,xnum:3,ynum:2,xwidth:8,yheight:32},{thing:"CastleBlock",x:824,y:16,fireballs:6,direction:1},{thing:"Stone",x:864,y:24,height:24},{macro:"Water",x:872,width:16},{thing:"Podoboo",x:872,y:-32},{thing:"Stone",x:864,y:24,height:24},{macro:"Floor",x:888,y:24,width:16},{macro:"Water",x:904,width:32},{thing:"Podoboo",x:904,y:-32},{macro:"Floor",x:920,width:104},{thing:"Stone",x:920,y:24,width:40,height:24},{thing:"Stone",x:920,y:88,width:104,height:24},{macro:"Fill",thing:"Stone",x:976,y:24,xnum:2,xwidth:32,width:16,height:24},{macro:"Fill",thing:"Brick",x:1024,y:64,xnum:6},{macro:"EndInsideCastle",x:1024,spawnType:"Lakitu",transport:{map:"6-1"}},{thing:"Podoboo",x:1048,y:-40},{thing:"Platform",x:1108,y:56,width:16,sliding:!0,begin:1080,end:1112,nocollidechar:!0}]}]},{name:"6-1",locations:[{entry:"Plain"}],areas:[{setting:"Overworld Night",blockBoundaries:!0,creation:[{macro:"Floor",width:160},{macro:"CastleLarge",x:-16},{macro:"Pattern",pattern:"BackRegular",repeat:4},{thing:"Lakitu",x:184,y:84},{macro:"Fill",thing:"Block",x:128,y:32,xnum:2},{macro:"Floor",x:176,width:72},{thing:"Stone",x:208,y:8,width:48},{thing:"Stone",x:232,y:16,width:40},{thing:"Stone",x:256,y:24,width:32},{thing:"Stone",x:280,y:32,width:24},{thing:"Brick",x:288,y:64,contents:"Mushroom"},{macro:"Floor",x:296,width:16},{thing:"Brick",x:296,y:64},{macro:"Floor",x:328,width:128},{macro:"Fill",thing:"Brick",x:328,y:32,xnum:2},{thing:"Brick",x:344,y:32,contents:"Coin"},{macro:"Floor",x:472,width:120},{macro:"Fill",thing:"Coin",x:497,y:31,xnum:3,xwidth:8},{thing:"Stone",x:552,y:8},{thing:"Stone",x:560,y:16,height:16},{thing:"Stone",x:568,y:24,height:24},{thing:"Stone",x:576,y:32,width:16,height:32},{macro:"Fill",thing:"Coin",x:609,y:47,xnum:2,xwidth:8},{macro:"Floor",x:616,width:128},{thing:"Stone",x:672,y:16},{thing:"Stone",x:680,y:24,height:16},{thing:"Stone",x:696,y:40,height:40},{thing:"Stone",x:704,y:48,height:48},{thing:"Stone",x:712,y:56,height:56},{thing:"Block",x:720,y:40,contents:"Mushroom1Up",hidden:!0},{macro:"Fill",thing:"Brick",x:720,y:56,xnum:3},{macro:"Fill",thing:"Brick",x:736,y:24,xnum:3},{macro:"Floor",x:768,width:248},{macro:"Pipe",x:816,height:24,piranha:!0},{macro:"Fill",thing:"Coin",x:841,y:39,xnum:3,xwidth:8},{macro:"Fill",thing:"Block",x:904,y:32,ynum:2,yheight:32,hidden:!0},{thing:"Stone",x:976,y:8},{thing:"Stone",x:984,y:16,height:16},{thing:"Stone",x:992,y:24,height:24},{thing:"Stone",x:1e3,y:32,height:32},{thing:"Stone",x:1008,y:40,height:40},{macro:"Fill",thing:"Brick",x:1016,y:40,xnum:2},{macro:"Fill",thing:"Brick",x:1040,y:8,xnum:5},{thing:"Brick",x:1048,y:40},{macro:"Floor",x:1072,width:16},{macro:"Floor",x:1096,width:96},{thing:"Stone",x:1144,y:8},{thing:"Stone",x:1152,y:16,height:16},{thing:"Stone",x:1160,y:24,height:24},{thing:"Stone",x:1168,y:32,height:32},{thing:"Stone",x:1176,y:40,height:40},{thing:"Stone",x:1184,y:48,height:48},{macro:"Fill",thing:"Brick",x:1192,y:48,xnum:2},{thing:"Brick",x:1208,y:32},{macro:"Fill",thing:"Brick",x:1216,y:16,xnum:3},{thing:"Brick",x:1216,y:32,contents:"Coin"},{macro:"Floor",x:1240,width:72},{macro:"Floor",x:1336,width:56},{thing:"Stone",x:1352,y:8},{thing:"Stone",x:1360,y:16,height:16},{thing:"Stone",x:1368,y:24,height:24},{thing:"Stone",x:1376,y:32,height:32},{thing:"Stone",x:1384,y:40,height:40},{macro:"Floor",x:1408,width:240},{macro:"LakituStop",x:1408},{thing:"Stone",x:1408,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1488,transport:{map:"6-2"}}]}]},{name:"6-2",locations:[{entry:"Plain"},{entry:"PipeVertical"},{entry:"PipeVertical"},{xloc:1304},{entry:"PipeVertical"},{area:1},{area:2},{area:3,entry:"Vine"},{area:4}],areas:[{setting:"Overworld Night",blockBoundaries:!0,creation:[{macro:"Floor",width:984},{macro:"CastleSmall"},{macro:"Pattern",pattern:"BackRegular",repeat:5},{macro:"Fill",thing:"Brick",x:80,y:32,xnum:3},{macro:"Pipe",x:152,height:32,piranha:!0,transport:5},{thing:"Brick",x:184,y:64},{thing:"Block",x:192,y:32,hidden:!0},{thing:"Brick",x:192,y:64,contents:"Coin"},{thing:"Brick",x:200,y:64},{thing:"Koopa",x:208,y:12},{macro:"Pipe",x:224,height:32,piranha:!0},{thing:"Stone",x:256,y:40,width:16},{macro:"Pipe",x:256,y:40,height:16,piranha:!0},{macro:"Pipe",x:280,height:16,piranha:!0,entrance:1},{macro:"Pipe",x:296,height:16,piranha:!0},{thing:"Koopa",x:344,y:32,jumping:!0},{macro:"Pipe",x:368,height:32,piranha:!0},{thing:"Brick",x:408,y:32},{thing:"Brick",x:416,y:32,contents:"Mushroom"},{thing:"Beetle",x:432,y:8.5},{macro:"Pipe",x:448,height:40,piranha:!0,transport:6},{thing:"Stone",x:496,y:32,width:16},{macro:"Pipe",x:496,y:32,height:16,piranha:!0},{macro:"Pipe",x:536,height:16,piranha:!0},{macro:"Fill",thing:"Brick",x:616,y:64,xnum:4},{macro:"Pipe",x:640,height:24,piranha:!0},{thing:"Block",x:656,y:32,hidden:!0},{thing:"Brick",x:648,y:64,contents:["Vine",{transport:7}]},{macro:"Pipe",x:672,height:16,piranha:!0},{macro:"Pipe",x:696,height:48,piranha:!0},{thing:"Beetle",x:736,y:8.5},{macro:"Pipe",x:752,height:24,piranha:!0},{macro:"Pipe",x:816,height:32},{macro:"Pipe",x:840,height:16,piranha:!0},{macro:"Fill",thing:"Brick",x:880,y:32,xnum:2,xwidth:24},{thing:"Stone",x:888,y:32,width:16},{macro:"Pipe",x:888,y:32,height:24,piranha:!0},{macro:"Pipe",x:920,height:16,piranha:!0,entrance:2},{thing:"Brick",x:920,y:64},{macro:"Fill",thing:"Brick",x:952,y:64,xnum:9},{thing:"Beetle",x:950,y:72.5},{macro:"Floor",x:1032,width:96},{macro:"Pipe",x:1048,height:16,piranha:!0},{macro:"Pipe",x:1080,height:16,piranha:!0},{macro:"Fill",thing:"Brick",x:1104,y:40,xnum:2},{thing:"Brick",x:1120,y:64,contents:"Star"},{thing:"Brick",x:1128,y:64},{macro:"Floor",x:1136},{macro:"Floor",x:1152,width:64},{macro:"Fill",thing:"Brick",x:1152,y:32,xnum:3},{macro:"Fill",thing:"Brick",x:1160,y:64,xnum:2},{thing:"Stone",x:1192,y:8},{thing:"Stone",x:1200,y:16,height:16},{thing:"Stone",x:1208,y:24,height:24},{macro:"Floor",x:1224,width:696},{macro:"Pipe",x:1224,height:24,piranha:!0,transport:8},{thing:"Stone",x:1248,y:32,height:32},{thing:"Stone",x:1256,y:16,height:16},{macro:"Fill",thing:"Brick",x:1280,y:32,xnum:3,ynum:2,yheight:32},{thing:"Beetle",x:1304,y:8.5},{thing:"Stone",x:1336,y:32,width:16},{macro:"Pipe",x:1336,y:32,height:24,piranha:!0},{thing:"Goomba",x:1352,y:8},{macro:"Pipe",x:1392,height:32,piranha:!0},{macro:"Pipe",x:1432,height:16,piranha:!0,entrance:4},{macro:"Pipe",x:1448,height:24,piranha:!0},{macro:"Pipe",x:1464,height:32,piranha:!0},{macro:"Pipe",x:1512,height:24,piranha:!0},{thing:"Stone",x:1592,y:8},{thing:"Stone",x:1600,y:16,height:16},{macro:"Pipe",x:1608,height:32,piranha:!0},{thing:"Stone",x:1624,y:40,height:40},{thing:"Stone",x:1632,y:48,height:48},{thing:"Stone",x:1640,y:56,height:56},{thing:"Stone",x:1648,y:64,height:64},{thing:"Koopa",x:1648,y:84,jumping:!0},{macro:"EndOutsideCastle",x:1728,transport:{map:"6-3"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:56},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:48,xnum:7},{thing:"Brick",x:32,y:56},{macro:"Fill",thing:"Coin",x:42,y:55,xnum:5,ynum:2,xwidth:8,yheight:8},{macro:"Fill",thing:"Brick",x:80,y:56,ynum:4},{macro:"Fill",thing:"Brick",x:112,y:48,contents:"Coin"},{thing:"PipeHorizontal",x:104,y:16,transport:1},{thing:"PipeVertical",x:120,y:88,height:88}]},{setting:"Underwater",blockBoundaries:!0,underwater:!0,creation:[{macro:"Floor",width:176},{thing:"Stone",x:88,y:56,width:40},{thing:"Coral",x:96,y:24,height:24},{thing:"Coral",x:1220,y:72,height:16},{thing:"Blooper",x:136,y:24},{thing:"Coral",x:160,y:32,height:32},{macro:"Fill",thing:"Coin",x:177,y:47,xnum:10,xwidth:8},{macro:"PlatformGenerator",x:186,width:16},{macro:"Floor",x:208,y:24,width:16},{thing:"Stone",x:208,y:88,width:16,height:24},{thing:"CheepCheep",x:220,y:60},{macro:"PlatformGenerator",x:234,width:16},{macro:"Floor",x:256,y:24,width:16},{thing:"Stone",x:256,y:88,width:16,height:24},{macro:"Floor",x:272,width:32},{thing:"Blooper",x:272,y:24},{thing:"Coral",x:304,y:64,height:32},{thing:"Stone",x:304,y:72,width:48},{thing:"CheepCheep",x:312,y:20},{macro:"Floor",x:320,width:16},{macro:"Fill",thing:"Coin",x:321,y:7,xnum:2,xwidth:8},{thing:"Coral",x:344,y:64,height:32},{thing:"Blooper",x:348,y:22},{macro:"Floor",x:352,width:168},{thing:"Coral",x:368,y:16,height:16},{thing:"CheepCheep",x:388,y:40,smart:!0},{thing:"Stone",x:400,y:32,width:32},{macro:"Fill",thing:"Coin",x:401,y:39,xnum:4,xwidth:8},{thing:"CheepCheep",x:424,y:84},{thing:"Stone",x:432,y:56,width:32},{macro:"Fill",thing:"Coin",x:433,y:63,xnum:4,xwidth:8},{thing:"Stone",x:472,y:8},{thing:"Stone",x:480,y:16,height:16},{thing:"Stone",x:488,y:32,width:16,height:32},{thing:"Stone",x:488,y:88,width:16,height:32},{thing:"PipeHorizontal",x:496,y:48,width:16,transport:2},{thing:"Stone",x:504,y:88,width:16,height:88,width:16},{thing:"ScrollBlocker",x:520}]},{setting:"Sky Night",exit:3,creation:[{thing:"Stone",width:32},{thing:"Stone",x:40,width:624},{thing:"Platform",x:128,y:24,width:24,transport:!0},{macro:"Fill",thing:"Coin",x:121,y:55,xnum:16,xwidth:8},{thing:"Stone",x:256,y:40},{macro:"Fill",thing:"Coin",x:273,y:55,xnum:16,xwidth:8},{thing:"Stone",x:408,y:48,height:16},{macro:"Fill",thing:"Coin",x:425,y:63,xnum:7,xwidth:8},{thing:"Stone",x:488,y:48,height:16},{thing:"Stone",x:536,y:56,width:16},{macro:"Fill",thing:"Stone",x:568,y:56,xnum:5,xwidth:16},{macro:"Fill",thing:"Coin",x:569,y:63,xnum:10,xwidth:8},{macro:"Fill",thing:"Coin",x:681,y:15,xnum:3,xwidth:8}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:88},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:24,y:16,ynum:3},{macro:"Fill",thing:"Coin",x:25,y:39,xnum:8,xwidth:8},{macro:"Fill",thing:"Coin",x:25,y:7,xnum:10,xwidth:8},{macro:"Fill",thing:"Brick",x:32,y:32,xnum:6},{macro:"Fill",thing:"Brick",x:80,y:16,ynum:3},{thing:"PipeHorizontal",x:104,y:16,transport:4},{thing:"Brick",x:104,y:32,contents:"Mushroom"},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"6-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld Night Alt2",blockBoundaries:!0,creation:[{macro:"CastleSmall"},{macro:"Pattern",pattern:"BackCloud",y:4,repeat:4},{macro:"Floor",width:128},{macro:"CastleSmall"},{macro:"BulletBillsStart",x:128},{macro:"Tree",x:144,width:24},{macro:"Tree",x:168,y:32,width:24},{macro:"Tree",x:192,width:24},{thing:"Platform",x:224,width:16,floating:!0,begin:0,end:56},{macro:"Fill",thing:"Coin",x:226,y:87,xnum:2,xwidth:8},{macro:"Tree",x:248,y:32,width:32},{macro:"Tree",x:296,width:24},{thing:"Springboard",x:304,y:14.5},{macro:"Tree",x:344,width:24},{macro:"Fill",thing:"Coin",x:345,y:71,xnum:7,xwidth:8},{thing:"Platform",x:348,y:64,width:16,sliding:!0,begin:312,end:364},{thing:"Platform",x:388,y:47,width:16,sliding:!0,begin:356,end:400},{macro:"Tree",x:392,y:16,width:32},{thing:"Block",x:440,y:80,contents:"Mushroom"},{thing:"Platform",x:444,y:56,width:16,sliding:!0,begin:408,end:464},{thing:"Platform",x:480,y:7,width:16,floating:!0,begin:-8,end:52},{macro:"Tree",x:520,y:32,width:40},{macro:"Scale",x:572,y:86,widthLeft:16,widthRight:16,between:32,dropRight:56},{macro:"Fill",thing:"Coin",x:585,y:63,xnum:2,xwidth:8},{macro:"Scale",x:636,y:86,widthLeft:16,widthRight:16,between:24,dropRight:56},{macro:"Tree",x:680,y:24,width:40},{macro:"Tree",x:680,y:80,width:24},{macro:"Fill",thing:"Coin",x:681,y:87,xnum:3,xwidth:8},{macro:"Tree",x:720,y:40,width:24},{macro:"Tree",x:744,y:0,width:24},{macro:"Tree",x:776,y:0,width:32},{macro:"Fill",thing:"Coin",x:801,y:39,xnum:4,xwidth:8},{macro:"Tree",x:824,width:24},{macro:"Tree",x:856,y:32,width:40},{macro:"Tree",x:904,width:40},{thing:"Springboard",x:928,y:14.5},{thing:"Platform",x:972,y:63,width:16,sliding:!0,begin:940,end:992},{macro:"Tree",x:984,width:24},{macro:"Scale",x:1020,y:86,widthLeft:16,widthRight:16,between:24,dropLeft:32,dropRight:56},{macro:"Fill",thing:"Coin",x:1025,y:63,xnum:2,xwidth:8},{macro:"Tree",x:1056,width:32},{macro:"Tree",x:1056,y:64,width:24},{macro:"Tree",x:1080,y:32,width:32},{thing:"Platform",x:1128,y:47,width:16,falling:!0},{thing:"Platform",x:1160,y:55,width:16,falling:!0},{macro:"Fill",thing:"Coin",x:1161,y:47,xnum:2,xwidth:8},{thing:"Platform",x:1192,y:51,width:16,falling:!0},{thing:"Platform",x:1224,y:59,width:16,falling:!0},{macro:"Fill",thing:"Coin",x:1233,y:87,xnum:2,xwidth:8},{macro:"Tree",x:1246,y:72,width:24},{macro:"Floor",x:1280,width:256},{macro:"BulletBillsStop",x:1280},{macro:"EndOutsideCastle",x:1336,large:!0,walls:15,transport:{map:"6-4"}}]}]},{name:"6-4",time:300,locations:[{entry:"Castle"}],areas:[{setting:"Castle",blockBoundaries:!0,creation:[{macro:"StartInsideCastle"},{thing:"Stone",y:88,width:192,height:24},{macro:"Floor",x:40,y:24,width:64},{macro:"Water",x:104,y:8,width:16},{macro:"Floor",x:120,y:24,width:88},{thing:"Stone",x:184,y:64},{thing:"CastleBlock",x:184,y:56,fireballs:6},{thing:"Stone",x:192,y:88,width:1088},{macro:"Water",x:208,width:24},{thing:"Podoboo",x:216,y:-32},{macro:"Floor",x:232,y:24,width:24},{thing:"CastleBlock",x:240,y:24,fireballs:6},{thing:"Block",x:240,y:56,contents:"Mushroom"},{macro:"Water",x:256,width:24},{thing:"Podoboo",x:264,y:-32},{thing:"Stone",x:280,y:32,width:296},{thing:"Stone",x:280,y:24,width:552,height:24},{macro:"Floor",x:280,width:744},{thing:"Stone",x:296,y:80,width:280,height:24},{thing:"CastleBlock",x:296,y:56,fireballs:6},{thing:"CastleBlock",x:392,y:56,fireballs:6},{thing:"CastleBlock",x:480,y:56,fireballs:6},{thing:"CastleBlock",x:536,y:56,fireballs:6},{thing:"CastleBlock",x:608,y:32,fireballs:6},{thing:"Stone",x:640,y:80},{thing:"CastleBlock",x:640,y:72,fireballs:6},{thing:"CastleBlock",x:672,y:32,fireballs:6},{thing:"Stone",x:704,y:80},{thing:"CastleBlock",x:704,y:72,fireballs:6,direction:1},{thing:"CastleBlock",x:736,y:32,fireballs:6},{thing:"Stone",x:776,y:80,width:56,height:16},{macro:"Fill",thing:"Block",x:848,y:32,xnum:3,xwidth:24,contents:"Coin",hidden:!0},{macro:"Fill",thing:"Block",x:856,y:64,xnum:3,xwidth:24,contents:"Coin",hidden:!0},{thing:"Stone",x:928,y:24,width:32,height:24},{thing:"Stone",x:984,y:24,width:40,height:24},{thing:"Stone",x:984,y:80,width:40,height:16},{macro:"EndInsideCastle",x:1024,spawnType:"Blooper",throwing:!0,transport:{map:"7-1"}}]}]},{name:"7-1",locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld Alt",blockBoundaries:!0,creation:[{macro:"CastleLarge",x:-16},{macro:"Pattern",pattern:"BackFence",repeat:5},{macro:"Floor",width:584},{thing:"Cannon",x:152,y:16,height:16},{thing:"Koopa",x:208,y:22,flying:!0},{thing:"Brick",x:216,y:64,contents:"Mushroom"},{thing:"Cannon",x:224,y:8},{thing:"Cannon",x:224,y:24,height:16},{macro:"Fill",thing:"Brick",x:224,y:64,xnum:2},{thing:"Cannon",x:288,y:16,height:16},{macro:"Fill",thing:"Block",x:312,y:32,xnum:4},{thing:"Koopa",x:352,y:28,flying:!0},{thing:"Cannon",x:368,y:24,height:24},{thing:"Koopa",x:424,y:22,flying:!0},{thing:"Cannon",x:448,y:8},{thing:"Cannon",x:448,y:24,height:16},{macro:"Fill",thing:"Brick",x:496,y:32,xnum:2},{thing:"Stone",x:512,y:32},{thing:"Cannon",x:512,y:48,height:16},{thing:"Koopa",x:520,y:16,flying:!0},{thing:"Brick",x:520,y:32,contents:"Coin"},{thing:"Brick",x:528,y:32},{thing:"Cannon",x:544,y:16,height:16},{macro:"Floor",x:600,width:616},{macro:"Pipe",x:608,height:24,piranha:!0},{macro:"Fill",thing:"Brick",x:656,y:32,xnum:7,ynum:2,yheight:23},{thing:"HammerBro",x:680,y:44},{thing:"HammerBro",x:692,y:76},{macro:"Pipe",x:744,height:24,piranha:!0,transport:2},{thing:"Block",x:744,y:64,contents:"Mushroom1Up",hidden:!0},{thing:"Cannon",x:832,y:16,height:16},{macro:"Pipe",x:872,height:24,piranha:!0},{thing:"Koopa",x:912,y:12},{macro:"Pipe",x:920,height:16,piranha:!0,entrance:1},{thing:"Cannon",x:976,y:16,height:16},{macro:"Pipe",x:1024,height:16,piranha:!0},{macro:"Fill",thing:"Brick",x:1072,y:32,xnum:5,ynum:2,yheight:32},{thing:"HammerBro",x:1080,y:12},{thing:"HammerBro",x:1096,y:44},{thing:"Stone",x:1128,y:24},{thing:"Cannon",x:1168,y:8},{thing:"Cannon",x:1168,y:24,height:16},{macro:"Fill",thing:"Brick",x:1192,y:40,xnum:2},{thing:"Springboard",x:1208,y:14.5},{thing:"Brick",x:1208,y:88,contents:"Mushroom"},{macro:"Floor",x:1224,width:432},{thing:"Stone",x:1224,y:8},{macro:"Fill",thing:"Brick",x:1224,y:56,xnum:2},{thing:"Stone",x:1232,y:16,height:16},{thing:"Stone",x:1240,y:24,height:24},{thing:"Stone",x:1248,y:32,height:32},{thing:"Stone",x:1256,y:40,height:40},{thing:"Stone",x:1264,y:48,height:48},{thing:"Stone",x:1296,y:8},{thing:"Stone",x:1304,y:16,height:16},{thing:"Stone",x:1312,y:24,height:24},{thing:"Stone",x:1320,y:32,height:32},{thing:"Stone",x:1328,y:40,height:40},{thing:"Stone",x:1336,y:48,height:48},{thing:"Stone",x:1344,y:56,height:56},{thing:"Stone",x:1352,y:64,height:64,width:16},{thing:"Beetle",x:1360,y:72.5},{macro:"EndOutsideCastle",x:1432,transport:{map:"7-2"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:56},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:8,xnum:7,ynum:3},{macro:"Fill",thing:"Coin",x:33,y:31,xnum:7,ynum:2,xwidth:8,yheight:16},{macro:"Fill",thing:"Coin",x:41,y:63,xnum:5,xwidth:8},{thing:"PipeHorizontal",x:104,y:16},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"7-2",locations:[{entry:"Walking"},{area:1},{area:2,entry:"PipeVertical"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"CastleSmall"},{macro:"Pattern",pattern:"BackCloud",y:4,repeat:2},{macro:"Floor",width:192},{macro:"CastleSmall"},{thing:"PipeHorizontal",x:80,y:16,transport:1},{macro:"Pipe",x:96,height:32}]},{setting:"Underwater",blockBoundaries:!0,underwater:!0,creation:[{macro:"Floor",width:536},{thing:"Coral",x:96,y:24,height:24},{macro:"Fill",thing:"Coin",x:120,y:7,xnum:2,xwidth:8},{thing:"Stone",x:152,y:32,width:24},{thing:"Blooper",x:184,y:16},{thing:"Blooper",x:208,y:46},{macro:"Fill",thing:"Coin",x:224,y:64,xnum:3,xwidth:8},{thing:"Coral",x:272,y:40,height:40},{macro:"Fill",thing:"Coin",x:296,y:7,xnum:3,xwidth:8},{thing:"Stone",x:344,y:32,width:16},{thing:"Blooper",x:376,y:32},{thing:"Coral",x:408,y:32,height:32},{thing:"Blooper",x:424,y:46},{thing:"Blooper",x:448,y:24},{thing:"Stone",x:520,y:24,height:24},{thing:"Stone",x:528,y:40,height:40},{macro:"Fill",thing:"Coin",x:546,y:23,xnum:3,xwidth:8},{macro:"Floor",x:576,width:480},{thing:"Stone",x:576,y:40,height:40},{thing:"Stone",x:584,y:24,height:24},{thing:"CheepCheep",x:616,y:24},{thing:"Stone",x:632,y:24,width:16,height:24},{thing:"Stone",x:532,y:88,width:16,height:24},{thing:"Blooper",x:624,y:54},{thing:"CheepCheep",x:640,y:48},{thing:"CheepCheep",x:656,y:16},{thing:"Stone",x:664,y:64,height:24},{thing:"Blooper",x:672,y:40},{thing:"Coral",x:672,y:80,height:16},{thing:"Coral",x:720,y:24,height:24},{thing:"Blooper",x:728,y:16},{thing:"Blooper",x:760,y:80},{thing:"CheepCheep",x:760,y:56},{thing:"CheepCheep",x:784,y:80,smart:!0},{macro:"Fill",thing:"Coin",x:816,y:15,xnum:3,xwidth:8},{thing:"CheepCheep",x:816,y:24},{thing:"Stone",x:824,y:32,width:16},{thing:"Coral",x:824,y:64,height:32},{thing:"Blooper",x:848,y:16},{macro:"Fill",thing:"Coin",x:912,y:55,xnum:3,xwidth:8},{thing:"Stone",x:928,y:40,width:16},{thing:"CheepCheep",x:944,y:72},{thing:"Coral",x:968,y:32,height:32},{thing:"CheepCheep",x:1032,y:24,smart:!0},{thing:"Stone",x:1040,y:32,height:32},{thing:"Stone",x:1048,y:16,height:16},{thing:"CheepCheep",x:1056,y:16},{thing:"Stone",x:1056,y:88,height:24},{thing:"Stone",x:1064,y:72,width:64},{thing:"Coin",x:1072,y:15},{macro:"Fill",thing:"Coin",x:1080,y:7,xnum:3,xwidth:8},{thing:"Coin",x:1104,y:15},{thing:"CheepCheep",x:1100,y:40},{macro:"Floor",x:1128,width:136},{thing:"Stone",x:1128,y:16,height:16},{thing:"Stone",x:1136,y:32,height:32},{thing:"CheepCheep",x:1160,y:32},{thing:"Coral",x:1184,y:16,height:16},{thing:"Coral",x:1200,y:24,height:24},{thing:"CheepCheep",x:1206,y:56,smart:!0},{thing:"Blooper",x:1208,y:38},{thing:"Stone",x:1256,y:64,height:64},{thing:"Stone",x:1264,y:64,width:16},{macro:"Fill",thing:"Coin",x:1281,y:32,xnum:3,ynum:2,xwidth:8,yheight:-24},{thing:"Stone",x:1304,y:64,width:16},{macro:"Floor",x:1320,width:320},{thing:"Stone",x:1320,y:64,height:64},{thing:"CheepCheep",x:1320,y:80},{thing:"CheepCheep",x:1344,y:16,smart:!0},{macro:"Fill",thing:"Stone",x:1384,y:32,ynum:2,yheight:32,width:40},{thing:"Blooper",x:1392,y:14},{thing:"Coral",x:1392,y:80,height:16},{thing:"CheepCheep",x:1408,y:40},{thing:"Blooper",x:1440,y:14},{macro:"Fill",thing:"Stone",x:1448,y:32,yum:2,Yheight:32,width:32},{thing:"CheepCheep",x:1472,y:72,smart:!0},{thing:"CheepCheep",x:1496,y:48,smart:!0},{thing:"Stone",x:1488,y:8,width:40},{thing:"Stone",x:1496,y:16,width:32},{thing:"Stone",x:1504,y:24,width:24},{thing:"Stone",x:1512,y:32,width:16,height:32},{thing:"Stone",x:1512,y:88,width:88},{thing:"PipeHorizontal",x:1520,y:48,width:16},{thing:"Stone",x:1528,y:88,width:112,height:88}]},{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackRegular",x:104},{macro:"Floor",width:336},{macro:"Pipe",height:16,piranha:!0,entrance:2},{thing:"Stone",x:16,y:8},{thing:"Stone",x:24,y:16,height:16},{thing:"Stone",x:32,y:24,height:24},{thing:"Stone",x:40,y:32,height:32},{thing:"Stone",x:48,y:40,height:40},{thing:"Stone",x:56,y:48,height:48},{thing:"Stone",x:64,y:56,height:56},{thing:"Stone",x:72,y:64,height:64},{thing:"Stone",x:80,y:64,height:64},{macro:"EndOutsideCastle",x:152,transport:{map:"7-3"}}]}]},{name:"7-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Floor",width:56},{macro:"CastleSmall"},{macro:"Pattern",pattern:"BackCloud",y:4,repeat:4},{macro:"CheepsStart",x:64},{macro:"Tree",x:64,width:64},{thing:"Stone",x:80,y:8},{thing:"Stone",x:88,y:16,height:16},{thing:"Stone",x:96,y:24,height:24,width:24},{macro:"Bridge",x:120,y:24,width:136,end:!0},{macro:"Bridge",x:256,y:24,width:128,end:!0},{macro:"Fill",thing:"Coin",x:290,y:63,xnum:4,xwidth:8},{thing:"Koopa",x:312,y:36},{macro:"Bridge",x:384,y:24,width:128,end:!0},{thing:"Koopa",x:416,y:44,jumping:!0},{macro:"Fill",thing:"Coin",x:441,y:63,xnum:3,xwidth:16},{macro:"Fill",thing:"Coin",x:449,y:55,xnum:2,xwidth:16},{macro:"Bridge",x:544,y:24,width:96,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:576,y:56,xnum:2,xwidth:24},{macro:"Fill",thing:"Coin",x:584,y:64,xnum:2,xwidth:8},{thing:"Koopa",x:632,y:36,smart:!0},{macro:"Bridge",x:672,y:24,width:96,begin:!0,end:!0},{thing:"Koopa",x:760,y:36,smart:!0},{macro:"Fill",thing:"Coin",x:777,y:63,xnum:3,xwidth:8},{macro:"Bridge",x:792,y:32,width:56,begin:!0,end:!0},{thing:"Block",x:816,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Coin",x:865,y:63,xnum:3,xwidth:8},{macro:"Tree",x:896,width:64},{thing:"Koopa",x:952,y:12,smart:!0},{macro:"Bridge",x:976,y:24,width:24},{macro:"Bridge",x:1016,y:24,width:136,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:1064,y:63,xnum:6,xwidth:8},{thing:"Koopa",x:1120,y:52,jumping:!0,flying:!0},{macro:"Bridge",x:1168,y:8,width:80,begin:!0,end:!0},{macro:"Fill",thing:"Coin",x:1193,y:39,xnum:4,xwidth:8},{macro:"Bridge",x:1272,y:24,width:80,begin:!0,end:!0},{thing:"Koopa",x:1248,y:36,jumping:!0,flying:!0},{macro:"Bridge",x:1368,y:24,width:16},{macro:"Fill",thing:"Coin",x:1385,y:55,xnum:6,xwidth:8},{macro:"Bridge",x:1400,y:24,width:16},{macro:"Bridge",x:1432,y:24,width:16},{macro:"Bridge",x:1464,y:24,width:80,begin:!0},{macro:"Tree",x:1536,width:104},{macro:"Pattern",pattern:"BackCloud",x:1536,y:4,skips:[5]},{thing:"Stone",x:1544,y:24,width:16,height:24},{thing:"Stone",x:1560,y:16,height:16},{thing:"Stone",x:1568,y:8},{macro:"CheepsStop",x:1600},{macro:"Floor",x:1656,width:280},{thing:"Stone",x:1664,y:8},{thing:"Stone",x:1672,y:16,height:16},{thing:"Stone",x:1680,y:24,height:24},{thing:"Stone",x:1688,y:32,height:32},{thing:"Stone",x:1696,y:40,height:40},{thing:"Stone",x:1704,y:48,height:48},{thing:"Stone",x:1712,y:56,height:56},{thing:"Stone",x:1720,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:1800,large:!0,walls:7,transport:{map:"7-4"}}]}]},{name:"7-4",locations:[{entry:"Castle"}],areas:[{setting:"Castle",creation:[{macro:"StartInsideCastle"},{thing:"Stone",y:88,width:128,height:24},{macro:"Floor",x:40,y:24,width:88},{macro:"Water",x:128,width:88},{thing:"Stone",x:128,y:88,width:128},{thing:"Platform",x:144,y:48,width:16,falling:!0},{thing:"Podoboo",x:160,y:-32},{thing:"Platform",x:176,y:40,width:16,falling:!0},{macro:"Floor",x:216,y:24,width:40},{thing:"Stone",x:224,y:80,width:32,height:16},{macro:"Section",x:256}],sections:[{before:{width:48,creation:[{macro:"Floor",width:48},{thing:"Stone",y:88,width:48},{thing:"Stone",x:16,y:32,width:32},{thing:"Stone",x:32,y:40,width:16},{thing:"Stone",x:40,y:48,width:8}]},stretch:{width:8,creation:[{macro:"Floor"},{macro:"SectionPass",y:24,height:24},{thing:"Stone",y:56,height:32},{macro:"SectionFail",y:80,height:24},{thing:"Stone",y:88}]},after:{width:24,creation:[{macro:"Floor",width:24},{thing:"Stone",y:88,width:24},{macro:"Section",x:24,section:1}]}},{before:{width:8,creation:[{macro:"Floor"},{thing:"Stone",
y:24},{thing:"Stone",y:88}]},stretch:{width:8,creation:[{macro:"Floor"},{macro:"SectionFail",y:16,height:16},{thing:"Stone",y:24},{macro:"SectionPass",y:48,height:24},{thing:"Stone",y:56},{macro:"SectionFail",y:80,height:24},{thing:"Stone",y:88}]},after:{width:32,creation:[{macro:"Floor",width:32},{thing:"Stone",y:24},{thing:"Stone",y:88,width:32},{macro:"Section",x:32,section:2}]}},{stretch:{width:8,creation:[{macro:"Floor"},{macro:"SectionFail",y:24,height:24},{thing:"Stone",y:56,height:32},{macro:"SectionPass",y:80,height:24},{thing:"Stone",y:88}]},after:{width:80,creation:[{macro:"Floor",width:80},{thing:"Stone",y:40},{thing:"Stone",y:48,width:16},{thing:"Stone",y:56,width:32},{thing:"Stone",y:88,width:80},{thing:"Stone",x:40,y:24,width:24,height:24},{macro:"SectionDecider",x:80,pass:3,fail:0}]}},{before:{width:136,creation:[{macro:"Floor",y:24,width:24},{thing:"Stone",y:88,width:136},{macro:"Floor",x:24,width:32},{thing:"Stone",x:48,y:56,width:16},{macro:"Water",x:56,width:24},{thing:"Stone",x:72,y:56,width:24},{macro:"Floor",x:80},{thing:"CastleBlock",x:80,y:48,fireballs:6,direction:1},{macro:"Water",x:88,width:24},{thing:"Stone",x:104,y:56,width:32},{macro:"Floor",x:112,width:24}]},stretch:{width:8,creation:[{macro:"SectionFail",y:24,height:24},{macro:"SectionPass",y:80,height:24},{macro:"Floor"},{thing:"Stone",y:56,height:32},{thing:"Stone",y:88}]},after:{width:80,creation:[{macro:"Section",section:4}]}},{before:{width:64,creation:[{macro:"Floor",width:64},{thing:"Stone",y:88,width:64},{thing:"Stone",x:16,y:56,width:24},{thing:"Stone",x:24,y:24,width:24},{thing:"Stone",x:56,y:56}]},stretch:{width:8,creation:[{macro:"Floor"},{thing:"Stone",y:24},{thing:"Stone",y:56},{thing:"Stone",y:88}]},after:{width:64,creation:[{macro:"Floor",width:64},{thing:"Stone",y:24},{thing:"Stone",y:88,width:64},{thing:"Stone",x:24,y:56,width:24},{thing:"Stone",x:32,y:24,width:24},{macro:"Section",x:64,section:5}]}},{before:{width:32,creation:[{macro:"Floor",width:16},{thing:"Stone",y:56,height:32},{thing:"Stone",y:88,width:32},{thing:"Stone",x:8,y:56,width:24},{macro:"Floor",x:16,y:8},{macro:"Floor",x:24,y:16}]},stretch:{width:8,creation:[{macro:"Floor",y:24},{macro:"SectionPass",y:80,height:24},{thing:"Stone",y:56},{macro:"SectionFail",y:48,height:24},{thing:"Stone",y:88}]},after:{width:56,creation:[{macro:"Floor",y:24,width:56},{thing:"Stone",y:88,width:56},{macro:"SectionDecider",x:56,y:80,height:56,pass:6,fail:3}]}},{before:{width:272,creation:[{macro:"Floor",width:24},{thing:"Stone",y:88,width:272},{macro:"Floor",x:24,y:24,width:24},{macro:"Floor",x:48,width:16},{macro:"Floor",x:64,y:24,width:64},{macro:"Floor",x:128,width:16},{macro:"Floor",x:144,y:24,width:16},{macro:"Floor",x:160,width:16},{macro:"Floor",x:176,y:24,width:16},{macro:"Floor",x:192,width:16},{macro:"Floor",x:208,y:24,width:64},{macro:"EndInsideCastle",x:272,spawnType:"HammerBro",throwing:!1,transport:{map:"8-1"}}]}}]}]},{name:"8-1",time:300,locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFence",repeat:7},{macro:"CastleLarge",x:-16},{macro:"Floor",width:368},{thing:"Beetle",x:144,y:8.5},{macro:"Fill",thing:"Goomba",x:184,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Goomba",x:240,y:8,xnum:3,xwidth:12},{macro:"Pipe",x:280,height:32,piranha:!0},{macro:"Fill",thing:"Koopa",x:344,y:12,xnum:2,xwidth:12},{macro:"Floor",x:376},{macro:"Floor",x:392,width:16},{macro:"Floor",x:416,width:16},{macro:"Floor",x:440,width:16},{macro:"Floor",x:464,width:888},{thing:"Koopa",x:488,y:12},{thing:"Coin",x:513,y:39},{macro:"Fill",thing:"Goomba",x:552,y:8,xnum:3,xwidth:12},{macro:"Pipe",x:608,height:32,piranha:!0},{thing:"Block",x:640,y:40,contents:"Mushroom1Up",hidden:!0},{thing:"Beetle",x:648,y:8.5},{macro:"Pipe",x:656,height:24,piranha:!0},{thing:"Coin",x:713,y:39},{macro:"Pipe",x:752,height:32,piranha:!0},{thing:"Coin",x:786,y:39},{macro:"Pipe",x:832,height:32,piranha:!0,transport:2},{macro:"Fill",thing:"Goomba",x:864,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Coin",x:873,y:71,xnum:2,xwidth:8},{macro:"Pipe",x:920,height:16,piranha:!0,entrance:1},{thing:"Koopa",x:952,y:12},{macro:"Fill",thing:"Koopa",x:992,y:12,xnum:3,xwidth:12},{macro:"Fill",thing:"Koopa",x:1040,y:12,xnum:3,xwidth:12},{macro:"Pipe",x:1120,height:24,piranha:!0},{macro:"Fill",thing:"Goomba",x:1184,y:8,xnum:3,xwidth:12},{thing:"Stone",x:1224,y:32,height:32},{macro:"Fill",thing:"Brick",x:1232,y:64,xnum:4},{thing:"Block",x:1264,y:32,hidden:!0},{thing:"Brick",x:1264,y:64,contents:"Mushroom"},{macro:"Fill",thing:"Brick",x:1272,y:64,xnum:3},{thing:"Koopa",x:1288,y:32,jumping:!0},{thing:"Stone",x:1304,y:32,height:32},{macro:"Floor",x:1360},{macro:"Floor",x:1376,width:16},{thing:"Koopa",x:1376,y:32,jumping:!0},{macro:"Floor",x:1400},{macro:"Floor",x:1416,width:16},{thing:"Koopa",x:1416,y:28,jumping:!0},{macro:"Floor",x:1416,width:16},{macro:"Floor",x:1440,width:136},{macro:"Fill",thing:"Brick",x:1472,y:40,xnum:2},{thing:"Brick",x:1488,y:40,contents:"Star"},{macro:"Fill",thing:"Brick",x:1496,y:40,xnum:5},{macro:"Floor",x:1584},{macro:"Floor",x:1600},{macro:"Floor",x:1616,width:152},{macro:"Fill",thing:"Koopa",x:1656,y:12,xnum:2,xwidth:12},{thing:"Stone",x:1680,y:16,height:16},{macro:"Fill",thing:"Coin",x:1785,y:39,xnum:2,xwidth:8},{macro:"Floor",x:1816,width:80},{macro:"Fill",thing:"Goomba",x:1856,y:8,xnum:3,xwidth:12},{macro:"Floor",x:1904,width:16},{macro:"Pipe",x:1904,height:24,piranha:!0},{macro:"Floor",x:1936,height:32,piranha:!0},{macro:"Floor",x:1968,width:352},{macro:"Pipe",x:1968,height:40},{thing:"Beetle",x:2032,y:8.5},{macro:"Fill",thing:"Goomba",x:2056,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Goomba",x:2112,y:8,xnum:3,xwidth:12},{macro:"Fill",thing:"Goomba",x:2176,y:8,xnum:2,xwidth:12},{thing:"Stone",x:2200,y:8},{thing:"Stone",x:2208,y:16,height:16},{thing:"Stone",x:2216,y:24,height:24},{thing:"Stone",x:2224,y:32,height:32},{thing:"Stone",x:2232,y:40,height:40},{thing:"Stone",x:2240,y:48,height:48},{thing:"Beetle",x:2264,y:8.5},{macro:"Fill",thing:"Coin",x:2265,y:39,xnum:2,xwidth:8},{macro:"Fill",thing:"Coin",x:2329,y:39,xnum:2,xwidth:40},{macro:"Floor",x:2344,width:16},{macro:"Floor",x:2384,width:128},{macro:"Fill",thing:"Stone",x:2424,y:16,xnum:2,xwidth:32,height:16},{thing:"Koopa",x:2440,y:12},{macro:"Fill",thing:"Coin",x:2529,y:39,xnum:2,xwidth:8},{macro:"Floor",x:2552},{macro:"Fill",thing:"Coin",x:2569,y:39,xnum:2,xwidth:8},{macro:"Floor",x:2600,width:272},{thing:"Koopa",x:2656,y:12},{macro:"Pattern",pattern:"BackFence",x:2688,skips:[5,10]},{macro:"Fill",thing:"Koopa",x:2712,y:12,xnum:3,xwidth:12},{macro:"Pipe",x:2752,height:24,piranha:!0},{macro:"Pipe",x:2840,height:16,piranha:!0},{macro:"Floor",x:2880},{thing:"Stone",x:2880,y:16,height:16},{macro:"Floor",x:2896},{thing:"Stone",x:2896,y:32,height:32},{macro:"Floor",x:2912},{thing:"Stone",x:2912,y:48,height:48},{macro:"Floor",x:2928,width:288},{thing:"Stone",x:2928,y:64,width:16,height:64},{macro:"EndOutsideCastle",x:3008,transport:{map:"8-2"}},{macro:"Pattern",pattern:"BackFence",x:3072,skips:[3,4,5,6,7,8,9,10,11,12,13,14,15]}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:24,y:32,xnum:9},{macro:"Fill",thing:"Brick",x:24,y:64,xnum:10,ynum:4},{macro:"Fill",thing:"Coin",x:25,y:7,xnum:9,xwidth:8},{macro:"Fill",thing:"Coin",x:33,y:39,xnum:8,xwidth:8},{thing:"Brick",x:96,y:32,contents:"Coin"},{macro:"Fill",thing:"Brick",x:104,y:24,xnum:2,ynum:9},{thing:"PipeHorizontal",x:104,y:16,transport:1},{thing:"PipeVertical",x:120,y:100,height:100}]}]},{name:"8-2",locations:[{entry:"Plain"},{entry:"PipeVertical"},{area:1}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFenceMin2",repeat:4},{macro:"CastleSmall"},{macro:"Floor",width:120},{macro:"Floor",x:128,width:40},{thing:"Lakitu",x:128,y:84},{thing:"Stone",x:136,y:8},{thing:"Stone",x:144,y:16,height:16},{thing:"Stone",x:152,y:24,height:24},{thing:"Stone",x:160,y:32,height:32},{macro:"Floor",x:176,width:112},{thing:"Stone",x:176,y:48,height:48},{thing:"Stone",x:184,y:56,height:56},{thing:"Stone",x:192,y:64,width:16,height:64},{macro:"Fill",thing:"Block",x:232,y:32,xnum:4},{macro:"Floor",x:296,width:64},{thing:"Brick",x:344,y:64},{thing:"Springboard",x:352,y:14.5},{thing:"Brick",x:352,y:64,contents:"Mushroom1Up"},{macro:"Fill",thing:"Brick",x:360,y:64,xnum:31},{macro:"Floor",x:368,width:32},{macro:"Floor",x:408},{macro:"Floor",x:424,width:24},{macro:"Floor",x:456,width:48},{thing:"Koopa",x:456,y:26,jumping:!0},{macro:"Floor",x:512,width:112},{macro:"Fill",thing:"Brick",x:616,y:32,xnum:2},{thing:"PlantLarge",x:552,y:23},{macro:"Floor",x:640,width:32},{macro:"Floor",x:680,width:424},{thing:"Cannon",x:680,y:16,height:16},{thing:"Koopa",x:736,y:32,jumping:!0},{thing:"Cannon",x:744,y:8,nofire:!0},{thing:"Koopa",x:760,y:24,jumping:!0},{thing:"Brick",x:792,y:32},{thing:"Brick",x:800,y:32,contents:"Mushroom"},{thing:"Cannon",x:840,y:16,height:16},{macro:"Fill",thing:"Brick",x:880,y:32,xnum:8},{thing:"Fence",x:888,y:8},{thing:"Beetle",x:888,y:8.5},{thing:"Cannon",x:920,y:8},{thing:"Brick",x:944,y:32},{thing:"PlantLarge",x:936,y:23},{thing:"Stone",x:952,y:32},{thing:"Cannon",x:952,y:40},{thing:"Brick",x:960,y:32,contents:"Mushroom"},{thing:"Beetle",x:968,y:8.5},{thing:"Beetle",x:984,y:8.5},{thing:"Cannon",x:1e3,y:24,height:24},{macro:"Pipe",x:1048,height:16,piranha:!0},{macro:"Floor",x:1112,width:40},{thing:"Koopa",x:1112,y:12,jumping:!0},{macro:"Pipe",x:1136,height:16,piranha:!0},{macro:"Floor",x:1160},{macro:"Floor",x:1176},{macro:"Floor",x:1232,width:160},{thing:"Fence",x:1272,y:8},{macro:"Pipe",x:1248,height:32,piranha:!0,transport:2},{macro:"Pipe",x:1304,height:16,piranha:!0,entrance:1},{thing:"PlantLarge",x:1320,y:23},{thing:"Koopa",x:1360,y:32,jumping:!0},{thing:"Koopa",x:1376,y:24,jumping:!0},{macro:"Floor",x:1400},{thing:"Cannon",x:1400,y:16,height:16},{thing:"Koopa",x:1400,y:48,jumping:!0},{macro:"Floor",x:1432,width:184},{thing:"Stone",x:1456,y:8},{thing:"Stone",x:1464,y:16,height:16},{thing:"Stone",x:1472,y:24,height:24},{thing:"Goomba",x:1472,y:32},{thing:"Stone",x:1480,y:32,height:32},{thing:"Stone",x:1488,y:40,height:40},{thing:"Goomba",x:1488,y:48},{thing:"Beetle",x:1512,y:8.5},{thing:"Cannon",x:1528,y:8,nofire:!0},{thing:"Cannon",x:1528,y:24,height:16},{macro:"Pattern",pattern:"BackFenceMin2",x:1536,skips:[2,7]},{thing:"Stone",x:1592,y:8},{thing:"Stone",x:1600,y:16,height:16},{thing:"Stone",x:1608,y:24,height:24},{macro:"Floor",x:1624},{thing:"Stone",x:1624,y:40,height:40},{thing:"Koopa",x:1624,y:72,jumping:!0},{macro:"Floor",x:1648,width:320},{macro:"LakituStop",x:1648},{thing:"Stone",x:1648,y:64,width:16,height:64},{thing:"PlantLarge",x:1704,y:23},{macro:"EndOutsideCastle",x:1728,transport:{map:"8-3"}}]},{setting:"Underworld",blockBoundaries:!0,creation:[{macro:"Ceiling",x:32,width:7},{macro:"Floor",width:136},{macro:"Fill",thing:"Brick",y:8,ynum:11},{macro:"Fill",thing:"Brick",x:32,y:48,xnum:7},{thing:"Brick",x:32,y:56},{macro:"Fill",thing:"Coin",x:42,y:55,xnum:5,ynum:2,xwidth:8,yheight:8},{macro:"Fill",thing:"Brick",x:80,y:56,ynum:4},{macro:"Fill",thing:"Brick",x:88,y:56,xnum:2},{thing:"Brick",x:112,y:48,contents:"Coin"},{thing:"PipeHorizontal",x:104,y:16,transport:1},{thing:"PipeVertical",x:120,y:88,height:88}]}]},{name:"8-3",time:300,locations:[{entry:"Plain"}],areas:[{setting:"Overworld",blockBoundaries:!0,creation:[{macro:"Pattern",pattern:"BackFenceMin3",repeat:3},{macro:"CastleSmall"},{macro:"Floor",width:552},{thing:"Fence",x:120,y:8,width:24},{thing:"Cannon",x:144,y:16,height:16},{thing:"CastleWall",x:192,y:48,width:64},{thing:"Koopa",x:240,y:32,jumping:!0},{thing:"Cannon",x:272,y:24,height:24},{thing:"CastleWall",x:296,y:48,width:112},{macro:"Pipe",x:424,height:23,piranha:!0},{macro:"Fill",thing:"Brick",x:480,y:32,xnum:8},{macro:"Fill",thing:"Brick",x:480,y:64,xnum:6},{thing:"HammerBro",x:504,y:12},{thing:"Fence",x:504,y:8,width:24},{thing:"HammerBro",x:520,y:44},{thing:"Brick",x:528,y:64,contents:"Mushroom"},{thing:"Brick",x:536,y:64},{macro:"Floor",x:568,width:32},{thing:"Stone",x:568,y:32,height:32},{thing:"Stone",x:576,y:24,height:24},{thing:"Stone",x:584,y:16,height:16},{thing:"Stone",x:592,y:8},{macro:"Floor",x:616,width:376},{thing:"CastleWall",x:632,y:48,width:48},{thing:"Cannon",x:688,y:16,height:16},{thing:"Fence",x:696,y:8},{thing:"CastleWall",x:704,y:48,width:48},{thing:"Koopa",x:744,y:24,jumping:!0},{thing:"Stone",x:760,y:24,height:24},{thing:"CastleWall",x:776,y:48,width:80},{thing:"Stone",x:872,y:32,width:16,height:32},{thing:"Fence",x:888,y:8,width:24},{macro:"Fill",thing:"Brick",x:920,y:32,xnum:8},{thing:"Brick",x:920,y:64},{thing:"Brick",x:928,y:64,contents:"Mushroom"},{thing:"HammerBro",x:936,y:44},{macro:"Fill",thing:"Brick",x:936,y:64,xnum:6},{thing:"HammerBro",x:952,y:12},{macro:"Floor",x:1008,width:16},{macro:"Pipe",x:1008,height:23,piranha:!0},{macro:"Floor",x:1040,width:536},{thing:"CastleWall",x:1056,y:48,width:272},{thing:"Koopa",x:1096,y:12},{thing:"HammerBro",x:1168,y:12},{thing:"HammerBro",x:1270,y:12},{thing:"Cloud1",x:1296,y:80},{thing:"PlantSmall",x:1336,y:16},{macro:"Pipe",x:1344,height:24,piranha:!0},{thing:"Cloud1",x:1372,y:88},{thing:"CastleWall",x:1376,y:48,width:160},{thing:"Cloud2",x:1396,y:80},{thing:"HammerBro",x:1416,y:12},{thing:"HammerBro",x:1480,y:12},{thing:"Cloud1",x:1516,y:88},{thing:"Brick",x:1520,y:32,contents:"Coin"},{thing:"Cloud2",x:1540,y:80},{thing:"Stone",x:1560,y:16,height:16},{thing:"Stone",x:1584,y:16},{thing:"Stone",x:1600,y:32},{thing:"Stone",x:1616,y:48},{thing:"Stone",x:1632,y:64,width:16},{macro:"Floor",x:1664,width:256},{thing:"Fence",x:1664,y:8,width:16},{thing:"Cloud1",x:1684,y:80},{thing:"PlantLarge",x:1704,y:23},{macro:"EndOutsideCastle",x:1712,castleDistance:48,large:!0,walls:13,transport:{map:"8-4"}},{thing:"PlantSmall",x:1720,y:15},{thing:"PlantSmall",x:1728,y:15},{thing:"Cloud1",x:1756,y:88},{thing:"Cloud1",x:1900,y:88}]}]},{name:"8-4",locations:[{entry:"Castle"},{entry:"PipeVertical"},{area:1,entry:"PipeVertical"},{area:2,entry:"PipeVertical"},{area:3,entry:"PipeVertical",xloc:0},{area:4,entry:"PipeVertical"}],areas:[{setting:"Castle",creation:[{macro:"StartInsideCastle"},{thing:"Stone",y:88,width:256},{macro:"Floor",x:40,y:24},{macro:"Water",x:48,width:40},{macro:"Floor",x:88,width:64},{macro:"Pipe",x:152,y:16,height:"Infinity",piranha:!0,entrance:1},{macro:"Section",x:168}],sections:[{stretch:{width:8,creation:[{macro:"Floor"},{thing:"Stone",y:88}]},after:{width:424,creation:[{macro:"Pipe",y:16,height:"Infinity",piranha:!0,transport:1},{thing:"Stone",y:88,width:424},{macro:"Floor",x:16,width:72},{macro:"Fill",thing:"Goomba",x:36,y:8,xnum:3,xwidth:12},{macro:"Floor",x:88,y:24,width:32},{macro:"Water",x:120,width:136},{thing:"Platform",x:152,width:16,sliding:!0,begin:140,end:232,speed:2},{macro:"Floor",x:256,y:24,width:48},{thing:"Stone",x:264,y:56,width:32},{macro:"Pipe",x:304,y:40,height:"Infinity",piranha:!0,transport:2},{macro:"Floor",x:320,y:24,width:56},{macro:"Pipe",x:376,y:48,height:"Infinity",piranha:!0},{macro:"Floor",x:392,y:24,width:32},{macro:"Section",x:424}]}}]},{setting:"Castle",creation:[{macro:"Pipe",y:16,height:"Infinity",piranha:!0,entrance:2},{thing:"Stone",y:88,width:16},{macro:"Section",x:16}],sections:[{before:{width:328,creation:[{thing:"Stone",y:88,width:328},{macro:"Floor",width:40},{macro:"Pipe",x:40,y:24,height:"Infinity",piranha:!0},{macro:"Floor",x:56,width:64},{macro:"Fill",thing:"Beetle",x:88,y:8.5,xnum:2,xwidth:16},{macro:"Pipe",x:120,y:16,height:"Infinity",piranha:!0,transport:1},{macro:"Floor",x:136,width:64},{thing:"Koopa",x:176,y:32,jumping:!0},{thing:"Koopa",x:192,y:24,jumping:!0},{macro:"Pipe",x:200,y:24,height:"Infinity",piranha:!0},{macro:"Water",x:216,width:24},{macro:"Floor",x:240,width:88},{thing:"Block",x:264,y:32,hidden:!0},{thing:"Stone",x:280,y:32,width:16},{macro:"Pipe",x:280,y:32,height:24,transport:3},{thing:"Koopa",x:304,y:28,jumping:!0},{thing:"Koopa",x:320,y:36,jumping:!0}]},stretch:{width:8,creation:[{macro:"Floor"},{thing:"Stone",y:88}]},after:{width:16,creation:[{macro:"Pipe",y:16,height:"Infinity",piranha:!0},{thing:"Stone",y:88,width:16},{macro:"Section",x:16}]}}]},{setting:"Castle",creation:[{macro:"Pipe",y:16,height:"Infinity",piranha:!0,entrance:3},{thing:"Stone",y:88,width:16},{macro:"Section",x:16}],sections:[{before:{width:264,creation:[{thing:"Stone",y:88,width:264},{macro:"Floor"},{macro:"Floor",x:8,y:24,width:48},{macro:"Pipe",x:56,y:40,height:"Infinity",piranha:!0},{macro:"CheepsStart",x:72},{macro:"Floor",x:72,y:24,width:48},{macro:"Pipe",x:120,y:48,height:"Infinity",piranha:!0,transport:1},{macro:"Floor",x:136,y:24,width:48},{macro:"Water",x:184,width:32},{macro:"Floor",x:216,y:24,width:32},{macro:"Pipe",x:248,y:40,height:"Infinity",piranha:!0,transport:4},{macro:"CheepsStop",x:264}]},stretch:{width:8,creation:[{macro:"Floor",y:24},{thing:"Stone",y:88}]},after:{width:40,creation:[{macro:"Floor",width:24},{thing:"Stone",y:88,width:40},{macro:"Pipe",x:24,y:16,height:"Infinity",piranha:!0},{macro:"Section",x:40}]}}]},{setting:"Underwater Castle",blockBoundaries:!0,underwater:!0,creation:[{macro:"Floor",y:88,width:16},{macro:"Floor",x:16},{macro:"Pipe",x:24,y:16,height:"Infinity",entrance:4},{macro:"Floor",x:40,width:536},{thing:"Stone",x:48,y:24,width:40,height:24},{thing:"Stone",x:48,y:80,width:40,height:16},{thing:"Stone",x:48,y:88,width:528},{thing:"Stone",x:88,y:32,width:56,height:32},{thing:"Stone",x:88,y:80,width:56,height:24},{thing:"CastleBlock",x:160,y:46,fireballs:6,hidden:!0},{thing:"Blooper",x:224,y:16},{thing:"CastleBlock",x:248,y:22,fireballs:6,hidden:!0},{thing:"Stone",x:312,y:24,width:24,height:24},{thing:"Stone",x:312,y:80,width:24,height:24},{thing:"CastleBlock",x:320,y:54,fireballs:6,hidden:!0},{thing:"Blooper",x:408,y:24},{thing:"Blooper",x:424,y:56},{thing:"CastleBlock",x:446,y:38,fireballs:6,hidden:!0},{thing:"CastleBlock",x:512,y:44,fireballs:6,hidden:!0},{thing:"Stone",x:536,y:32,width:40,height:32},{thing:"Stone",x:536,y:80,width:40,height:24},{thing:"PipeHorizontal",x:544,y:48,transport:5},{thing:"Stone",x:552,y:56,width:24,height:24}]},{setting:"Castle",blockBoundaries:!0,creation:[{macro:"Pipe",y:16,height:"Infinity",piranha:!0,entrance:5},{thing:"Stone",y:88,width:232},{macro:"Floor",x:16,width:40},{macro:"Pipe",x:56,y:16,height:"Infinity",piranha:!0,transport:1},{macro:"Floor",x:72,width:72},{thing:"HammerBro",x:112,y:12},{macro:"Water",x:128,width:56},{thing:"Podoboo",x:160,y:-32},{macro:"Floor",x:184,y:24,width:48},{thing:"Stone",x:184,y:80,width:48,height:16},{macro:"EndInsideCastle",x:232,spawnType:"Bowser",throwing:!0,npc:"Peach",transport:{map:"1-1"}}]}]},{name:"Random",locations:{0:{entry:"Plain",area:"Overworld"},Overworld:{entry:"Plain",area:"Overworld"},OverworldFromSky:{area:"Overworld"},OverworldFromPipe:{entry:"PipeVertical",area:"OverworldWithPipe"},Underworld:{area:"Underworld"},Sky:{entry:"Vine",area:"Sky"},Castle:{entry:"Castle",area:"Castle"}},areas:{Overworld:{setting:"Overworld",random:!0,creation:[{thing:"RandomSpawner",x:0,y:0,randomization:"Overworld",randomTop:80,randomWidth:2800,randomBottom:-8}]},OverworldWithPipe:{setting:"Overworld",random:!0,creation:[{macro:"Pipe",entrance:"OverworldFromPipe",height:16},{thing:"RandomSpawner",x:0,y:0,randomization:"Overworld",randomTop:80,randomWidth:1520,randomBottom:-8}]},Underworld:{setting:"Underworld",random:!0,creation:[{thing:"RandomSpawner",x:0,y:0,randomization:"Underworld",randomTop:80,randomWidth:2800,randomBottom:-8}]},Sky:{setting:"Sky",random:!0,exit:"OverworldFromSky",creation:[{thing:"RandomSpawner",x:0,y:0,randomization:"Sky",randomTop:80,randomWidth:2800,randomBottom:-8}]},Castle:{setting:"Castle",random:!0,creation:[{thing:"RandomSpawner",x:0,y:0,randomization:"Castle",randomTop:80,randomWidth:2e3,randomBottom:-8}]}}}])},FullScreenMario.FullScreenMario.settings.mods={storeLocally:!0,mods:[{name:"Bouncy Bounce",description:"Mario landing causes him to jump.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onPlayerLanding:function(){var a=this.player;a.FSM.MapScreener.nokeys||Math.abs(a.yvel)<a.FSM.unitsize/4||(a.resting.actionTop&&a.resting.actionTop(a,a.resting),a.jumpcount=0,a.resting=void 0,a.yvel=-3*a.FSM.unitsize)},onPlayerActionLeft:function(a,b,c){c.actionLeft(b,c,!0)}}},{name:"Dark is the Night",description:"The night is darkest before the dawn, but I promise you: the dawn is coming.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){var b=this.MapsHandler.getArea();b&&a.events.onPreSetLocation.call(this,a)},onPreSetLocation:function(){var a=this.MapsHandler.getArea();a.setting+=" Castle Alt2",a.setBackground(a),this.PixelDrawer.setBackground(a.background),this.GroupHolder.callOnAll(this,this.PixelDrawer.setThingSprite.bind(this.PixelDrawer)),this.ModAttacher.fireEvent("onSetLocation",this.MapsHandler.getLocation())},onModDisable:function(){var a=this.MapsHandler.getArea();a.setting=a.setting.replace(" Castle Alt2",""),a.setBackground(a),this.PixelDrawer.setBackground(a.background),this.GroupHolder.callOnAll(this,this.PixelDrawer.setThingSprite.bind(this.PixelDrawer)),this.ModAttacher.fireEvent("onSetLocation",this.MapsHandler.getLocation())}}},{name:"Earthquake!",description:"Mario landing causes everything else to jump.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onPlayerLanding:function(){var a=[2,1.5,1,.5,0,-.5,-1,-1.5,-2],b=0,c=function(c,d,e,f,g){var h=a[b];return 0>h&&c.shiftVert(c.player,h),c.shiftThings(d,0,h),c.shiftThings(e,0,h),c.shiftThings(f,0,h),c.shiftThings(g,0,h),b+=1,b>=a.length?(b=0,!0):void 0};return function(){var a,d,e,f,g,h,i=this.player;if(!(i.FSM.MapScreener.nokeys||Math.abs(i.yvel)<i.FSM.unitsize/4)){for(this.AudioPlayer.play("Bump"),f=this.GroupHolder.getTextGroup().slice(),e=this.GroupHolder.getSceneryGroup().slice(),d=this.GroupHolder.getSolidGroup().slice(),a=this.GroupHolder.getCharacterGroup().slice(),h=0;h<a.length;h+=1)g=a[h],g.player||g.nofall||!g.resting||g.grounded||(g.resting=void 0,g.yvel=-1.4*i.FSM.unitsize);0===b&&this.TimeHandler.addEventInterval(c,1,1/0,this,f,d,e,a)}}}()}},{name:"Gradient Skies",description:"Skies fade out to black in the heavens above.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){this.MapsHandler.getMap()&&a.events.onSetLocation.call(this,a)},onModDisable:function(){var a=this.MapsHandler.getArea();a.setBackground(a),this.PixelDrawer.setBackground(a.background)},onSetLocation:function(a){return function(){var b,c,d=this.MapsHandler.getArea(),e=d.setting,f=this.canvas.getContext("2d"),g=f.createLinearGradient(0,0,this.MapScreener.width,this.MapScreener.height);for(c in a)if(-1!==e.indexOf(c)){b=a[c];break}b||(b=a["default"]);for(c in b)g.addColorStop(c,b[c]);d.background=g,this.PixelDrawer.setBackground(d.background)}}({Underwater:{".21":"#5CC7FC",1:"#CCCCAA"},Night:{0:"#000000",.49:"#000035",.84:"#280035",1:"#350035"},Underworld:{.35:"#000000",1:"#003528"},Castle:{.21:"#000000",1:"#700000"},Shrooms:{".21":"#9C94EC",".49":"#A7AAEE",1:"#FFCC77"},Womb:{.21:"#703521",".7":"#770014",1:"#AA0035"},"default":{".21":"#5C94FC",".49":"#77AAFF",1:"#FFCCAA"}})},settings:{}},{name:"Hard Mode",description:"Like in Super Mario Bros Deluxe!",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onAddThing:function(a,b){var c;"Goomba"===b.title?(c=b.FSM.killReplace(b,"Beetle",void 0,["direction","moveleft","lookleft","xvel","yvel","speed"]),c.mod="Hard Mode"):"Platform"===b.title&&(b.FSM.reduceWidth(b,8*b.FSM.unitsize,!0),b.FSM.shiftHoriz(b,4*b.FSM.unitsize)),"Character"===b.groupType&&(b.speed*=1.4)},onModEnable:function(){var a,b,c,d=FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),e=d.GroupHolder.getCharacterGroup(),f=d.GroupHolder.getSolidGroup(),g=["direction","moveleft","lookleft","xvel","yvel","speed"];for(c=0;c<e.length;c+=1)b=e[c],"Goomba"===b.title&&(a=b.FSM.killReplace(b,"Beetle",void 0,g),a.mod="Hard Mode",b.xvel>0?a.FSM.flipHoriz(a):a.FSM.unflipHoriz(a)),b.speed*=1.4;for(c=0;c<f.length;c+=1)b=f[c],"Platform"===b.title&&(b.FSM.reduceWidth(b,8*b.FSM.unitsize,!0),b.FSM.shiftHoriz(b,4*b.FSM.unitsize))},onModDisable:function(){var a,b,c=FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),d=c.GroupHolder.getCharacterGroup(),e=c.GroupHolder.getSolidGroup(),f=["direction","moveleft","lookleft","xvel","yvel","speed"];for(b=0;b<d.length;b+=1)a=d[b],"Beetle"===a.title&&"Hard Mode"===a.mod?a.FSM.killReplace(a,"Goomba",void 0,f):a.speed/=1.4;for(b=0;b<e.length;b+=1)a=e[b],"Platform"===a.title&&(a.FSM.increaseWidth(a,8*a.FSM.unitsize),a.FSM.shiftHoriz(a,-4*a.FSM.unitsize))}}},{name:"High Speed",description:"Mario's maximum speed is quadrupled.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){var b,c=this.ObjectMaker.getFunction("Player").prototype,d=a.settings.keyNames,e=a.settings.multiplier;for(b=0;b<d.length;b+=1)a.settings[d[b]]=c[d[b]],c[d[b]]*=e},onModDisable:function(a){var b,c=this.ObjectMaker.getFunction("Player").prototype,d=a.settings.keyNames;for(b=0;b<d.length;b+=1)c[d[b]]=a.settings[d[b]]}},settings:{keyNames:["maxspeedsave","maxspeed","scrollspeed"],multiplier:14}},{name:"Infinite Lives",description:"Mario never really dies.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){var b=FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),c=b.ObjectMaker.getFunction("Area").prototype,d=b.settings.statistics.values.lives;a.settings.onPlayerDeathOld=c.onPlayerDeath,c.onPlayerDeath=b.mapEntranceRespawn,a.settings.livesOld=b.StatsHolder.getItem("lives"),a.settings.statsOld=d,d.valueDefault=1/0,b.StatsHolder.setItem("lives",1/0)},onModDisable:function(a){var b=FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),c=b.ObjectMaker.getFunction("Area").prototype,d=b.settings.statistics.values.lives;c.onPlayerDeath=a.settings.onPlayerDeathOld,d.valueDefault=a.settings.statsOld.valueDefault,b.StatsHolder.setItem("lives",a.settings.livesOld)}},settings:{onPlayerDeathOld:void 0,statsOld:void 0,livesOld:void 0}},{name:"Invincibility",description:"Mario is constantly given star power.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.player&&this.playerStarUp(this.player,1/0)},onModDisable:function(){this.player&&this.playerStarDown(this.player)},onSetLocation:function(){this.player&&this.playerStarUp(this.player,1/0)},onPlayerRespawn:function(){this.player&&this.playerStarUp(this.player,1/0)}}},{name:"Parallax Clouds",description:"Clouds in the sky scroll at about 63% the normal rate.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.ObjectMaker.getFunction("Cloud").prototype.parallaxHoriz=.7},onModDisable:function(){this.ObjectMaker.getFunction("Cloud").prototype.parallaxHoriz=void 0}}},{name:"Low Gravity",description:"I believe I can fly!",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.ObjectMaker.getFunction("Player").prototype.gravity=this.ObjectMaker.getFunction("Area").prototype.gravity/1.4},onModDisable:function(){this.ObjectMaker.getFunction("Player").prototype.gravity=this.ObjectMaker.getFunction("Area").prototype.gravity}}},{name:"Luigi",description:"The little brother who could!",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.StatsHolder.setItem("luigi",!0),this.ObjectMaker.getFunction("Player").prototype.title="Luigi",this.player&&(this.player.title="Luigi",this.PixelDrawer.setThingSprite(this.player),this.ThingHitter.cacheHitCheckType(this.player.title,this.player.groupType))},onModDisable:function(){this.StatsHolder.setItem("luigi",!1),this.ObjectMaker.getFunction("Player").prototype.title="Player",this.player&&(this.player.title="Player",this.PixelDrawer.setThingSprite(this.player))}}},{name:"Tilt Gravity",description:"Tilting your device pushes characters around",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onDeviceMotion:function(a,b){var c,d,e=this.GroupHolder.getCharacterGroup(),f=b.accelerationIncludingGravity,g=-f.x*this.unitsize,h=f.y;for(d=0;d<e.length;d+=1)c=e[d],c.player||c.grounded||this.shiftHoriz(c,g);if("undefined"!=typeof a.settings.y&&(g=(h-a.settings.y)*this.unitsize*2,g>0))for(d=0;d<e.length;d+=1)c=e[d],c.grounded||(this.shiftVert(c,-g),c.yvel=-g,c.resting=void 0);a.settings.y=h}},settings:{y:void 0}},{name:"Palette Swap",description:"Swaps the color palette around randomly for each area.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){a.settings.paletteDefaultOld=this.settings.sprites.paletteDefault,this.MapsHandler.getMapName()&&a.events.onPreSetLocation.call(this,a)},onModDisable:function(a){this.settings.sprites.paletteDefault=a.settings.paletteDefaultOld,a.resetVisuals(this),a.resetThingSprites(this)},onPreSetLocation:function(a){this.settings.sprites.paletteDefault=a.shufflePalette(Array.prototype.slice.call(a.settings.paletteDefaultOld)),a.resetVisuals(this),a.resetThingSprites(this)}},settings:{paletteOld:void 0},resetVisuals:function(a){a.resetPixelRender(a,a.customs),a.resetPixelDrawer(a,a.customs),a.PixelDrawer.setCanvas(a.canvas),a.PixelDrawer.setThingArrays([a.GroupHolder.getSceneryGroup(),a.GroupHolder.getSolidGroup(),a.GroupHolder.getCharacterGroup(),a.GroupHolder.getTextGroup()]),a.PixelDrawer.setBackground(a.MapsHandler.getArea().background)},resetThingSprites:function(a){a.GroupHolder.callOnAll(void 0,function(a){a.numSprites=void 0})},shufflePalette:function(a){var b,c,d;for(b=0;b<a.length-1;b+=1)c=Math.floor(Math.random()*b),d=a[b+1],a[b+1]=a[c+1],a[c+1]=d;return a}},{name:"QCount",description:"QQQQQQQ",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(a){var b=FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),c=a.settings.characters,d=b.GroupHolder.getCharacterGroup();b.InputWriter.addEvent("onkeydown","q",function(){if(a.settings.qcount+=1,a.settings.levels[a.settings.qcount]){var e=a.settings.levels[a.settings.qcount];a.settings.events.push(b.TimeHandler.addEventInterval(function(){if(d.length<210){var a=Math.floor(Math.random()*e.length),f=b.ObjectMaker.make.apply(b.ObjectMaker,e[a]);f.yvel=Math.random()*b.unitsize/4,f.xvel=f.speed=Math.random()*b.unitsize*2,Math.floor(2*Math.random())&&(f.xvel*=-1),c.push(f),b.addThing(f,(32*Math.random()+128)*b.unitsize,88*Math.random()*b.unitsize)}},7,1/0))}}),b.InputWriter.addAliasValues("q",[81])},onModDisable:function(a){a.settings.qcount=0,a.settings.events.forEach(this.TimeHandler.cancelEvent),a.settings.events.length=0,this.InputWriter.removeEvent("onkeydown",81,void 0),this.InputWriter.removeEvent("onkeydown","q",void 0)},onSetLocation:function(a){a.settings.qcount=0}},settings:{qcount:0,characters:[],events:[],levels:{7:[["Goomba"]],14:[["Koopa"],["Koopa",{smart:!0}],["Koopa",{jumping:!0}],["Koopa",{smart:!0,jumping:!0}],["Beetle"],["HammerBro"],["Lakitu"],["Blooper"]],21:[["Bowser"]]}}},{name:"Super Fireballs",description:"Fireballs blow up solids, and Mario has unlimited.",author:{name:"Josh Goldberg",email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.ObjectMaker.getFunction("solid").prototype.nofire=0,this.ObjectMaker.getFunction("solid").prototype.firedeath=1},onModDisable:function(){this.ObjectMaker.getFunction("solid").prototype.nofire=2,this.ObjectMaker.getFunction("solid").prototype.firedeath=0}}},{name:"Trip of Acid",description:"Sprites aren't cleared from the screen each game tick.",author:{name:"Josh Goldberg",
email:"josh@fullscreenmario.com"},enabled:!1,events:{onModEnable:function(){this.TimeHandler.addEvent(function(){this.PixelDrawer.setNoRefill(!0)}.bind(this),3)},onSetLocation:function(){this.PixelDrawer.setNoRefill(!1),this.TimeHandler.addEvent(function(){this.PixelDrawer.setNoRefill(!0)}.bind(this),3)},onModDisable:function(){this.PixelDrawer.setNoRefill(!1)}}}]},FullScreenMario.FullScreenMario.settings.objects={onMake:"onMake",indexMap:["width","height"],doPropertiesFull:!0,inheritance:{Quadrant:{},Map:{},Area:{},Location:{},Thing:{character:{Player:{},enemy:{Goomba:{},Koopa:{},Beetle:{},Piranha:{},Blooper:{},CheepCheep:{},Podoboo:{},BulletBill:{},Lakitu:{},SpinyEgg:{},Spiny:{},HammerBro:{Bowser:{}},Hammer:{},BowserFire:{}},item:{Mushroom:{Mushroom1Up:{},MushroomDeathly:{}},FireFlower:{},Fireball:{CastleFireball:{}},Star:{},Shell:{BeetleShell:{}},Vine:{}},BrickShard:{},Bubble:{},Coin:{},Firework:{}},solid:{Block:{},BridgeBase:{},Brick:{},DeadGoomba:{},Pipe:{},PipeHorizontal:{},PipeVertical:{},Platform:{},Stone:{RestingStone:{}},Cannon:{},Springboard:{},Floor:{},TreeTop:{},ShroomTop:{},CastleAxe:{},CastleBlock:{},CastleBridge:{},CastleChain:{},Coral:{},WaterBlocker:{},detector:{DetectCollision:{ScrollEnabler:{}},DetectWindow:{ScrollBlocker:{},RandomSpawner:{}},DetectSpawn:{}}},scenery:{Blank:{},BrickHalf:{},BrickPlain:{},Bush1:{},Bush2:{},Bush3:{},CastleDoor:{},CastleFlag:{},CastleRailing:{},CastleRailingFilled:{},CastleTop:{},CastleWall:{},Cloud:{Cloud1:{},Cloud2:{},Cloud3:{}},Fence:{},Flag:{},FlagPole:{},FlagTop:{},HillSmall:{},HillLarge:{},Peach:{},PlatformString:{},PlantSmall:{},PlantLarge:{},Railing:{},ShroomTrunk:{},String:{},StringCornerLeft:{},StringCornerRight:{},Toad:{},TreeTrunk:{},Water:{}},Text:{DecorativeBack:{},DecorativeDot:{},TextA:{},TextB:{},TextC:{},TextD:{},TextE:{},TextF:{},TextG:{},TextH:{},TextI:{},TextJ:{},TextK:{},TextL:{},TextM:{},TextN:{},TextO:{},TextP:{},TextQ:{},TextR:{},TextS:{},TextT:{},TextU:{},TextV:{},TextW:{},TextX:{},TextY:{},TextZ:{},Text0:{},Text1:{},Text2:{},Text3:{},Text4:{},Text5:{},Text6:{},Text7:{},Text8:{},Text9:{},TextSpace:{},TextSlash:{},TextCharacters:{TextPeriod:{},TextExclamationMark:{},TextColon:{}},TextColored:{TextColoredD:{},TextColoredE:{},TextColoredI:{},TextColoredN:{},TextColoredO:{},TextColoredT:{},TextColored1:{},TextColored5:{},TextColored8:{},TextColored9:{},TextColoredSpace:{},TextColoredCopyright:{}},TextLarge:{TextLargeE:{},TextLargeP:{},TextLargeR:{},TextLargeS:{},TextLargeU:{}},TextHuge:{TextHugeA:{},TextHugeB:{},TextHugeI:{},TextHugeM:{},TextHugeO:{},TextHugeR:{},TextHugeS:{},TextHugeSpace:{},TextHugePeriod:{}},ScoreText:{Text100:{},Text200:{},Text400:{},Text500:{},Text800:{},Text1000:{},Text2000:{},Text4000:{},Text5000:{},Text8000:{},Text1Up:{}},CustomText:{}}}},properties:{Quadrant:{tolx:0,toly:0},Map:{initialized:!1,time:400},Area:{onMake:FullScreenMario.FullScreenMario.prototype.initializeArea,setBackground:FullScreenMario.FullScreenMario.prototype.setAreaBackground,floor:104,jumpmod:1.056,maxyvel:2*FullScreenMario.FullScreenMario.unitsize,maxyvelinv:-3.5*FullScreenMario.FullScreenMario.unitsize,onPlayerDeathTimeout:280,onGameOverTimeout:280,gravity:FullScreenMario.FullScreenMario.gravity,canscroll:!0,underwater:!1,notime:!1,nokeys:!1,onPlayerDeath:FullScreenMario.FullScreenMario.prototype.setMap,onGameOver:FullScreenMario.FullScreenMario.prototype.gameOver,attributes:{underwater:{gravity:FullScreenMario.FullScreenMario.gravity/2.8,stretches:[{thing:"WaterBlocker",y:104,height:16},{thing:"Water",y:88}]},blockBoundaries:{afters:[{thing:"ScrollBlocker",noBoundaryStretch:!0}]},random:{onPlayerDeath:FullScreenMario.FullScreenMario.prototype.mapEntranceRespawn,onPlayerDeathTimeout:140}}},Location:{area:0,entry:"Normal"},Thing:{width:8,height:8,tolx:0,toly:FullScreenMario.FullScreenMario.unitsize/8,xvel:0,yvel:0,speed:0,scoreStomp:100,scoreFire:200,scoreStar:200,scoreBelow:100,alive:!0,placed:!1,maxquads:4,outerok:!1,sprite:"",spriteType:"neither",opacity:1,scale:1,animate:FullScreenMario.FullScreenMario.prototype.animateEmerge,onMake:FullScreenMario.FullScreenMario.prototype.thingProcess,death:FullScreenMario.FullScreenMario.prototype.killNormal,collide:void 0,movement:void 0},character:{groupType:"Character",character:!0,lookleft:!0,moveleft:!0,firedeath:!0,movement:FullScreenMario.FullScreenMario.prototype.moveSimple},Player:{player:!0,canjump:!0,nofire:!0,nokillend:!0,checkOverlaps:!0,power:1,numballs:0,moveleft:0,skidding:0,star:0,dying:0,nofall:0,maxvel:0,paddling:0,jumpers:0,landing:0,tolx:2*FullScreenMario.FullScreenMario.unitsize,toly:0,walkspeed:FullScreenMario.FullScreenMario.unitsize/2,maxspeed:1.35*FullScreenMario.FullScreenMario.unitsize,maxspeedsave:1.35*FullScreenMario.FullScreenMario.unitsize,scrollspeed:1.75*FullScreenMario.FullScreenMario.unitsize,running:"",fire:FullScreenMario.FullScreenMario.prototype.animatePlayerFire,movement:FullScreenMario.FullScreenMario.prototype.movePlayer,death:FullScreenMario.FullScreenMario.prototype.killPlayer,onResting:FullScreenMario.FullScreenMario.prototype.animatePlayerLanding,onRestingOff:FullScreenMario.FullScreenMario.prototype.animatePlayerRestingOff,type:"character",name:"player normal small still",getKeys:function(){return{run:0,crouch:0,jump:0,jumplev:0,sprint:0}}},enemy:{type:"enemy",speed:.21*FullScreenMario.FullScreenMario.unitsize,collide:FullScreenMario.FullScreenMario.prototype.collideEnemy,death:FullScreenMario.FullScreenMario.prototype.killFlip},Goomba:{scoreFire:100,scoreStar:100,spawnType:"DeadGoomba",toly:FullScreenMario.FullScreenMario.unitsize,death:FullScreenMario.FullScreenMario.prototype.killGoomba,spriteCycleSynched:[[FullScreenMario.FullScreenMario.prototype.unflipHoriz,FullScreenMario.FullScreenMario.prototype.flipHoriz]]},Koopa:{height:12,shellspawn:!0,spawnType:"Shell",shelltype:"Shell",toly:2*FullScreenMario.FullScreenMario.unitsize,death:FullScreenMario.FullScreenMario.prototype.killKoopa,spriteCycle:[["one","two"]],attributes:{smart:{movement:FullScreenMario.FullScreenMario.prototype.moveSmart,spawnSettings:{smart:!0}},jumping:{movement:FullScreenMario.FullScreenMario.prototype.moveJumping,jumpheight:1.17*FullScreenMario.FullScreenMario.unitsize,gravity:FullScreenMario.FullScreenMario.gravity/2.8,scoreStomp:400},floating:{onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnMoveFloating,movement:FullScreenMario.FullScreenMario.prototype.moveFloating,nofall:!0,yvel:FullScreenMario.FullScreenMario.unitsize/8,maxvel:FullScreenMario.FullScreenMario.unitsize/4,scoreStomp:400}}},Beetle:{speed:.21*FullScreenMario.FullScreenMario.unitsize,xvel:.21*FullScreenMario.FullScreenMario.unitsize,height:8,nofire:2,shellspawn:!0,movement:FullScreenMario.FullScreenMario.prototype.moveSmart,death:FullScreenMario.FullScreenMario.prototype.killToShell,spawnType:"BeetleShell",shelltype:"BeetleShell",spriteCycle:[["one","two"]]},Piranha:{height:12,toly:8*FullScreenMario.FullScreenMario.unitsize,countermax:49,deadly:!0,grounded:!0,death:FullScreenMario.FullScreenMario.prototype.killNormal,movement:FullScreenMario.FullScreenMario.prototype.movePiranha,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnPiranha,spriteCycleSynched:[["one","two"]]},Blooper:{height:12,nofall:!0,nocollidesolid:!0,speed:FullScreenMario.FullScreenMario.unitsize/2,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnBlooper,movement:FullScreenMario.FullScreenMario.prototype.moveBlooper,death:FullScreenMario.FullScreenMario.prototype.killFlip},CheepCheep:{nofall:!0,nocollidesolid:!0,nocollidechar:!0,movement:FullScreenMario.FullScreenMario.prototype.moveCheepCheep,xvel:FullScreenMario.FullScreenMario.unitsize/-6,yvel:FullScreenMario.FullScreenMario.unitsize/-32,death:FullScreenMario.FullScreenMario.prototype.killFlip,spriteCycleSynched:[["one","two"]],attributes:{red:{xvel:FullScreenMario.FullScreenMario.unitsize/-4,yvel:FullScreenMario.FullScreenMario.unitsize/-24},flying:{movement:FullScreenMario.FullScreenMario.prototype.moveCheepCheepFlying,gravity:FullScreenMario.FullScreenMario.gravity/3.5}}},Podoboo:{width:7,speed:1.75*FullScreenMario.FullScreenMario.unitsize,acceleration:FullScreenMario.FullScreenMario.unitsize/24,jumpHeight:28,frequency:245,deadly:!0,nofall:!0,nofire:!0,nocollidechar:!0,nocollidesolid:!0,grounded:!0,movement:void 0,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnPodoboo},BulletBill:{height:7,nofall:!0,nofire:!0,nocollidechar:!0,nocollidesolid:!0,grounded:!0,movement:void 0,xvel:FullScreenMario.FullScreenMario.unitsize/2},Lakitu:{height:12,nofall:!0,noshiftx:!0,nocollidesolid:!0,grounded:!0,death:FullScreenMario.FullScreenMario.prototype.killLakitu,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnLakitu,movement:FullScreenMario.FullScreenMario.prototype.moveLakituInitial},SpinyEgg:{width:7,deadly:!0,movement:void 0,onResting:FullScreenMario.FullScreenMario.prototype.animateSpinyEggHatching,spawnType:"Spiny",spriteCycleSynched:[["one","two"]]},Spiny:{deadly:!0,moveleft:!0,spriteCycle:[["one","two"]]},HammerBro:{height:12,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnHammerBro,movement:FullScreenMario.FullScreenMario.prototype.moveHammerBro,spriteCycle:[["one","two"]]},Bowser:{width:16,height:16,speed:.14*FullScreenMario.FullScreenMario.unitsize,gravity:FullScreenMario.FullScreenMario.gravity/2.8,jumpTimes:[117],fireTimes:[280,350,490],throwAmount:7,throwDelay:84,throwPeriod:210,throwBetween:11,deadly:!0,noflip:!0,nofiredeath:!0,nokillend:!0,outerok:!0,spawnType:"Goomba",movement:FullScreenMario.FullScreenMario.prototype.moveBowser,killonend:FullScreenMario.FullScreenMario.prototype.animateBowserFreeze,death:FullScreenMario.FullScreenMario.prototype.killBowser,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnBowser,spriteCycle:[["one","two"]]},Hammer:{movement:void 0,nocollidesolid:!0,nocollidechar:!0,deadly:!0,nofire:!0,spriteCycle:[["one","two","three","four"],3]},BowserFire:{width:12,height:4,nocollidesolid:!0,nocollidechar:!0,nofall:!0,deadly:!0,nofire:!0,movement:FullScreenMario.FullScreenMario.prototype.moveBowserFire,xvel:FullScreenMario.FullScreenMario.unitsize*-.63,spriteCycle:[[FullScreenMario.FullScreenMario.prototype.flipVert,FullScreenMario.FullScreenMario.prototype.unflipVert]]},item:{group:"item",collide:FullScreenMario.FullScreenMario.prototype.collideFriendly,onCollideUp:FullScreenMario.FullScreenMario.prototype.collideUpItem,jump:FullScreenMario.FullScreenMario.prototype.itemJump,nofire:!0},Mushroom:{action:FullScreenMario.FullScreenMario.prototype.playerShroom,speed:.42*FullScreenMario.FullScreenMario.unitsize},Mushroom1Up:{action:FullScreenMario.FullScreenMario.prototype.playerShroom1Up},MushroomDeathly:{action:FullScreenMario.FullScreenMario.prototype.killPlayer},FireFlower:{action:FullScreenMario.FullScreenMario.prototype.playerShroom,spriteCycle:[["one","two","three","four"]]},Fireball:{width:4,height:4,nofire:!0,nostar:!0,collidePrimary:!0,grounded:!0,animate:FullScreenMario.FullScreenMario.prototype.animateFireballEmerge,collide:FullScreenMario.FullScreenMario.prototype.collideFireball,death:FullScreenMario.FullScreenMario.prototype.animateFireballExplode,spriteCycleSynched:[["one","two","three","four"],"spinning",4]},CastleFireball:{deadly:!0,nocollidesolid:!0,nocollidechar:!0,nofall:!0,outerok:!0,collide:FullScreenMario.FullScreenMario.prototype.collideCastleFireball},Firework:{nocollide:!0,nofall:!0,animate:FullScreenMario.FullScreenMario.prototype.animateFirework},Star:{name:"star item",width:7,grounded:!0,speed:.56*FullScreenMario.FullScreenMario.unitsize,action:FullScreenMario.FullScreenMario.prototype.collideStar,movement:FullScreenMario.FullScreenMario.prototype.moveJumping,jumpheight:1.17*FullScreenMario.FullScreenMario.unitsize,gravity:FullScreenMario.FullScreenMario.gravity/2.8,spriteCycle:[["one","two","three","four"],0,7]},Shell:{height:7,speed:2*FullScreenMario.FullScreenMario.unitsize,collidePrimary:!0,nofire:!1,moveleft:0,xvel:0,move:0,shell:!0,hitcount:0,peeking:0,counting:0,landing:0,enemyhitcount:0,movement:FullScreenMario.FullScreenMario.prototype.moveShell,collide:FullScreenMario.FullScreenMario.prototype.collideShell,death:FullScreenMario.FullScreenMario.prototype.killFlip,spawnType:"Koopa",attributes:{smart:{}}},BeetleShell:{height:8,nofire:2,spawnType:"Beetle"},Vine:{width:7,nofall:!0,nocollide:!0,nocollidesolid:!0,grounded:!0,speed:FullScreenMario.FullScreenMario.unitsize/4,movement:FullScreenMario.FullScreenMario.prototype.moveVine,collide:FullScreenMario.FullScreenMario.prototype.collideVine,animate:FullScreenMario.FullScreenMario.prototype.animateEmergeVine},BrickShard:{width:4,height:4,nocollide:!0,grounded:!0,movement:void 0,spriteCycle:[[FullScreenMario.FullScreenMario.prototype.unflipHoriz,FullScreenMario.FullScreenMario.prototype.flipHoriz]]},Bubble:{width:2,height:2,nocollide:!0,nofall:!0,movement:FullScreenMario.FullScreenMario.prototype.moveBubble,yvel:FullScreenMario.FullScreenMario.unitsize/-4},Coin:{width:5,spritewidth:5,height:7,nofall:!0,nocollidechar:!0,nocollidesolid:!0,allowUpSolids:!0,animate:FullScreenMario.FullScreenMario.prototype.animateEmergeCoin,onCollideUp:FullScreenMario.FullScreenMario.prototype.collideUpCoin,collide:FullScreenMario.FullScreenMario.prototype.collideCoin,spriteCycleSynched:[["one","two","three","two","one"]]},solid:{type:"solid",groupType:"Solid",spritewidth:8,spriteheight:8,repeat:!0,solid:!0,nocollidesolid:!0,firedeath:0,nofire:2,collide:FullScreenMario.FullScreenMario.prototype.collideCharacterSolid},Brick:{breakable:!0,bottomBump:FullScreenMario.FullScreenMario.prototype.collideBottomBrick},Block:{unused:!0,contents:"Coin",bottomBump:FullScreenMario.FullScreenMario.prototype.collideBottomBlock,spriteCycleSynched:[["one","two","three","two","one"]]},BridgeBase:{height:4,spritewidth:4},DeadGoomba:{height:4,nocollide:!0,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnDeadGoomba},Pipe:{width:16,spritewidth:16,actionTop:FullScreenMario.FullScreenMario.prototype.mapExitPipeVertical},PipeHorizontal:{height:16,spriteheight:16,width:19.5,spritewidth:19.5,actionLeft:FullScreenMario.FullScreenMario.prototype.mapExitPipeHorizontal,attributes:{width:8,spritewidth:8}},PipeVertical:{position:"beginning",width:16,spritewidth:16},Platform:{height:4,spritewidth:4,fallThresholdStart:2.8*FullScreenMario.FullScreenMario.unitsize,fallThresholdEnd:2*FullScreenMario.FullScreenMario.unitsize,acceleration:FullScreenMario.FullScreenMario.unitsize/16,repeat:!0,killonend:!1,maxvel:FullScreenMario.FullScreenMario.unitsize/4*1.5,attributes:{floating:{onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnMoveFloating,movement:FullScreenMario.FullScreenMario.prototype.moveFloating,yvel:FullScreenMario.FullScreenMario.unitsize/4*1.5},sliding:{onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnMoveSliding,movement:FullScreenMario.FullScreenMario.prototype.moveSliding,xvel:FullScreenMario.FullScreenMario.unitsize/4*1.5},transport:{movement:void 0,collide:FullScreenMario.FullScreenMario.prototype.collideTransport},falling:{movement:FullScreenMario.FullScreenMario.prototype.moveFalling},inScale:{movement:FullScreenMario.FullScreenMario.prototype.movePlatformScale}}},RestingStone:{opacity:.01,onRestedUpon:FullScreenMario.FullScreenMario.prototype.activateRestingStone},Cannon:{frequency:280,spriteheight:16,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnCannon},Springboard:{height:14.5,heightNormal:14.5,spriteheight:10,collide:FullScreenMario.FullScreenMario.prototype.collideSpringboard},CastleAxe:{collide:FullScreenMario.FullScreenMario.prototype.collideCastleAxe},CastleBlock:{onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnCastleBlock,attributes:{fireballs:{speed:1}}},CastleBridge:{height:16,spriteheight:16,spritewidth:4,killonend:FullScreenMario.FullScreenMario.prototype.animateCastleBridgeOpen},CastleChain:{width:7.5,spritewidth:7.5,height:8,nocollide:!0,killonend:FullScreenMario.FullScreenMario.prototype.animateCastleChainOpen},Floor:{nofire:!0},WaterBlocker:{hidden:!0,collide:FullScreenMario.FullScreenMario.prototype.collideWaterBlocker},detector:{hidden:!0,collideHidden:!0},DetectCollision:{collide:FullScreenMario.FullScreenMario.prototype.collideDetector},ScrollEnabler:{activate:FullScreenMario.FullScreenMario.prototype.activateScrollEnabler},DetectWindow:{movement:FullScreenMario.FullScreenMario.prototype.activateWindowDetector},RandomSpawner:{activate:FullScreenMario.FullScreenMario.prototype.spawnRandomSpawner},ScrollBlocker:{onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnScrollBlocker,activate:FullScreenMario.FullScreenMario.prototype.activateScrollBlocker},DetectSpawn:{movement:FullScreenMario.FullScreenMario.prototype.spawnDetector},scenery:{groupType:"Scenery",repeat:!0,nocollide:!0,noBoundaryStretch:!0},BrickHalf:[8,4],BrickPlain:[8,8],Bush1:[16,8],Bush2:[24,8],Bush3:[32,8],CastleDoor:[8,20],CastleFlag:[6.5,10],CastleRailing:[8,4],CastleRailingFilled:[8,4],CastleTop:[12,12],CastleWall:[8,48],Cloud1:[16,12],Cloud2:[24,12],Cloud3:[32,12],Flag:[8,8],FlagPole:[1,72],FlagTop:[4,4],Fence:[8,8],HillSmall:[24,9.5],HillLarge:[40,17.5],Peach:[8,13],PlatformString:[1,1],PlantSmall:[7,15],PlantLarge:[8,23],Railing:[4,4],ShroomTrunk:[8,8],String:[1,1],StringCornerLeft:[5,5],StringCornerRight:[5,5],Toad:[8,13],TreeTrunk:[4,4],Water:{width:4,height:5},Text:{width:3.5,height:3.5,groupType:"Text",size:""},DecorativeBack:{width:88,height:44,spritewidth:.5,spriteheight:.5},DecorativeDot:{width:1.5,height:1.5},TextSpace:{hidden:!0},TextColored1:[3,3.5],TextColoredSpace:{hidden:!0},TextColoredCopyright:[4,4],TextLarge:{width:7.5,height:14,size:"Large"},TextHuge:{width:7.5,height:22},TextHugeI:{width:3.5},TextHugeM:{width:11.5},TextHugeSpace:{width:3.5,hidden:!0},TextHugePeriod:{width:3.5},ScoreText:{groupType:"Text"},TextCharacters:[2.5,4],TextCharagersHuge:[1,1],Text100:[6,4],Text200:[6,4],Text400:[6,4],Text500:[6,4],Text800:[6,4],Text1000:[8,4],Text2000:[8,4],Text4000:[8,4],Text5000:[8,4],Text8000:[8,4],Text1Up:[8,4],CustomText:{hidden:!0,spacingHorizontal:.5,spacingVertical:8,spacingVerticalBlank:6,onThingAdded:FullScreenMario.FullScreenMario.prototype.spawnCustomText}}},FullScreenMario.FullScreenMario.settings.quadrants={numRows:5,numCols:6,tolerance:FullScreenMario.FullScreenMario.unitsize/2,groupNames:["Solid","Character","Scenery","Text"],keyGroupName:"groupType"},FullScreenMario.FullScreenMario.settings.renderer={groupNames:["Text","Character","Solid","Scenery"],spriteCacheCutoff:2048},FullScreenMario.FullScreenMario.settings.runner={games:[function(){this.QuadsKeeper.determineAllQuadrants("Scenery",this.GroupHolder.getSceneryGroup()),this.QuadsKeeper.determineAllQuadrants("Text",this.GroupHolder.getTextGroup())},function(){this.maintainSolids(this,this.GroupHolder.getSolidGroup())},function(){this.maintainCharacters(this,this.GroupHolder.getCharacterGroup())},function(){this.maintainPlayer(this,this.player)},function(){this.TimeHandler.handleEvents()},function(){this.PixelDrawer.refillGlobalCanvas(this.MapsHandler.getArea().background)}]},FullScreenMario.FullScreenMario.settings.sprites={spriteWidth:"spritewidthpixels",spriteHeight:"spriteheightpixels",flipVert:"flip-vert",flipHoriz:"flipped",paletteDefault:[[0,0,0,0],[255,255,255,255],[0,0,0,255],[188,188,188,255],[116,116,116,255],[252,216,168,255],[252,152,56,255],[252,116,180,255],[216,40,0,255],[200,76,12,255],[136,112,0,255],[124,7,0,255],[168,250,188,255],[128,208,16,255],[0,168,0,255],[24,60,92,255],[0,128,136,255],[32,56,236,255],[156,252,240,255],[60,188,252,255],[92,148,252,255],[0,130,0,255],[252,188,176,255]],filters:{Underworld:["palette",{"05":"18","09":"16"}],UnderworldKoopa:["palette",{"06":"09",14:"16"}],Castle:["palette",{"02":"04","05":"01","09":"03"}],Alt:["palette",{11:"01"}],Alt2:["palette",{"02":"04","05":"01","09":"03",13:"01",19:"08"}],StarOne:["palette",{}],StarTwo:["palette",{"06":"02","08":"05",10:"09"}],StarThree:["palette",{"06":"01","08":"06",10:"08"}],StarFour:["palette",{"06":"01","08":"06",10:"14"}],Smart:["palette",{14:"08"}]},library:{Character:{Beetle:{normal:{normal:"p[0,2,5,8]x022,1111x010,x18,x07,x110,x05,x17,33111000x18,32311000x19,3311003333x111,001133x110,001113x110,011213x110,011113x110,011113x110,0011233x15,x35,00222331133322200222203333002222",two:"p[0,2,5,8]x07,111x010,x18,x07,x110,x05,x17,33111000x18,32311000x19,3311003333x111,001133x110,001113x110,011213x110,011113x110,011113x110,0011233x15,x35,00022331133322x05,22233330222x06,22x05,22000"},Underworld:{normal:"p[0,15,16,18]x022,1111x010,x18,x07,x110,x05,x17,22111000x18,23211000x19,2211002222x111,001122x110,001112x110,011312x110,011112x110,011112x110,0011322x15,x25,00333221122233300333302222003333",two:"p[0,15,16,18]x07,111x010,x18,x07,x110,x05,x17,22111000x18,23211000x19,2211002222x111,001122x110,001112x110,011312x110,011112x110,011112x110,0011322x15,x25,00033221122233x05,33322220333x06,33x05,33000"},Castle:{normal:"p[0,1,3,4]x022,3333x010,x38,x07,x310,x05,x37,22333000x38,21233000x39,2233002222x311,003322x310,003332x310,033132x310,033332x310,033332x310,0033122x35,x25,00111223322211100111102222001111",two:"p[0,1,3,4]x07,333x010,x38,x07,x310,x05,x37,22333000x38,21233000x39,2233002222x311,003322x310,003332x310,033132x310,033332x310,033332x310,0033122x35,x25,00011223322211x05,11122220111x06,11x05,11000"}},BeetleShell:{normal:"p[0,2,5,8]x06,1111x010,x18,x07,1111331111x05,1111322311110000x15,33x15,0000x112,000x114,00x114,00x114,00x114,00x114,00x114,00x114,0x35,x16,x35,000033311333x010,3333x06,",Underworld:"p[0,15,16,18]x06,1111x010,x18,x07,1111221111x05,1111233211110000x15,22x15,0000x112,000x114,00x114,00x114,00x114,00x114,00x114,00x114,0x25,x16,x25,000022211222x010,2222x06,",Castle:"p[0,1,3,4]x06,3333x010,x38,x07,3333223333x05,3333211233330000x35,22x35,0000x312,000x314,00x314,00x314,00x314,00x314,00x314,0x25,x36,x25,000022233222x010,2222x06,"},Blooper:{normal:{normal:"p[0,2,5,9]x06,2332x011,232232x09,23222232x07,2232222322x05,223x26,3220002223x26,322202223x28,32220003x28,3x06,x210,x06,2x18,2x06,1221111221x06,2112112112x06,2112112112x05,212211112212000022332222332200003x210,30000220x26,022000032032002302300002202200220220000320320023023x05,2022002202x06,2032002302x06,2002002002x09,2002x06,",squeeze:"p[0,2,5,9]x06,2332x011,232232x09,23222232x07,2232222322x05,223x26,3220002223x26,322202223x28,32220003x28,3x06,2x18,200003x25,11x25,30x216,32223x26,322232222022002202222032203200230223000222020020222x05,2202002022000"},Underwater:{normal:"p[0,1,2,3]x06,1331x011,131131x09,13111131x07,1131111311x05,113x16,3110001113x16,311101113x18,31110003x18,3x06,x110,x06,1x28,1x06,2112222112x06,1221221221x06,1221221221x05,121122221121000011331111331100003x110,30000110x16,011000031031001301300001101100110110000310310013013x05,1011001101x06,1031001301x06,1001001001x09,1001x06,",squeeze:"p[0,1,2,3]x06,1331x011,131131x09,13111131x07,1131111311x05,113x16,3110001113x16,311101113x18,31110003x18,3x06,1x28,100003x15,22x15,30x116,31113x16,311131111011001101111031103100130113000111010010111x05,1101001011000"}},Bowser:{normal:{normal:"p[0,1,6,14]x012,111x025,331112x025,3331122x023,113333223x019,200311x37,x018,2023311x38,x017,2221113332x35,x017,222213332223333x017,122233221323333113331x012,1022223332333311331123x010,10113133123333113111223111x09,10003223331113312233112x013,12233111x39,2231x011,2233111x313,1x09,122233111x36,111x35,x010,220033x16,33112333111x015,33222113322333112x011,222001022211x37,22x010,2210222012231x39,1x09,220022220033133311133321x08,210x26,1331133112333x010,200x25,333311333223311x010,10x25,333311x37,111x011,12220x35,1333311322x017,x35,1133323323x018,x35,111x36,x019,x35,11113333x019,2x36,x17,x017,1122332222x15,x016,111x210,11x021,1122112222x021,1112111x25,0",two:"p[0,1,6,14]x012,111x025,331112x025,3331122x023,113333223x019,200311x37,x018,2023311x38,x017,2221113332x35,x017,222213332223333x017,122233221323333113331x012,1022223332333311331123x010,10113133123333113111223111x09,10003223331113312233112x013,12233111x39,2231x011,2233111x313,1x09,122233111x36,111x35,x010,220033x16,33112333111x015,33222113322333112x011,222001022211x37,22x010,2210222012231x39,1x09,220022220033133311133321x08,210x26,1331133112333x010,200x25,333311333223311x010,10x25,333311x37,111x011,12220x35,1333311322x017,x35,1133323323x018,x35,11x37,x019,x35,11113333x020,x36,x17,x019,22332222x15,x018,2222112211211x018,112211121112222x016,111x27,x06,"},firing:{normal:"p[0,1,6,14]x012,111x025,331112x025,3331122x023,113333223x019,200311x37,x018,2023311x38,x017,2221113332x35,x017,222213332223333x017,112233221323333113331x012,1022223322333311331123x010,101030322x35,113111223111x06,x29,33331113312233112x07,x27,3333111x39,2231x07,x38,111x313,1x010,x35,111x36,111x35,x014,33x16,33112333111x015,33222113322333112x011,222001022211x37,22x010,2210222012231x39,1x09,220022220033133311133321x08,210x26,1331133112333x010,200x25,333311333223311x010,10x25,333311x37,111x011,12220x35,1333311322x017,x35,1133323323x018,x35,111x36,x019,x35,11113333x019,2x36,x17,x017,1122332222x15,x016,111x210,11x021,1122112222x021,1112111x25,0",two:"p[0,1,6,14]x012,111x025,331112x025,3331122x023,113333223x019,200311x37,x018,2023311x38,x017,2221113332x35,x017,222213332223333x017,112233221323333113331x012,1022223322333311331123x010,101030322x35,113111223111x06,x29,33331113312233112x07,x27,3333111x39,2231x07,x38,111x313,1x010,x35,111x36,111x35,x014,33x16,33112333111x015,33222113322333112x011,222001022211x37,22x010,2210222012231x39,1x09,220022220033133311133321x08,210x26,1331133112333x010,200x25,333311333223311x010,10x25,333311x37,111x011,12220x35,1333311322x017,x35,1133323323x018,x35,11x37,x019,x35,11113333x020,x36,x17,x019,22332222x15,x018,2222112211211x018,112211121112222x016,111x27,x06,"}},BowserFire:"p[0,1,6,8]x010,x36,003x010,x316,x06,x35,22332222332222x315,x25,111133x05,3333x213,13000x313,2223333x05,x39,0x36,x09,3300333033003x06,",BrickShard:{normal:"p[0,2,9]0021200002221200212121202212221222212221022212220021212000022200",Underworld:["filter",["Character","BrickShard","normal"],"Underworld"],Castle:["filter",["Character","BrickShard","normal"],"Castle"]},BulletBill:{normal:"p[0,2,5,8]110x17,x06,2201x25,1110000113x16,2111000112x19,2100113x19,22101131133x15,2121113132212111121111313x26,x17,3111x25,x17,31111222x15,0113x111,00113x110,000110x19,0000110x17,x06,",Alt2:["filter",["Character","BulletBill","normal"],"Alt2"]},Bubble:"p[0,1]0110100110010110",CastleFireball:["same",["Character","Fireball"]],CheepCheep:{normal:{normal:"p[0,1,3,6]0003333x013,x35,011x07,x26,11110000121122221111000x16,222111100012121122x15,0001212112211110000x16,221112x05,1211x27,0000333x210,0000233x29,00300233x28,3330023311x26,333033331112222333000x18,20333x05,x15,0000300",two:"p[0,1,3,6]0003333x013,x35,x010,x26,3x07,1211x25,x06,x16,x25,111001212112222x15,0121211222x16,0x16,22x16,0001211222x16,00333x210,0300233x29,33000233x28,3300023311x26,300033331112222330000x18,203x07,x15,x07,"},red:{normal:"p[0,1,6,8]0002222x013,x25,x010,x36,2x07,1311x35,x06,x16,x35,111001313113333x15,0131311333x16,0x16,33x16,0001311333x16,00222x310,0200322x39,22000322x38,2200032211x36,200022221113333220000x18,302x07,x15,x07,",two:"p[0,1,6,8]0002222x013,x25,011x07,x36,11110000131133331111000x16,333111100013131133x15,0001313113311110000x16,331113x05,1311x37,0000222x310,0000322x39,00200322x38,2220032211x36,222022221113333222000x18,30222x05,x15,0000200"},flying:["same",["Character","CheepCheep","red"]]},Coin:{normal:{normal:{normal:"p[0,2,6,8]00222211000x26,11002233221102232212211223221221122322122112232212211223221221122322122112232212211223221221102211221100x26,1100022221100",two:"p[0,2,8]00222211000x26,1100x26,110x25,12211x25,12211x25,12211x25,12211x25,12211x25,12211x25,12211x25,1221102211221100x26,1100022221100",three:"p[0,2,9,11]00333311000x36,11003322331103323313311332331331133233133113323313311332331331133233133113323313311332331331103311331100x36,1100033331100"},Underworld:{normal:"p[0,6,9,16]00111133000x16,33001122113301121131133112113113311211311331121131133112113113311211311331121131133112113113301133113300x16,3300011113300",two:"p[0,9,16]00111122000x16,2200x16,220x15,21122x15,21122x15,21122x15,21122x15,21122x15,21122x15,21122x15,2112201122112200x16,2200011112200",three:"p[0,9,11,16]00222233000x26,33002211223302212232233221223223322122322332212232233221223223322122322332212232233221223223302233223300x26,3300022223300"}},anim:{normal:"p[0,1,7]000012x08,12x07,1112x06,1112x06,1112x06,1112x06,1112x06,1112x06,1112x06,1112x06,1112x06,1112x07,12x08,120000",anim2:"p[0,1,6,7]000022x07,2222x05,x26,000022132200022122322002212232200221223220022122322002212232200221223220002213220000x26,x05,2222x07,220000",anim3:"p[0,1,6,7]000023x08,23x07,2333x06,2333x06,2333x06,2333x06,1333x06,1333x06,2333x06,2333x06,2333x06,2333x07,23x08,230000",anim4:"p[0,1,6]x05,2x09,2x09,2x09,2x09,2x09,2x09,1x09,1x09,2x09,2x09,2x09,2x09,2x09,20000"}},Fireball:{normal:"p[0,1,6,8]0303330000303330300032330033322303322123032212330332233000333300",two:"p[0,1,6,8]x05,3000333000333233030322230033212x36,2122330332233000333300",three:"p[0,1,6,8]0033330003322330332122303212233032233300332300030333030000333030",four:"p[0,1,6,8]0033330003322330332212x36,2123300322230303323330003330003x05,"},FireFlower:{normal:{normal:"p[0,1,6,8,14]0000x18,x06,x112,000111x28,111011222x36,2221111222x36,222110111x28,111000x112,x06,x18,x011,44x07,444000044000044404440004400044400444400440044440004444044044440000444404404444x05,x410,x09,4444x06,",two:"p[0,2,5,9,14]0000x28,x06,x212,000222x38,222022333x16,3332222333x16,333220222x38,222000x212,x06,x28,x011,44x07,444000044000044404440004400044400444400440044440004444044044440000444404404444x05,x410,x09,4444x06,",three:"p[0,6,8,10,14]0000x18,x06,x112,000111x38,111011333x26,3331111333x26,333110111x38,111000x112,x06,x18,x011,44x07,444000044000044404440004400044400444400440044440004444044044440000444404404444x05,x410,x09,4444x06,",four:"p[0,1,6,14]0000x18,x06,x112,000111x28,111011222x36,2221111222x36,222110111x28,111000x112,x06,x18,x011,33x07,333000033000033303330003300033300333300330033330003333033033330000333303303333x05,x310,x09,3333x06,"},Underworld:{normal:"p[0,1,6,8,16]0000x18,x06,x112,000111x28,111011222x36,2221111222x36,222110111x28,111000x112,x06,x18,x011,44x07,444000044000044404440004400044400444400440044440004444044044440000444404404444x05,x410,x09,4444x06,",two:"p[0,15,16,18]0000x38,x06,x312,000333x28,333033222x16,2223333222x16,222330333x28,333000x312,x06,x38,x011,22x07,222000022000022202220002200022200222200220022220002222022022220000222202202222x05,x210,x09,2222x06,",three:"p[0,6,8,10,16]0000x18,x06,x112,000111x38,111011333x26,3331111333x26,333110111x38,111000x112,x06,x18,x011,44x07,444000044000044404440004400044400444400440044440004444044044440000444404404444x05,x410,x09,4444x06,",four:"p[0,5,9,16]0000x18,x06,x112,000111x28,111011222x36,2221111222x36,222110111x28,111000x112,x06,x18,x011,33x07,333000033000033303330003300033300333300330033330003333033033330000333303303333x05,x310,x09,3333x06,"}},Firework:["same",["Solid","Firework"]],Goomba:{normal:"p[0,2,5,9]x06,3333x011,x36,x09,x38,x07,x310,x05,311x36,11300033321333312333003332x16,23330333321233212x38,22233222x320,03333x26,3333x05,x28,x06,11x28,x05,x15,x25,110000x16,222111x05,x15,001110000",Underworld:"p[0,15,16,18]x06,2222x011,x26,x09,x28,x07,x210,x05,211x26,11200022231222213222002223x16,32220222231322313x28,33322333x220,02222x36,2222x05,x38,x06,11x38,x05,x15,x35,110000x16,333111x05,x15,001110000",Castle:["filter",["Character","Goomba","normal"],"Castle"]},Hammer:{normal:{normal:"p[0,2,5,8]x08,2x014,12101x010,111101x09,1122232x09,1211131x08,x16,31x08,10011131x09,x15,01x012,2x015,2x015,2x015,2x015,2x015,2x015,2x015,2x07,",two:"p[0,2,5,8]x073,11x013,10111x011,101211x010,11112110x28,11112122x08,1111211x010,3333x011,1111211x065,",three:"p[0,2,5,8]x07,2x015,2x015,2x015,2x015,2x015,2x015,2x015,2x012,10x15,x09,13111001x08,13x16,x08,1311121x09,2322211x09,101111x010,10121x014,2x08,",four:"p[0,2,5,8]x065,1121111x011,3333x010,1121111x08,22121111x28,01121111x010,112101x011,11101x013,11x073,"
},Castle:["filter",["Character","Hammer","normal"],"Castle"],Alt2:["filter",["Character","Hammer","normal"],"Alt2"]},HammerBro:{normal:{normal:"p[0,1,6,14]003333x011,31x35,x08,31113313x09,31133313x08,311x35,x07,221221233x07,x25,122133x05,x25,12113333x06,21231x36,00022210311133313x06,3322113231x06,3222212331x06,x25,1323130000x25,1133233000x25,1133332200x25,313333233x06,33123323330000223311223333000022233111133x05,222x35,11110000222233x26,x05,222033x25,x06,2200002222x013,222",two:"p[0,1,6,14]003333x011,31x35,x08,31113313x09,31133313x08,311x35,x07,221221233x07,x25,122133x05,x25,1211333300002221231x36,x06,10311133313x06,3322113231x06,3222212331x06,3x25,32313x05,33x25,3233x05,33312222322x06,3313333233x06,3312333233x06,3311223333x07,33111133x08,x35,1111x07,23322233x08,x27,x010,x25,x012,2222000"},throwing:{normal:"p[0,1,6,14]00003333x011,333313x09,3113331x010,31133332x07,231133322x06,x25,12322x06,x25,12222x06,x25,1122233x05,2221x25,333x07,1322223313x06,3322223231x06,33x25,331x06,33322132313x05,33311133233x05,3331x35,22x06,3313333233x06,33123323330000223311223333000022233111133x05,222x35,11110000222233x26,x05,222033x25,x06,2200002222x013,222",two:"p[0,1,6,14]00003333x011,333313x09,3113331x010,31133332x07,231133322x06,x25,12322x06,x25,12222x06,x25,1122233x05,2221x25,333x07,1322223313x06,3322223231x06,33x25,331x06,33322132313x05,33311133233x05,3331x35,22x06,3313333233x06,3312333233x06,3311223333x07,33111133x08,x35,1111x07,23322233x08,x27,x010,x25,x012,2222000"},thrown:{normal:"p[0,1,6,14]003333x011,31x35,x08,31113313x09,31133313x08,311x35,x07,221221233x07,x25,122133x05,x25,12113333x06,21231x36,00022210311133313x06,3322113231x06,3222212331x06,x25,1323130000x25,1133233000x25,1133332200x25,313333233x06,33123323330000223311223333000022233111133x05,222x35,11110000222233x26,x05,222033x25,x06,2200002222x013,222",two:"p[0,1,6,14]003333x011,31x35,x08,31113313x09,31133313x08,311x35,x07,221221233x07,x25,122133x05,x25,12113333x06,21231x36,00022210311133313x06,3322113231x06,3222212331x06,x25,1323130000x25,1133233000x25,113333220022223313333233x06,3312333233x06,3311223333x07,33111133x08,x35,1111x07,23322233x08,x27,x010,x25,x012,2222000"}},Koopa:{normal:{normal:{jumping:{normal:"p[0,1,6,14]x019,1x09,11000111x07,1111001112x05,x15,0231122000x15,0023112200112110002311220012111100211122011211110222122201211110023x25,012111010x26,0012x15,022202203312111002200220331113330220221333232333002022133233323200002212x36,23000221132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000221112331110000x25,x15,22200x25,x06,2222",two:"p[0,1,6,14]00001x014,111x012,2111x012,23112x010,223112x010,223112x010,2211120011100002322122011211000x27,0121111002220022012x15,022000213x17,x05,22133x17,00022133331131110222213332323311002221232333232000021132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000021112331112x05,222x15,222x06,2220000222x07,2220022200"},flying:{normal:"p[0,1,6,14]x019,1x09,11000111x07,1111001112x05,x15,0231122000x15,0023112200112110002311220012111100211122011211110222122201211110023x25,012111010x26,0012x15,022202203312111002200220331113330220221333232333002022133233323200002212x36,23000221132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000221112331110000x25,x15,22200x25,x06,2222",two:"p[0,1,6,14]00001x014,111x012,2111x012,23112x010,223112x010,223112x010,2211120011100002322122011211000x27,0121111002220022012x15,022000213x17,x05,22133x17,00022133331131110222213332323311002221232333232000021132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000021112331112x05,222x15,222x06,2220000222x07,2220022200"},normal:{normal:"p[0,1,6,14]x019,1x014,111x013,1112x011,231122x010,231122x010,231122x010,211122x09,2221222x09,23x25,x09,x26,00x35,0002220220323332300220022033232333022022133332311300202213332323130000221232333232000221132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000221112331110000x25,x15,22200x25,x06,2222",two:"p[0,1,6,14]00001x014,111x012,2111x012,23112x010,223112x010,223112x010,221112x09,2322122x09,x27,x09,22200220x35,00022000213233323x06,2213323233x05,22133332311300222213332323130002221232333232000021132x35,2300002132323332320000212333232333x05,1x35,23333x05,113332323111000021112331112x05,222x15,222x06,2220000222x07,2220022200"}}},smart:["filter",["Character","Koopa","normal","normal"],"Smart"],Underworld:{smart:["same",["Character","Koopa","smart"]],normal:["filter",["Character","Koopa","normal","normal"],"UnderworldKoopa"]},Castle:["same",["Character","Koopa","Underworld"]]},Lakitu:{normal:"p[0,1,6,14]x05,x25,x010,x27,x08,333233322x06,3111311132x06,3x17,323x05,3113131132330000311313113233x05,3332x37,x05,222333322233000x25,33x25,3003x25,11x25,30031222111122213003x112,303x114,33x15,3113x15,33x15,3113x15,33x15,3113x15,33x114,3313x110,3130311131111311130031111333311113003x112,3000311113311113x05,3333003333000",hiding:"p[0,1,6,14]x0131,2220000222x05,x25,33x25,0000x25,11x25,00003222111122230003x112,303x114,33x15,3113x15,33x15,3113x15,33x15,3113x15,33x114,3313x110,3130311131111311130031111333311113003x112,3000311113311113x05,3333003333000"},Player:{dead:"p[0,6,8,10]x05,x25,x07,11x27,1100111131311313x16,3313113133x15,33311113331100x35,113333x05,331333313x06,33x16,3x05,222211112220003332233332233003333223322333003333212212333003333x26,333000333x26,3300",normal:{normal:{jumping:"p[0,6,8,10]x013,111x06,x26,0111x05,x29,11x05,33311311333000031311131133300003133111311130000331111x36,x06,x17,33000x35,2333233000x37,2333220311x36,x26,0311112232212212330113x210,3300333x29,330333x28,x05,330x25,x07,",normal:{normal:"p[0,6,8,10]0000x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x07,3332333x08,333323323330000x35,2222333300011132122123110001111x26,111000111x28,11x05,222202222x06,333300033330000x35,000x35,00",hopping:["same",["Character","Player","normal","normal","normal","running","normal","two"]],running:{skidding:"p[0,6,8,10]x05,x26,x08,x28,33x07,131x37,0000x16,3113111001133113311311100033x16,3111x05,1123332222x05,3332231112220000x36,1113220000x36,112222x05,3333x26,x07,222233322x07,222x35,x09,2333223333x09,2x36,x010,x35,00",normal:{normal:"p[0,6,8,10]x05,x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x05,x35,2233x05,1113333222333x17,3332122233x15,0x28,0330000x210,33000x211,330033322200222233003333x013,3333x010,",two:"p[0,6,8,10]x020,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3323333x08,333322333x07,3332212211x06,3333x26,x06,2331112222x07,23112222x09,2223333x09,x38,0000",three:"p[0,6,8,10]x021,x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x07,x35,2311x06,11x36,11100001112x35,11x05,333x27,x06,33x28,x05,333x27,x06,330003333x012,x35,x05,"}},paddling:{normal:{normal:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,111x06,2x36,11x06,22233332x06,33x27,x07,33x26,x08,332222x010,30033x014,3x027,",paddle1:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,1111x05,2x36,111x05,222333322x05,33x28,x06,33x27,x07,33x25,x09,330333x013,33x026,",paddle2:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3233322x09,2x36,x08,222333311x05,33x25,33111000033x27,111000033x26,00110000330333x013,33x026,",paddle3:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3332333x08,33332333x06,1333322333x05,1113322122x07,33x27,x07,33x25,x09,330333x013,33x026,"},swim2:{normal:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,111x06,2x36,11x06,22233332x07,3x27,x07,33x26,x010,3322x011,333x013,33x028,",paddle1:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,1111x05,2x36,111x05,222333322x06,3x28,x06,33x27,x09,33222x010,3333x012,333x027,",paddle2:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3233322x09,2x36,x08,222333311x06,3x25,33111000033x27,111x06,3322220011x05,3333x012,333x027,",paddle3:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3332333x08,33332333x06,1333322333x05,1113322122x07,33x27,x09,332222x09,3333x012,333x027,"}},climbing:{normal:"p[0,6,8,10]0000x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3323333x09,222x35,x08,222x36,11100002222x35,111100x26,3333111100x211,33300x211,330000x29,x08,x26,x06,",two:"p[0,6,8,10]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x08,22x35,111x05,22x36,1111000222x36,1111000x25,122x08,x28,00033000x210,3330000x29,333x05,x28,333x016,"}}},large:{jumping:"p[0,6,8,10]x012,111x012,11311x06,x25,113310000x27,x15,000x28,x35,000x211,33000333113111333300311311331111330031133x18,30031133111311113033x15,x37,0033331111333313000033x18,33x05,2222332333300x36,223233300x38,23323300x38,2232300033113333223320003111133222231000x15,32221222000x15,x28,0001011x29,003011x210,033000x29,33330003x28,x37,233x26,x37,222332222x37,x25,0022x37,x25,x08,3332222x09,33x014,3x015,",fiery:["same",["Character","Player","normal","fiery"]],normal:{normal:"p[0,6,8,10]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,3332333323330003333233332333300333223333223330333322333322x38,x28,x38,2122221233331111x28,x18,x28,11110111x28,1110011x210,11000x212,000x26,00x26,00x25,0000x25,00x25,0000x25,000333300003333000033330000333300x36,0000x312,0000x36,",hopping:["same",["Character","Player","normal","large","normal","running","normal","two"]],crouching:"p[0,6,8,10]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000331113111311110033x15,x36,000223x15,x35,0033323x19,0033323331113323033332x38,23033332x37,22x36,21x35,22x37,x28,x39,x26,x38,1112222111333231111222211113221111x26,1111202113x06,311200033330000333300x36,0000x36,",running:{skidding:"p[0,6,8,10]000x27,x09,11x27,33x06,1x27,333000x26,31133110022113113113111100013311311311110x16,3111213x16,3x15,22313111133331133223110333311113332x05,x15,x35,220003322233111332000333222x15,32000333233x15,3200x37,x15,0000x37,113122200x38,11222200x37,x27,00x36,x27,0000333x25,333x05,x25,x35,x06,x25,x38,0000222333311113x06,233x16,3x07,3112222x010,x27,003x07,222230033x07,22x37,x08,x37,x09,x36,x011,3333x012,3330000",normal:{normal:"p[0,6,8,10]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x08,33311x010,222233200010000333322332011100x36,223231110x37,223321110x37,223323130x36,222332330x36,22212313003333x29,000x15,x28,000x15,x28,0031111x29,0330111x27,x35,00023x26,x35,003223x25,x38,22233222x39,2222000x310,2x011,333x013,333x014,333x011,",two:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,22110000322x37,1111003222x36,1111000222x37,1110002222x36,111000x26,3332x06,x210,x06,x29,30003333x27,322003333x25,3322200333322223222200033332220022220003333x05,333300033x07,33330003x08,x36,x010,x36,x017,",three:"p[0,6,8,10]x022,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x05,33x18,x07,222211x09,32332233x07,323333223x07,3233332233x06,3233332223x06,32x35,113x06,3233331111x06,22333311112x05,22233311112200002222331112220000x26,332222x05,x25,33322x07,222x36,x07,22x36,x09,223333x010,3222333x09,3333033x08,x35,x011,x37,x011,x35,x05,"}},paddling:{normal:{normal:"p[0,6,8,10]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x058,",paddle1:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,",paddle2:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,2x07,322x36,2x06,3222x36,11x05,222x36,11100002222x35,1111000x26,3331111000x210,011000x29,x06,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,",paddle3:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x08,x36,233x07,x36,223x06,x36,22233x05,x35,x25,3000011333222122200001113x28,0001111x29,000111x29,x06,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,"},swim2:{normal:"p[0,6,8,10]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x043,",paddle1:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x027,",paddle2:"p[0,6,8,10]x022,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,2x07,322x36,2x06,3222x36,11x05,222x36,11100002222x35,1111000x26,3331111000x210,011000x29,x07,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x028,",paddle3:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x08,x36,233x07,x36,223x06,x36,22233x05,x35,x25,3000011333222122200001113x28,0001111x29,000111x29,x07,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x027,"}},climbing:{normal:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x29,30330000x27,x35,x05,x26,x35,x07,22223333x011,x35,x013,33x015,3x018,",two:"p[0,6,8,10]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,22110000322x37,1111003222x36,1111000222x37,1110002222x36,111000x26,3332x06,x210,x06,x29,3x06,x210,033000x29,33330000x28,33330000x28,3333x05,x27,3333x064,"}}},fiery:{jumping:{normal:"p[0,5,6,8]x012,222x012,22322x06,x15,223320000x17,x25,000x18,x35,000x111,33000333223222333300322322332222330032233x28,30032233222322223033x25,x37,0033332222333323000033x28,33x05,1111331333300x36,113133300x38,13313300x38,1131300033223333113310003222233111132000x25,31112111000x25,x18,0002222x19,003022x110,033000x19,33330003x18,x37,133x16,x37,111331111x37,x15,0011x37,x15,x08,3331111x09,33x014,3x015,",firing:["same",["Character","Player","normal","fiery","normal","running","normal","two"]]},normal:{normal:"p[0,5,6,8]x06,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000333x25,x35,x05,33x28,x07,1x25,3x09,31333313x07,3313333133x05,3331333313330003333133331333300333113333113330333311333311x38,x18,x38,1211112133332222x18,x28,x18,22220222x18,2220022x110,22000x112,000x16,00x16,00x15,0000x15,00x15,0000x15,000333300003333000033330000333300x36,0000x312,0000x36,",hopping:["same",["Character","Player","normal","fiery","normal","running","normal","three"]],crouching:"p[0,5,6,8]x07,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000332223222322220033x25,x36,000113x25,x35,0033313x29,0033313332223313033331x38,13033331x37,11x36,12x35,11x37,x18,x39,x16,x38,2221111222333132222111122223112222x16,2222101223x06,322100033330000333300x36,0000x36,",firing:["same",["Character","Player","normal","fiery","normal","running","normal","two"]],running:{skidding:"p[0,5,6,8]000x17,x09,22x17,33x06,2x17,333000x16,32233220011223223223222200023322322322220x26,3222123x26,3x25,11323222233332233113220333322223331x05,x25,x35,110003311133222331000333111x25,31000333133x25,3100x37,x25,0000x37,223211100x38,22111100x37,x17,00x36,x17,0000333x15,333x05,x15,x35,x06,x15,x38,0000111333322223x06,133x26,3x07,3221111x010,x17,003x07,111130033x07,11x37,x08,x37,x09,x36,x011,3333x012,3330000",normal:{normal:"p[0,5,6,8]x06,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000333x25,x35,x05,33x28,x08,33322x010,111133100020000333311331022200x36,113132220x37,113312220x37,113313230x36,111331330x36,11121323003333x19,000x25,x18,000x25,x18,0032222x19,0330222x17,x35,00013x16,x35,003113x15,x38,11133111x39,1111000x310,1x011,333x013,333x014,333x011,",two:"p[0,5,6,8]x039,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,11220000311x37,2222003111x36,2222000111x37,2220001111x36,222000x16,3331x06,x110,x06,x19,30003333x17,311003333x15,3311100333311113111100033331110011110003333x05,333300033x07,33330003x08,x36,x010,x36,0",three:"p[0,5,6,8,10]x022,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000044x25,x35,x05,33x28,x07,111122x09,31331133x07,313333113x07,3133331133x06,3133331113x06,31x35,223x06,3133332222x06,11333322221x05,11133322221100001111332221110000x16,331111x05,x15,33311x07,111x36,x07,11x36,x09,113333x010,3111333x09,3333033x08,x35,x011,x37,x011,x35,x05,"}},paddling:{normal:{normal:"p[0,6,8,10]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x058,",paddle1:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x05,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,",paddle2:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,1x07,311x36,1x06,3111x36,22x05,111x36,22200001111x35,2222000x16,3332222000x110,022000x19,x06,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,",paddle3:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x08,x36,133x07,x36,113x06,x36,11133x05,x35,x15,3000022333111211100002223x18,0002222x19,000222x19,x06,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,"},swim2:{normal:"p[0,6,8,10]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x043,",paddle1:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x06,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x027,",paddle2:"p[0,5,6,8]x022,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,1x07,311x36,1x06,3111x36,22x05,111x36,22200001111x35,2222000x16,3332222000x110,022000x19,x07,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x028,",paddle3:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x08,x36,133x07,x36,113x06,x36,11133x05,x35,x15,3000022333111211100002223x18,0002222x19,000222x19,x07,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x027,"}},climbing:{normal:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x06,x19,x07,x19,30330000x17,x35,x05,x16,x35,x07,11113333x011,x35,x013,33x015,3x018,",two:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,11220000311x37,2222003111x36,2222000111x37,2220001111x36,222000x16,3331x06,x110,x06,x19,3x06,x110,033000x19,33330000x18,33330000x18,3333x05,x17,3333x064,"}}},shrooming:{normal:"p[0,6,8,10]x0261,x25,x010,x29,x07,3331131x08,3131113111x06,31331113111x05,3311113333x08,x17,x08,332333x09,3332332333x05,33332222333300001132122123110000111x26,111000011x28,11x06,22200222x07,3330000333x05,33330000333300",shrooming2:"p[0,6,8,10]x0134,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,33323333233300033332333323333011002122221200x15,0x28,0x16,x210,11101022220022220100022220000222200003333000033330000333300003333000x35,0000x35,0",shrooming3:"p[0,6,8,10]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,3332333323330003333233332333300333223333223330333322333322x38,x28,x38,2122221233331111x28,x18,x28,11110111x28,1110011x210,11000x212,000x26,00x26,00x25,0000x25,00x25,0000x25,000333300003333000033330000333300x36,0000x312,0000x36,"}},star:{normal:["filter",["Character","Player","normal"],"StarOne"],star2:["filter",["Character","Player","normal"],"StarTwo"],star3:["filter",["Character","Player","normal"],"StarThree"],star4:["filter",["Character","Player","normal"],"StarFour"]}},Luigi:{dead:"p[0,6,1,21]x05,x25,x07,11x27,1100111131311313x16,3313113133x15,33311113331100x35,113333x05,331333313x06,33x16,3x05,222211112220003332233332233003333223322333003333212212333003333x26,333000333x26,3300",normal:{normal:{normal:"p[0,6,1,21]0000x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x07,3332333x08,333323323330000x35,2222333300011132122123110001111x26,111000111x28,11x05,222202222x06,333300033330000x35,000x35,00",hopping:["same",["Character","Luigi","normal","normal","running","normal","two"]],jumping:"p[0,6,1,21]x013,111x06,x26,0111x05,x29,11x05,33311311333000031311131133300003133111311130000331111x36,x06,x17,33000x35,2333233000x37,2333220311x36,x26,0311112232212212330113x210,3300333x29,330333x28,x05,330x25,x07,",running:{skidding:"p[0,6,1,21]x05,x26,x08,x28,33x07,131x37,0000x16,3113111001133113311311100033x16,3111x05,1123332222x05,3332231112220000x36,1113220000x36,112222x05,3333x26,x07,222233322x07,222x35,x09,2333223333x09,2x36,x010,x35,00",normal:{normal:"p[0,6,1,21]x05,x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x05,x35,2233x05,1113333222333x17,3332122233x15,0x28,0330000x210,33000x211,330033322200222233003333x013,3333x010,",two:"p[0,6,1,21]x020,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3323333x08,333322333x07,3332212211x06,3333x26,x06,2331112222x07,23112222x09,2223333x09,x38,0000",three:"p[0,6,1,21]x021,x26,x09,x210,x06,33331131x07,33131113111x05,331331113111000033311113333x07,x18,x07,x35,2311x06,11x36,11100001112x35,11x05,333x27,x06,33x28,x05,333x27,x06,330003333x012,x35,x05,"}},paddling:{normal:{normal:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,111x06,2x36,11x06,22233332x06,33x27,x07,33x26,x08,332222x010,30033x014,3x027,",paddle1:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,1111x05,2x36,111x05,222333322x05,33x28,x06,33x27,x07,33x25,x09,330333x013,33x026,",paddle2:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3233322x09,2x36,x08,222333311x05,33x25,33111000033x27,111000033x26,00110000330333x013,33x026,",paddle3:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3332333x08,33332333x06,1333322333x05,1113322122x07,33x27,x07,33x25,x09,330333x013,33x026,"},swim2:{normal:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,111x06,2x36,11x06,22233332x07,3x27,x07,33x26,x010,3322x011,333x013,33x028,",paddle1:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,32x35,1111x05,2x36,111x05,222333322x06,3x28,x06,33x27,x09,33222x010,3333x012,333x027,",paddle2:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3233322x09,2x36,x08,222333311x06,3x25,33111000033x27,111x06,3322220011x05,3333x012,333x027,",paddle3:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3332333x08,33332333x06,1333322333x05,1113322122x07,33x27,x09,332222x09,3333x012,333x027,"}},climbing:{normal:"p[0,6,1,21]0000x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x07,3323333x09,222x35,x08,222x36,11100002222x35,111100x26,3333111100x211,33300x211,330000x29,x08,x26,x06,",two:"p[0,6,1,21]x05,x26,x09,x210,x06,33311311x07,31311131111x05,3133111311110000331111x35,x07,x18,x08,22x35,111x05,22x36,1111000222x36,1111000x25,122x08,x28,00033000x210,3330000x29,333x05,x28,333x016,"}},large:{normal:"p[0,6,1,21]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,3332333323330003333233332333300333223333223330333322333322x38,x28,x38,2122221233331111x28,x18,x28,11110111x28,1110011x210,11000x212,000x26,00x26,00x25,0000x25,00x25,0000x25,000333300003333000033330000333300x36,0000x312,0000x36,",jumping:"p[0,6,1,21]x012,111x012,11311x06,x25,113310000x27,x15,000x28,x35,000x211,33000333113111333300311311331111330031133x18,30031133111311113033x15,x37,0033331111333313000033x18,33x05,2222332333300x36,223233300x38,23323300x38,2232300033113333223320003111133222231000x15,32221222000x15,x28,0001011x29,003011x210,033000x29,33330003x28,x37,233x26,x37,222332222x37,x25,0022x37,x25,x08,3332222x09,33x014,3x015,",hopping:["same",["Character","Luigi","normal","large","running","normal","two"]],crouching:"p[0,6,1,21]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000331113111311110033x15,x36,000223x15,x35,0033323x19,0033323331113323033332x38,23033332x37,22x36,21x35,22x37,x28,x39,x26,x38,1112222111333231111222211113221111x26,1111202113x06,311200033330000333300x36,0000x36,",running:{skidding:"p[0,6,1,21]000x27,x09,11x27,33x06,1x27,333000x26,31133110022113113113111100013311311311110x16,3111213x16,3x15,22313111133331133223110333311113332x05,x15,x35,220003322233111332000333222x15,32000333233x15,3200x37,x15,0000x37,113122200x38,11222200x37,x27,00x36,x27,0000333x25,333x05,x25,x35,x06,x25,x38,0000222333311113x06,233x16,3x07,3112222x010,x27,003x07,222230033x07,22x37,x08,x37,x09,x36,x011,3333x012,3330000",normal:{normal:"p[0,6,1,21]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x08,33311x010,222233200010000333322332011100x36,223231110x37,223321110x37,223323130x36,222332330x36,22212313003333x29,000x15,x28,000x15,x28,0031111x29,0330111x27,x35,00023x26,x35,003223x25,x38,22233222x39,2222000x310,2x011,333x013,333x014,333x011,",two:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,22110000322x37,1111003222x36,1111000222x37,1110002222x36,111000x26,3332x06,x210,x06,x29,30003333x27,322003333x25,3322200333322223222200033332220022220003333x05,333300033x07,33330003x08,x36,x010,x36,x017,",three:"p[0,6,1,21]x022,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x05,33x18,x07,222211x09,32332233x07,323333223x07,3233332233x06,3233332223x06,32x35,113x06,3233331111x06,22333311112x05,22233311112200002222331112220000x26,332222x05,x25,33322x07,222x36,x07,22x36,x09,223333x010,3222333x09,3333033x08,x35,x011,x37,x011,x35,x05,"}},paddling:{normal:{normal:"p[0,6,1,21]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x058,",paddle1:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,",paddle2:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,2x07,322x36,2x06,3222x36,11x05,222x36,11100002222x35,1111000x26,3331111000x210,011000x29,x06,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,",paddle3:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x08,x36,233x07,x36,223x06,x36,22233x05,x35,x25,3000011333222122200001113x28,0001111x29,000111x29,x06,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x042,"},swim2:{normal:"p[0,6,1,21]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x043,",paddle1:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x027,",paddle2:"p[0,6,1,21]x022,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,2x07,322x36,2x06,3222x36,11x05,222x36,11100002222x35,1111000x26,3331111000x210,011000x29,x07,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x028,",
paddle3:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x08,x36,233x07,x36,223x06,x36,22233x05,x35,x25,3000011333222122200001113x28,0001111x29,000111x29,x07,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x027,"}},climbing:{normal:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x29,30330000x27,x35,x05,x26,x35,x07,22223333x011,x35,x013,33x015,3x018,",two:"p[0,6,1,21]x023,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,x35,x06,3x18,x06,3222111x08,3233323x09,32333323x07,332x35,22110000322x37,1111003222x36,1111000222x37,1110002222x36,111000x26,3332x06,x210,x06,x29,3x06,x210,033000x29,33330000x28,33330000x28,3333x05,x27,3333x064,"}},fiery:{normal:"p[0,5,6,8]x06,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000333x25,x35,x05,33x28,x07,1x25,3x09,31333313x07,3313333133x05,3331333313330003333133331333300333113333113330333311333311x38,x18,x38,1211112133332222x18,x28,x18,22220222x18,2220022x110,22000x112,000x16,00x16,00x15,0000x15,00x15,0000x15,000333300003333000033330000333300x36,0000x312,0000x36,",jumping:"p[0,5,6,8]x012,222x012,22322x06,x15,223320000x17,x25,000x18,x35,000x111,33000333223222333300322322332222330032233x28,30032233222322223033x25,x37,0033332222333323000033x28,33x05,1111331333300x36,113133300x38,13313300x38,1131300033223333113310003222233111132000x25,31112111000x25,x18,0002222x19,003022x110,033000x19,33330003x18,x37,133x16,x37,111331111x37,x15,0011x37,x15,x08,3331111x09,33x014,3x015,",hopping:["same",["Character","Luigi","normal","fiery","running","normal","three"]],crouching:"p[0,5,6,8]x07,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000332223222322220033x25,x36,000113x25,x35,0033313x29,0033313332223313033331x38,13033331x37,11x36,12x35,11x37,x18,x39,x16,x38,2221111222333132222111122223112222x16,2222101223x06,322100033330000333300x36,0000x36,",firing:["same",["Character","Luigi","normal","fiery","running","normal","two"]],running:{skidding:"p[0,5,6,8]000x17,x09,22x17,33x06,2x17,333000x16,32233220011223223223222200023322322322220x26,3222123x26,3x25,11323222233332233113220333322223331x05,x25,x35,110003311133222331000333111x25,31000333133x25,3100x37,x25,0000x37,223211100x38,22111100x37,x17,00x36,x17,0000333x15,333x05,x15,x35,x06,x15,x38,0000111333322223x06,133x26,3x07,3221111x010,x17,003x07,111130033x07,11x37,x08,x37,x09,x36,x011,3333x012,3330000",normal:{normal:"p[0,5,6,8]x06,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000333x25,x35,x05,33x28,x08,33322x010,111133100020000333311331022200x36,113132220x37,113312220x37,113313230x36,111331330x36,11121323003333x19,000x25,x18,000x25,x18,0032222x19,0330222x17,x35,00013x16,x35,003113x15,x38,11133111x39,1111000x310,1x011,333x013,333x014,333x011,",two:"p[0,5,6,8]x039,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,11220000311x37,2222003111x36,2222000111x37,2220001111x36,222000x16,3331x06,x110,x06,x19,30003333x17,311003333x15,3311100333311113111100033331110011110003333x05,333300033x07,33330003x08,x36,x010,x36,0",three:"p[0,5,6,8,10]x022,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000044x25,x35,x05,33x28,x07,111122x09,31331133x07,313333113x07,3133331133x06,3133331113x06,31x35,223x06,3133332222x06,11333322221x05,11133322221100001111332221110000x16,331111x05,x15,33311x07,111x36,x07,11x36,x09,113333x010,3111333x09,3333033x08,x35,x011,x37,x011,x35,x05,"}},paddling:{normal:{normal:"p[0,6,1,21]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x05,33x28,00003333x27,x05,3333x25,x07,33332223x08,3333033x09,3300033x09,300003x058,",paddle1:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x05,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,",paddle2:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,1x07,311x36,1x06,3111x36,22x05,111x36,22200001111x35,2222000x16,3332222000x110,022000x19,x06,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,",paddle3:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x08,x36,133x07,x36,113x06,x36,11133x05,x35,x15,3000022333111211100002223x18,0002222x19,000222x19,x06,33x18,00003333x17,x05,3333x15,x07,33331113x08,3333033x09,3300033x09,300003x042,"},swim2:{normal:"p[0,6,1,21]x07,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000033x15,331111x05,3113331111x05,322x35,11x05,322x36,1x06,32x36,x08,32x35,23x07,323333223x08,223322233x07,x28,3x07,x25,1222x06,x210,x06,x210,x06,x210,x06,x29,x07,x28,x08,3x25,x09,333222x010,x35,x011,3333x012,333x014,33x043,",paddle1:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x06,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x027,",paddle2:"p[0,5,6,8]x022,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,1x07,311x36,1x06,3111x36,22x05,111x36,22200001111x35,2222000x16,3332222000x110,022000x19,x07,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x028,",paddle3:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x08,x36,133x07,x36,113x06,x36,11133x05,x35,x15,3000022333111211100002223x18,0002222x19,000222x19,x07,x19,x07,x18,x08,3x15,x09,333111x010,x35,x011,3333x012,333x014,33x027,"}},climbing:{normal:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,332222x05,3223332222x05,311x35,22x05,311x36,2x06,31x36,x08,31x35,13x07,313333113x08,113311133x07,x18,3x07,x15,2111x06,x110,x06,x110,x06,x110,x06,x19,x07,x19,30330000x17,x35,x05,x16,x35,x07,11113333x011,x35,x013,33x015,3x018,",two:"p[0,5,6,8]x023,x15,x09,x16,2x08,x16,22x08,x111,x05,333223222x06,322322332222000032233x28,00332233222322220033x25,x36,000033x25,x35,x06,3x28,x06,3111222x08,3133313x09,31333313x07,331x35,11220000311x37,2222003111x36,2222000111x37,2220001111x36,222000x16,3331x06,x110,x06,x19,3x06,x110,033000x19,33330000x18,33330000x18,3333x05,x17,3333x064,"}},shrooming:{normal:"p[0,6,1,21]x0261,x25,x010,x29,x07,3331131x08,3131113111x06,31331113111x05,3311113333x08,x17,x08,332333x09,3332332333x05,33332222333300001132122123110000111x26,111000011x28,11x06,22200222x07,3330000333x05,33330000333300",shrooming2:"p[0,6,1,21]x0134,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,33323333233300033332333323333011002122221200x15,0x28,0x16,x210,11101022220022220100022220000222200003333000033330000333300003333000x35,0000x35,0",shrooming3:"p[0,6,1,21]x06,x25,x09,x26,1x08,x26,11x08,x211,x05,333113111x06,311311331111000031133x18,00331133111311110033x15,x36,000333x15,x35,x05,33x18,x07,2x15,3x09,32333323x07,3323333233x05,3332333323330003333233332333300333223333223330333322333322x38,x28,x38,2122221233331111x28,x18,x28,11110111x28,1110011x210,11000x212,000x26,00x26,00x25,0000x25,00x25,0000x25,000333300003333000033330000333300x36,0000x312,0000x36,"}},star:{normal:["filter",["Character","Luigi","normal"],"StarOne"],star2:["filter",["Character","Luigi","normal"],"StarTwo"],star3:["filter",["Character","Luigi","normal"],"StarThree"],star4:["filter",["Character","Luigi","normal"],"StarFour"]}},Mushroom:"p[0,1,6,8]x06,2222x011,332222x09,33332222x07,x35,x25,x05,22333x27,000x29,3332200x28,x35,202233x25,x35,222333x25,x35,22233x27,333x219,02333x16,3332x05,x18,x08,12x16,x08,12x16,x09,121111x05,",Mushroom1Up:"p[0,1,6,14]x06,2222x011,332222x09,33332222x07,x35,x25,x05,22333x27,000x29,3332200x28,x35,202233x25,x35,222333x25,x35,22233x27,333x219,02333x16,3332x05,x18,x08,12x16,x08,12x16,x09,121111x05,",MushroomDeathly:"p[0,5,9,16]x06,2222x011,332222x09,33332222x07,x35,x25,x05,22333x27,000x29,3332200x28,x35,202233x25,x35,222333x25,x35,22233x27,333x219,02333x16,3332x05,x18,x08,12x16,x08,12x16,x09,121111x05,",Piranha:{normal:{normal:"p[0,6,14]x022,2002x011,210012x09,22200222x08,12200221x07,2221001222x06,2222002222x05,1212200221210000x25,00x25,0000222120021222000021222002221200002222100122220000212220022212x05,2212002122x06,2222002222x07,12100121x010,2002x06,11x05,11x05,11121100011000112101211001100112100112110110112110001121011012110000111211112111x05,x110,000",two:"p[0,1,6,14]x034,3x010,30003211x06,112300331x08,1330023311000011332033321x06,12333233331100113333233233100001332x37,x06,x36,23333100133332x35,23100132333302x35,00x35,20033233300333233000333320023333x05,32x36,23x08,323323x05,22x05,22x05,22232200022000223202322002200223200223220220223220002232022023220000222322223222x05,x210,000"},Underworld:{normal:"p[0,9,16]x022,2002x011,210012x09,22200222x08,12200221x07,2221001222x06,2222002222x05,1212200221210000x25,00x25,0000222120021222000021222002221200002222100122220000212220022212x05,2212002122x06,2222002222x07,12100121x010,2002x06,11x05,11x05,11121100011000112101211001100112100112110110112110001121011012110000111211112111x05,x110,000",two:"p[0,5,9,16]x034,3x010,30003211x06,112300331x08,1330023311000011332033321x06,12333233331100113333233233100001332x37,x06,x36,23333100133332x35,23100132333302x35,00x35,20033233300333233000333320023333x05,32x36,23x08,323323x05,22x05,22x05,22232200022000223202322002200223200223220220223220002232022023220000222322223222x05,x210,000"},Castle:["same",["Character","Piranha","Underworld"]]},Podoboo:"p[0,1,6,8]0000x36,x07,x38,x05,3332222333000333x26,33300332221122233033322111122x35,22x16,22333322x16,22333322x16,223333222111122233332222112222x35,232222323330x35,22x35,00x35,22x35,0003303333033x05,30033003000",Shell:{normal:{normal:{normal:"p[0,1,6,14]x05,233332x09,33222233x07,3323333233x06,32x36,23x05,32x38,230000232x36,2320002333233332333200x35,2222x35,01113323333233x17,2x36,2111100011x36,11x07,11333311x09,x16,x011,1111x06,",peeking:"p[0,1,6,14]x05,233332x09,33222233x07,3323333233x06,32x36,23x05,32x38,230000232x36,2320002333233332333200x35,2222x35,01113323333233x17,2x36,2111100211x36,11200022211333311222002220x16,02220022000111100022002x012,20"},smart:["filter",["Character","Shell","normal","normal"],"Smart"]},Underworld:{smart:["same",["Character","Shell","normal","smart"]],normal:{normal:"p[0,5,9,16]x05,233332x09,33222233x07,3323333233x06,32x36,23x05,32x38,230000232x36,2320002333233332333200x35,2222x35,01113323333233x17,2x36,2111100011x36,11x07,11333311x09,x16,x011,1111x06,",peeking:"p[0,5,6,9,16]x05,344443x09,44333344x07,4434444344x06,43x46,34x05,43x48,340000343x46,3430003444344443444300x45,3333x45,01114434444344x17,3x46,3111100211x46,11200022211444411222002220x16,02220022000111100022002x012,20"}},Castle:["same",["Character","Shell","Underworld"]]},ShellBeetle:{normal:"p[0,2,5,9]x06,1111x010,x18,x07,1111331111x05,1111322311110000x15,33x15,0000x112,000x114,00x114,00x114,00x114,00x114,00x114,00x114,0x35,x16,x35,000033311333x010,3333x06,",Underworld:"p[0,15,16,18]x06,1111x010,x18,x07,1111221111x05,1111233211110000x15,22x15,0000x112,000x114,00x114,00x114,00x114,00x114,00x114,00x114,0x25,x16,x25,000022211222x010,2222x06,",Castle:"p[0,1,3,4]x06,3333x010,x38,x07,3333223333x05,3333211233330000x35,22x35,0000x312,000x314,00x314,00x314,00x314,00x314,00x314,0x25,x36,x25,000022233222x010,2222x06,"},Spiny:{normal:"p[0,1,6,8]x024,1x015,1x014,122x08,10000122000010001200122220012000122012222012200012223222312220001122x35,1222003322331123322301113331122233330033133x25,x36,133133222333111333321x35,111x05,222x16,2220002222x06,2222",two:"p[0,1,6,8]x08,1x015,1x014,122x08,10000122000010001200122220012000122012222012200012223222312220001122x35,1222003322331123322301113331122233330033133x25,x36,133133222333111333321x35,111x05,222x16,22x06,222000222x08,22000220000"},SpinyEgg:{normal:"p[0,1,6,8]x06,22x09,22322322x06,2x36,2x05,x310,00022311x35,22002311x37,200331x39,022x310,2222x310,220x39,133002x37,11320022x35,11322000x310,x05,2x36,2x06,22322322x09,22x06,",two:"p[0,1,6,8]0000220022x08,233332x05,22x38,2200233311x35,20003311x36,0022331x37,2222x310,220x312,00x312,022x310,2222x37,1332200x36,11330002x35,1133320022x38,22x05,233332x08,2200220000"},Star:{normal:"p[0,6,8]x06,11x012,11x011,1111x010,1111x09,x16,0000x119,2112x15,01111211211110001112112111x05,x18,x06,x18,x05,x110,0000x110,00001111001111000111x06,1110011x08,110",two:"p[0,2,9]x06,22x012,22x011,2222x010,2222x09,x26,0000x219,1221x25,02222122122220002221221222x05,x28,x06,x28,x05,x210,0000x210,00002222002222000222x06,2220022x08,220",three:"p[0,5,8]x06,22x012,22x011,2222x010,2222x09,x26,0000x219,1221x25,02222122122220002221221222x05,x28,x06,x28,x05,x210,0000x210,00002222002222000222x06,2220022x08,220",four:"p[0,6,14]x06,11x012,11x011,1111x010,1111x09,x16,0000x119,2112x15,01111211211110001112112111x05,x18,x06,x18,x05,x110,0000x110,00001111001111000111x06,1110011x08,110"},Vine:["multiple","vertical",{top:"p[0,6,14]00222x010,x25,x08,2211122x07,x25,12x09,222022x012,22x012,22x012,22x012,22x012,220022x08,2202222x07,2221112x07,x26,12x06,220x25,",topheight:7,middle:"p[0,6,14]x06,22x012,22x012,22x08,220022x07,2222022x07,2111222x06,21x26,x06,x25,022x012,22x012,22x012,22x012,220022x08,2202222x07,2221112x07,x26,12x06,220x25,"}]},Solid:{Block:{normal:{used:"p[0,2,9]0x114,01x214,1121x210,1211x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,1121x210,1211x214,10x114,0",normal:{normal:"p[0,2,6,9]0x314,03x214,1321x210,12132222x35,x25,132223311133222213222331223312221322233122331222132222112333122213x26,3311122213x26,331x25,13x27,11x25,13x26,33x26,13x26,331x25,1321x25,112221213x214,x117,",two:"p[0,2,9]0x214,0x215,1221x210,121x215,1x26,111x26,1x26,1222212221x26,1222212221x25,11222212221x29,1112221x29,1x25,1x28,11x25,1x215,1x29,1x25,1221x25,11222121x215,x117,",three:"p[0,2,9,11]0x214,02x314,1231x310,13123333x25,x35,123332211122333312333221332213331233322133221333123333113222133312x36,2211133312x36,221x35,12x37,11x35,12x36,22x36,12x36,221x35,1231x35,113331312x314,x117,"}},Underworld:{used:"p[0,9,16]0x214,02x114,2212x110,2122x114,22x114,22x114,22x114,22x114,22x114,22x114,22x114,22x114,22x114,2212x110,2122x114,20x214,0",normal:{normal:"p[0,6,9,16]0x214,02x114,3213x110,31321111x25,x15,321112233322111132111223112231113211122311223111321111331222311132x16,2233311132x16,223x15,32x17,33x15,32x16,22x16,32x16,223x15,3213x15,331113132x114,x317,",two:"p[0,9,16]0x114,0x115,2112x110,212x115,2x16,222x16,2x16,2111121112x16,2111121112x15,22111121112x19,2221112x19,2x15,2x18,22x15,2x115,2x19,2x15,2112x15,22111212x115,x217,",three:"p[0,9,11,16]0x114,01x214,3123x210,32312222x15,x25,312221133311222231222113221132223122211322113222312222332111322231x26,1133322231x26,113x25,31x27,33x25,31x26,11x26,31x26,113x25,3123x25,332223231x214,x317,"}},Castle:["same",["Solid","Block","Underworld"]]},Brick:{normal:{normal:"p[2,5,9]x116,x27,0x27,0x27,0x27,x017,2220x27,0x27,0x27,0x27,0x27,02222x016,x27,0x27,0x27,0x27,0x27,0x27,x017,2220x27,0x27,0x27,0x27,0x27,02222x016,",used:["same",["Solid","Block","normal","used"]]},Underworld:{normal:"p[2,16]x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,",used:["same",["Solid","Block","normal","used"]]},Castle:["filter",["Solid","Brick","normal"],"Castle"],Alt2:["filter",["Solid","Brick","normal"],"Alt2"]},BridgeBase:"p[0,2,5,8]111000112221012222x35,222x35,222x35,222x35,22221012211100011",Cannon:["multiple","vertical",{top:"p[0,2,9,22]333x010,3333111x310,11333x110,x36,1x313,111x310,113x112,3113x112,3113x112,3113x15,33331113113111131111211311311131133112131131113131121213113111313112121311311131122112331133313x16,2133331103x16,203110003x18,2x06,3x18,2x05,3x110,200003x110,2000311x28,1120031222333322212031122x36,2212031122323323221123112322332232112311232233223211231123223322321123112x38,2112311222322322211231122233332221123111x28,11123x114,2",topheight:16,middle:"p[2,5,9]1x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,21x014,2"}],CastleAxe:{normal:"p[0,2,4,6,9]003x010,3000323300420033130032333322333313032x35,42x35,1332x35,42x35,1332x35,42x35,1332x35,42x35,1332x35,42x35,130323333423333130002330042000313000300002200003x09,42x014,22x014,42x014,22x014,42x07,",two:"p[0,2,4,9]003x010,3000323300320033130032333322333313032x36,2x35,1332x36,2x35,1332x36,2x35,1332x36,2x35,1332x36,2x35,13032x35,23333130002330032000313000300002200003x09,32x014,22x014,32x014,22x014,32x07,",three:"p[0,2,4,9,11]004x010,4000424400320044140042444422444414042x45,32x45,1442x45,32x45,1442x45,32x45,1442x45,32x45,1442x45,32x45,140424444324444140002440032000414000400002200004x09,32x014,22x014,32x014,22x014,32x07,"},CastleBlock:"p[0,4,9]0x114,01x214,1121x210,1211x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,11x214,1121x210,1211x214,10x114,0",CastleBridge:"p[1,2,4,8]10001000100010001000100010001000122212223222322232223222322232223222322232223222322232221222122213331333133313331333133313331333",CastleChain:"p[0,1,3]x014,1x013,1x014,22x011,12x013,22x011,12x012,102x012,22x011,12x012,102x012,22x011,12x013,22x011,12x012,102x012,22x013,",CastleStone:{normal:"p[1,2,3,4]0031x06,31000022310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,3102223331x37,13333x116,x06,31x06,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,31x37,1x37,x117,",Underwater:"p[2,12,14,20]1103x16,03111122031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,0312220003x07,30000x316,x16,03x16,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,03x07,3x07,x317,"},Cloud:"p[0,1,2]000x210,x05,2x110,20002x112,2002x112,2002x112,202x114,22x15,2112x15,22x15,2112x15,22x15,2112x15,22x114,2212x110,2120211121111211120021111222211112002x112,2000211112211112x05,2222002222000",Coral:"p[0,7,8]0000100012x05,110001000120000121001000112000120110100012000020001010011211112000101001x26,100021100120000221000221112x06,2x05,22120001x05,1000012001x06,1011012001000100101001120122010001100012120022000021001122000020000211112x011,22212x06,",DeadGoomba:{normal:"p[0,5,9,15]x06,2222x09,x210,000022333222233322022111133331111x218,000x110,x07,x18,x05,x35,0000x35,0",Underworld:"p[0,15,16,18]x06,2222x09,x210,000022111222211122022333311113333x218,000x310,x07,x38,x05,x15,0000x15,0",Castle:["filter",["Solid","DeadGoomba","normal"],"Castle"]},Firework:{normal:"p[0,6,8]x070,2002x010,20222202x09,221122x09,22111122x08,22111122x09,221122x09,20222202x010,2002x070,",n2:"p[0,1,6,8]x020,3x06,3x09,303303x09,x38,x06,303232232303x05,3321221233x06,3221111223x05,3332111123330000333211112333x05,3221111223x06,3321221233x05,303232232303x06,x38,x09,303303x09,3x06,3x020,",n3:"p[0,1,6,8]00030033330030000300x38,003000x35,22x35,00303323233232330300323x26,32300033321211212333033232x16,232x35,22x16,22x36,22x16,22x35,232x16,23233033321211212333000323x26,32300303323233232330300x35,22x35,000300x38,00300003003333003000"},Floor:{normal:"p[2,5,9]2x18,02111121x28,01222201x28,01222201x28,01222201x28,01022201x28,02000021x28,0x15,01x28,01222201x28,01222201x28,012222000x26,01x25,01100222201x25,0121100001x26,0122211101x26,01x26,01x25,002x06,21x06,2",Underworld:"p[2,16,18]1x28,01222212x18,02111102x18,02111102x18,02111102x18,02011102x18,01000012x18,0x25,02x18,02111102x18,02111102x18,021111000x16,02x15,02200111102x15,0212200002x16,0211122202x16,02x16,02x15,001x06,12x06,1",Underwater:{normal:"p[2,12,14]22x112,0221111x29,0011122111222211100122x15,2212221202112222011x25,0211222201x26,021x26,0x25,0221x26,0022201201x26,0000101011112222000100101222122220012011x25,02200122011x25,0200012001x25,001111220012220000122220022x06,2x07,2",Castle:["same",["Solid","Stone","Castle","Underwater"]]},Castle:["same",["Solid","Stone","Castle"]],Alt2:["filter",["Solid","Floor","normal"],"Alt2"]},Pipe:{normal:["multiple","vertical",{top:"p[0,2,13,14]x133,x230,11x35,x26,x319,1122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,232322x133,00x128,00",middle:"p[0,2,13,14]00122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,2322100"}],Castle:{normal:["multiple","vertical",{top:"p[0,1,3,4]x333,x130,33x25,x16,x219,3311122x16,211x210,1212113311122x16,211x211,121113311122x16,211x210,1212113311122x16,211x211,121113311122x16,211x210,1212113311122x16,211x211,121113311122x16,211x210,1212113311122x16,211x211,121113311122x16,211x210,1212113311122x16,211x211,121113311122x16,211x210,121211x333,00x328,00",middle:"p[0,1,3,4]00311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,121130000311122x15,211x28,1211130000311122x15,211x29,1211300"}],Underwater:["multiple","vertical",{top:"p[0,5,9,17]x133,x230,11x35,x26,x319,1122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,2323221122233x26,322x311,232221122233x26,322x310,232322x133,00x128,00",middle:"p[5,9,17,20]33011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,121103333011122x15,211x28,1211103333011122x15,211x29,1211033"}]},Alt:["same",["Solid","Pipe","Castle"]],Alt2:["same",["Solid","Pipe","Castle"]]},PipeHorizontal:{normal:"p[0,2,13,14]x115,x024,1x213,x122,0001x213,11x220,1001x213,11x220,1001x213,11x220,1001x313,11x221,101x313,11x321,101x213,11x321,101x213,11x221,101x213,11x221,101x213,11x222,11x213,11x222,11x313,11x222,11x213,11x322,11x213,11x222,11x213,11x222,11x213,11x322,11x313,11x322,11x313,11x322,11x313,11x322,11x313,11x322,11x313,11x322,11x313,11x321,101x313,11x321,101x313,11x321,101x313,11323232323232323232323101323232323232311232323232323232323232101232323232323211323232323232323232321001323232323232311x220,1001x213,11x220,1001x213,x122,000x115,x024,",small:"p[0,2,13,14]x115,01x213,111x213,111x213,111x213,111x313,111x313,111x213,111x213,111x213,111x213,111x213,111x313,111x213,111x213,111x213,111x213,111x313,111x313,111x313,111x313,111x313,111x313,111x313,111x313,111x313,111323232323232311123232323232321113232323232323111x213,111x213,x117,0"},PipeVertical:{normal:"p[0,2,13,14]012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210012232x310,223x25,332222100122232x39,223x25,33222210",Castle:{normal:"p[0,1,3,4]00211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,131120000211133x15,311x38,1311120000211133x15,311x39,1311200",Underwater:"p[0,7,8,17]00122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,232210000122233x25,322x38,2322210000122233x25,322x39,2322100"}},Platform:{normal:"p[0,1,6,9]x18,x38,220000222x05,322x05,32223333x210,x38,",Sky:"p[0,1,6]001111000x15,2012x15,212x15,212211112112211220111122000222200"},RestingStone:["same",["Solid","Stone"]],Springboard:{Alt2:["multiple","vertical",{top:"p[8]x032,",topheight:1,middle:"p[0,1,6]x05,110011x010,210012x010,200002x010,200002x09,2x06,2x08,2x06,2x08,2x06,2x07,2x08,2x05,12x08,21000011x08,11000011x08,11000012x08,21x05,2x08,2x07,2x06,2x08,2x06,2x08,2x06,2x09,200002x010,200002x010,210012x010,110011x05,",middleStretch:!0,bottom:"p[4,8,3]x132,x27,0x27,0x27,0x27,x017,2220x27,0x27,0x27,0x27,0x27,02222x016,",bottomheight:4}],normal:["multiple","vertical",{top:"p[8]x032,",topheight:1,middle:"p[0,1,6]x05,110011x010,210012x010,200002x010,200002x09,2x06,2x08,2x06,2x08,2x06,2x07,2x08,2x05,12x08,21000011x08,11000011x08,11000012x08,21x05,2x08,2x07,2x06,2x08,2x06,2x08,2x06,2x09,200002x010,200002x010,210012x010,110011x05,",middleStretch:!0,bottom:"p[2,8,9]x132,x27,0x27,0x27,0x27,x017,2220x27,0x27,0x27,0x27,0x27,02222x016,",bottomheight:4}]},Stone:{normal:"p[2,5,9]2x114,012x112,00112x110,0001112x18,00001111x28,00001111x28,00001111x28,00001111x28,00001111x28,00001111x28,00001111x28,00001111x28,0000111x09,200011x011,2001x013,2x016,2",Underwater:{normal:["same",["Solid","Floor","Underwater","normal"]],Castle:["same",["Solid","Stone","Castle","Underwater"]]},Underworld:["filter",["Solid","Stone","normal"],"Underworld"],Castle:{normal:"p[1,2,3,4]0031x06,31000022310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,3102223331x37,13333x116,x06,31x06,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,310x25,31x37,1x37,x117,",Underwater:"p[2,3,14,20]1103x16,03111122031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,0312220003x07,30000x316,x16,03x16,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,031x25,03x07,3x07,x317,"},Sky:"p[0,1,2]000x210,x05,2x110,20002x112,2002x112,2002x112,202x114,22x15,2112x15,22x15,2112x15,22x15,2112x15,22x114,2212x110,2120211121111211120021111222211112002x112,2000211112211112x05,2222002222000",Alt:["filter",["Solid","Stone","normal"],"Alt"],Alt2:["filter",["Solid","Stone","normal"],"Alt2"]},ShroomTop:["multiple","horizontal",{left:"p[0,2,6,8]000x113,001x36,x27,01x37,x27,01x37,x27,1x38,x27,1x37,x28,1x37,222333221x36,222x35,21x35,222x37,1x28,x37,1x28,x37,1x29,x35,21x210,333221x215,011x213,000x113,",middle:"p[2,6,8]x016,1x28,x18,x28,x19,x26,x132,x25,x110,x27,x19,x27,x18,x29,x17,x29,x17,x29,x17,x29,x18,x27,x19,x27,x110,x25,111x016,",right:"p[0,2,6,8]x113,000x38,x25,100x38,x26,10x38,x26,10x38,222333212x36,222x35,1223333222x36,1x29,x36,1x29,x36,1x210,x35,1x211,33321x215,1x215,1x215,1x214,x117,0"}],TreeTop:{normal:["multiple","horizontal",{left:"p[0,2,13]00x114,011x213,01x214,11x214,1x215,1x215,1x215,1x215,1x215,1x215,1x215,1x215,1x215,1x26,1x27,1012222101x25,10001111000x15,00",middle:"p[2,8,13]x016,x2199,0x27,00x25,010x25,011x05,111x05,11",right:"p[0,2,13]x114,00x213,110x214,10x214,11x215,1x215,1x215,1x215,1x215,1x215,1x215,1x215,1x215,11x27,1x26,101x25,10122221000x15,000111100"}],Alt:["multiple","horizontal",{left:"p[0,1,4]00x214,022x113,02x114,22x114,2x115,2x115,2x115,2x115,2x115,2x115,2x115,2x115,2x115,2x16,2x17,2021111202x15,20002222000x25,00",middle:"p[1,3,4]x216,x0199,2x07,22x05,212x05,211x25,111x25,11",right:"p[0,1,4]x213,000x113,200x114,20x114,20x115,2x115,2x115,2x115,2x115,2x115,2x115,2x115,2x115,22x17,2x16,202x15,20211112000x25,000222200"}],Alt2:["same",["Solid","TreeTop","Alt"]]},TreeTrunk:["same",["Scenery","TreeTrunk"]],WaterBlock:"20"},Scenery:{BrickHalf:{normal:"p[2,9]x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,",Alt2:["filter",["Scenery","BrickHalf","normal"],"Alt2"]},BrickPlain:{normal:"p[2,9]x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,x17,0x17,0",Alt2:["filter",["Scenery","BrickPlain","normal"],"Alt2"]},BridgeBase:"p[0,2,5,9]111000112221012222x35,222x35,222x35,222x35,22221012211100011",Bush1:"p[0,2,13,14]x014,1111x027,122221x024,11x26,1x022,1x28,101x020,1x29,121x019,1x26,3x25,1x017,122233222322221x016,12223x210,1x013,111x216,1001x08,1x219,10121x06,1x221,1221x06,x225,1010011x226,1211x230,11x230,101x228,10",Bush2:"p[0,2,13,14]x014,1111x012,1111x027,122221x010,122221x024,11x26,1x07,11x26,1x022,1x28,10100001x28,101x020,1x29,1210001x29,121x019,1x26,3x25,1001x26,3x25,1x017,1222332223222210122233222322221x016,12223x210,112223x210,1x013,111x232,1001x08,1x235,10121x06,1x237,1221x06,x241,1010011x242,1211x246,11x246,101x244,10",Bush3:"p[0,2,13,14]x014,1111x012,1111x012,1111x027,122221x010,122221x010,122221x024,11x26,1x07,11x26,1x07,11x26,1x022,1x28,10100001x28,10100001x28,101x020,1x29,1210001x29,1210001x29,121x019,1x26,3x25,1001x26,3x25,1001x26,3x25,1x017,12223322232222101222332223222210122233222322221x016,12223x210,112223x210,112223x210,1x013,111x248,1001x08,1x251,10121x06,1x253,1221x06,x257,1010011x258,1211x262,11x262,101x260,10",CastleBridge:"p[1,2,4,9]10001000100010001000100010001000122212223222322232223222322232223222322232223222322232221222122213331333133313331333133313331333",CastleChain:"p[0,1,3]x014,1x013,1x014,22x011,12x013,22x011,12x012,102x012,22x011,12x012,102x012,22x011,12x013,22x011,12x012,102x012,22x013,",CastleDoor:{normal:"p[2,9]x17,0x17,0x17,0x17,0x17,0x17,x017,1110x17,0x17,0x17,0x17,0x17,01111x016,x15,x06,11110111x010,11011x012,1x017,1x014,11x014,1x0416,",Alt2:["filter",["Scenery","CastleDoor","normal"],"Alt2"]},CastleFlag:"p[0,1,6,8]02x011,222x011,2x012,3x111,03x15,3x15,03x15,3x15,0311x37,1103111x35,11103111133311110311133133111031113111311103x111,03x012,3x012,3x012,3x012,3x012,3x012,3x012,3x011,",CastleRailing:{normal:"p[0,2,5,9]2222x07,x25,3332x07,2x37,2x07,2x37,2x07,2x37,2x07,2x37,2x07,2x37,2x07,23333111x29,1111",Alt2:["filter",["Scenery","CastleRailing","normal"],"Alt2"]},CastleRailingFilled:{normal:"p[2,5,9]11112220222x15,222122202221x27,122202221x27,1x07,1x27,1x27,1x27,1x27,1x27,1x27,12222000x19,0000",
Alt2:["filter",["Scenery","CastleRailingFilled","normal"],"Alt2"]},CastleTop:{normal:"p[2,9]x17,0x17,0x17,0x17,0x17,0x17,0x17,0x17,0x17,x025,1110x17,0x17,0x17,0x17,0x17,0x17,0x17,0x17,01111x024,x17,x09,x17,0x17,x09,x17,0x17,x09,x17,x025,11101111x08,1110x17,01111x08,1110x17,01111x08,11101111x024,x17,x09,x17,0x17,x09,x17,0x17,x09,x17,x025,11101111x08,1110x17,01111x08,1110x17,01111x08,11101111x024,",Alt2:["filter",["Scenery","CastleTop","normal"],"Alt2"]},CastleWall:{normal:"p[0,2,5,9]2222x07,x25,3332x07,2x37,2x07,2x37,2x07,2x37,2x07,2x37,2x07,2x37,2x07,23333111x29,1111x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,x37,1x37,1x37,1x37,1x37,1x37,x117,3331x37,1x37,1x37,1x37,1x37,13333x116,",Alt2:["filter",["Scenery","CastleWall","normal"],"Alt2"]},Cloud1:{normal:"p[0,1,2,19]x014,2222x027,211112x024,22x16,2x022,2x18,202x020,2x19,212x019,2x16,3x15,2x017,211133111311112x016,21113x110,2x013,222x116,2002x08,2x119,20212x06,2x121,2112x06,x125,2020022x126,2122x130,22x130,202x128,20002113x111,3x111,2x05,2113113x16,3x113,2x05,2113333111333311113x18,200002x15,x36,1x35,x19,x06,2221111331111333x18,22x09,2x16,2x18,21122x012,221112022111122022x016,22200002222x010,",Alt2:["filter",["Scenery","Cloud1","normal"],"Alt2"]},Cloud2:{normal:"p[0,1,2,19]x014,2222x012,2222x027,211112x010,211112x024,22x16,2x07,22x16,2x022,2x18,20200002x18,202x020,2x19,2120002x19,212x019,2x16,3x15,2002x16,3x15,2x017,2111331113111120211133111311112x016,21113x110,221113x110,2x013,222x132,2002x08,2x135,20212x06,2x137,2112x06,x141,2020022x142,2122x146,22x146,202x144,20002113x111,3x115,3x111,2x05,2113113x16,3x18,3x16,3x113,2x05,21133331113333111131333111333311113x18,200002x15,x36,1x35,1111x36,1x35,x19,x06,2221111331111333x17,331111333x18,22x09,2x16,2x18,2x16,2x18,21122x012,2211120221111220221112022111122022x016,22200002222x05,22200002222x010,",Alt2:["filter",["Scenery","Cloud2","normal"],"Alt2"]},Cloud3:{normal:"p[0,1,2,19]x014,2222x012,2222x012,2222x027,211112x010,211112x010,211112x024,22x16,2x07,22x16,2x07,22x16,2x022,2x18,20200002x18,20200002x18,202x020,2x19,2120002x19,2120002x19,212x019,2x16,3x15,2002x16,3x15,2002x16,3x15,2x017,21113311131111202111331113111120211133111311112x016,21113x110,221113x110,221113x110,2x013,222x148,2002x08,2x151,20212x06,2x153,2112x06,x157,2020022x158,2122x162,22x162,202x160,20002113x111,3x115,3x115,3x111,2x05,2113113x16,3x18,3x16,3x18,3x16,3x113,2x05,211333311133331111313331113333111131333111333311113x18,200002x15,x36,1x35,1111x36,1x35,1111x36,1x35,x19,x06,2221111331111333x17,331111333x17,331111333x18,22x09,2x16,2x18,2x16,2x18,2x16,2x18,21122x012,22111202211112202211120221111220221112022111122022x016,22200002222x05,22200002222x05,22200002222x010,",Alt2:["filter",["Scenery","Cloud3","normal"],"Alt2"]},Fence:"p[0,2,5,9]000023222331x08,2322333100003322232233312222333323223331333311112322333x15,000023223331x08,23223331x08,23232331x08,23232331x08,2323233100003322232323312222333323232331333311112322233x15,000023222331x08,23222331x08,232223310000",Flag:{normal:"p[0,1,14]x116,0x18,x25,1100x16,22121221000x15,211211210000111121222121x05,11122212221x06,11x27,1x07,111222111x08,x18,x09,x17,x010,x16,x011,x15,x012,1111x013,111x014,11x015,1",Alt:"p[0,5,16]x116,0x18,x25,1100x16,22121221000x15,211211210000111121222121x05,11122212221x06,11x27,1x07,111222111x08,x18,x09,x17,x010,x16,x011,x15,x012,1111x013,111x014,11x015,1",Alt2:["same",["Scenery","Flag","Alt"]]},FlagPole:{normal:"p[13]x0288,",Alt:"p[1]x0288,",Alt2:["same",["Scenery","FlagPole","Alt"]],Shrooms:"x06888,"},FlagTop:{normal:"p[0,2,13,14]001111000123331012x35,112x35,11x36,11x36,10133331000111100",Alt:"p[0,1,3,4]002222000213332021x35,221x35,22x36,22x36,20233332000222200",Alt2:["same",["Scenery","FlagTop","Alt"]],Shrooms:"p[0,2,6,8]001111000123331012x35,112x35,11x36,11x36,10133331000111100"},HillLarge:"p[0,2,14]x037,x16,x071,111x26,111x066,11x212,11x063,1x213,1221x061,1x213,111221x059,1x214,1112221x057,1x215,11122221x055,1x213,112111x25,1x053,1x214,11221x27,1x051,1x215,11x211,1x049,1x216,11x212,1x047,1x232,1x045,1x234,1x043,1x236,1x041,1x238,1x039,1x240,1x037,1x242,1x035,1x244,1x033,1x246,1x031,1x213,1x223,1x210,1x029,1x213,111x221,111x210,1x027,1x214,111x221,111x211,1x025,1x215,111x221,111x212,1x023,1x213,112111x218,112111x213,1x021,1x214,11221x219,11221x215,1x019,1x215,11x222,11x219,1x017,1x216,11x222,11x220,1x015,1x264,1x013,1x266,1x011,1x268,1x09,1x270,1x07,1x272,1x05,1x274,10001x276,101x278,1",HillSmall:"p[0,2,14]x021,x16,x039,111x26,111x034,11x212,11x031,1x213,1221x029,1x213,111221x027,1x214,1112221x025,1x215,11122221x023,1x213,112111x25,1x021,1x214,11221x27,1x019,1x215,11x211,1x017,1x216,11x212,1x015,1x232,1x013,1x234,1x011,1x236,1x09,1x238,1x07,1x240,1x05,1x242,10001x244,101x246,1",Peach:"p[0,1,2,6,8]x051,303303x010,x36,x09,x48,x07,x410,x07,4443234444x07,433233434x06,x37,434x07,x38,44x05,3444x35,44x05,34433334444x06,x36,4444x06,4413341444x05,44133111144x05,431111331440000x39,144x05,x37,1444x07,44111144x07,x110,x05,x112,0000x112,0001111x46,111100x414,00x45,1111x45,0",PlatformString:{normal:"x008,",Castle:"x018,"},PlantLarge:{normal:"p[0,2,5,13]x06,1111x010,11333311x07,1x38,1x05,1x310,10001x312,1001x312,101x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,11x314,101x312,1001x312,1001x312,10001x310,1000011x38,11x05,1113333111x07,x18,x09,x17,x08,1x26,1x08,12222121x08,12222121x08,12222121x08,12222121x08,11222211x09,121121x09,12122121x08,1x26,1x08,12222121x08,12222121x08,12222121x08,12222121x08,11222211x09,121121x09,121221210000",Alt:"p[0,1,2,3,5]x06,3333x010,33111133x07,3x18,3x05,3x110,30003x112,3003x112,303x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,33x114,303x112,3003x112,3003x112,30003x110,3000033x18,33x05,3331111333x07,x38,x09,x37,x08,2x46,2x08,24444242x08,24444242x08,24444242x08,24444242x08,22444422x09,242242x09,24244242x08,2x46,2x08,24444242x08,24444242x08,24444242x08,24444242x08,22444422x09,242242x09,242442420000",Alt2:["same",["Scenery","PlantLarge","Alt"]]},PlantSmall:{normal:"p[0,2,5,13]x05,1111x08,11333311x05,1x38,10001x310,101x312,11x312,11x312,11x312,11x312,101x310,10011x38,110001113333111x05,x18,x07,x17,x06,1x26,1x06,12222121x06,12222121x06,12222121x06,12222121x06,11222211x07,121121x07,12122121x06,1x26,1x06,12222121x06,12222121x06,12222121x06,12222121x06,11222211x07,121121x07,12122121000",Alt:"p[0,1,2,3,5]x05,3333x08,33111133x05,3x18,30003x110,303x112,33x112,33x112,33x112,33x112,303x110,30033x18,330003331111333x05,x38,x07,x37,x06,2x46,2x06,24444242x06,24444242x06,24444242x06,24444242x06,22444422x07,242242x07,24244242x06,2x46,2x06,24444242x06,24444242x06,24444242x06,24444242x06,22444422x07,242242x07,24244242000",Alt2:["same",["Scenery","PlantSmall","Alt"]]},Railing:{normal:"p[0,2,13]2x06,221x05,12010001220100012200111022x06,22x06,22x06,2",Night:"p[0,1,3]1x06,112x05,21020002110200021100222011x06,11x06,11x06,1"},ShroomTrunk:["multiple","vertical",{top:"p[2,5,9]0x114,00x114,00x114,00x114,00x114,00111121111211110021121211212112001221112211122100x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,0",middle:"p[2,5]0x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,00x114,0"}],String:{normal:"x058,",Alt2:"x018,"},StringCornerLeft:{normal:"p[0,5,9]000x17,00x18,0111222000011x25,00112220222011220002201122202220110x25,00110022200011x08,",Alt2:"p[0,1,3,4]000x17,00x18,0111222000011x25,00112223222011223332201122232220110x25,00110022200011x08,"},StringCornerRight:{normal:"p[0,5,9]x17,000x18,x05,222111000x25,11002220222110220002211022202221100x25,0110002220011x08,11",Alt2:"p[0,1,3,4]x17,000x18,x05,222111000x25,11002223222110223332211022232221100x25,0110002220011x08,11"},Toad:"p[0,1,2,6,8]x038,1111x010,x18,x06,144411114441000114441441444110011441444414411044111144441111x45,1114444111x46,1111441111x46,x110,x45,1133233233114401143323323341100300x38,00303330333223330x37,443333443333003x410,300004444333344440000444x36,4440000444x36,444x05,x110,x05,x112,000444x18,444041444x16,4441x47,1111x412,1111x46,",TreeTrunk:{normal:"p[2,9]x112,0x17,0x17,0x16,0x17,0x17,0x112,",Underworld:["filter",["Scenery","TreeTrunk","normal"],"Underworld"],Alt2:["filter",["Scenery","TreeTrunk","normal"],"Alt2"]},Water:{normal:["multiple","vertical",{top:"p[0,1,17]x028,1x06,121000012210011222100x26,1121x26,1212222122122112",middle:"p[17]x088,"}],Underwater:["multiple","vertical",{top:"p[1,17,0]x212,0x26,010222201102200111022x16,0010x16,010111101101100x19,",middle:"p[17]x088,"}],Night:["multiple","vertical",{top:"p[2,1,19]x028,1x06,121000012210011222100x26,1121x26,1212222122122112",middle:"p[19]x088,"}],Castle:{normal:["multiple","vertical",{top:"p[0,1,8]x028,1x06,121000012210011222100x26,1121x26,1212222122122112",middle:"p[8]x088,"}],Underwater:["multiple","vertical",{top:"p[1,17,20]x212,0x26,010222201102200111022x16,0010x16,010111101101100x19,",middle:"p[20]x088,"}]}}},Text:{DecorativeBack:["multiple","corners",{top:"x054,",topRight:"00",right:"x024,",bottomRight:"00",bottom:"x024,",bottomLeft:"00",left:"x054,",topLeft:"00",middle:"x094,"}],DecorativeDot:"p[0,2,22]220221011",TextA:"p[0,1]00111000110110110001111000x111,000111100011",TextB:"p[0,1]x16,0110001111000x18,0110001111000x18,0",TextC:"p[0,1]0011110011001111x05,11x05,11x06,1100110011110",TextD:"p[0,1]x15,0011001101100011110001111000111100110x15,00",TextE:"p[0,1]x19,x05,11x05,x16,011x05,11x05,x17,",TextF:"p[0,1]x19,x05,11x05,x16,011x05,11x05,11x05,",TextG:"p[0,1]0011110011001111x05,1100x15,00011011001100x15,",TextH:"p[0,1]1100011110001111000x111,0001111000111100011",TextI:"p[0,1]0x16,00011x05,11x05,11x05,11x05,11000x16,",TextK:"p[0,1]1100011110011011011001111000x15,0011011101100111",TextL:"p[0,1]011x05,11x05,11x05,11x05,11x05,11x05,x16,",TextM:"p[0,1]11000x15,0x119,0101111000111100011",TextN:"p[0,1]11000x15,00x16,0x111,0x16,00x15,00011",TextO:"p[0,1]0x15,0110001111000111100011110001111000110x15,0",TextP:"p[0,1]x16,01100011110001111000x18,011x05,11x05,",TextQ:"p[0,1]0x15,0110001111000111100011110x16,001100111101",TextR:"p[0,1]x16,0110001111000111100x18,0011011101100111",TextS:"p[0,1]0111100110011011x06,x15,x06,1111000110x15,0",TextT:"p[0,1]0x16,00011x05,11x05,11x05,11x05,11x05,1100",TextU:"p[0,1]1100011110001111000111100011110001111000110x15,0",TextV:"p[0,1]1100011110001111000x15,01110x15,000111x05,1000",TextW:"p[0,1]1100011110001111010x119,0x15,00011",TextY:"p[0,1]011001101100110110011001111000011x05,11x05,1100",Text0:"",Text1:"p[0,1]001100011100001100001100001100001100x16,",Text2:"p[0,1]0x15,011000110000111001111001111001110000x17,",Text3:"p[0,1]0x16,00001100001100001111x06,1111000110x15,0",Text4:"p[0,1]0001110001111001101101100110x17,000011x05,110",Text5:"p[0,1]x16,011x05,x16,x06,11x05,1111000110x15,0",Text6:"p[0,1]0011110011000011x05,x16,0110001111000110x15,0",Text7:"p[0,1]x19,00011000011000011000011x05,11x05,11000",Text8:"p[0,1]0x15,0110001111000110x15,0110001111000110x15,0",Text9:"p[0,1]0x15,0110001111000110x16,x05,1100001100111100",TextPeriod:"p[0,1]x032,11000110",TextExclamationMark:"p[0,1]00110011110111101111001100011x08,110",TextColon:"p[0,1]x06,1100011x08,1100011x012,",TextSlash:"p[0,1]x06,1x05,1x05,1x05,1x05,1x05,1x05,1x06,",Text1up:"p[0,1]0110011001011110111001100101100101100110010110010110011001011001011001100101111001100x15,0110001111001110011000",Text100:"p[0,1]001000100010011001010101001001010101001001010101001001010101001001010101011101110111011100100010",Text200:"p[0,1]01100010001010010101010100010101010100100101010101000101010110000101010x15,01110x17,00100010",Text400:"p[0,1]10100010001010100101010110100101010110100101010x15,0101010x15,01010101001001110111001000100010",Text500:"p[0,1]11110010001010000101010110000101010111100101010100010101010100010101010x15,01110x16,000100010",Text800:"p[0,1]011000100010100101010101010101010101011001010101101101010101100101010101100101110111011000100010",Text1000:"p[0,1]00100010001000100110010101010101001001010101010100100101010101010010010101010101001001010101010101110111011101110111001000100010",Text2000:"p[0,1]01100010001000101001010101010101000101010101010100100101010101010100010101010101100001010101010x15,011101110x17,001000100010",Text4000:"p[0,1]101000100010001010100101010101011010010101010101101001010101010x15,01010101010x15,01010101010100100111011101110010001000100010",Text5000:"p[0,1]11110010001000101000010101010101100001010101010111100101010101010001010101010101000101010101010x15,011101110x16,0001000100010",Text8000:"p[0,1]01100010001000101001010101010101010101010101010101100101010101011011010101010101100101010101010110010111011101110110001000100010",TextColoredCopyright:"p[0,22]0011110001000010100110011010000110100001100110010100001000111100",TextColoredD:"p[0,22]x15,0011001101100011110001111000111100110x15,00",TextColoredE:"p[0,22]x19,x05,11x05,x16,011x05,11x05,x17,",TextColoredI:"p[0,22]0x16,00011x05,11x05,11x05,11x05,11000x16,",TextColoredN:"p[0,22]11000x15,00x16,0x111,0x16,00x15,00011",TextColoredO:"p[0,22]0x15,0110001111000111100011110001111000110x15,0",TextColoredT:"p[0,22]0x16,00011x05,11x05,11x05,11x05,11x05,1100",TextColored1:"p[0,22]001100011100001100001100001100001100x16,",TextColored5:"p[0,22]x16,011x05,x16,x06,11x05,1111000110x15,0",TextColored8:"p[0,22]0x15,0110001111000110x15,0110001111000110x15,0",TextColored9:"p[0,22]0x15,0110001111000110x16,x05,1100001100111100",TextLargeE:"p[0,2,22]000x211,000x212,000x212,00x213,00x213,1x214,1x214,1x214,1x26,x19,x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,00x26,1x26,10x26,1x26,10x26,10x16,0x214,0x214,0x214,00x213,00x213,101x212,101x212,1001x211,100x113,000x112,000x112,0000x111,",TextLargeP:"p[0,2,22]x211,0000x212,000x212,000x213,00x213,00x214,0x214,0x214,0x26,1x27,1x26,1x27,1x26,1x27,1x26,1x26,11x26,1x26,11x26,1x25,111x26,1x25,111x26,122221110x26,10x16,0x26,10x15,00x26,10x15,00x26,101111000x26,1x08,x26,1x08,x26,1x08,x26,1x09,x16,x09,x16,x09,x16,x09,x16,x08,",TextLargeR:"p[0,2,22]x211,0000x212,000x212,000x213,00x213,00x214,0x214,0x214,0x26,1x27,1x26,1x27,1x26,1x27,1x26,1x26,11x26,1x25,111x26,1x26,11x26,1x27,1x26,1x27,0x26,10x26,0x26,10x26,0x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,10x16,00x16,0x16,00x16,0x16,00x16,0x16,00x16,",TextLargeS:"p[0,2,22]000x28,x06,x210,x05,x210,0000x212,000x212,00x214,0x214,0x214,0x27,x17,0x28,x17,0x29,x15,0x211,11101x211,000111x29,00001111x28,000x16,x26,0x214,0x214,0x214,10x212,110x212,1101x210,11101x210,111001x28,111000x112,0000x110,x05,x110,x06,x18,000",TextLargeU:"p[0,2,22]x26,00x26,0x26,00x26,0x26,00x26,0x26,00x26,0x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x214,1x214,1x214,10x212,110x212,1101x210,11101x210,111001x28,111000x112,0000x110,x05,x110,x06,x18,000",TextHugeA:"p[0,2,22]000x28,x06,x210,x05,x210,0000x212,000x212,00x214,0x214,0x214,0x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x214,1x214,1x214,1x214,1x214,1x214,1x214,1x214,1x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,10x16,00x16,0x16,00x16,0x16,00x16,0x16,00x16,",TextHugeB:"p[0,2,22]x211,0000x212,000x212,000x213,00x213,00x214,0x214,0x214,0x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,1x27,1x26,1x27,1x26,1x27,1x26,1x26,11x26,1x25,111x26,1x26,11x26,1x27,1x26,1x27,0x26,11x26,0x26,11x26,0x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,1x27,1x26,1x27,1x26,1x27,1x26,1x26,11x26,1x26,11x26,1x25,111x26,1x25,111x26,1222211100x16,0x16,00x16,0x15,000x16,0x15,000x16,01111000",TextHugeI:"p[0,2,22]x26,0x26,0x26,0x26,0x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,1x26,10x16,0x16,0x16,0x16,",TextHugeM:"p[0,2,22]000x25,x06,x25,x06,x27,0000x27,x05,x27,0000x27,0000x29,00x29,000x29,00x29,00x222,0x222,0x222,0x26,11x26,11x26,1x26,11x26,11x26,1x26,11x26,11x26,1x26,11x26,11x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,1x26,10x26,10x26,10x16,00x16,00x16,0x16,00x16,00x16,0x16,00x16,00x16,0x16,00x16,00x16,",TextHugeO:"p[0,2,22]000x28,x06,x210,x05,x210,0000x212,000x212,00x214,0x214,0x214,0x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x214,1x214,1x214,10x212,110x212,1101x210,11101x210,111001x28,111000x112,0000x110,x05,x110,x06,x18,000",TextHugeR:"p[0,2,22]x211,0000x212,000x212,000x213,00x213,00x214,0x214,0x214,0x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,1x27,1x26,1x27,1x26,1x27,1x26,1x26,11x26,1x25,111x26,1x26,11x26,1x27,1x26,1x27,0x26,10x26,0x26,10x26,0x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,10x16,00x16,0x16,00x16,0x16,00x16,0x16,00x16,",TextHugeS:"p[0,2,22]000x28,x06,x210,x05,x210,0000x212,000x212,00x214,0x214,0x214,0x26,11x26,1x26,11x26,1x26,11x26,1x26,11x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x27,00x16,x28,0x16,0x29,x15,0x211,11101x211,000111x29,00001111x28,000x16,x26,0x26,11x26,0x26,11x26,0x26,01x26,1x26,01x26,1x26,10x26,1x26,10x26,1x26,10x26,1x26,10x26,1x214,1x214,1x214,10x212,110x212,1101x210,11101x210,111001x28,111000x112,0000x110,x05,x110,x06,x18,000",TextHugePeriod:"p[0,2,22]x0224,x26,0x26,0x26,0x26,0x26,1x26,1x26,1x26,10x16,0x16,0x16,0x16,"}}},FullScreenMario.FullScreenMario.settings.statistics={prefix:"FullScreenMario",doMakeContainer:!0,displayChanges:{Infinity:"INF"},containersArguments:[["table",{id:"dataDisplay",style:{position:"absolute",top:0,width:"100%",color:"white",fontSize:"21px",textTransform:"uppercase"}}],["tr",{style:{padding:"7px 14px 0 14px",textAlign:"center"}}]],defaults:{elementTag:"td"},values:{volume:{valueDefault:1},muted:{valueDefault:!1},power:{valueDefault:1,storeLocally:!1},traveled:{valueDefault:0},score:{valueDefault:0,digits:6,hasElement:!0,modularity:1e5,onModular:function(a){a.gainLife()}},time:{valueDefault:0,digits:3,hasElement:!0,minimum:0,triggers:{100:function(a){a.MapScreener.notime||a.AudioPlayer.playThemePrefixed("Hurry")}},onMinimum:function(a){a.killPlayer(a.player,!0)}},world:{valueDefault:0,hasElement:!0},coins:{valueDefault:0,hasElement:!0,modularity:100,onModular:function(a){a.gainLife()}},lives:{valueDefault:3,hasElement:!0},luigi:{valueDefault:0,storeLocally:!0}}},FullScreenMario.FullScreenMario.settings.touch={enabled:!1,styles:{Button:{elementInner:{style:{padding:".385cm",width:"1.4cm",height:"1.4cm",border:"4px solid rgb(238, 238, 238)",borderRadius:"100%",background:"rgb(175, 175, 175)",textAlign:"center",cursor:"pointer"}}},Joystick:{elementInner:{style:{width:"3.5cm",height:"3.5cm"}},circle:{style:{top:"21%",right:"21%",bottom:"21%",left:"21%",boxShadow:"0 0 1px 4px rgb(238, 238, 238)",background:"rgb(175, 175, 175)",borderRadius:"100%",cursor:"pointer"}},tick:{style:{width:".28cm",height:"4px",background:"rgb(238, 238, 238)"}},dragLine:{style:{width:".49cm",height:"4px",background:"rgb(210, 210, 210)",transition:"117ms opacity"}},dragShadow:{style:{background:"rgba(231, 231, 231, .84)",boxShadow:"0 0 7px 3px rgba(175, 175, 175, .7)",transition:"117ms all"}}}},controls:[{name:"Joystick",control:"Joystick",position:{vertical:"bottom",horizontal:"left",offset:{left:"0",top:"-3.5cm"}},directions:[{name:"Up",degrees:0,neighbors:["UpLeft","UpRight"]},{name:"UpRight",degrees:45,neighbors:["Up","Right"],pipes:{activated:{onkeydown:["right"]},deactivated:{onkeyup:["right"]}}},{name:"Right",degrees:90,neighbors:["UpRight","DownRight"],pipes:{activated:{onkeydown:["right"]},deactivated:{onkeyup:["right"]}}},{name:"DownRight",degrees:135,neighbors:["Right","Down"],pipes:{activated:{onkeydown:["down","right"]},deactivated:{onkeyup:["down","right"]}}},{name:"Down",degrees:180,neighbors:["DownRight","DownLeft"],pipes:{activated:{onkeydown:["down"]},deactivated:{onkeyup:["down"]}}},{name:"DownLeft",degrees:225,neighbors:["Down","left"],pipes:{activated:{onkeydown:["down","left"]},deactivated:{onkeyup:["down","left"]}}},{name:"Left",degrees:270,neighbors:["DownLeft","UpLeft"],pipes:{activated:{onkeydown:["left"]},deactivated:{onkeyup:["left"]}}},{name:"UpLeft",degrees:315,neighbors:["Left","Up"],pipes:{activated:{onkeydown:["left"]},deactivated:{onkeyup:["left"]}}}]},{name:"A",control:"Button",label:"A",position:{vertical:"bottom",horizontal:"right",offset:{left:"-1.56cm",top:"-2.8cm"}},pipes:{activated:{onkeydown:["up"]},deactivated:{onkeyup:["up"]}}},{name:"B",control:"Button",label:"B",position:{vertical:"bottom",horizontal:"right",offset:{left:"-2.8cm",top:"-1.56cm"}},pipes:{activated:{onkeydown:["sprint"]},deactivated:{onkeydown:["sprint"]}}},{name:"Start",control:"Button",label:"Start",styles:{elementInner:{style:{width:"7em",height:"auto",padding:".21cm",borderRadius:"7px",fontSize:"77%"}}},position:{vertical:"bottom",horizontal:"center",offset:{top:"-1.12cm"}},pipes:{activated:{onmousedown:["rightclick"]}}}]},FullScreenMario.FullScreenMario.settings.ui={globalName:"FSM",styleSheet:{".FullScreenMario":{color:"white"},"@font-face":{"font-family":"'Press Start'",src:"url('Fonts/pressstart2p-webfont.eot')",src:["url('Fonts/pressstart2p-webfont.eot?#iefix') format('embedded-opentype')","url('Fonts/pressstart2p-webfont.woff') format('woff')","url('Fonts/pressstart2p-webfont.ttf') format('truetype')","url('Fonts/pressstart2p-webfont.svg') format('svg')"].join(", "),"font-weight":"normal","font-style":"normal"}},helpSettings:{globalNameAlias:"{%%%%GAME%%%%}",openings:["Hi, thanks for playing FullScreenMario! It looks like you're using the console.","There's not really any way to stop you from messing around so if you'd like to know the common cheats, enter `{%%%%GAME%%%%}.UserWrapper.displayHelpOptions()` here.","If you'd like, go ahead and look around the source code. There are a few surprises you might have fun with... ;)","http://www.github.com/FullScreenShenanigans/FullScreenMario"],options:{Map:[{title:"{%%%%GAME%%%%}.MapsHandler.setMap",description:"Go to a specified map and location.",usage:"{%%%%GAME%%%%}.MapsHandler.setMap(<map>[, <location>]);",examples:[{code:"{%%%%GAME%%%%}.MapsHandler.setMap('1-1');",comment:"Starts map 1-1."},{code:"{%%%%GAME%%%%}.MapsHandler.setMap('1-2', 1);",comment:"Starts map 1-2, at the second location."},{code:"{%%%%GAME%%%%}.MapsHandler.setMap('Random');",comment:"Starts the random map."},{code:"{%%%%GAME%%%%}.MapsHandler.setMap('Random', 'Underworld');",comment:"Starts the random map in the Underworld."}]}],Things:[{title:"{%%%%GAME%%%%}.addThing",description:"Adds a new Thing to the game.",usage:"{%%%%GAME%%%%}.addThing(<thing>, left, top);",examples:[{code:"{%%%%GAME%%%%}.addThing('Goomba', 256, 384);",comment:"Adds a Goomba to the game."},{code:"{%%%%GAME%%%%}.addThing('Mushroom', {%%%%GAME%%%%}.player.right + 80, {%%%%GAME%%%%}.player.top);",comment:"Adds a Mushroom to the right of the player."},{code:"{%%%%GAME%%%%}.addThing(['Koopa', { 'smart': true }], 256, 368);",comment:"Adds a smart Koopa to the game."},{code:"{%%%%GAME%%%%}.addThing({%%%%GAME%%%%}.ObjectMaker.make('Koopa', { 'smart': true, 'jumping': true }), 256, 368);",comment:"Adds a smart, jumping Koopa to the game."}]},{title:"{%%%%GAME%%%%}.ObjectMaker.getProperties",description:"Retrieves the defaults for different types of objects.",usage:"{%%%%GAME%%%%}.ObjectMaker.getProperties();"},{title:"{%%%%GAME%%%%}.GroupHolder.get*******Group",description:"Retrieves the appropriate group of Things being manipulated. Choices are 'Text', 'Character', 'Solid', and 'Scenery'.",usage:"{%%%%GAME%%%%}.get*******Group();",examples:[{code:"{%%%%GAME%%%%}.GroupHolder.getCharacterGroup();",comment:"Retrieves the currently playing Characters."}]},{title:"{%%%%GAME%%%%}.GroupHolder.get*******",description:"Retrieves the numbered Thing from its group.",usage:"{%%%%GAME%%%%}.GroupHolder.get*******(<index>);",examples:[{code:"{%%%%GAME%%%%}.GroupHolder.getCharacter(0);",comment:"Retrieves the first playing Character."},{code:"{%%%%GAME%%%%}.GroupHolder.getCharacter({%%%%GAME%%%%}.GroupHolder.getCharacterGroup().length - 1);",comment:"Retrieves the last playing Character."}]}],Physics:[{title:"{%%%%GAME%%%%}.shiftBoth",description:"Shifts a Thing horizontally and/or vertically.",usage:"{%%%%GAME%%%%}.shiftBoth(<thing>, <dx>[, <dy>]);",examples:[{code:"{%%%%GAME%%%%}.shiftBoth({%%%%GAME%%%%}.player, 700);",comment:"Shifts the player 700 spaces to the right"},{code:"{%%%%GAME%%%%}.shiftBoth({%%%%GAME%%%%}.player, 0, -{%%%%GAME%%%%}.MapScreener.height);",comment:"Shifts the player to the top of the screen."}]},{title:"{%%%%GAME%%%%}.killNormal",description:"Kills a specified Character with animation.",usage:"{%%%%GAME%%%%}.killNormal(<thing>)",examples:[{code:"{%%%%GAME%%%%}.killNormal({%%%%GAME%%%%}.GroupHolder.getCharacter(0)",comment:"Kills the first playing Character."},{code:"{%%%%GAME%%%%}.GroupHolder.getSceneryGroup().forEach({%%%%GAME%%%%}.killNormal)",comment:"Kills all playing Scenery."}]},{title:"{%%%%GAME%%%%}.player.gravity",description:"Sets the current Player's gravity.",usage:"{%%%%GAME%%%%}.player.gravity = <number>;",examples:[{code:"{%%%%GAME%%%%}.player.gravity = {%%%%GAME%%%%}.MapScreener.gravity / 2;",comment:"Sets the player's gravity to half the default."}]}],Powerups:[{title:"{%%%%GAME%%%%}.playerShroom",description:"Simulates the player hitting a Mushroom.",usage:"{%%%%GAME%%%%}.playerShroom({%%%%GAME%%%%}.player)"},{title:"{%%%%GAME%%%%}.playerStar",description:"Simulates the player hitting a Star.",usage:"{%%%%GAME%%%%}.playerStar({%%%%GAME%%%%}.player)"}],Statistics:[{title:"{%%%%GAME%%%%}.StatsHolder.set('coins')",description:"Sets the number of coins you have.",usage:"{%%%%GAME%%%%}.StatsHolder.set('coins', <number>);",examples:[{code:"{%%%%GAME%%%%}.StatsHolder.set('coins', 7);",comment:"Sets your number of coins to seven."}]},{title:"{%%%%GAME%%%%}.StatsHolder.set('lives')",description:"Sets the number of lives you have left.",usage:"{%%%%GAME%%%%}.StatsHolder.set('lives', <number>);",examples:[{code:"{%%%%GAME%%%%}.StatsHolder.set('lives', 7);",comment:"Sets your number of lives to seven."},{code:"{%%%%GAME%%%%}.StatsHolder.set('lives', Infinity);",comment:"Sets your number of lives to Infinity and beyond."}]},{title:"{%%%%GAME%%%%}.StatsHolder.set('time')",description:"Sets the amount of time left in the map.",usage:"{%%%%GAME%%%%}.StatsHolder.set('time', <number>)",examples:[{code:"{%%%%GAME%%%%}.StatsHolder.set('time', 700);",comment:"Sets your amount of lifes to seven hundred."},{code:"{%%%%GAME%%%%}.StatsHolder.set('time', Infinity);",comment:"Sets your amount of time left to Infinity and beyond."}]}]}},sizeDefault:"Wide",sizes:{NES:{width:512,height:464,full:!1},Wide:{width:1/0,height:464,full:!1},Large:{width:1/0,height:1/0,full:!1},"Full!":{width:1/0,height:1/0,full:!0}},schemas:[{title:"Options",generator:"OptionsTable",options:[{title:"Volume",type:"Number",minimum:0,maximum:100,source:function(a){return Math.round(100*a.AudioPlayer.getVolume())},update:function(a,b){a.AudioPlayer.setVolume(b/100)}},{title:"Mute",type:"Boolean",source:function(a){return a.AudioPlayer.getMuted()},enable:function(a){a.AudioPlayer.setMutedOn()},disable:function(a){a.AudioPlayer.setMutedOff()}},{title:"Speed",type:"Select",options:function(){return[".25x",".5x","1x","2x","5x"]},source:function(){return"1x"},update:function(a,b){a.GamesRunner.setSpeed(Number(b.replace("x","")))},storeLocally:!0},{title:"View Mode",type:"ScreenSize"},{title:"Framerate",type:"Select",options:function(){return["60fps","30fps"]},source:function(a){return 1/a.PixelDrawer.getFramerateSkip()*60+"fps"},update:function(a,b){var c=Number(b.replace("fps",""));a.PixelDrawer.setFramerateSkip(1/c*60)},storeLocally:!0},{title:"Touch Controls",type:"Boolean",storeLocally:!0,source:function(){return!1},enable:function(a){setTimeout(function(){a.TouchPasser.enable()})},disable:function(a){setTimeout(function(){a.TouchPasser.disable()})}},{title:"Tilt Controls",type:"Boolean",storeLocally:!0,source:function(){return!1},enable:function(a){window.ondevicemotion=a.InputWriter.makePipe("ondevicemotion","type")},disable:function(){window.ondevicemotion=void 0}}],actions:[{title:"Screenshot",action:function(a){a.takeScreenshot("FullScreenMario "+(new Date).getTime())}}]},{title:"Controls",generator:"OptionsTable",options:function(a){return a.map(function(a){return{title:a[0].toUpperCase()+a.substr(1),type:"Keys",storeLocally:!0,source:function(b){return b.InputWriter.getAliasAsKeyStrings(a).map(function(a){return a.toLowerCase()})},callback:function(b,c,d){b.InputWriter.switchAliasValues(a,[b.InputWriter.convertKeyStringToAlias(c)],[b.InputWriter.convertKeyStringToAlias(d)])}}})}(["left","right","up","down","sprint","pause"])},{title:"Mods!",generator:"OptionsButtons",keyActive:"enabled",assumeInactive:!0,options:function(a){return a.ModAttacher.getMods()},callback:function(a,b,c){a.ModAttacher.toggleMod(c.getAttribute("value")||c.textContent)}},{title:"Editor",generator:"LevelEditor"},{title:"Maps",generator:"MapsGrid",rangeX:[1,4],rangeY:[1,8],extras:{"Map Generator!":function(){var a=function(a){return a.split("").sort(function(){return.5-Math.random()}).reverse().join("")},b=function(){return a(String((new Date).getTime()))};return{title:"Map Generator!",callback:function(a,c,d,e){var f=e.target.parentNode,g=f.querySelector(".randomInput");g.value=g.value.replace(/[^\d]/g,""),g.value||(g.value=b()),a.LevelEditor.disable(),a.NumberMaker.resetFromSeed(g.value),a.setMap("Random"),g.getAttribute("custom")||(g.value=b())},extraElements:[["input",{className:"randomInput maps-grid-input",type:"text",value:b(),onchange:function(a){a.target.setAttribute("custom",!0)}}]]}}()},callback:function(a,b,c){a.LevelEditor.disable(),a.setMap(c.getAttribute("value")||c.textContent)}}]};var time=Date.now();document.onreadystatechange=function(a){if("complete"===a.target.readyState){var b=new UserWrappr.UserWrappr(FullScreenMario.FullScreenMario.prototype.proliferate({GameStartrConstructor:FullScreenMario.FullScreenMario},FullScreenMario.FullScreenMario.settings.ui,!0));console.log("It took "+(Date.now()-time)+" milliseconds to start."),b.displayHelpMenu()}};var app=angular.module("app",["nemo","ui.router","templates-main"]);app.config(["$locationProvider","$stateProvider","$urlRouterProvider","nemoInputDirectiveCreatorProvider",function($locationProvider,$stateProvider,$urlRouterProvider,inputProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$stateProvider.state("home",{url:"/",templateUrl:"home.html",controller:"HomeCtrl",pageTitle:"Welcome to Ricardomallols.com homepage!"
}),$urlRouterProvider.otherwise("/"),inputProvider.input("captchamario",{template:'<div><iframe src="vendor/fullScreenMario/source/index.html" style="border: 1px solid blue; height: 460px;"/></div>',linkFn:function(scope,element,attrs,controllers){function handlingMsg(e){console.log("***works from the parent",e.data)}addEventListener("message",handlingMsg,!0)}})}]),app.run(["$rootScope","browser",function($rootScope,browser){$rootScope.userAgent=browser.getUA(),$rootScope.$on("$stateChangeSuccess",function(event,toState){$rootScope.pageTitle=toState.pageTitle+" | menzit"})}]),app.factory("browser",["$window",function($window){function getUA(){return ua||(ua=calculateUA()),ua}function calculateUA(){var userAgent=$window.navigator.userAgent,browsers=getBrowserExpressions();for(var key in browsers)if(!ua&&browsers[key].test(userAgent))return key;return"unknown"}function getBrowserExpressions(){var browserExpressions={};return browserExpressions[browsers.chrome]=/chrome/i,browserExpressions[browsers.safari]=/safari/i,browserExpressions[browsers.firefox]=/firefox/i,browserExpressions[browsers.ie]=/trident/i,browserExpressions}function isChrome(){return getUA()===browsers.chrome}function isSafari(){return getUA()===browsers.safari}function isFirefox(){return getUA()===browsers.firefox}function isIE(){return getUA()===browsers.ie}var ua,browsers={chrome:"chrome",safari:"safari",firefox:"firefox",ie:"ie"};return{getUA:getUA,isChrome:isChrome,isSafari:isSafari,isFirefox:isFirefox,isIE:isIE}}]),angular.module("nemo",[]).config(["nemoInputDirectiveCreatorProvider","nemoValidationDirectiveCreatorProvider","nemoUtilsProvider","captchaProvider","checkboxProvider","serverValidationProvider",function(inputProvider,validationProvider,utilsProvider,captchaProvider,checkboxProvider,serverValidation){inputProvider.input("text",{template:'<input type="text" />',defaultValue:""}).input("select",{template:'<select data-ng-options="option.value as option.text for option in model.options"><option value="">Please select...</option></select>',defaultValue:""}).input("hidden",{template:'<input type="hidden" ng-value="model.value" />',defaultValue:""}).input("password",{template:'<input type="password" />',defaultValue:""}).input("email",{template:'<input type="text" />',defaultValue:""}).input("checkbox",checkboxProvider).input("captcha",captchaProvider),validationProvider.validation("required",{validateFn:function(value,validationRule,formHandlerController,ngModelController){return validationRule.value?!ngModelController.$isEmpty(value):!0}}).validation("inlist",{validateFn:function(value,validationRule){return value?utilsProvider.contains(validationRule.value,value):!0}}).validation("pattern",{validateFn:function(value,validationRule){return value?new RegExp(validationRule.value).test(value):!0}}).validation("notpattern",{validateFn:function(value,validationRule){return value?!new RegExp(validationRule.value).test(value):!0}}).validation("mustnotcontain",{validateFn:function(value,validationRule,formHandlerController){var targetValue=formHandlerController.getFieldValue(validationRule.value,!0);return value&&targetValue?value.toLowerCase().indexOf(targetValue.toLowerCase())<0:!0}}).validation("mustmatch",{validateFn:function(value,validationRule,formHandlerController){var targetValue=formHandlerController.getFieldValue(validationRule.value,!0);return value?value===targetValue:!0}}).validation("mustmatchcaseinsensitive",{validateFn:function(value,validationRule,formHandlerController){var targetValue=formHandlerController.getFieldValue(validationRule.value,!0);return value&&targetValue?value.toLowerCase()===targetValue.toLowerCase():!0}}).validation("minlength",{validateFn:function(value,validationRule){return value&&validationRule?value.length>=validationRule.value:!0}}).validation("maxlength",{validateFn:function(value,validationRule){return value&&validationRule?value.length<=validationRule.value:!0}}).validation("email",{validateFn:function(value,validationRule){return value&&validationRule.value?new RegExp(/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i).test(value):!0}}).validation("mustbeequal",{validateFn:function(value,validationRule){return value||value===!1?value===validationRule.value:!0}}).validation("dependentpattern",{validateFn:function(value,validationRule,formHandlerController){var otherFieldValue=formHandlerController.getFieldValue(validationRule.value,!0),regex=validationRule.patterns[otherFieldValue];return value?new RegExp(regex,"i").test(value):!0}}).validation("dependentrequired",{validateFn:function(value,validationRule,formHandlerController,ngModelController){var otherFieldValue=formHandlerController.getFieldValue(validationRule.value,!0),required=utilsProvider.contains(validationRule.when,otherFieldValue);return required?!ngModelController.$isEmpty(value):!0}}).validation("server",serverValidation)}]),angular.module("nemo").provider("nemoMessages",[function(){function set(key,value){messages[key]=value}function get(key){return messages[key]}var messages={};return{set:set,get:get,$get:function(){return{set:set,get:get}}}}]),angular.module("nemo").provider("nemoUtils",["nemoMessagesProvider",function(messagesProvider){"use strict";function capitalise(string){return string.charAt(0).toUpperCase()+string.slice(1)}function contains(list,item){var isFound=!1;return list&&list.length&&angular.forEach(list,function(listItem){isFound=isFound||item===listItem}),isFound}function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}}function forceServerInvalid(errorMessage,errorIndex,scope,ngModelCtrl){var validationId=scope.model.name+errorIndex;messagesProvider.set(validationId,errorMessage),ngModelCtrl.$setValidity(validationId,!1),setValidOnChange(scope,ngModelCtrl,validationId)}function setValidOnChange(scope,ngModelCtrl,validationId){var unregisterFn=scope.$watch(function(){return ngModelCtrl.$viewValue},function(newValue,oldValue){newValue!==oldValue&&(ngModelCtrl.$setValidity(validationId,!0),unregisterFn())})}return{capitalise:capitalise,contains:contains,debounce:debounce,forceServerInvalid:forceServerInvalid,$get:function(){return{capitalise:capitalise,contains:contains,debounce:debounce}}}}]),angular.module("nemo").provider("captcha",["nemoUtilsProvider",function(utilsProvider){return{template:'<div class="nemo-captcha"><img class="nemo-captcha-img" ng-src="{{captchaModel.getImageUri()}}"><div class="nemo-captcha-play" ng-click="playAudio($event)"></div><p class="nemo-captcha-refresh" ng-click="refreshCaptcha($event)">{{getRequestCaptchaCopy()}}</p><input class="nemo-captcha-input" type="text" ng-model="model.value" name="captchaInput" ng-focus="setActiveCaptchaField()" ng-blur="setTouchedCaptchaField()"><audio class="nemo-captcha-audio" ng-src="{{captchaModel.getAudioUri()}}">Your browser does not support audio</audio></div>',linkFn:function(scope,element,attrs,controllers){var ngModelCtrl=controllers[0],formHandlerCtrl=controllers[1],watcherUnbind=scope.$watch("model.value",function(newVal,oldVal){newVal!==oldVal&&(ngModelCtrl.$setDirty(),watcherUnbind())});scope.updateCaptchaId=function(value){formHandlerCtrl.setFieldValue("captchaId",value)},scope.playAudio=function($event){$event.stopPropagation(),$event.preventDefault(),element.find("audio")[0].play()},scope.setActiveCaptchaField=function(){formHandlerCtrl.setActiveField(scope.model.name)},scope.setTouchedCaptchaField=function(){ngModelCtrl.$setTouched()}},fieldInterfaceFns:function(scope,element,ngModelCtrl){return{setFocus:function(){element.find("input")[0].focus()},forceServerInvalid:function(errorMessage,errorIndex){scope.refreshCaptcha(),utilsProvider.forceServerInvalid(errorMessage,errorIndex,scope,ngModelCtrl)}}},controller:"CaptchaCtrl",$get:{}}}]),angular.module("nemo").provider("checkbox",[function(){return{template:'<div data-ng-click="toggle()" data-ng-keyup="toggleIfEnter($event)" data-ng-class="{checked: isChecked, focused: isFocused()}"><label class="tick" data-ng-show="isChecked"></label><input type="text" data-ng-focus="setFocus()" data-ng-blur="releaseFocus()" style="position: absolute; top: 0; left: 0; width: 0; height: 0; opacity: 0; cursor: pointer; font-size: 0; color: transparent; text-indent: 100%; padding: 0; border: none;" /></div>',defaultValue:!1,linkFn:function(scope,element,attrs,controllers){function setValue(value){scope.isChecked=value,formHandlerCtrl.setFieldValue(fieldName,value)}function setActiveState(){formHandlerCtrl.setActiveField(fieldName)}var ngModelCtrl=controllers[0],formHandlerCtrl=controllers[1],fieldValue=scope.model.value,fieldName=scope.model.name,hasGenuineFocus=!1;setValue(fieldValue===!0||"true"===fieldValue),scope.isFocused=function(){return hasGenuineFocus&&ngModelCtrl.isActive},scope.toggle=function(){setValue(!scope.isChecked),scope.setFocus(),formHandlerCtrl.setFieldDirtyTouched(fieldName)},scope.toggleIfEnter=function($event){var spaceKeyCode=32;$event.which===spaceKeyCode&&scope.toggle()},scope.setFocus=function(){hasGenuineFocus=!0,setActiveState()},scope.releaseFocus=function(){hasGenuineFocus=!1,formHandlerCtrl.setFieldDirtyTouched(fieldName)}},$get:angular.noop}}]),angular.module("nemo").provider("nemoInputDirectiveCreator",["$compileProvider","nemoUtilsProvider",function($compileProvider,utilsProvider){"use strict";function getTemplateWithAttributes(template){var parentTemplateElement,templateElement;return parentTemplateElement=document.createElement("div"),parentTemplateElement.innerHTML=template,templateElement=parentTemplateElement.firstChild,templateElement.setAttribute("ng-model","model.value"),templateElement.setAttribute("ng-focus","setActiveField()"),templateElement.setAttribute("name","{{model.name}}"),templateElement.setAttribute("id","nemo-{{model.name}}"),parentTemplateElement.innerHTML}function manageDefaultValue(scope,formHandlerCtrl,defaultValue){var fieldName=scope.model.name,unregisterFn=scope.$watch(function(){return formHandlerCtrl.getFieldValue(fieldName)},function(fieldValue){void 0===defaultValue||null!==fieldValue&&void 0!==fieldValue||formHandlerCtrl.setFieldValue(fieldName,defaultValue),unregisterFn()})}function manageCustomLinkFn(scope,element,attrs,controllers,$compile,$http,linkFn){(linkFn||angular.noop)(scope,element,attrs,controllers,$compile,$http)}function validateFormOnFieldChange(scope,ngModelCtrl,formHandlerCtrl){scope.$watch(function(){return ngModelCtrl.$viewValue},function(newVal,oldVal){scope.$evalAsync(function(){newVal!==oldVal&&(ngModelCtrl.forcedValidityValue=void 0,formHandlerCtrl.validateForm())})})}function getLinkFn(options,$compile,$http,nemoMessages){return function(scope,element,attrs,controllers){var ngModelCtrl=controllers[0],formHandlerCtrl=controllers[1],parentNgModelCtrl=controllers[2];validateFormOnFieldChange(scope,ngModelCtrl,formHandlerCtrl);var interfaceFuns=registerField(scope,element,ngModelCtrl,formHandlerCtrl,nemoMessages,options.fieldInterfaceFns);interfaceFuns.setupBusinessRules(),manageCustomLinkFn(scope,element,attrs,controllers,$compile,$http,options.linkFn),manageDefaultValue(scope,formHandlerCtrl,options.defaultValue),handleActivationState(scope,formHandlerCtrl,parentNgModelCtrl)}}function handleActivationState(scope,formHandlerCtrl,parentNgModelCtrl){var newActiveField=parentNgModelCtrl?[parentNgModelCtrl.$name,scope.model.name]:scope.model.name;scope.setActiveField=function(){formHandlerCtrl.setActiveField(newActiveField)}}function registerField(scope,element,ngModelCtrl,formHandlerCtrl,nemoMessages,customFieldInterfaceFns){var fieldInterfaceFns=getFieldInterfaceFns(scope,element,ngModelCtrl,formHandlerCtrl,nemoMessages),customerFieldInterface=customFieldInterfaceFns?customFieldInterfaceFns(scope,element,ngModelCtrl,formHandlerCtrl):{};return angular.extend(fieldInterfaceFns,customerFieldInterface),formHandlerCtrl.registerField(scope.model.name,fieldInterfaceFns),fieldInterfaceFns}function getFieldInterfaceFns(scope,element,ngModelCtrl,formHandlerCtrl,nemoMessages){return{activeFieldChange:function(activeField){activeFieldChange(scope,ngModelCtrl,activeField)},releaseActive:function(){ngModelCtrl.isActive=!1},isValid:function(){return ngModelCtrl.$valid},isTouched:function(){return ngModelCtrl.$touched},isActive:function(){return ngModelCtrl.isActive},setFocus:function(){element[0].focus(),formHandlerCtrl.setActiveField(scope.model.name)},getValue:function(){return ngModelCtrl.$viewValue},setValue:function(value){ngModelCtrl.$setViewValue(value),ngModelCtrl.$render()},getNgModelCtrl:function(){return ngModelCtrl},setFilthy:function(){ngModelCtrl.$setDirty(),ngModelCtrl.$setTouched()},setupBusinessRules:function(){scope.model.properties&&scope.model.properties.businessrules&&(utilsProvider.contains(scope.model.properties.businessrules,"noAutocomplete")&&element.attr("autocomplete","off"),utilsProvider.contains(scope.model.properties.businessrules,"noPaste")&&element.attr("onPaste","return false;"))},forceServerInvalid:function(errorMessage,errorIndex){utilsProvider.forceServerInvalid(errorMessage,errorIndex,scope,ngModelCtrl)}}}function activeFieldChange(scope,ngModelCtrl,activeField){ngModelCtrl.isActive=isFieldNowActive(scope.model.name,activeField)}function isFieldNowActive(fieldName,activeField){return"string"==typeof activeField?isFieldTheOnlyActiveOne(fieldName,activeField):"object"==typeof activeField?isFieldPartOfActiveList(fieldName,activeField):void 0}function isFieldTheOnlyActiveOne(fieldName,activeField){return activeField===fieldName}function isFieldPartOfActiveList(fieldName,activeFieldList){for(var isFieldNowActive=!1,i=0;i<activeFieldList.length;i++)if(activeFieldList[i]===fieldName){isFieldNowActive=!0;break}return isFieldNowActive}function getDirectiveDefinitionObject(options,$compile,$http,nemoMessages){return{require:["ngModel","^nemoFormHandler","?^^ngModel"],template:getTemplateWithAttributes(options.template),replace:!0,restrict:"A",link:getLinkFn(options,$compile,$http,nemoMessages),controller:options.controller}}function input(type,options){return $compileProvider.directive.apply(null,["input"+utilsProvider.capitalise(type),["$compile","$http","nemoMessages",function($compile,$http,nemoMessages){return getDirectiveDefinitionObject(options,$compile,$http,nemoMessages)}]]),this}return{input:input,$get:angular.noop}}]),angular.module("nemo").provider("serverValidation",function(){return{linkFn:function(scope,element,attrs,controllers,validFns){var ngModelCtrl=controllers[0];scope.$watch(function(){return ngModelCtrl.$viewValue},function(newVal,oldVal){newVal!==oldVal&&validFns.forceValid()})},$get:{}}}),angular.module("nemo").provider("nemoValidationDirectiveCreator",["$compileProvider","nemoUtilsProvider",function($compileProvider,utilsProvider){function getValidity(validateFn,validationRule,ngModelCtrl,formHandlerCtrl){var isValid;return isValid=void 0!==ngModelCtrl.forcedValidityValue?ngModelCtrl.forcedValidityValue:angular.isFunction(validateFn)?validateFn(ngModelCtrl.$viewValue,validationRule,formHandlerCtrl,ngModelCtrl):!ngModelCtrl.$error[validationRule.id]}function setupValidationRule(validationRule,ngModelCtrl,formHandlerCtrl,validateFn,messages){ngModelCtrl.$validators[validationRule.id]=function(){return getValidity(validateFn,validationRule,ngModelCtrl,formHandlerCtrl)},messages.set(validationRule.id,validationRule.message)}function registerValidationRule(validationRule,formHandlerCtrl,validationRuleInterfaceFns){formHandlerCtrl.registerValidationRule(validationRule.id,validationRuleInterfaceFns)}function getValidationRuleInterfaceFnsObject(scope,validateFn,validationRule,ngModelCtrl,formHandlerCtrl,options){var validationRuleInterfaceFns=getValidationRuleInterfaceFns(validateFn,validationRule,ngModelCtrl,formHandlerCtrl),customerValidationRuleInterface=options.validationRuleInterfaceFns?options.validationRuleInterfaceFns(scope,ngModelCtrl):{};return angular.extend(validationRuleInterfaceFns,customerValidationRuleInterface),validationRuleInterfaceFns}function getValidationRuleInterfaceFns(validateFn,validationRule,ngModelCtrl,formHandlerCtrl){return{forceInvalid:function(){validityChange(ngModelCtrl,validationRule.id,!1)},forceValid:function(){validityChange(ngModelCtrl,validationRule.id,!0)},refreshValidity:function(){refreshValidity(validateFn,validationRule,ngModelCtrl,formHandlerCtrl)}}}function validityChange(ngModelCtrl,validationRuleCode,newValidity){ngModelCtrl.$setValidity(validationRuleCode,newValidity),ngModelCtrl.forcedValidityValue=newValidity}function refreshValidity(validateFn,validationRule,ngModelCtrl,formHandlerCtrl){var isValid=getValidity(validateFn,validationRule,ngModelCtrl,formHandlerCtrl);ngModelCtrl.$setValidity(validationRule.id,isValid)}function getLinkFn(options,directiveName,validateFn,messages){return function(scope,element,attrs,controllers){var validationRules=scope.$eval(attrs[directiveName]),ngModelCtrl=controllers[0],formHandlerCtrl=controllers[1];validationRules.forEach(function(validationRule){var validFns=getValidationRuleInterfaceFnsObject(scope,validateFn,validationRule,ngModelCtrl,formHandlerCtrl,options);setupValidationRule(validationRule,ngModelCtrl,formHandlerCtrl,validateFn,messages),registerValidationRule(validationRule,formHandlerCtrl,validFns),options.linkFn&&options.linkFn(scope,element,attrs,controllers,validFns)})}}function getDirectiveDefinitionObject(options,directiveName,validateFn,messages){return{require:["ngModel","^nemoFormHandler"],restrict:"A",link:getLinkFn(options,directiveName,validateFn,messages)}}function validation(type,options){storeValidationOptionsInCache(type,options);var directiveName="validation"+utilsProvider.capitalise(type);return $compileProvider.directive.apply(null,[directiveName,["nemoMessages",function(messages){return getDirectiveDefinitionObject(options,directiveName,options.validateFn,messages)}]]),this}function storeValidationOptionsInCache(type,options){validationOptionsCache[type]=options}function getValidationOptionsFromCache(type){return validationOptionsCache[type]}var validationOptionsCache={};return{validation:validation,$get:function(){return{getValidationOptions:getValidationOptionsFromCache}}}}]),angular.module("nemo").service("Captcha",["$http","CaptchaModel",function($http,CaptchaModel){function getCaptcha(captchaAction){return $http.post(captchaAction.href).then(function(response){return CaptchaModel.create(response.data)})}return{getCaptcha:getCaptcha}}]),angular.module("nemo").controller("CaptchaCtrl",["$scope","Captcha","nemoUtils",function($scope,Captcha,utils){function getCaptchaInfo(){return $scope.model.value="",Captcha.getCaptcha($scope.model.action).then(function(captchaModel){$scope.captchaModel=captchaModel,$scope.updateCaptchaId($scope.captchaModel.getId())})}var debouncedGetCaptchaInfo=utils.debounce(getCaptchaInfo,1e3,!0);$scope.refreshCaptcha=function($event){return $event&&($event.stopPropagation(),$event.preventDefault()),debouncedGetCaptchaInfo()},$scope.getRequestCaptchaCopy=function(){return $scope.model.action.properties.actionsubmit.message},getCaptchaInfo()}]),angular.module("nemo").factory("CaptchaModel",["$sce",function($sce){function CaptchaModel(data){var self=this;this.data=data,this.data.links&&this.data.links.forEach(function(link){link.rel.forEach(function(relName){self.data[relName]=link})})}return CaptchaModel.prototype={getImageUri:function(){return this.data.captchaImage.href},getAudioUri:function(){return $sce.trustAsResourceUrl(this.data.captchaAudio.href)},getId:function(){return this.data.properties.captchaId}},{create:function(data){return new CaptchaModel(data)}}}]),angular.module("nemo").controller("nemoFormHandlerCtrl",["$scope","$timeout","$element",function($scope,$timeout,$element){function getRegisteredField(fieldName,skipRegisteredCheck){return getRegisteredComponent(fieldName,registeredFieldsFns,skipRegisteredCheck)}function getRegisteredValidationRule(validationRuleCode,skipRegisteredCheck){return getRegisteredComponent(validationRuleCode,registeredValidationRulesFns,skipRegisteredCheck)}function getRegisteredComponent(id,group,skipRegisteredCheck){var registeredComponent=group[id];if(registeredComponent)return registeredComponent;if(skipRegisteredCheck)return{};throw new Error(id+" is not registered in the form.")}function getFieldInterfaceFn(fieldName,interfaceFn,skipRegisteredCheck){return getRegisteredField(fieldName,skipRegisteredCheck)[interfaceFn]||angular.noop}function getValidationRuleInterfaceFn(fieldName,interfaceFn,skipRegisteredCheck){return getRegisteredValidationRule(fieldName,skipRegisteredCheck)[interfaceFn]||angular.noop}var registeredFieldsFns={},registeredValidationRulesFns={},fieldNameOrder=[];this.getFieldsValues=function(){var fieldsValues={};return angular.forEach(registeredFieldsFns,function(fieldInterfaceFns,fieldName){fieldsValues[fieldName]=fieldInterfaceFns.getValue()}),fieldsValues},this.setFieldValue=function(fieldName,value,skipRegisteredCheck){getFieldInterfaceFn(fieldName,"setValue",skipRegisteredCheck)(value)},this.getFieldValue=function(fieldName,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"getValue",skipRegisteredCheck)()},this.isFieldValid=function(fieldName,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"isValid",skipRegisteredCheck)()},this.isFieldTouched=function(fieldName,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"isTouched",skipRegisteredCheck)()},this.isFieldActive=function(fieldName,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"isActive",skipRegisteredCheck)()},this.getFieldNgModelCtrl=function(fieldName,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"getNgModelCtrl",skipRegisteredCheck)()},this.forceInvalid=function(validationRuleCode,skipRegisteredCheck){getValidationRuleInterfaceFn(validationRuleCode,"forceInvalid",skipRegisteredCheck)(validationRuleCode)},this.forceServerFieldInvalid=function(fieldName,errorMessage,index,skipRegisteredCheck){return getFieldInterfaceFn(fieldName,"forceServerInvalid",skipRegisteredCheck)(errorMessage,index)},this.setActiveField=function(activeFieldName,skipRegisteredCheck){angular.forEach(registeredFieldsFns,function(fieldInterfaceFns,fieldName){getFieldInterfaceFn(fieldName,"activeFieldChange",skipRegisteredCheck)(activeFieldName)})},this.releaseActiveField=function(fieldName,skipRegisteredCheck){getFieldInterfaceFn(fieldName,"releaseActive",skipRegisteredCheck)(fieldName)},this.setFieldDirtyTouched=function(fieldName,skipRegisteredCheck){getFieldInterfaceFn(fieldName,"setFilthy",skipRegisteredCheck)()},this.validateFormAndSetDirtyTouched=function(){angular.forEach(registeredValidationRulesFns,function(registeredValidationRuleFns){registeredValidationRuleFns.refreshValidity()}),angular.forEach(registeredFieldsFns,function(registeredFieldFns){registeredFieldFns.setFilthy()})},this.validateForm=function(skipRegisteredCheck){angular.forEach(registeredValidationRulesFns,function(registeredValidationRuleFns,validationRuleCode){getValidationRuleInterfaceFn(validationRuleCode,"refreshValidity",skipRegisteredCheck)()})},this.giveFieldFocus=function(fieldName,skipRegisteredCheck){getFieldInterfaceFn(fieldName,"setFocus",skipRegisteredCheck)()},this.giveFirstInvalidFieldFocus=function(){$timeout(function(){angular.element($element).find("input.ng-invalid,select.ng-invalid,.field.ng-invalid input, .field.ng-invalid select").first().focus()})},this.registerField=function(fieldName,registerFieldFns){registeredFieldsFns[fieldName]=registerFieldFns,fieldNameOrder.push(fieldName)},this.registerValidationRule=function(validationRuleCode,registerValidationRuleFns){registeredValidationRulesFns[validationRuleCode]=registerValidationRuleFns}}]).directive("nemoFormHandler",[function(){return{require:["nemoFormHandler","form"],controller:"nemoFormHandlerCtrl",link:function(scope,element,attrs,controllers){var formHandlerCtrl=controllers[0],formCtrl=controllers[1];formHandlerCtrl.isFormValid=function(){return formCtrl.$valid}}}}]),angular.module("nemo").directive("nemoInput",["$compile","nemoValidationDirectiveCreator",function($compile,validation){function toSnakeCase(str){return str.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function createElement(){return angular.element("<div></div>")}function addInputAttributeToElement(type,tElement){tElement[0].setAttribute("input-"+toSnakeCase(type),"")}function addValidationAttributeToElement(validationListItem,tElement,validationIndex){var attributeKey="validation-"+toSnakeCase(validationListItem.type),attributeValue="model.properties.validation["+validationIndex+"].rules";tElement[0].setAttribute(attributeKey,attributeValue)}function preCompileValidationRuleFn(validationListItem,tElement){var validationOptions=validation.getValidationOptions(validationListItem.type);validationOptions&&angular.isFunction(validationOptions.preCompileFn)&&validationOptions.preCompileFn(tElement)}function setAutoFocus(tElement,hasFocus){hasFocus&&tElement[0].setAttribute("autofocus","true")}function replaceTemplate(oldTempate,newTemplate){oldTempate.replaceWith(newTemplate)}function compileTemplate(template,scope){$compile(template)(scope)}function manageValidationRules(fieldProperties,tElement){var validationList=fieldProperties&&fieldProperties.validation;validationList&&validationList.length&&validationList.forEach(function(validationListItem,validationIndex){addValidationAttributeToElement(validationListItem,tElement,validationIndex),preCompileValidationRuleFn(validationListItem,tElement)})}function getLinkFn(){return function(scope,element){var fieldElement=createElement();addInputAttributeToElement(scope.model.type,fieldElement),setAutoFocus(fieldElement,scope.hasFocus),manageValidationRules(scope.model.properties,fieldElement),replaceTemplate(element,fieldElement),compileTemplate(fieldElement,scope)}}return{transclude:"element",restrict:"E",scope:{model:"=",hasFocus:"="},link:getLinkFn()}}]),angular.module("nemo").directive("nemoValidationMessages",["nemoMessages",function(messages){return{scope:{model:"="},template:'<div data-ng-if="(model.$dirty || model.$touched) && model.$invalid" data-t-validation-code="{{validationCode}}" class="field-error">{{getValidationMessage()}}</div>',link:function(scope){scope.getValidationMessage=function(){for(var validationId in scope.model.$error)if(scope.model.$error.hasOwnProperty(validationId))return scope.validationCode=validationId,messages.get(validationId)}}}}]),angular.module("templates-main",["home.html","index.html"]),angular.module("home.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("home.html",'<form nemo-form-handler class="container" ng-submit="fakeSubmit()" fake-form-handler\n      novalidate>\n    <div class="clearfix" ng-repeat="field in fields"\n         data-ng-class="getFieldStyleClasses(field.name)">\n        <div class="column column_label">\n            <span ng-if="field.name == \'captchaId\'">Captcha Id</span>\n            {{field.properties.label.message}}: {{field.value}}\n        </div>\n        <div class="column column_field">\n            <div class="input-wrapper">\n                <nemo-input model="field" has-focus="$index === 0"></nemo-input>\n                <div class="field-error-icon"\n                     data-ng-mouseenter="onErrorIconHover(field.name)"\n                     data-ng-mouseleave="onErrorIconBlur(field.name)"\n                     data-ng-show="isErrorIconVisible(field.name)">!\n                </div>\n                <data-nemo-validation-messages model="getFieldNgModelCtrl(field.name)"\n                                               class="field-error-wrapper" data-t-error\n                                               data-ng-show="isErrorMessageVisible(field.name)"\n                                               data-ng-class="{\'is-hovered-not-active\' : isHoveredAndNotActive(field.name)}"></data-nemo-validation-messages>\n            </div>\n\n        </div>\n    </div>\n    Is form valid? {{isFormValid()}}\n    <input type="submit" value="Submit!"/>\n</form>')}]),angular.module("index.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("index.html",'<html ng-app="app" class="ua-{{userAgent}}">\n    <head>\n        <title ng-bind="pageTitle"></title>\n        <meta name="viewport" content="width=device-width"/>\n        <link rel="icon" type="image/png" href="src/favicon.png">\n        <link rel="stylesheet" type="text/css" href="dist/css.css">\n        <script src="dist/js.min.js" type="text/javascript"></script>\n    </head>\n    <body>\n        <div ui-view></div>\n    </body>\n</html>\n\n\n\n')}]),app.controller("HomeCtrl",["$scope",function($scope){$scope.fields=[{type:"select",name:"title",options:[{text:"Mr",value:"MrValue"},{text:"Mrs",value:"MrsValue"},{text:"Ms",value:"MsValue"},{text:"Miss",value:"MissValue"},{text:"Dr",value:"DrValue"},{text:"Rev",value:"RevValue"},{text:"Prof",value:"ProfValue"},{text:"Other",value:"OtherValue"}],value:"RevValue",properties:{validation:[{type:"required",rules:[{value:!0,id:"title.blank",message:"Please enter your title"}]},{type:"inlist",rules:[{value:["MrValue","MrsValue","MsValue","MissValue","DrValue","RevValue","ProfValue","OtherValue"],id:"title.invalid",message:"Title was not a valid choice"}]}],help:{code:"title.help",message:"Please choose your title"},label:{code:"title.label",message:"Title"}}},{name:"firstName",type:"text",properties:{validation:[{type:"required",rules:[{value:!0,id:"firstName.blank",message:"Please enter your first name"}]},{type:"maxlength",rules:[{value:50,id:"firstName.size.toobig",message:"Your first name needs to be less than 50 characters long"}]},{type:"pattern",rules:[{value:"^[a-zA-Z \\'-]+$",id:"firstName.invalid.characters",message:"Sorry, your first name can only include letters and spaces"},{value:"^[^-\\']",id:"firstName.invalid.characters.startorend",message:" Sorry, your first name canonly start and end with a letter"},{value:"[^-\\']$",id:"firstName.invalid.characters.startorend",message:"Sorry, your first name can only start and end with a letter"}]}],help:{code:"firstName.help",message:"Please enter your first name"},label:{code:"firstName.label",message:"First name"},businessrules:["noAutocomplete","noPaste"]}},{name:"lastName",value:"y",type:"text",properties:{validation:[{type:"required",rules:[{value:!0,id:"lastName.blank",message:"Please enter your last name"}]},{type:"maxlength",rules:[{value:50,id:"lastName.size.toobig",message:"Your last name needs to be less than 50 characters long"}]},{type:"dependentpattern",rules:[{value:"firstName",patterns:{frances:"(frances)",bob:"^[a-d]+$"},id:"lastName.size.toobig",message:"Must match Frances"}]},{type:"pattern",rules:[{value:"^[a-zA-Z \\'-]+$",id:"lastName.invalid.characters",message:"Sorry, your last name can only include letters and spaces"},{value:"^[^-\\']",id:"lastName.invalid.characters.startorend",message:"Sorry, your last name can only start and end with a letter"},{value:"[^-\\']$",id:"lastName.invalid.characters.startorend",message:"Sorry, your last name can only start and end with a letter"}]}],help:{code:"lastName.help",message:"Please enter your last name"},label:{code:"lastName.label",message:"Last name"}}},{name:"requiredfield",value:null,type:"text",properties:{validation:[{type:"dependentrequired",rules:[{value:"username",when:["fooUsername"],id:"foo.dependent.required.username",message:"Foo is required"}]}],label:{code:"requiredfield.label",message:"Dependent required"}}},{name:"email",value:"your@email.com",type:"email",
properties:{validation:[{type:"required",rules:[{value:!0,id:"email.blank",message:"Please enter your email address"}]},{type:"email",rules:[{value:!0,id:"email.email.invalid",message:"Sorry, we do not recognise that email address, please check and try again"}]},{type:"notpattern",rules:[{value:"(\\@sky\\.co\\.uk)|(\\@sky\\.com)",id:"email.is.skycom",message:"You cannot choose a Sky email address"}]},{type:"emailserver",rules:[{value:null,id:"email.taken",message:"You've already created a Sky iD with this email address"}]}],help:{code:"email.help",message:"Tell us your email address"},label:{code:"email.label",message:"Email address"}}},{name:"confirmEmail",value:"your@email.com",type:"email",properties:{validation:[{type:"required",rules:[{value:!0,id:"confirmEmail.blank",message:"Please type your email address again"}]},{type:"mustmatchcaseinsensitive",rules:[{value:"email",id:"confirmEmail.must.match.email",message:"Sorry, your email addresses do not match. Please try again"}]}],help:{code:"confirmEmail.help",message:"Please type your email address again"},label:{code:"confirmEmail.label",message:"Confirm email address"}}},{name:"username",type:"text",properties:{validation:[{type:"required",rules:[{value:!0,id:"username.blank",message:"Please choose a username"}]},{type:"minlength",rules:[{value:3,id:"username.size.toosmall",message:"Your username can only have 3 - 32 characters"}]},{type:"maxlength",rules:[{value:32,id:"username.size.toobig",message:"Your username can only have 3 - 32 characters"}]},{type:"pattern",rules:[{value:"^[a-zA-Z]+",id:"username.must.start.with.letter",message:"Your username can only start with a letter"},{value:"^[a-zA-Z0-9\\-\\._]+[a-zA-Z0-9]$",id:"username.invalid.characters",message:"Your username can only contain letters and numbers"}]},{type:"notpattern",rules:[{value:"[\\-\\.\\_][\\-\\.\\_]",id:"username.invalid.characters",message:"Your username can only contain letters and numbers"}]},{type:"usernameserver",rules:[{value:null,id:"username.taken",message:"Sorry, someone already has that username"},{value:null,id:"username.contains.profanity",message:"This is not a valid username"}]}],help:{code:"username.help",message:"Your username must have 3-32 characters and must only contain letters and numbers"},label:{code:"username.label",message:"Username"}}},{name:"password",type:"password",properties:{validation:[{type:"required",rules:[{value:!0,id:"password.blank",message:"Please enter a valid password, it can't contain your username or the word 'password'"}]},{type:"minlength",rules:[{value:8,id:"password.size.toosmall",message:"Your password can only have 8 - 32 characters"}]},{type:"maxlength",rules:[{value:32,id:"password.size.toobig",message:"Your password can only have 8 - 32 characters"}]},{type:"mustnotcontain",rules:[{value:"username",id:"password.contains.username",message:"Please enter a valid password, it can't contain your username or the word 'password'"}]},{type:"pattern",rules:[{value:"[A-Za-z]",id:"password.must.contain.letter",message:"Your password needs to contain at least one letter"},{value:"^[\\!-\\%\\'-;=\\?-~]+$",id:"password.invalid.characters",message:"Your password contains invalid characters"}]},{type:"notpattern",rules:[{value:"(password)",id:"password.invalid",message:"Please enter a valid password, it can't contain your username or the word 'password'"}]}],help:{code:"password.help",message:"Must have 8-32 characters and cannot contain your username or the word 'password'"},label:{code:"password.label",message:"Password"}}},{name:"confirmPassword",type:"password",properties:{validation:[{type:"required",rules:[{value:!0,id:"confirmPassword.blank",message:"Please type your password again"}]},{type:"mustmatch",rules:[{value:"password",id:"confirmPassword.must.match.password",message:"The passwords you entered didn't match. Please try again"}]}],help:{code:"confirmPassword.help",message:"Please type your password again"},label:{code:"confirmPassword.label",message:"Confirm password"}}},{name:"captcha",type:"captchamario",properties:{help:{code:"captcha.help",message:"Please complete the level"},label:{code:"captcha.label",message:"Super mario captcha"}}},{name:"terms",type:"checkbox",value:!0,properties:{validation:[{type:"mustbeequal",rules:[{value:!0,id:"terms.notequal",message:"You need to agree to the terms and conditions"}]}],help:{},label:{code:"terms.label",message:"I have read and agree to the Sky terms & conditions and privacy & cookies notice"}}},{name:"marketingConsent",type:"checkbox",properties:{validation:[],help:{},label:{code:"marketingConsent.label",message:"Sky may contact you about products and services you may like unless you click to opt out"}}},{name:"serviceTerms",type:"checkbox",properties:{validation:[{type:"mustbeequal",rules:[{value:!0,id:"serviceTerms.notequal",message:"You need to agree to the terms and conditions"}]}],help:{},label:{code:"serviceTerms.label",message:"I have read and agree to the NOW TV terms & conditions"}}}]}]).directive("fakeFormHandler",[function(){return{require:"nemoFormHandler",link:function(scope,element,attrs,formHandlerCtrl){var iconVisibilityStates={};scope.fakeSubmit=function(){formHandlerCtrl.validateFormAndSetDirtyTouched(),scope.isFormValid()?(formHandlerCtrl.forceInvalid("captcha.invalid"),formHandlerCtrl.giveFirstInvalidFieldFocus()):formHandlerCtrl.giveFirstInvalidFieldFocus()},scope.isFormValid=formHandlerCtrl.isFormValid,scope.getFieldStyleClasses=function(fieldName){return{"ng-touched":formHandlerCtrl.isFieldTouched(fieldName),"ng-invalid":!formHandlerCtrl.isFieldValid(fieldName)}},scope.onErrorIconHover=function(fieldName){iconVisibilityStates[fieldName]=!0},scope.onErrorIconBlur=function(fieldName){iconVisibilityStates[fieldName]=!1},scope.isErrorIconVisible=function(fieldName){var isInvalid=!formHandlerCtrl.isFieldValid(fieldName),isTouched=formHandlerCtrl.isFieldTouched(fieldName);return isInvalid&&isTouched},scope.isErrorMessageVisible=function(fieldName){var isInvalid=!formHandlerCtrl.isFieldValid(fieldName),isActive=formHandlerCtrl.isFieldActive(fieldName),isTouched=formHandlerCtrl.isFieldTouched(fieldName),isErrorIconHovered=iconVisibilityStates[fieldName];return isInvalid&&(isErrorIconHovered||isActive&&isTouched)},scope.isHoveredAndNotActive=function(fieldName){return iconVisibilityStates[fieldName]&&!formHandlerCtrl.isFieldActive(fieldName)},scope.getFieldNgModelCtrl=formHandlerCtrl.getFieldNgModelCtrl}}}]);